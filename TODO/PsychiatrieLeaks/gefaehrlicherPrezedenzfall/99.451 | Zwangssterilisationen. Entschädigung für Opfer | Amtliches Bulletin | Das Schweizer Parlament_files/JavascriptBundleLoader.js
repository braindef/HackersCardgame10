!function(e,t){function n(e){var t=e.length,n=ce.type(e);return ce.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e){var t=ke[e]={};return ce.each(e.match(pe)||[],function(e,n){t[n]=!0}),t}function i(e,n,r,i){if(ce.acceptData(e)){var o,a,s=ce.expando,u=e.nodeType,l=u?ce.cache:e,c=u?e[s]:e[s]&&s;if(c&&l[c]&&(i||l[c].data)||r!==t||"string"!=typeof n)return c||(c=u?e[s]=te.pop()||ce.guid++:s),l[c]||(l[c]=u?{}:{toJSON:ce.noop}),("object"==typeof n||"function"==typeof n)&&(i?l[c]=ce.extend(l[c],n):l[c].data=ce.extend(l[c].data,n)),a=l[c],i||(a.data||(a.data={}),a=a.data),r!==t&&(a[ce.camelCase(n)]=r),"string"==typeof n?(o=a[n],null==o&&(o=a[ce.camelCase(n)])):o=a,o}}function o(e,t,n){if(ce.acceptData(e)){var r,i,o=e.nodeType,a=o?ce.cache:e,u=o?e[ce.expando]:ce.expando;if(a[u]){if(t&&(r=n?a[u]:a[u].data)){ce.isArray(t)?t=t.concat(ce.map(t,ce.camelCase)):t in r?t=[t]:(t=ce.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;for(;i--;)delete r[t[i]];if(n?!s(r):!ce.isEmptyObject(r))return}(n||(delete a[u].data,s(a[u])))&&(o?ce.cleanData([e],!0):ce.support.deleteExpando||a!=a.window?delete a[u]:a[u]=null)}}}function a(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(Se,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:Ee.test(r)?ce.parseJSON(r):r}catch(o){}ce.data(e,n,r)}else r=t}return r}function s(e){var t;for(t in e)if(("data"!==t||!ce.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function u(){return!0}function l(){return!1}function c(){try{return G.activeElement}catch(e){}}function f(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function p(e,t,n){if(ce.isFunction(t))return ce.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ce.grep(e,function(e){return e===t!==n});if("string"==typeof t){if($e.test(t))return ce.filter(t,e,n);t=ce.filter(t,e)}return ce.grep(e,function(e){return ce.inArray(e,t)>=0!==n})}function d(e){var t=Ue.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function h(e,t){return ce.nodeName(e,"table")&&ce.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function g(e){return e.type=(null!==ce.find.attr(e,"type"))+"/"+e.type,e}function m(e){var t=it.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function y(e,t){for(var n,r=0;null!=(n=e[r]);r++)ce._data(n,"globalEval",!t||ce._data(t[r],"globalEval"))}function v(e,t){if(1===t.nodeType&&ce.hasData(e)){var n,r,i,o=ce._data(e),a=ce._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)ce.event.add(t,n,s[n][r])}a.data&&(a.data=ce.extend({},a.data))}}function b(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ce.support.noCloneEvent&&t[ce.expando]){i=ce._data(t);for(r in i.events)ce.removeEvent(t,r,i.handle);t.removeAttribute(ce.expando)}"script"===n&&t.text!==e.text?(g(t).text=e.text,m(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ce.support.html5Clone&&e.innerHTML&&!ce.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&tt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function x(e,n){var r,i,o=0,a=typeof e.getElementsByTagName!==Y?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==Y?e.querySelectorAll(n||"*"):t;if(!a)for(a=[],r=e.childNodes||e;null!=(i=r[o]);o++)!n||ce.nodeName(i,n)?a.push(i):ce.merge(a,x(i,n));return n===t||n&&ce.nodeName(e,n)?ce.merge([e],a):a}function w(e){tt.test(e.type)&&(e.defaultChecked=e.checked)}function T(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Nt.length;i--;)if(t=Nt[i]+n,t in e)return t;return r}function C(e,t){return e=t||e,"none"===ce.css(e,"display")||!ce.contains(e.ownerDocument,e)}function N(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=ce._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&C(r)&&(o[a]=ce._data(r,"olddisplay",A(r.nodeName)))):o[a]||(i=C(r),(n&&"none"!==n||!i)&&ce._data(r,"olddisplay",i?n:ce.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function k(e,t,n){var r=yt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function E(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=ce.css(e,n+Ct[o],!0,i)),r?("content"===n&&(a-=ce.css(e,"padding"+Ct[o],!0,i)),"margin"!==n&&(a-=ce.css(e,"border"+Ct[o]+"Width",!0,i))):(a+=ce.css(e,"padding"+Ct[o],!0,i),"padding"!==n&&(a+=ce.css(e,"border"+Ct[o]+"Width",!0,i)));return a}function S(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=ct(e),a=ce.support.boxSizing&&"border-box"===ce.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=ft(e,t,o),(0>i||null==i)&&(i=e.style[t]),vt.test(i))return i;r=a&&(ce.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+E(e,t,n||(a?"border":"content"),r,o)+"px"}function A(e){var t=G,n=xt[e];return n||(n=j(e,t),"none"!==n&&n||(lt=(lt||ce("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(lt[0].contentWindow||lt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=j(e,t),lt.detach()),xt[e]=n),n}function j(e,t){var n=ce(t.createElement(e)).appendTo(t.body),r=ce.css(n[0],"display");return n.remove(),r}function D(e,t,n,r){var i;if(ce.isArray(t))ce.each(t,function(t,i){n||Et.test(e)?r(e,i):D(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==ce.type(t))r(e,t);else for(i in t)D(e+"["+i+"]",t[i],n,r)}function L(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(pe)||[];if(ce.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function H(e,t,n,r){function i(s){var u;return o[s]=!0,ce.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||a||o[l]?a?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},a=e===It;return i(t.dataTypes[0])||!o["*"]&&i("*")}function q(e,n){var r,i,o=ce.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&ce.extend(!0,e,r),e}function _(e,n,r){for(var i,o,a,s,u=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):void 0}function M(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=l[u+" "+o]||l["* "+o],!a)for(i in l)if(s=i.split(" "),s[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[i]:l[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function O(){try{return new e.XMLHttpRequest}catch(t){}}function F(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function B(){return setTimeout(function(){Kt=t}),Kt=ce.now()}function P(e,t,n){for(var r,i=(on[t]||[]).concat(on["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function R(e,t,n){var r,i,o=0,a=rn.length,s=ce.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Kt||B(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:ce.extend({},t),opts:ce.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Kt||B(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ce.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(W(c,l.opts.specialEasing);a>o;o++)if(r=rn[o].call(l,e,c,l.opts))return r;return ce.map(c,P,l),ce.isFunction(l.opts.start)&&l.opts.start.call(e,l),ce.fx.timer(ce.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function W(e,t){var n,r,i,o,a;for(n in e)if(r=ce.camelCase(n),i=t[r],o=e[n],ce.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=ce.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function $(e,t,n){var r,i,o,a,s,u,l=this,c={},f=e.style,p=e.nodeType&&C(e),d=ce._data(e,"fxshow");n.queue||(s=ce._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,l.always(function(){l.always(function(){s.unqueued--,ce.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],"inline"===ce.css(e,"display")&&"none"===ce.css(e,"float")&&(ce.support.inlineBlockNeedsLayout&&"inline"!==A(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",ce.support.shrinkWrapBlocks||l.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],en.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(p?"hide":"show"))continue;c[r]=d&&d[r]||ce.style(e,r)}if(!ce.isEmptyObject(c)){d?"hidden"in d&&(p=d.hidden):d=ce._data(e,"fxshow",{}),o&&(d.hidden=!p),p?ce(e).show():l.done(function(){ce(e).hide()}),l.done(function(){var t;ce._removeData(e,"fxshow");for(t in c)ce.style(e,t,c[t])});for(r in c)a=P(p?d[r]:0,r,l),r in d||(d[r]=a.start,p&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function I(e,t,n,r,i){return new I.prototype.init(e,t,n,r,i)}function z(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Ct[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function X(e){return ce.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var U,V,Y=typeof t,J=e.location,G=e.document,Q=G.documentElement,K=e.jQuery,Z=e.$,ee={},te=[],ne="1.10.2",re=te.concat,ie=te.push,oe=te.slice,ae=te.indexOf,se=ee.toString,ue=ee.hasOwnProperty,le=ne.trim,ce=function(e,t){return new ce.fn.init(e,t,V)},fe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pe=/\S+/g,de=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,he=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ge=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,me=/^[\],:{}\s]*$/,ye=/(?:^|:|,)(?:\s*\[)+/g,ve=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,be=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,xe=/^-ms-/,we=/-([\da-z])/gi,Te=function(e,t){return t.toUpperCase()},Ce=function(e){(G.addEventListener||"load"===e.type||"complete"===G.readyState)&&(Ne(),ce.ready())},Ne=function(){G.addEventListener?(G.removeEventListener("DOMContentLoaded",Ce,!1),e.removeEventListener("load",Ce,!1)):(G.detachEvent("onreadystatechange",Ce),e.detachEvent("onload",Ce))};ce.fn=ce.prototype={jquery:ne,constructor:ce,init:function(e,n,r){var i,o;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:he.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof ce?n[0]:n,ce.merge(this,ce.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:G,!0)),ge.test(i[1])&&ce.isPlainObject(n))for(i in n)ce.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(o=G.getElementById(i[2]),o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=G,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ce.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),ce.makeArray(e,this))},selector:"",length:0,toArray:function(){return oe.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=ce.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ce.each(this,e,t)},ready:function(e){return ce.ready.promise().done(e),this},slice:function(){return this.pushStack(oe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(ce.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:ie,sort:[].sort,splice:[].splice},ce.fn.init.prototype=ce.fn,ce.extend=ce.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||ce.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(ce.isPlainObject(r)||(n=ce.isArray(r)))?(n?(n=!1,a=e&&ce.isArray(e)?e:[]):a=e&&ce.isPlainObject(e)?e:{},s[i]=ce.extend(c,a,r)):r!==t&&(s[i]=r));return s},ce.extend({expando:"jQuery"+(ne+Math.random()).replace(/\D/g,""),noConflict:function(t){return e.$===ce&&(e.$=Z),t&&e.jQuery===ce&&(e.jQuery=K),ce},isReady:!1,readyWait:1,holdReady:function(e){e?ce.readyWait++:ce.ready(!0)},ready:function(e){if(e===!0?!--ce.readyWait:!ce.isReady){if(!G.body)return setTimeout(ce.ready);ce.isReady=!0,e!==!0&&--ce.readyWait>0||(U.resolveWith(G,[ce]),ce.fn.trigger&&ce(G).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===ce.type(e)},isArray:Array.isArray||function(e){return"array"===ce.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?ee[se.call(e)]||"object":typeof e},isPlainObject:function(e){var n;if(!e||"object"!==ce.type(e)||e.nodeType||ce.isWindow(e))return!1;try{if(e.constructor&&!ue.call(e,"constructor")&&!ue.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}if(ce.support.ownLast)for(n in e)return ue.call(e,n);for(n in e);return n===t||ue.call(e,n)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||G;var r=ge.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=ce.buildFragment([e],t,i),i&&ce(i).remove(),ce.merge([],r.childNodes))},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):null===t?t:"string"==typeof t&&(t=ce.trim(t),t&&me.test(t.replace(ve,"@").replace(be,"]").replace(ye,"")))?new Function("return "+t)():void ce.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||ce.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&ce.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(xe,"ms-").replace(we,Te)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,a=e.length,s=n(e);if(r){if(s)for(;a>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(s)for(;a>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:le&&!le.call("\ufeffÂ ")?function(e){return null==e?"":le.call(e)}:function(e){return null==e?"":(e+"").replace(de,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?ce.merge(r,"string"==typeof e?[e]:e):ie.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(ae)return ae.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else for(;n[o]!==t;)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,a=e.length,s=n(e),u=[];if(s)for(;a>o;o++)i=t(e[o],o,r),null!=i&&(u[u.length]=i);else for(o in e)i=t(e[o],o,r),null!=i&&(u[u.length]=i);return re.apply([],u)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),ce.isFunction(e)?(r=oe.call(arguments,2),i=function(){return e.apply(n||this,r.concat(oe.call(arguments)))},i.guid=e.guid=e.guid||ce.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===ce.type(r)){o=!0;for(u in r)ce.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,ce.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(ce(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),ce.ready.promise=function(t){if(!U)if(U=ce.Deferred(),"complete"===G.readyState)setTimeout(ce.ready);else if(G.addEventListener)G.addEventListener("DOMContentLoaded",Ce,!1),e.addEventListener("load",Ce,!1);else{G.attachEvent("onreadystatechange",Ce),e.attachEvent("onload",Ce);var n=!1;try{n=null==e.frameElement&&G.documentElement}catch(r){}n&&n.doScroll&&!function i(){if(!ce.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}Ne(),ce.ready()}}()}return U.promise(t)},ce.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()}),V=ce(G),function(e,t){function n(e,t,n,r){var i,o,a,s,u,l,c,f,h,g;if((t?t.ownerDocument||t:R)!==H&&L(t),t=t||H,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(_&&!r){if(i=be.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&B(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return ee.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&C.getElementsByClassName&&t.getElementsByClassName)return ee.apply(n,t.getElementsByClassName(a)),n}if(C.qsa&&(!M||!M.test(e))){if(f=c=P,h=t,g=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=p(e),(c=t.getAttribute("id"))?f=c.replace(Te,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",u=l.length;u--;)l[u]=f+d(l[u]);h=de.test(e)&&t.parentNode||t,g=l.join(",")}if(g)try{return ee.apply(n,h.querySelectorAll(g)),n}catch(m){}finally{c||t.removeAttribute("id")}}}return w(e.replace(le,"$1"),t,n,r)}function r(){function e(n,r){return t.push(n+=" ")>k.cacheLength&&delete e[t.shift()],e[n]=r}var t=[];return e}function i(e){return e[P]=!0,e}function o(e){var t=H.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),r=e.length;r--;)k.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||J)-(~e.sourceIndex||J);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function u(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function f(){}function p(e,t){var r,i,o,a,s,u,l,c=z[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=k.preFilter;s;){(!r||(i=fe.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=pe.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(le," ")}),s=s.slice(r.length));for(a in k.filter)!(i=ye[a].exec(s))||l[a]&&!(i=l[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return t?s.length:s?n.error(e):z(e,u).slice(0)}function d(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function h(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=$++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,u,l,c=W+" "+o;if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(l=t[P]||(t[P]={}),(u=l[r])&&u[0]===c){if((s=u[1])===!0||s===N)return s===!0}else if(u=l[r]=[c],u[1]=e(t,n,a)||N,u[1]===!0)return!0}}function g(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function y(e,t,n,r,o,a){return r&&!r[P]&&(r=y(r)),o&&!o[P]&&(o=y(o,a)),i(function(i,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=i||x(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?g:m(g,p,e,s,u),v=n?o||(i?e:h||r)?[]:a:y;if(n&&n(y,v,s,u),r)for(l=m(v,d),r(l,[],s,u),c=l.length;c--;)(f=l[c])&&(v[d[c]]=!(y[d[c]]=f));if(i){if(o||e){if(o){for(l=[],c=v.length;c--;)(f=v[c])&&l.push(y[c]=f);o(null,v=[],l,u)}for(c=v.length;c--;)(f=v[c])&&(l=o?ne.call(i,f):p[c])>-1&&(i[l]=!(a[l]=f))}}else v=m(v===a?v.splice(h,v.length):v),o?o(null,a,v,u):ee.apply(a,v)})}function v(e){for(var t,n,r,i=e.length,o=k.relative[e[0].type],a=o||k.relative[" "],s=o?1:0,u=h(function(e){return e===t},a,!0),l=h(function(e){return ne.call(t,e)>-1},a,!0),c=[function(e,n,r){return!o&&(r||n!==j)||((t=n).nodeType?u(e,n,r):l(e,n,r))}];i>s;s++)if(n=k.relative[e[s].type])c=[h(g(c),n)];else{if(n=k.filter[e[s].type].apply(null,e[s].matches),n[P]){for(r=++s;i>r&&!k.relative[e[r].type];r++);return y(s>1&&g(c),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(le,"$1"),n,r>s&&v(e.slice(s,r)),i>r&&v(e=e.slice(r)),i>r&&d(e))}c.push(n)}return g(c)}function b(e,t){var r=0,o=t.length>0,a=e.length>0,s=function(i,s,u,l,c){var f,p,d,h=[],g=0,y="0",v=i&&[],b=null!=c,x=j,w=i||a&&k.find.TAG("*",c&&s.parentNode||s),T=W+=null==x?1:Math.random()||.1;for(b&&(j=s!==H&&s,N=r);null!=(f=w[y]);y++){if(a&&f){for(p=0;d=e[p++];)if(d(f,s,u)){l.push(f);break}b&&(W=T,N=++r)}o&&((f=!d&&f)&&g--,i&&v.push(f))}if(g+=y,o&&y!==g){for(p=0;d=t[p++];)d(v,h,s,u);if(i){if(g>0)for(;y--;)v[y]||h[y]||(h[y]=K.call(l));h=m(h)}ee.apply(l,h),b&&!i&&h.length>0&&g+t.length>1&&n.uniqueSort(l)}return b&&(W=T,j=x),v};return o?i(s):s}function x(e,t,r){for(var i=0,o=t.length;o>i;i++)n(e,t[i],r);return r}function w(e,t,n,r){var i,o,a,s,u,l=p(e);if(!r&&1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&C.getById&&9===t.nodeType&&_&&k.relative[o[1].type]){if(t=(k.find.ID(a.matches[0].replace(Ce,Ne),t)||[])[0],!t)return n;e=e.slice(o.shift().value.length)}for(i=ye.needsContext.test(e)?0:o.length;i--&&(a=o[i],!k.relative[s=a.type]);)if((u=k.find[s])&&(r=u(a.matches[0].replace(Ce,Ne),de.test(o[0].type)&&t.parentNode||t))){if(o.splice(i,1),e=r.length&&d(o),!e)return ee.apply(n,r),n;break}}return A(e,l)(r,t,!_,n,de.test(e)),n}var T,C,N,k,E,S,A,j,D,L,H,q,_,M,O,F,B,P="sizzle"+-new Date,R=e.document,W=0,$=0,I=r(),z=r(),X=r(),U=!1,V=function(e,t){return e===t?(U=!0,0):0},Y=typeof t,J=1<<31,G={}.hasOwnProperty,Q=[],K=Q.pop,Z=Q.push,ee=Q.push,te=Q.slice,ne=Q.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},re="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=oe.replace("w","w#"),se="\\["+ie+"*("+oe+")"+ie+"*(?:([*^$|!~]?=)"+ie+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ae+")|)|)"+ie+"*\\]",ue=":("+oe+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+se.replace(3,8)+")*)|.*)\\)|)",le=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),fe=new RegExp("^"+ie+"*,"+ie+"*"),pe=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),de=new RegExp(ie+"*[+~]"),he=new RegExp("="+ie+"*([^\\]'\"]*)"+ie+"*\\]","g"),ge=new RegExp(ue),me=new RegExp("^"+ae+"$"),ye={ID:new RegExp("^#("+oe+")"),CLASS:new RegExp("^\\.("+oe+")"),TAG:new RegExp("^("+oe.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+ue),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+re+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},ve=/^[^{]+\{\s*\[native \w/,be=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xe=/^(?:input|select|textarea|button)$/i,we=/^h\d$/i,Te=/'|\\/g,Ce=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),Ne=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{ee.apply(Q=te.call(R.childNodes),R.childNodes),Q[R.childNodes.length].nodeType}catch(ke){ee={apply:Q.length?function(e,t){Z.apply(e,te.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}S=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},C=n.support={},L=n.setDocument=function(e){var t=e?e.ownerDocument||e:R,n=t.defaultView;return t!==H&&9===t.nodeType&&t.documentElement?(H=t,q=t.documentElement,_=!S(t),n&&n.attachEvent&&n!==n.top&&n.attachEvent("onbeforeunload",function(){L()}),C.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),C.getElementsByTagName=o(function(e){return e.appendChild(t.createComment("")),!e.getElementsByTagName("*").length}),C.getElementsByClassName=o(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),C.getById=o(function(e){return q.appendChild(e).id=P,!t.getElementsByName||!t.getElementsByName(P).length}),C.getById?(k.find.ID=function(e,t){if(typeof t.getElementById!==Y&&_){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},k.filter.ID=function(e){var t=e.replace(Ce,Ne);return function(e){return e.getAttribute("id")===t}}):(delete k.find.ID,k.filter.ID=function(e){var t=e.replace(Ce,Ne);return function(e){var n=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return n&&n.value===t}}),k.find.TAG=C.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Y?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},k.find.CLASS=C.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Y&&_?t.getElementsByClassName(e):void 0},O=[],M=[],(C.qsa=ve.test(t.querySelectorAll))&&(o(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||M.push("\\["+ie+"*(?:value|"+re+")"),e.querySelectorAll(":checked").length||M.push(":checked")}),o(function(e){var n=t.createElement("input");n.setAttribute("type","hidden"),e.appendChild(n).setAttribute("t",""),e.querySelectorAll("[t^='']").length&&M.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(C.matchesSelector=ve.test(F=q.webkitMatchesSelector||q.mozMatchesSelector||q.oMatchesSelector||q.msMatchesSelector))&&o(function(e){C.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),O.push("!=",ue)}),M=M.length&&new RegExp(M.join("|")),O=O.length&&new RegExp(O.join("|")),B=ve.test(q.contains)||q.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=q.compareDocumentPosition?function(e,n){if(e===n)return U=!0,0;var r=n.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(n);return r?1&r||!C.sortDetached&&n.compareDocumentPosition(e)===r?e===t||B(R,e)?-1:n===t||B(R,n)?1:D?ne.call(D,e)-ne.call(D,n):0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,n){var r,i=0,o=e.parentNode,a=n.parentNode,u=[e],l=[n];if(e===n)return U=!0,0;if(!o||!a)return e===t?-1:n===t?1:o?-1:a?1:D?ne.call(D,e)-ne.call(D,n):0;if(o===a)return s(e,n);for(r=e;r=r.parentNode;)u.unshift(r);for(r=n;r=r.parentNode;)l.unshift(r);for(;u[i]===l[i];)i++;return i?s(u[i],l[i]):u[i]===R?-1:l[i]===R?1:0},t):H},n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==H&&L(e),t=t.replace(he,"='$1']"),C.matchesSelector&&_&&(!O||!O.test(t))&&(!M||!M.test(t)))try{var r=F.call(e,t);if(r||C.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return n(t,H,null,[e]).length>0},n.contains=function(e,t){return(e.ownerDocument||e)!==H&&L(e),B(e,t)},n.attr=function(e,n){(e.ownerDocument||e)!==H&&L(e);var r=k.attrHandle[n.toLowerCase()],i=r&&G.call(k.attrHandle,n.toLowerCase())?r(e,n,!_):t;return i===t?C.attributes||!_?e.getAttribute(n):(i=e.getAttributeNode(n))&&i.specified?i.value:null:i},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},n.uniqueSort=function(e){var t,n=[],r=0,i=0;if(U=!C.detectDuplicates,D=!C.sortStable&&e.slice(0),e.sort(V),U){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e},E=n.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=E(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=E(t);return n},k=n.selectors={cacheLength:50,createPseudo:i,match:ye,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ce,Ne),e[3]=(e[4]||e[5]||"").replace(Ce,Ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&n.error(e[0]),e},PSEUDO:function(e){var n,r=!e[5]&&e[2];return ye.CHILD.test(e[0])?null:(e[3]&&e[4]!==t?e[2]=e[4]:r&&ge.test(r)&&(n=p(r,!0))&&(n=r.indexOf(")",r.length-n)-r.length)&&(e[0]=e[0].slice(0,n),e[2]=r.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Ce,Ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=I[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&I(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(e,t,r){return function(i){var o=n.attr(i,e);return null==o?"!="===t:t?(o+="","="===t?o===r:"!="===t?o!==r:"^="===t?r&&0===o.indexOf(r):"*="===t?r&&o.indexOf(r)>-1:"$="===t?r&&o.slice(-r.length)===r:"~="===t?(" "+o+" ").indexOf(r)>-1:"|="===t?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;
return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===y:1===f.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){for(c=m[P]||(m[P]={}),l=c[e]||[],d=l[0]===W&&l[1],p=l[0]===W&&l[2],f=d&&m.childNodes[d];f=++d&&f&&f[g]||(p=d=0)||h.pop();)if(1===f.nodeType&&++p&&f===t){c[e]=[W,d,p];break}}else if(v&&(l=(t[P]||(t[P]={}))[e])&&l[0]===W)p=l[1];else for(;(f=++d&&f&&f[g]||(p=d=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==y:1!==f.nodeType)||!++p||(v&&((f[P]||(f[P]={}))[e]=[W,p]),f!==t)););return p-=i,p===r||p%r===0&&p/r>=0}}},PSEUDO:function(e,t){var r,o=k.pseudos[e]||k.setFilters[e.toLowerCase()]||n.error("unsupported pseudo: "+e);return o[P]?o(t):o.length>1?(r=[e,e,"",t],k.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,n){for(var r,i=o(e,t),a=i.length;a--;)r=ne.call(e,i[a]),e[r]=!(n[r]=i[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=A(e.replace(le,"$1"));return r[P]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(e){return function(t){return n(e,t).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:i(function(e){return me.test(e||"")||n.error("unsupported lang: "+e),e=e.replace(Ce,Ne).toLowerCase(),function(t){var n;do if(n=_?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===q},focus:function(e){return e===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return we.test(e.nodeName)},input:function(e){return xe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:c(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},k.pseudos.nth=k.pseudos.eq;for(T in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[T]=u(T);for(T in{submit:!0,reset:!0})k.pseudos[T]=l(T);f.prototype=k.filters=k.pseudos,k.setFilters=new f,A=n.compile=function(e,t){var n,r=[],i=[],o=X[e+" "];if(!o){for(t||(t=p(e)),n=t.length;n--;)o=v(t[n]),o[P]?r.push(o):i.push(o);o=X(e,b(i,r))}return o},C.sortStable=P.split("").sort(V).join("")===P,C.detectDuplicates=U,L(),C.sortDetached=o(function(e){return 1&e.compareDocumentPosition(H.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),C.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||a(re,function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&r.specified?r.value:e[t]===!0?t.toLowerCase():null}),ce.find=n,ce.expr=n.selectors,ce.expr[":"]=ce.expr.pseudos,ce.unique=n.uniqueSort,ce.text=n.getText,ce.isXMLDoc=n.isXML,ce.contains=n.contains}(e);var ke={};ce.Callbacks=function(e){e="string"==typeof e?ke[e]||r(e):ce.extend({},e);var n,i,o,a,s,u,l=[],c=!e.once&&[],f=function(t){for(i=e.memory&&t,o=!0,s=u||0,u=0,a=l.length,n=!0;l&&a>s;s++)if(l[s].apply(t[0],t[1])===!1&&e.stopOnFalse){i=!1;break}n=!1,l&&(c?c.length&&f(c.shift()):i?l=[]:p.disable())},p={add:function(){if(l){var t=l.length;!function r(t){ce.each(t,function(t,n){var i=ce.type(n);"function"===i?e.unique&&p.has(n)||l.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),n?a=l.length:i&&(u=t,f(i))}return this},remove:function(){return l&&ce.each(arguments,function(e,t){for(var r;(r=ce.inArray(t,l,r))>-1;)l.splice(r,1),n&&(a>=r&&a--,s>=r&&s--)}),this},has:function(e){return e?ce.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=c=i=t,this},disabled:function(){return!l},lock:function(){return c=t,i||p.disable(),this},locked:function(){return!c},fireWith:function(e,t){return!l||o&&!c||(t=t||[],t=[e,t.slice?t.slice():t],n?c.push(t):f(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!o}};return p},ce.extend({Deferred:function(e){var t=[["resolve","done",ce.Callbacks("once memory"),"resolved"],["reject","fail",ce.Callbacks("once memory"),"rejected"],["notify","progress",ce.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ce.Deferred(function(n){ce.each(t,function(t,o){var a=o[0],s=ce.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&ce.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ce.extend(e,r):r}},i={};return r.pipe=r.then,ce.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=oe.call(arguments),a=o.length,s=1!==a||e&&ce.isFunction(e.promise)?a:0,u=1===s?e:ce.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?oe.call(arguments):i,r===t?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&ce.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,t)):--s;return s||u.resolveWith(r,o),u.promise()}}),ce.support=function(t){var n,r,i,o,a,s,u,l,c,f=G.createElement("div");if(f.setAttribute("className","t"),f.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=f.getElementsByTagName("*")||[],r=f.getElementsByTagName("a")[0],!r||!r.style||!n.length)return t;o=G.createElement("select"),s=o.appendChild(G.createElement("option")),i=f.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t.getSetAttribute="t"!==f.className,t.leadingWhitespace=3===f.firstChild.nodeType,t.tbody=!f.getElementsByTagName("tbody").length,t.htmlSerialize=!!f.getElementsByTagName("link").length,t.style=/top/.test(r.getAttribute("style")),t.hrefNormalized="/a"===r.getAttribute("href"),t.opacity=/^0.5/.test(r.style.opacity),t.cssFloat=!!r.style.cssFloat,t.checkOn=!!i.value,t.optSelected=s.selected,t.enctype=!!G.createElement("form").enctype,t.html5Clone="<:nav></:nav>"!==G.createElement("nav").cloneNode(!0).outerHTML,t.inlineBlockNeedsLayout=!1,t.shrinkWrapBlocks=!1,t.pixelPosition=!1,t.deleteExpando=!0,t.noCloneEvent=!0,t.reliableMarginRight=!0,t.boxSizingReliable=!0,i.checked=!0,t.noCloneChecked=i.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!s.disabled;try{delete f.test}catch(p){t.deleteExpando=!1}i=G.createElement("input"),i.setAttribute("value",""),t.input=""===i.getAttribute("value"),i.value="t",i.setAttribute("type","radio"),t.radioValue="t"===i.value,i.setAttribute("checked","t"),i.setAttribute("name","t"),a=G.createDocumentFragment(),a.appendChild(i),t.appendChecked=i.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,f.attachEvent&&(f.attachEvent("onclick",function(){t.noCloneEvent=!1}),f.cloneNode(!0).click());for(c in{submit:!0,change:!0,focusin:!0})f.setAttribute(u="on"+c,"t"),t[c+"Bubbles"]=u in e||f.attributes[u].expando===!1;f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===f.style.backgroundClip;for(c in ce(t))break;return t.ownLast="0"!==c,ce(function(){var n,r,i,o="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=G.getElementsByTagName("body")[0];a&&(n=G.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(f),f.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=f.getElementsByTagName("td"),i[0].style.cssText="padding:0;margin:0;border:0;display:none",l=0===i[0].offsetHeight,i[0].style.display="",i[1].style.display="none",t.reliableHiddenOffsets=l&&0===i[0].offsetHeight,f.innerHTML="",f.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ce.swap(a,null!=a.style.zoom?{zoom:1}:{},function(){t.boxSizing=4===f.offsetWidth}),e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(f,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(f,null)||{width:"4px"}).width,r=f.appendChild(G.createElement("div")),r.style.cssText=f.style.cssText=o,r.style.marginRight=r.style.width="0",f.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof f.style.zoom!==Y&&(f.innerHTML="",f.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===f.offsetWidth,f.style.display="block",f.innerHTML="<div></div>",f.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==f.offsetWidth,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=f=i=r=null)}),n=o=a=s=r=i=null,t}({});var Ee=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Se=/([A-Z])/g;ce.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ce.cache[e[ce.expando]]:e[ce.expando],!!e&&!s(e)},data:function(e,t,n){return i(e,t,n)},removeData:function(e,t){return o(e,t)},_data:function(e,t,n){return i(e,t,n,!0)},_removeData:function(e,t){return o(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&ce.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),ce.fn.extend({data:function(e,n){var r,i,o=null,s=0,u=this[0];if(e===t){if(this.length&&(o=ce.data(u),1===u.nodeType&&!ce._data(u,"parsedAttrs"))){for(r=u.attributes;s<r.length;s++)i=r[s].name,0===i.indexOf("data-")&&(i=ce.camelCase(i.slice(5)),a(u,i,o[i]));ce._data(u,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ce.data(this,e)}):arguments.length>1?this.each(function(){ce.data(this,e,n)}):u?a(u,e,ce.data(u,e)):null},removeData:function(e){return this.each(function(){ce.removeData(this,e)})}}),ce.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=ce._data(e,t),n&&(!r||ce.isArray(n)?r=ce._data(e,t,ce.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ce.queue(e,t),r=n.length,i=n.shift(),o=ce._queueHooks(e,t),a=function(){ce.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ce._data(e,n)||ce._data(e,n,{empty:ce.Callbacks("once memory").add(function(){ce._removeData(e,t+"queue"),ce._removeData(e,n)})})}}),ce.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),arguments.length<r?ce.queue(this[0],e):n===t?this:this.each(function(){var t=ce.queue(this,e,n);ce._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ce.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ce.dequeue(this,e)})},delay:function(e,t){return e=ce.fx?ce.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=ce.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)r=ce._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var Ae,je,De=/[\t\r\n\f]/g,Le=/\r/g,He=/^(?:input|select|textarea|button|object)$/i,qe=/^(?:a|area)$/i,_e=/^(?:checked|selected)$/i,Me=ce.support.getSetAttribute,Oe=ce.support.input;ce.fn.extend({attr:function(e,t){return ce.access(this,ce.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ce.removeAttr(this,e)})},prop:function(e,t){return ce.access(this,ce.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ce.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(ce.isFunction(e))return this.each(function(t){ce(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(pe)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(De," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=ce.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(ce.isFunction(e))return this.each(function(t){ce(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(pe)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(De," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=e?ce.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ce.isFunction(e)?this.each(function(n){ce(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,i=ce(this),o=e.match(pe)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===Y||"boolean"===n)&&(this.className&&ce._data(this,"__className__",this.className),this.className=this.className||e===!1?"":ce._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(De," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=ce.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,ce(this).val()):e,null==o?o="":"number"==typeof o?o+="":ce.isArray(o)&&(o=ce.map(o,function(e){return null==e?"":e+""})),r=ce.valHooks[this.type]||ce.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))});if(o)return r=ce.valHooks[o.type]||ce.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(Le,""):null==n?"":n)}}}),ce.extend({valHooks:{option:{get:function(e){var t=ce.find.attr(e,"value");return null!=t?t:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;s>u;u++)if(n=r[u],(n.selected||u===i)&&(ce.support.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ce.nodeName(n.parentNode,"optgroup"))){if(t=ce(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=ce.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=ce.inArray(ce(r).val(),o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}},attr:function(e,n,r){var i,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===Y?ce.prop(e,n,r):(1===a&&ce.isXMLDoc(e)||(n=n.toLowerCase(),i=ce.attrHooks[n]||(ce.expr.match.bool.test(n)?je:Ae)),r===t?i&&"get"in i&&null!==(o=i.get(e,n))?o:(o=ce.find.attr(e,n),null==o?t:o):null!==r?i&&"set"in i&&(o=i.set(e,r,n))!==t?o:(e.setAttribute(n,r+""),r):void ce.removeAttr(e,n))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(pe);if(o&&1===e.nodeType)for(;n=o[i++];)r=ce.propFix[n]||n,ce.expr.match.bool.test(n)?Oe&&Me||!_e.test(n)?e[r]=!1:e[ce.camelCase("default-"+n)]=e[r]=!1:ce.attr(e,n,""),e.removeAttribute(Me?n:r)},attrHooks:{type:{set:function(e,t){if(!ce.support.radioValue&&"radio"===t&&ce.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!ce.isXMLDoc(e),a&&(n=ce.propFix[n]||n,o=ce.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var t=ce.find.attr(e,"tabindex");return t?parseInt(t,10):He.test(e.nodeName)||qe.test(e.nodeName)&&e.href?0:-1}}}}),je={set:function(e,t,n){return t===!1?ce.removeAttr(e,n):Oe&&Me||!_e.test(n)?e.setAttribute(!Me&&ce.propFix[n]||n,n):e[ce.camelCase("default-"+n)]=e[n]=!0,n}},ce.each(ce.expr.match.bool.source.match(/\w+/g),function(e,n){var r=ce.expr.attrHandle[n]||ce.find.attr;ce.expr.attrHandle[n]=Oe&&Me||!_e.test(n)?function(e,n,i){var o=ce.expr.attrHandle[n],a=i?t:(ce.expr.attrHandle[n]=t)!=r(e,n,i)?n.toLowerCase():null;return ce.expr.attrHandle[n]=o,a}:function(e,n,r){return r?t:e[ce.camelCase("default-"+n)]?n.toLowerCase():null}}),Oe&&Me||(ce.attrHooks.value={set:function(e,t,n){return ce.nodeName(e,"input")?void(e.defaultValue=t):Ae&&Ae.set(e,t,n)}}),Me||(Ae={set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},ce.expr.attrHandle.id=ce.expr.attrHandle.name=ce.expr.attrHandle.coords=function(e,n,r){var i;return r?t:(i=e.getAttributeNode(n))&&""!==i.value?i.value:null},ce.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&r.specified?r.value:t},set:Ae.set},ce.attrHooks.contenteditable={set:function(e,t,n){Ae.set(e,""===t?!1:t,n)}},ce.each(["width","height"],function(e,t){ce.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ce.support.hrefNormalized||ce.each(["href","src"],function(e,t){ce.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ce.support.style||(ce.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),ce.support.optSelected||(ce.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ce.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ce.propFix[this.toLowerCase()]=this}),ce.support.enctype||(ce.propFix.enctype="encoding"),ce.each(["radio","checkbox"],function(){ce.valHooks[this]={set:function(e,t){return ce.isArray(t)?e.checked=ce.inArray(ce(e).val(),t)>=0:void 0}},ce.support.checkOn||(ce.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Fe=/^(?:input|select|textarea)$/i,Be=/^key/,Pe=/^(?:mouse|contextmenu)|click/,Re=/^(?:focusinfocus|focusoutblur)$/,We=/^([^.]*)(?:\.(.+)|)$/;ce.event={global:{},add:function(e,n,r,i,o){var a,s,u,l,c,f,p,d,h,g,m,y=ce._data(e);if(y){for(r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=ce.guid++),(s=y.events)||(s=y.events={}),(f=y.handle)||(f=y.handle=function(e){return typeof ce===Y||e&&ce.event.triggered===e.type?t:ce.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(pe)||[""],u=n.length;u--;)a=We.exec(n[u])||[],h=m=a[1],g=(a[2]||"").split(".").sort(),h&&(c=ce.event.special[h]||{},h=(o?c.delegateType:c.bindType)||h,c=ce.event.special[h]||{},p=ce.extend({type:h,origType:m,data:i,handler:r,guid:r.guid,selector:o,needsContext:o&&ce.expr.match.needsContext.test(o),namespace:g.join(".")},l),(d=s[h])||(d=s[h]=[],d.delegateCount=0,c.setup&&c.setup.call(e,i,g,f)!==!1||(e.addEventListener?e.addEventListener(h,f,!1):e.attachEvent&&e.attachEvent("on"+h,f))),c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),ce.event.global[h]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,m=ce.hasData(e)&&ce._data(e);if(m&&(c=m.events)){for(t=(t||"").match(pe)||[""],l=t.length;l--;)if(s=We.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){for(f=ce.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,p=c[d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=p.length;o--;)a=p[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(p.splice(o,1),a.selector&&p.delegateCount--,f.remove&&f.remove.call(e,a));u&&!p.length&&(f.teardown&&f.teardown.call(e,h,m.handle)!==!1||ce.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)ce.event.remove(e,d+t[l],n,r,!0);ce.isEmptyObject(c)&&(delete m.handle,ce._removeData(e,"events"))}},trigger:function(n,r,i,o){var a,s,u,l,c,f,p,d=[i||G],h=ue.call(n,"type")?n.type:n,g=ue.call(n,"namespace")?n.namespace.split("."):[];if(u=f=i=i||G,3!==i.nodeType&&8!==i.nodeType&&!Re.test(h+ce.event.triggered)&&(h.indexOf(".")>=0&&(g=h.split("."),h=g.shift(),g.sort()),s=h.indexOf(":")<0&&"on"+h,n=n[ce.expando]?n:new ce.Event(h,"object"==typeof n&&n),n.isTrigger=o?2:3,n.namespace=g.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:ce.makeArray(r,[n]),c=ce.event.special[h]||{},o||!c.trigger||c.trigger.apply(i,r)!==!1)){if(!o&&!c.noBubble&&!ce.isWindow(i)){for(l=c.delegateType||h,Re.test(l+h)||(u=u.parentNode);u;u=u.parentNode)d.push(u),f=u;f===(i.ownerDocument||G)&&d.push(f.defaultView||f.parentWindow||e)}for(p=0;(u=d[p++])&&!n.isPropagationStopped();)n.type=p>1?l:c.bindType||h,a=(ce._data(u,"events")||{})[n.type]&&ce._data(u,"handle"),a&&a.apply(u,r),a=s&&u[s],a&&ce.acceptData(u)&&a.apply&&a.apply(u,r)===!1&&n.preventDefault();if(n.type=h,!o&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(d.pop(),r)===!1)&&ce.acceptData(i)&&s&&i[h]&&!ce.isWindow(i)){f=i[s],f&&(i[s]=null),ce.event.triggered=h;try{i[h]()}catch(m){}ce.event.triggered=t,f&&(i[s]=f)}return n.result}},dispatch:function(e){e=ce.event.fix(e);var n,r,i,o,a,s=[],u=oe.call(arguments),l=(ce._data(this,"events")||{})[e.type]||[],c=ce.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=ce.event.handlers.call(this,e,l),n=0;(o=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,a=0;(i=o.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((ce.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?ce(r,this).index(l)>=0:ce.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return u<n.length&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[ce.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Pe.test(i)?this.mouseHooks:Be.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new ce.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||G),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,a=n.button,s=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||G,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?n.toElement:s),e.which||a===t||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==c()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===c()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ce.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ce.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=ce.extend(new ce.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?ce.event.trigger(i,null,t):ce.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},ce.removeEvent=G.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===Y&&(e[r]=null),e.detachEvent(r,n))},ce.Event=function(e,t){return this instanceof ce.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?u:l):this.type=e,t&&ce.extend(this,t),this.timeStamp=e&&e.timeStamp||ce.now(),void(this[ce.expando]=!0)):new ce.Event(e,t)},ce.Event.prototype={isDefaultPrevented:l,isPropagationStopped:l,isImmediatePropagationStopped:l,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=u,this.stopPropagation()}},ce.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ce.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!ce.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ce.support.submitBubbles||(ce.event.special.submit={setup:function(){return ce.nodeName(this,"form")?!1:void ce.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=ce.nodeName(n,"input")||ce.nodeName(n,"button")?n.form:t;r&&!ce._data(r,"submitBubbles")&&(ce.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),ce._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ce.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return ce.nodeName(this,"form")?!1:void ce.event.remove(this,"._submit")}}),ce.support.changeBubbles||(ce.event.special.change={setup:function(){return Fe.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ce.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ce.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ce.event.simulate("change",this,e,!0)})),!1):void ce.event.add(this,"beforeactivate._change",function(e){var t=e.target;Fe.test(t.nodeName)&&!ce._data(t,"changeBubbles")&&(ce.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ce.event.simulate("change",this.parentNode,e,!0)}),ce._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ce.event.remove(this,"._change"),!Fe.test(this.nodeName)}}),ce.support.focusinBubbles||ce.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){ce.event.simulate(t,e.target,ce.event.fix(e),!0)};ce.event.special[t]={setup:function(){0===n++&&G.addEventListener(e,r,!0)},teardown:function(){0===--n&&G.removeEventListener(e,r,!0)}}}),ce.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=l;else if(!i)return this;return 1===o&&(s=i,i=function(e){return ce().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=ce.guid++)),this.each(function(){ce.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ce(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=l),this.each(function(){ce.event.remove(this,e,r,n)})},trigger:function(e,t){return this.each(function(){ce.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ce.event.trigger(e,t,n,!0):void 0}});var $e=/^.[^:#\[\.,]*$/,Ie=/^(?:parents|prev(?:Until|All))/,ze=ce.expr.match.needsContext,Xe={children:!0,contents:!0,next:!0,prev:!0};ce.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(ce(e).filter(function(){for(t=0;i>t;t++)if(ce.contains(r[t],this))return!0}));for(t=0;i>t;t++)ce.find(e,r[t],n);return n=this.pushStack(i>1?ce.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},has:function(e){var t,n=ce(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(ce.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(p(this,e||[],!0))},filter:function(e){return this.pushStack(p(this,e||[],!1))},is:function(e){return!!p(this,"string"==typeof e&&ze.test(e)?ce(e):e||[],!1).length},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=ze.test(e)||"string"!=typeof e?ce(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ce.find.matchesSelector(n,e))){n=o.push(n);break}return this.pushStack(o.length>1?ce.unique(o):o)},index:function(e){return e?"string"==typeof e?ce.inArray(this[0],ce(e)):ce.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?ce(e,t):ce.makeArray(e&&e.nodeType?[e]:e),r=ce.merge(this.get(),n);return this.pushStack(ce.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ce.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null;
},parents:function(e){return ce.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ce.dir(e,"parentNode",n)},next:function(e){return f(e,"nextSibling")},prev:function(e){return f(e,"previousSibling")},nextAll:function(e){return ce.dir(e,"nextSibling")},prevAll:function(e){return ce.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ce.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ce.dir(e,"previousSibling",n)},siblings:function(e){return ce.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ce.sibling(e.firstChild)},contents:function(e){return ce.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ce.merge([],e.childNodes)}},function(e,t){ce.fn[e]=function(n,r){var i=ce.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=ce.filter(r,i)),this.length>1&&(Xe[e]||(i=ce.unique(i)),Ie.test(e)&&(i=i.reverse())),this.pushStack(i)}}),ce.extend({filter:function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ce.find.matchesSelector(r,e)?[r]:[]:ce.find.matches(e,ce.grep(t,function(e){return 1===e.nodeType}))},dir:function(e,n,r){for(var i=[],o=e[n];o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!ce(o).is(r));)1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Ue="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ve=/ jQuery\d+="(?:null|\d+)"/g,Ye=new RegExp("<(?:"+Ue+")[\\s/>]","i"),Je=/^\s+/,Ge=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Qe=/<([\w:]+)/,Ke=/<tbody/i,Ze=/<|&#?\w+;/,et=/<(?:script|style|link)/i,tt=/^(?:checkbox|radio)$/i,nt=/checked\s*(?:[^=]|=\s*.checked.)/i,rt=/^$|\/(?:java|ecma)script/i,it=/^true\/(.*)/,ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,at={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ce.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},st=d(G),ut=st.appendChild(G.createElement("div"));at.optgroup=at.option,at.tbody=at.tfoot=at.colgroup=at.caption=at.thead,at.th=at.td,ce.fn.extend({text:function(e){return ce.access(this,function(e){return e===t?ce.text(this):this.empty().append((this[0]&&this[0].ownerDocument||G).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=h(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?ce.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||ce.cleanData(x(n)),n.parentNode&&(t&&ce.contains(n.ownerDocument,n)&&y(x(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ce.cleanData(x(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ce.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ce.clone(this,e,t)})},html:function(e){return ce.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(Ve,""):t;if("string"==typeof e&&!et.test(e)&&(ce.support.htmlSerialize||!Ye.test(e))&&(ce.support.leadingWhitespace||!Je.test(e))&&!at[(Qe.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ge,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(ce.cleanData(x(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=ce.map(this,function(e){return[e.nextSibling,e.parentNode]}),t=0;return this.domManip(arguments,function(n){var r=e[t++],i=e[t++];i&&(r&&r.parentNode!==i&&(r=this.nextSibling),ce(this).remove(),i.insertBefore(n,r))},!0),t?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){e=re.apply([],e);var r,i,o,a,s,u,l=0,c=this.length,f=this,p=c-1,d=e[0],h=ce.isFunction(d);if(h||!(1>=c||"string"!=typeof d||ce.support.checkClone)&&nt.test(d))return this.each(function(r){var i=f.eq(r);h&&(e[0]=d.call(this,r,i.html())),i.domManip(e,t,n)});if(c&&(u=ce.buildFragment(e,this[0].ownerDocument,!1,!n&&this),r=u.firstChild,1===u.childNodes.length&&(u=r),r)){for(a=ce.map(x(u,"script"),g),o=a.length;c>l;l++)i=u,l!==p&&(i=ce.clone(i,!0,!0),o&&ce.merge(a,x(i,"script"))),t.call(this[l],i,l);if(o)for(s=a[a.length-1].ownerDocument,ce.map(a,m),l=0;o>l;l++)i=a[l],rt.test(i.type||"")&&!ce._data(i,"globalEval")&&ce.contains(s,i)&&(i.src?ce._evalUrl(i.src):ce.globalEval((i.text||i.textContent||i.innerHTML||"").replace(ot,"")));u=r=null}return this}}),ce.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ce.fn[e]=function(e){for(var n,r=0,i=[],o=ce(e),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),ce(o[r])[t](n),ie.apply(i,n.get());return this.pushStack(i)}}),ce.extend({clone:function(e,t,n){var r,i,o,a,s,u=ce.contains(e.ownerDocument,e);if(ce.support.html5Clone||ce.isXMLDoc(e)||!Ye.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(ut.innerHTML=e.outerHTML,ut.removeChild(o=ut.firstChild)),!(ce.support.noCloneEvent&&ce.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ce.isXMLDoc(e)))for(r=x(o),s=x(e),a=0;null!=(i=s[a]);++a)r[a]&&b(i,r[a]);if(t)if(n)for(s=s||x(e),r=r||x(o),a=0;null!=(i=s[a]);a++)v(i,r[a]);else v(e,o);return r=x(o,"script"),r.length>0&&y(r,!u&&x(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,u,l,c,f=e.length,p=d(t),h=[],g=0;f>g;g++)if(o=e[g],o||0===o)if("object"===ce.type(o))ce.merge(h,o.nodeType?[o]:o);else if(Ze.test(o)){for(s=s||p.appendChild(t.createElement("div")),u=(Qe.exec(o)||["",""])[1].toLowerCase(),c=at[u]||at._default,s.innerHTML=c[1]+o.replace(Ge,"<$1></$2>")+c[2],i=c[0];i--;)s=s.lastChild;if(!ce.support.leadingWhitespace&&Je.test(o)&&h.push(t.createTextNode(Je.exec(o)[0])),!ce.support.tbody)for(o="table"!==u||Ke.test(o)?"<table>"!==c[1]||Ke.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;i--;)ce.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(ce.merge(h,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=p.lastChild}else h.push(t.createTextNode(o));for(s&&p.removeChild(s),ce.support.appendChecked||ce.grep(x(h,"input"),w),g=0;o=h[g++];)if((!r||-1===ce.inArray(o,r))&&(a=ce.contains(o.ownerDocument,o),s=x(p.appendChild(o),"script"),a&&y(s),n))for(i=0;o=s[i++];)rt.test(o.type||"")&&n.push(o);return s=null,p},cleanData:function(e,t){for(var n,r,i,o,a=0,s=ce.expando,u=ce.cache,l=ce.support.deleteExpando,c=ce.event.special;null!=(n=e[a]);a++)if((t||ce.acceptData(n))&&(i=n[s],o=i&&u[i])){if(o.events)for(r in o.events)c[r]?ce.event.remove(n,r):ce.removeEvent(n,r,o.handle);u[i]&&(delete u[i],l?delete n[s]:typeof n.removeAttribute!==Y?n.removeAttribute(s):n[s]=null,te.push(i))}},_evalUrl:function(e){return ce.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ce.fn.extend({wrapAll:function(e){if(ce.isFunction(e))return this.each(function(t){ce(this).wrapAll(e.call(this,t))});if(this[0]){var t=ce(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ce.isFunction(e)?this.each(function(t){ce(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ce(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ce.isFunction(e);return this.each(function(n){ce(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ce.nodeName(this,"body")||ce(this).replaceWith(this.childNodes)}).end()}});var lt,ct,ft,pt=/alpha\([^)]*\)/i,dt=/opacity\s*=\s*([^)]*)/,ht=/^(top|right|bottom|left)$/,gt=/^(none|table(?!-c[ea]).+)/,mt=/^margin/,yt=new RegExp("^("+fe+")(.*)$","i"),vt=new RegExp("^("+fe+")(?!px)[a-z%]+$","i"),bt=new RegExp("^([+-])=("+fe+")","i"),xt={BODY:"block"},wt={position:"absolute",visibility:"hidden",display:"block"},Tt={letterSpacing:0,fontWeight:400},Ct=["Top","Right","Bottom","Left"],Nt=["Webkit","O","Moz","ms"];ce.fn.extend({css:function(e,n){return ce.access(this,function(e,n,r){var i,o,a={},s=0;if(ce.isArray(n)){for(o=ct(e),i=n.length;i>s;s++)a[n[s]]=ce.css(e,n[s],!1,o);return a}return r!==t?ce.style(e,n,r):ce.css(e,n)},e,n,arguments.length>1)},show:function(){return N(this,!0)},hide:function(){return N(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){C(this)?ce(this).show():ce(this).hide()})}}),ce.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=ft(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ce.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=ce.camelCase(n),l=e.style;if(n=ce.cssProps[u]||(ce.cssProps[u]=T(l,u)),s=ce.cssHooks[n]||ce.cssHooks[u],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=bt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(ce.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||ce.cssNumber[u]||(r+="px"),ce.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=ce.camelCase(n);return n=ce.cssProps[u]||(ce.cssProps[u]=T(e.style,u)),s=ce.cssHooks[n]||ce.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=ft(e,n,i)),"normal"===a&&n in Tt&&(a=Tt[n]),""===r||r?(o=parseFloat(a),r===!0||ce.isNumeric(o)?o||0:a):a}}),e.getComputedStyle?(ct=function(t){return e.getComputedStyle(t,null)},ft=function(e,n,r){var i,o,a,s=r||ct(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||ce.contains(e.ownerDocument,e)||(u=ce.style(e,n)),vt.test(u)&&mt.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):G.documentElement.currentStyle&&(ct=function(e){return e.currentStyle},ft=function(e,n,r){var i,o,a,s=r||ct(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),vt.test(u)&&!ht.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u}),ce.each(["height","width"],function(e,t){ce.cssHooks[t]={get:function(e,n,r){return n?0===e.offsetWidth&&gt.test(ce.css(e,"display"))?ce.swap(e,wt,function(){return S(e,t,r)}):S(e,t,r):void 0},set:function(e,n,r){var i=r&&ct(e);return k(e,n,r?E(e,t,r,ce.support.boxSizing&&"border-box"===ce.css(e,"boxSizing",!1,i),i):0)}}}),ce.support.opacity||(ce.cssHooks.opacity={get:function(e,t){return dt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=ce.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ce.trim(o.replace(pt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=pt.test(o)?o.replace(pt,i):o+" "+i)}}),ce(function(){ce.support.reliableMarginRight||(ce.cssHooks.marginRight={get:function(e,t){return t?ce.swap(e,{display:"inline-block"},ft,[e,"marginRight"]):void 0}}),!ce.support.pixelPosition&&ce.fn.position&&ce.each(["top","left"],function(e,t){ce.cssHooks[t]={get:function(e,n){return n?(n=ft(e,t),vt.test(n)?ce(e).position()[t]+"px":n):void 0}}})}),ce.expr&&ce.expr.filters&&(ce.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ce.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ce.css(e,"display"))},ce.expr.filters.visible=function(e){return!ce.expr.filters.hidden(e)}),ce.each({margin:"",padding:"",border:"Width"},function(e,t){ce.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Ct[r]+t]=o[r]||o[r-2]||o[0];return i}},mt.test(e)||(ce.cssHooks[e+t].set=k)});var kt=/%20/g,Et=/\[\]$/,St=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;ce.fn.extend({serialize:function(){return ce.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ce.prop(this,"elements");return e?ce.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ce(this).is(":disabled")&&jt.test(this.nodeName)&&!At.test(e)&&(this.checked||!tt.test(e))}).map(function(e,t){var n=ce(this).val();return null==n?null:ce.isArray(n)?ce.map(n,function(e){return{name:t.name,value:e.replace(St,"\r\n")}}):{name:t.name,value:n.replace(St,"\r\n")}}).get()}}),ce.param=function(e,n){var r,i=[],o=function(e,t){t=ce.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=ce.ajaxSettings&&ce.ajaxSettings.traditional),ce.isArray(e)||e.jquery&&!ce.isPlainObject(e))ce.each(e,function(){o(this.name,this.value)});else for(r in e)D(r,e[r],n,o);return i.join("&").replace(kt,"+")},ce.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ce.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ce.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Dt,Lt,Ht=ce.now(),qt=/\?/,_t=/#.*$/,Mt=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ft=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Bt=/^(?:GET|HEAD)$/,Pt=/^\/\//,Rt=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Wt=ce.fn.load,$t={},It={},zt="*/".concat("*");try{Lt=J.href}catch(Xt){Lt=G.createElement("a"),Lt.href="",Lt=Lt.href}Dt=Rt.exec(Lt.toLowerCase())||[],ce.fn.load=function(e,n,r){if("string"!=typeof e&&Wt)return Wt.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),ce.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&ce.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?ce("<div>").append(ce.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},ce.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ce.fn[t]=function(e){return this.on(t,e)}}),ce.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Lt,type:"GET",isLocal:Ft.test(Dt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ce.parseJSON,"text xml":ce.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?q(q(e,ce.ajaxSettings),t):q(ce.ajaxSettings,e)},ajaxPrefilter:L($t),ajaxTransport:L(It),ajax:function(e,n){function r(e,n,r,i){var o,f,v,b,w,C=n;2!==x&&(x=2,u&&clearTimeout(u),c=t,s=i||"",T.readyState=e>0?4:0,o=e>=200&&300>e||304===e,r&&(b=_(p,T,r)),b=M(p,b,T,o),o?(p.ifModified&&(w=T.getResponseHeader("Last-Modified"),w&&(ce.lastModified[a]=w),w=T.getResponseHeader("etag"),w&&(ce.etag[a]=w)),204===e||"HEAD"===p.type?C="nocontent":304===e?C="notmodified":(C=b.state,f=b.data,v=b.error,o=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),T.status=e,T.statusText=(n||C)+"",o?g.resolveWith(d,[f,C,T]):g.rejectWith(d,[T,C,v]),T.statusCode(y),y=t,l&&h.trigger(o?"ajaxSuccess":"ajaxError",[T,p,o?f:v]),m.fireWith(d,[T,C]),l&&(h.trigger("ajaxComplete",[T,p]),--ce.active||ce.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var i,o,a,s,u,l,c,f,p=ce.ajaxSetup({},n),d=p.context||p,h=p.context&&(d.nodeType||d.jquery)?ce(d):ce.event,g=ce.Deferred(),m=ce.Callbacks("once memory"),y=p.statusCode||{},v={},b={},x=0,w="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!f)for(f={};t=Ot.exec(s);)f[t[1].toLowerCase()]=t[2];t=f[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=b[n]=b[n]||e,v[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)y[t]=[y[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||w;return c&&c.abort(t),r(0,t),this}};if(g.promise(T).complete=m.add,T.success=T.done,T.error=T.fail,p.url=((e||p.url||Lt)+"").replace(_t,"").replace(Pt,Dt[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=ce.trim(p.dataType||"*").toLowerCase().match(pe)||[""],null==p.crossDomain&&(i=Rt.exec(p.url.toLowerCase()),p.crossDomain=!(!i||i[1]===Dt[1]&&i[2]===Dt[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Dt[3]||("http:"===Dt[1]?"80":"443")))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=ce.param(p.data,p.traditional)),H($t,p,n,T),2===x)return T;l=p.global,l&&0===ce.active++&&ce.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Bt.test(p.type),a=p.url,p.hasContent||(p.data&&(a=p.url+=(qt.test(a)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=Mt.test(a)?a.replace(Mt,"$1_="+Ht++):a+(qt.test(a)?"&":"?")+"_="+Ht++)),p.ifModified&&(ce.lastModified[a]&&T.setRequestHeader("If-Modified-Since",ce.lastModified[a]),ce.etag[a]&&T.setRequestHeader("If-None-Match",ce.etag[a])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&T.setRequestHeader("Content-Type",p.contentType),T.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+zt+"; q=0.01":""):p.accepts["*"]);for(o in p.headers)T.setRequestHeader(o,p.headers[o]);if(p.beforeSend&&(p.beforeSend.call(d,T,p)===!1||2===x))return T.abort();w="abort";for(o in{success:1,error:1,complete:1})T[o](p[o]);if(c=H(It,p,n,T)){T.readyState=1,l&&h.trigger("ajaxSend",[T,p]),p.async&&p.timeout>0&&(u=setTimeout(function(){T.abort("timeout")},p.timeout));try{x=1,c.send(v,r)}catch(C){if(!(2>x))throw C;r(-1,C)}}else r(-1,"No Transport");return T},getJSON:function(e,t,n){return ce.get(e,t,n,"json")},getScript:function(e,n){return ce.get(e,t,n,"script")}}),ce.each(["get","post"],function(e,n){ce[n]=function(e,r,i,o){return ce.isFunction(r)&&(o=o||i,i=r,r=t),ce.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),ce.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ce.globalEval(e),e}}}),ce.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ce.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=G.head||ce("head")[0]||G.documentElement;return{send:function(t,i){n=G.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var Ut=[],Vt=/(=)\?(?=&|$)|\?\?/;ce.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ut.pop()||ce.expando+"_"+Ht++;return this[e]=!0,e}}),ce.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Vt.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vt.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=ce.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Vt,"$1"+o):n.jsonp!==!1&&(n.url+=(qt.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||ce.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,Ut.push(o)),s&&ce.isFunction(a)&&a(s[0]),s=a=t}),"script"):void 0});var Yt,Jt,Gt=0,Qt=e.ActiveXObject&&function(){var e;for(e in Yt)Yt[e](t,!0)};ce.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&O()||F()}:O,Jt=ce.ajaxSettings.xhr(),ce.support.cors=!!Jt&&"withCredentials"in Jt,Jt=ce.support.ajax=!!Jt,Jt&&ce.ajaxTransport(function(n){if(!n.crossDomain||ce.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,f;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=ce.noop,Qt&&delete Yt[a]),i)4!==u.readyState&&u.abort();else{f={},s=u.status,l=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(f.text=u.responseText);try{c=u.statusText}catch(p){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=f.text?200:404}}catch(d){i||o(-1,d)}f&&o(s,c,f,l)},n.async?4===u.readyState?setTimeout(r):(a=++Gt,Qt&&(Yt||(Yt={},ce(e).unload(Qt)),Yt[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Kt,Zt,en=/^(?:toggle|show|hide)$/,tn=new RegExp("^(?:([+-])=|)("+fe+")([a-z%]*)$","i"),nn=/queueHooks$/,rn=[$],on={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=tn.exec(t),o=i&&i[3]||(ce.cssNumber[e]?"":"px"),a=(ce.cssNumber[e]||"px"!==o&&+r)&&tn.exec(ce.css(n.elem,e)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do s=s||".5",a/=s,ce.style(n.elem,e,a+o);while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};ce.Animation=ce.extend(R,{tweener:function(e,t){ce.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],on[n]=on[n]||[],on[n].unshift(t)},prefilter:function(e,t){t?rn.unshift(e):rn.push(e)}}),ce.Tween=I,I.prototype={constructor:I,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ce.cssNumber[n]?"":"px")},cur:function(){var e=I.propHooks[this.prop];return e&&e.get?e.get(this):I.propHooks._default.get(this)},run:function(e){var t,n=I.propHooks[this.prop];return this.options.duration?this.pos=t=ce.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):I.propHooks._default.set(this),this}},I.prototype.init.prototype=I.prototype,I.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ce.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ce.fx.step[e.prop]?ce.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ce.cssProps[e.prop]]||ce.cssHooks[e.prop])?ce.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},I.propHooks.scrollTop=I.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ce.each(["toggle","show","hide"],function(e,t){var n=ce.fn[t];ce.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(z(t,!0),e,r,i)}}),ce.fn.extend({fadeTo:function(e,t,n,r){return this.filter(C).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=ce.isEmptyObject(e),o=ce.speed(t,n,r),a=function(){var t=R(this,ce.extend({},e),o);(i||ce._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=ce.timers,a=ce._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&nn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&ce.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ce._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=ce.timers,a=r?r.length:0;for(n.finish=!0,ce.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ce.each({slideDown:z("show"),slideUp:z("hide"),slideToggle:z("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ce.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ce.speed=function(e,t,n){var r=e&&"object"==typeof e?ce.extend({},e):{complete:n||!n&&t||ce.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ce.isFunction(t)&&t};return r.duration=ce.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ce.fx.speeds?ce.fx.speeds[r.duration]:ce.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){ce.isFunction(r.old)&&r.old.call(this),r.queue&&ce.dequeue(this,r.queue)},r},ce.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ce.timers=[],ce.fx=I.prototype.init,ce.fx.tick=function(){var e,n=ce.timers,r=0;for(Kt=ce.now();r<n.length;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||ce.fx.stop(),Kt=t},ce.fx.timer=function(e){e()&&ce.timers.push(e)&&ce.fx.start()},ce.fx.interval=13,ce.fx.start=function(){Zt||(Zt=setInterval(ce.fx.tick,ce.fx.interval))},ce.fx.stop=function(){clearInterval(Zt),Zt=null},ce.fx.speeds={slow:600,fast:200,_default:400},ce.fx.step={},ce.expr&&ce.expr.filters&&(ce.expr.filters.animated=function(e){return ce.grep(ce.timers,function(t){return e===t.elem}).length}),ce.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){ce.offset.setOffset(this,e,t)});var n,r,i={top:0,left:0},o=this[0],a=o&&o.ownerDocument;if(a)return n=a.documentElement,ce.contains(n,o)?(typeof o.getBoundingClientRect!==Y&&(i=o.getBoundingClientRect()),r=X(a),{top:i.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:i.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):i},ce.offset={setOffset:function(e,t,n){var r=ce.css(e,"position");"static"===r&&(e.style.position="relative");var i,o,a=ce(e),s=a.offset(),u=ce.css(e,"top"),l=ce.css(e,"left"),c=("absolute"===r||"fixed"===r)&&ce.inArray("auto",[u,l])>-1,f={},p={};c?(p=a.position(),i=p.top,o=p.left):(i=parseFloat(u)||0,o=parseFloat(l)||0),ce.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+i),null!=t.left&&(f.left=t.left-s.left+o),"using"in t?t.using.call(e,f):a.css(f)}},ce.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===ce.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ce.nodeName(e[0],"html")||(n=e.offset()),n.top+=ce.css(e[0],"borderTopWidth",!0),n.left+=ce.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ce.css(r,"marginTop",!0),left:t.left-n.left-ce.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Q;e&&!ce.nodeName(e,"html")&&"static"===ce.css(e,"position");)e=e.offsetParent;return e||Q})}}),ce.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);ce.fn[e]=function(i){return ce.access(this,function(e,i,o){var a=X(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:void(a?a.scrollTo(r?ce(a).scrollLeft():o,r?o:ce(a).scrollTop()):e[i]=o)},e,i,arguments.length,null)}}),ce.each({Height:"height",Width:"width"},function(e,n){ce.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){ce.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return ce.access(this,function(n,r,i){var o;return ce.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?ce.css(n,r,s):ce.style(n,r,i,s)},n,a?i:t,a,null)}})}),ce.fn.size=function(){return this.length},ce.fn.andSelf=ce.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ce:(e.jQuery=e.$=ce,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ce}))}(window);
void 0===jQuery.migrateMute&&(jQuery.migrateMute=!0),function(e,t,n){function r(n){var r=t.console;i[n]||(i[n]=!0,e.migrateWarnings.push(n),r&&r.warn&&!e.migrateMute&&(r.warn("JQMIGRATE: "+n),e.migrateTrace&&r.trace&&r.trace()))}function a(t,a,i,o){if(Object.defineProperty)try{return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){return r(o),i},set:function(e){r(o),i=e}}),n}catch(s){}e._definePropertyBroken=!0,t[a]=i}var i={};e.migrateWarnings=[],!e.migrateMute&&t.console&&t.console.log&&t.console.log("JQMIGRATE: Logging is active"),e.migrateTrace===n&&(e.migrateTrace=!0),e.migrateReset=function(){i={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&r("jQuery is not compatible with Quirks Mode");var o=e("<input/>",{size:1}).attr("size")&&e.attrFn,s=e.attr,u=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},c=e.attrHooks.value&&e.attrHooks.value.set||function(){return n},l=/^(?:input|button)$/i,d=/^[238]$/,p=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,f=/^(?:checked|selected)$/i;a(e,"attrFn",o||{},"jQuery.attrFn is deprecated"),e.attr=function(t,a,i,u){var c=a.toLowerCase(),g=t&&t.nodeType;return u&&(4>s.length&&r("jQuery.fn.attr( props, pass ) is deprecated"),t&&!d.test(g)&&(o?a in o:e.isFunction(e.fn[a])))?e(t)[a](i):("type"===a&&i!==n&&l.test(t.nodeName)&&t.parentNode&&r("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[c]&&p.test(c)&&(e.attrHooks[c]={get:function(t,r){var a,i=e.prop(t,r);return i===!0||"boolean"!=typeof i&&(a=t.getAttributeNode(r))&&a.nodeValue!==!1?r.toLowerCase():n},set:function(t,n,r){var a;return n===!1?e.removeAttr(t,r):(a=e.propFix[r]||r,a in t&&(t[a]=!0),t.setAttribute(r,r.toLowerCase())),r}},f.test(c)&&r("jQuery.fn.attr('"+c+"') may use property instead of attribute")),s.call(e,t,a,i))},e.attrHooks.value={get:function(e,t){var n=(e.nodeName||"").toLowerCase();return"button"===n?u.apply(this,arguments):("input"!==n&&"option"!==n&&r("jQuery.fn.attr('value') no longer gets properties"),t in e?e.value:null)},set:function(e,t){var a=(e.nodeName||"").toLowerCase();return"button"===a?c.apply(this,arguments):("input"!==a&&"option"!==a&&r("jQuery.fn.attr('value', val) no longer sets properties"),e.value=t,n)}};var g,h,v=e.fn.init,m=e.parseJSON,y=/^([^<]*)(<[\w\W]+>)([^>]*)$/;e.fn.init=function(t,n,a){var i;return t&&"string"==typeof t&&!e.isPlainObject(n)&&(i=y.exec(e.trim(t)))&&i[0]&&("<"!==t.charAt(0)&&r("$(html) HTML strings must start with '<' character"),i[3]&&r("$(html) HTML text after last tag is ignored"),"#"===i[0].charAt(0)&&(r("HTML string cannot start with a '#' character"),e.error("JQMIGRATE: Invalid selector string (XSS)")),n&&n.context&&(n=n.context),e.parseHTML)?v.call(this,e.parseHTML(i[2],n,!0),n,a):v.apply(this,arguments)},e.fn.init.prototype=e.fn,e.parseJSON=function(e){return e||null===e?m.apply(this,arguments):(r("jQuery.parseJSON requires a valid JSON string"),null)},e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e.browser||(g=e.uaMatch(navigator.userAgent),h={},g.browser&&(h[g.browser]=!0,h.version=g.version),h.chrome?h.webkit=!0:h.webkit&&(h.safari=!0),e.browser=h),a(e,"browser",e.browser,"jQuery.browser is deprecated"),e.sub=function(){function t(e,n){return new t.fn.init(e,n)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(r,a){return a&&a instanceof e&&!(a instanceof t)&&(a=t(a)),e.fn.init.call(this,r,a,n)},t.fn.init.prototype=t.fn;var n=t(document);return r("jQuery.sub() is deprecated"),t},e.ajaxSetup({converters:{"text json":e.parseJSON}});var b=e.fn.data;e.fn.data=function(t){var a,i,o=this[0];return!o||"events"!==t||1!==arguments.length||(a=e.data(o,t),i=e._data(o,t),a!==n&&a!==i||i===n)?b.apply(this,arguments):(r("Use of jQuery.fn.data('events') is deprecated"),i)};var j=/\/(java|ecma)script/i,w=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)},e.clean||(e.clean=function(t,a,i,o){a=a||document,a=!a.nodeType&&a[0]||a,a=a.ownerDocument||a,r("jQuery.clean() is deprecated");var s,u,c,l,d=[];if(e.merge(d,e.buildFragment(t,a).childNodes),i)for(c=function(e){return!e.type||j.test(e.type)?o?o.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e):n},s=0;null!=(u=d[s]);s++)e.nodeName(u,"script")&&c(u)||(i.appendChild(u),u.getElementsByTagName!==n&&(l=e.grep(e.merge([],u.getElementsByTagName("script")),c),d.splice.apply(d,[s+1,0].concat(l)),s+=l.length));return d});var Q=e.event.add,x=e.event.remove,k=e.event.trigger,N=e.fn.toggle,T=e.fn.live,M=e.fn.die,S="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",C=RegExp("\\b(?:"+S+")\\b"),H=/(?:^|\s)hover(\.\S+|)\b/,A=function(t){return"string"!=typeof t||e.event.special.hover?t:(H.test(t)&&r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(H,"mouseenter$1 mouseleave$1"))};e.event.props&&"attrChange"!==e.event.props[0]&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),e.event.dispatch&&a(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,n,a,i){e!==document&&C.test(t)&&r("AJAX events should be attached to document: "+t),Q.call(this,e,A(t||""),n,a,i)},e.event.remove=function(e,t,n,r,a){x.call(this,e,A(t)||"",n,r,a)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return r("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,n){if(!e.isFunction(t)||!e.isFunction(n))return N.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var a=arguments,i=t.guid||e.guid++,o=0,s=function(n){var r=(e._data(this,"lastToggle"+t.guid)||0)%o;return e._data(this,"lastToggle"+t.guid,r+1),n.preventDefault(),a[r].apply(this,arguments)||!1};for(s.guid=i;a.length>o;)a[o++].guid=i;return this.click(s)},e.fn.live=function(t,n,a){return r("jQuery.fn.live() is deprecated"),T?T.apply(this,arguments):(e(this.context).on(t,this.selector,n,a),this)},e.fn.die=function(t,n){return r("jQuery.fn.die() is deprecated"),M?M.apply(this,arguments):(e(this.context).off(t,this.selector||"**",n),this)},e.event.trigger=function(e,t,n,a){return n||C.test(e)||r("Global events are undocumented and deprecated"),k.call(this,e,t,n||document,a)},e.each(S.split("|"),function(t,n){e.event.special[n]={setup:function(){var t=this;return t!==document&&(e.event.add(document,n+"."+e.guid,function(){e.event.trigger(n,null,t,!0)}),e._data(this,n,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,n+"."+e._data(this,n)),!1}}})}(jQuery,window);
!function(e){if("function"==typeof define&&define.amd)define(e);else if("object"==typeof exports)module.exports=e();else{var n=window.Cookies,t=window.Cookies=e();t.noConflict=function(){return window.Cookies=n,t}}}(function(){function e(){for(var e=0,n={};e<arguments.length;e++){var t=arguments[e];for(var o in t)n[o]=t[o]}return n}function n(t){function o(n,r,i){var c;if(arguments.length>1){if(i=e({path:"/"},o.defaults,i),"number"==typeof i.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*i.expires),i.expires=s}try{c=JSON.stringify(r),/^[\{\[]/.test(c)&&(r=c)}catch(a){}return r=encodeURIComponent(String(r)),r=r.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=encodeURIComponent(String(n)),n=n.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),n=n.replace(/[\(\)]/g,escape),document.cookie=[n,"=",r,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}n||(c={});for(var p=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,d=0;d<p.length;d++){var f=p[d].split("="),l=f[0].replace(u,decodeURIComponent),m=f.slice(1).join("=");'"'===m.charAt(0)&&(m=m.slice(1,-1));try{if(m=t&&t(m,l)||m.replace(u,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(a){}if(n===l){c=m;break}n||(c[l]=m)}catch(a){}}return c}return o.get=o.set=o,o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(n,t){o(n,"",e(t,{expires:-1}))},o.withConverter=n,o}return n()});
!function(e){var t,o={className:"autosizejs",append:"",callback:!1,resizeDelay:10,placeholder:!0},i='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',n=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],s=e(i).data("autosize",!0)[0];s.style.lineHeight="99px","99px"===e(s).css("lineHeight")&&n.push("lineHeight"),s.style.lineHeight="",e.fn.autosize=function(i){return this.length?(i=e.extend({},o,i||{}),s.parentNode!==document.body&&e(document.body).append(s),this.each(function(){function o(){var t,o=window.getComputedStyle?window.getComputedStyle(u,null):!1;o?(t=u.getBoundingClientRect().width,0===t&&(t=parseInt(o.width,10)),e.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(e,i){t-=parseInt(o[i],10)})):t=Math.max(p.width(),0),s.style.width=t+"px"}function a(){var a={};if(t=u,s.className=i.className,d=parseInt(p.css("maxHeight"),10),e.each(n,function(e,t){a[t]=p.css(t)}),e(s).css(a),o(),window.chrome){var r=u.style.width;u.style.width="0px";u.offsetWidth;u.style.width=r}}function r(){var n,r;t!==u?a():o(),!u.value&&i.placeholder?s.value=(e(u).attr("placeholder")||"")+i.append:s.value=u.value+i.append,s.style.overflowY=u.style.overflowY,r=parseInt(u.style.height,10),s.scrollTop=0,s.scrollTop=9e4,n=s.scrollTop,d&&n>d?(u.style.overflowY="scroll",n=d):(u.style.overflowY="hidden",c>n&&(n=c)),n+=w,r!==n&&(u.style.height=n+"px",f&&i.callback.call(u,u))}function l(){clearTimeout(h),h=setTimeout(function(){var e=p.width();e!==g&&(g=e,r())},parseInt(i.resizeDelay,10))}var d,c,h,u=this,p=e(u),w=0,f=e.isFunction(i.callback),z={height:u.style.height,overflow:u.style.overflow,overflowY:u.style.overflowY,wordWrap:u.style.wordWrap,resize:u.style.resize},g=p.width();p.data("autosize")||(p.data("autosize",!0),("border-box"===p.css("box-sizing")||"border-box"===p.css("-moz-box-sizing")||"border-box"===p.css("-webkit-box-sizing"))&&(w=p.outerHeight()-p.height()),c=Math.max(parseInt(p.css("minHeight"),10)-w||0,p.height()),p.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word",resize:"none"===p.css("resize")||"vertical"===p.css("resize")?"none":"horizontal"}),"onpropertychange"in u?"oninput"in u?p.on("input.autosize keyup.autosize",r):p.on("propertychange.autosize",function(){"value"===event.propertyName&&r()}):p.on("input.autosize",r),i.resizeDelay!==!1&&e(window).on("resize.autosize",l),p.on("autosize.resize",r),p.on("autosize.resizeIncludeStyle",function(){t=null,r()}),p.on("autosize.destroy",function(){t=null,clearTimeout(h),e(window).off("resize",l),p.off("autosize").off(".autosize").css(z).removeData("autosize")}),r())})):this}}(window.jQuery||window.$);
var fixedCharCodeAt=function(o,e){e=e||0;var a,r,u=o.charCodeAt(e);if(u>=55296&&56319>=u){if(a=u,r=o.charCodeAt(e+1),isNaN(r))throw"High surrogate not followed by low surrogate in fixedCharCodeAt()";return 1024*(a-55296)+(r-56320)+65536}return u>=56320&&57343>=u?!1:u},foldMapping={192:"A",193:"A",194:"A",195:"A",196:"A",197:"A",256:"A",258:"A",260:"A",399:"A",461:"A",478:"A",480:"A",506:"A",512:"A",514:"A",550:"A",570:"A",7424:"A",7680:"A",7840:"A",7842:"A",7844:"A",7846:"A",7848:"A",7850:"A",7852:"A",7854:"A",7856:"A",7858:"A",7860:"A",7862:"A",9398:"A",65313:"A",224:"a",225:"a",226:"a",227:"a",228:"a",229:"a",257:"a",259:"a",261:"a",462:"a",479:"a",481:"a",507:"a",513:"a",515:"a",551:"a",592:"a",601:"a",602:"a",7567:"a",7573:"a",7681:"a",7834:"a",7841:"a",7843:"a",7845:"a",7847:"a",7849:"a",7851:"a",7853:"a",7855:"a",7857:"a",7859:"a",7861:"a",7863:"a",8336:"a",8340:"a",9424:"a",11365:"a",11375:"a",65345:"a",42802:"AA",198:"AE",482:"AE",508:"AE",7425:"AE",42804:"AO",42806:"AU",42808:"AV",42810:"AV",42812:"AY",9372:"(a)",42803:"aa",230:"ae",483:"ae",509:"ae",7426:"ae",42805:"ao",42807:"au",42809:"av",42811:"av",42813:"ay",385:"B",386:"B",579:"B",665:"B",7427:"B",7682:"B",7684:"B",7686:"B",9399:"B",65314:"B",384:"b",387:"b",595:"b",7532:"b",7552:"b",7683:"b",7685:"b",7687:"b",9425:"b",65346:"b",9373:"(b)",199:"C",262:"C",264:"C",266:"C",268:"C",391:"C",571:"C",663:"C",7428:"C",7688:"C",9400:"C",65315:"C",231:"c",263:"c",265:"c",267:"c",269:"c",392:"c",572:"c",597:"c",7689:"c",8580:"c",9426:"c",42814:"c",42815:"c",65347:"c",9374:"(c)",208:"D",270:"D",272:"D",393:"D",394:"D",395:"D",7429:"D",7430:"D",7690:"D",7692:"D",7694:"D",7696:"D",7698:"D",9401:"D",42873:"D",65316:"D",240:"d",271:"d",273:"d",396:"d",545:"d",598:"d",599:"d",7533:"d",7553:"d",7569:"d",7691:"d",7693:"d",7695:"d",7697:"d",7699:"d",9427:"d",42874:"d",65348:"d",452:"DZ",497:"DZ",453:"Dz",498:"Dz",9375:"(d)",568:"db",454:"dz",499:"dz",675:"dz",677:"dz",200:"E",201:"E",202:"E",203:"E",274:"E",276:"E",278:"E",280:"E",282:"E",398:"E",400:"E",516:"E",518:"E",552:"E",582:"E",7431:"E",7700:"E",7702:"E",7704:"E",7706:"E",7708:"E",7864:"E",7866:"E",7868:"E",7870:"E",7872:"E",7874:"E",7876:"E",7878:"E",9402:"E",11387:"E",65317:"E",232:"e",233:"e",234:"e",235:"e",275:"e",277:"e",279:"e",281:"e",283:"e",477:"e",517:"e",519:"e",553:"e",583:"e",600:"e",603:"e",604:"e",605:"e",606:"e",666:"e",7432:"e",7570:"e",7571:"e",7572:"e",7701:"e",7703:"e",7705:"e",7707:"e",7709:"e",7865:"e",7867:"e",7869:"e",7871:"e",7873:"e",7875:"e",7877:"e",7879:"e",8337:"e",9428:"e",11384:"e",65349:"e",9376:"(e)",401:"F",7710:"F",9403:"F",42800:"F",42875:"F",43003:"F",65318:"F",402:"f",7534:"f",7554:"f",7711:"f",7835:"f",9429:"f",42876:"f",65350:"f",9377:"(f)",64256:"ff",64259:"ffi",64260:"ffl",64257:"fi",64258:"fl",284:"G",286:"G",288:"G",290:"G",403:"G",484:"G",485:"G",486:"G",487:"G",500:"G",610:"G",667:"G",7712:"G",9404:"G",42877:"G",42878:"G",65319:"G",285:"g",287:"g",289:"g",291:"g",501:"g",608:"g",609:"g",7543:"g",7545:"g",7555:"g",7713:"g",9430:"g",42879:"g",65351:"g",9378:"(g)",292:"H",294:"H",542:"H",668:"H",7714:"H",7716:"H",7718:"H",7720:"H",7722:"H",9405:"H",11367:"H",11381:"H",65320:"H",293:"h",295:"h",543:"h",613:"h",614:"h",686:"h",687:"h",7715:"h",7717:"h",7719:"h",7721:"h",7723:"h",7830:"h",9431:"h",11368:"h",11382:"h",65352:"h",502:"HV",9379:"(h)",405:"hv",204:"I",205:"I",206:"I",207:"I",296:"I",298:"I",300:"I",302:"I",304:"I",406:"I",407:"I",463:"I",520:"I",522:"I",618:"I",7547:"I",7724:"I",7726:"I",7880:"I",7882:"I",9406:"I",43006:"I",65321:"I",236:"i",237:"i",238:"i",239:"i",297:"i",299:"i",301:"i",303:"i",305:"i",464:"i",521:"i",523:"i",616:"i",7433:"i",7522:"i",7548:"i",7574:"i",7725:"i",7727:"i",7881:"i",7883:"i",8305:"i",9432:"i",65353:"i",306:"IJ",9380:"(i)",307:"ij",308:"J",584:"J",7434:"J",9407:"J",65322:"J",309:"j",496:"j",567:"j",585:"j",607:"j",644:"j",669:"j",9433:"j",11388:"j",65354:"j",9381:"(j)",310:"K",408:"K",488:"K",7435:"K",7728:"K",7730:"K",7732:"K",9408:"K",11369:"K",42816:"K",42818:"K",42820:"K",65323:"K",311:"k",409:"k",489:"k",670:"k",7556:"k",7729:"k",7731:"k",7733:"k",9434:"k",11370:"k",42817:"k",42819:"k",42821:"k",65355:"k",9382:"(k)",313:"L",315:"L",317:"L",319:"L",321:"L",573:"L",671:"L",7436:"L",7734:"L",7736:"L",7738:"L",7740:"L",9409:"L",11360:"L",11362:"L",42822:"L",42824:"L",42880:"L",65324:"L",314:"l",316:"l",318:"l",320:"l",322:"l",410:"l",564:"l",619:"l",620:"l",621:"l",7557:"l",7735:"l",7737:"l",7739:"l",7741:"l",9435:"l",11361:"l",42823:"l",42825:"l",42881:"l",65356:"l",455:"LJ",7930:"LL",456:"Lj",9383:"(l)",457:"lj",7931:"ll",682:"ls",683:"lz",412:"M",7437:"M",7742:"M",7744:"M",7746:"M",9410:"M",11374:"M",43005:"M",43007:"M",65325:"M",623:"m",624:"m",625:"m",7535:"m",7558:"m",7743:"m",7745:"m",7747:"m",9436:"m",65357:"m",9384:"(m)",209:"N",323:"N",325:"N",327:"N",330:"N",413:"N",504:"N",544:"N",628:"N",7438:"N",7748:"N",7750:"N",7752:"N",7754:"N",9411:"N",65326:"N",241:"n",324:"n",326:"n",328:"n",329:"n",331:"n",414:"n",505:"n",565:"n",626:"n",627:"n",7536:"n",7559:"n",7749:"n",7751:"n",7753:"n",7755:"n",8319:"n",9437:"n",65358:"n",458:"NJ",459:"Nj",9385:"(n)",460:"nj",210:"O",211:"O",212:"O",213:"O",214:"O",216:"O",332:"O",334:"O",336:"O",390:"O",415:"O",416:"O",465:"O",490:"O",492:"O",510:"O",524:"O",526:"O",554:"O",556:"O",558:"O",560:"O",7439:"O",7440:"O",7756:"O",7758:"O",7760:"O",7762:"O",7884:"O",7886:"O",7888:"O",7890:"O",7892:"O",7894:"O",7896:"O",7898:"O",7900:"O",7902:"O",7904:"O",7906:"O",9412:"O",42826:"O",42828:"O",65327:"O",242:"o",243:"o",244:"o",245:"o",246:"o",248:"o",333:"o",335:"o",337:"o",417:"o",466:"o",491:"o",493:"o",511:"o",525:"o",527:"o",555:"o",557:"o",559:"o",561:"o",596:"o",629:"o",7446:"o",7447:"o",7575:"o",7757:"o",7759:"o",7761:"o",7763:"o",7885:"o",7887:"o",7889:"o",7891:"o",7893:"o",7895:"o",7897:"o",7899:"o",7901:"o",7903:"o",7905:"o",7907:"o",8338:"o",9438:"o",11386:"o",42827:"o",42829:"o",65359:"o",338:"OE",630:"OE",42830:"OO",546:"OU",7445:"OU",9386:"(o)",339:"oe",7444:"oe",42831:"oo",547:"ou",420:"P",7448:"P",7764:"P",7766:"P",9413:"P",11363:"P",42832:"P",42834:"P",42836:"P",65328:"P",421:"p",7537:"p",7549:"p",7560:"p",7765:"p",7767:"p",9439:"p",42833:"p",42835:"p",42837:"p",43004:"p",65360:"p",9387:"(p)",586:"Q",9414:"Q",42838:"Q",42840:"Q",65329:"Q",312:"q",587:"q",672:"q",9440:"q",42839:"q",42841:"q",65361:"q",9388:"(q)",569:"qp",340:"R",342:"R",344:"R",528:"R",530:"R",588:"R",640:"R",641:"R",7449:"R",7450:"R",7768:"R",7770:"R",7772:"R",7774:"R",9415:"R",11364:"R",42842:"R",42882:"R",65330:"R",341:"r",343:"r",345:"r",529:"r",531:"r",589:"r",636:"r",637:"r",638:"r",639:"r",7523:"r",7538:"r",7539:"r",7561:"r",7769:"r",7771:"r",7773:"r",7775:"r",9441:"r",42843:"r",42883:"r",65362:"r",9389:"(r)",346:"S",348:"S",350:"S",352:"S",536:"S",7776:"S",7778:"S",7780:"S",7782:"S",7784:"S",9416:"S",42801:"S",42885:"S",65331:"S",347:"s",349:"s",351:"s",353:"s",383:"s",537:"s",575:"s",642:"s",7540:"s",7562:"s",7777:"s",7779:"s",7781:"s",7783:"s",7785:"s",7836:"s",7837:"s",9442:"s",42884:"s",65363:"s",7838:"SS",9390:"(s)",223:"ss",64262:"st",354:"T",356:"T",358:"T",428:"T",430:"T",538:"T",574:"T",7451:"T",7786:"T",7788:"T",7790:"T",7792:"T",9417:"T",42886:"T",65332:"T",355:"t",357:"t",359:"t",427:"t",429:"t",539:"t",566:"t",647:"t",648:"t",7541:"t",7787:"t",7789:"t",7791:"t",7793:"t",7831:"t",9443:"t",11366:"t",65364:"t",222:"TH",42854:"TH",42792:"TZ",9391:"(t)",680:"tc",254:"th",7546:"th",42855:"th",678:"ts",42793:"tz",217:"U",218:"U",219:"U",220:"U",360:"U",362:"U",364:"U",366:"U",368:"U",370:"U",431:"U",467:"U",469:"U",471:"U",473:"U",475:"U",532:"U",534:"U",580:"U",7452:"U",7550:"U",7794:"U",7796:"U",7798:"U",7800:"U",7802:"U",7908:"U",7910:"U",7912:"U",7914:"U",7916:"U",7918:"U",7920:"U",9418:"U",65333:"U",249:"u",250:"u",251:"u",252:"u",361:"u",363:"u",365:"u",367:"u",369:"u",371:"u",432:"u",468:"u",470:"u",472:"u",474:"u",476:"u",533:"u",535:"u",649:"u",7524:"u",7577:"u",7795:"u",7797:"u",7799:"u",7801:"u",7803:"u",7909:"u",7911:"u",7913:"u",7915:"u",7917:"u",7919:"u",7921:"u",9444:"u",65365:"u",9392:"(u)",7531:"ue",434:"V",581:"V",7456:"V",7804:"V",7806:"V",7932:"V",9419:"V",42846:"V",42856:"V",65334:"V",651:"v",652:"v",7525:"v",7564:"v",7805:"v",7807:"v",9445:"v",11377:"v",11380:"v",42847:"v",65366:"v",42848:"VY",9393:"(v)",42849:"vy",372:"W",503:"W",7457:"W",7808:"W",7810:"W",7812:"W",7814:"W",7816:"W",9420:"W",11378:"W",65335:"W",373:"w",447:"w",653:"w",7809:"w",7811:"w",7813:"w",7815:"w",7817:"w",7832:"w",9446:"w",11379:"w",65367:"w",9394:"(w)",7818:"X",7820:"X",9421:"X",65336:"X",7565:"x",7819:"x",7821:"x",8339:"x",9447:"x",65368:"x",9395:"(x)",221:"Y",374:"Y",376:"Y",435:"Y",562:"Y",590:"Y",655:"Y",7822:"Y",7922:"Y",7924:"Y",7926:"Y",7928:"Y",7934:"Y",9422:"Y",65337:"Y",253:"y",255:"y",375:"y",436:"y",563:"y",591:"y",654:"y",7823:"y",7833:"y",7923:"y",7925:"y",7927:"y",7929:"y",7935:"y",9448:"y",65369:"y",9396:"(y)",377:"Z",379:"Z",381:"Z",437:"Z",540:"Z",548:"Z",7458:"Z",7824:"Z",7826:"Z",7828:"Z",9423:"Z",11371:"Z",42850:"Z",65338:"Z",378:"z",380:"z",382:"z",438:"z",541:"z",549:"z",576:"z",656:"z",657:"z",7542:"z",7566:"z",7825:"z",7827:"z",7829:"z",9449:"z",11372:"z",42851:"z",65370:"z",9397:"(z)",8304:"0",8320:"0",9450:"0",9471:"0",65296:"0",185:"1",8321:"1",9312:"1",9461:"1",10102:"1",10112:"1",10122:"1",65297:"1",9352:"1.",9332:"(1)",178:"2",8322:"2",9313:"2",9462:"2",10103:"2",10113:"2",10123:"2",65298:"2",9353:"2.",9333:"(2)",179:"3",8323:"3",9314:"3",9463:"3",10104:"3",10114:"3",10124:"3",65299:"3",9354:"3.",9334:"(3)",8308:"4",8324:"4",9315:"4",9464:"4",10105:"4",10115:"4",10125:"4",65300:"4",9355:"4.",9335:"(4)",8309:"5",8325:"5",9316:"5",9465:"5",10106:"5",10116:"5",10126:"5",65301:"5",9356:"5.",9336:"(5)",8310:"6",8326:"6",9317:"6",9466:"6",10107:"6",10117:"6",10127:"6",65302:"6",9357:"6.",9337:"(6)",8311:"7",8327:"7",9318:"7",9467:"7",10108:"7",10118:"7",10128:"7",65303:"7",9358:"7.",9338:"(7)",8312:"8",8328:"8",9319:"8",9468:"8",10109:"8",10119:"8",10129:"8",65304:"8",9359:"8.",9339:"(8)",8313:"9",8329:"9",9320:"9",9469:"9",10110:"9",10120:"9",10130:"9",65305:"9",9360:"9.",9340:"(9)",9321:"10",9470:"10",10111:"10",10121:"10",10131:"10",9361:"10.",9341:"(10)",9322:"11",9451:"11",9362:"11.",9342:"(11)",9323:"12",9452:"12",9363:"12.",9343:"(12)",9324:"13",9453:"13",9364:"13.",9344:"(13)",9325:"14",9454:"14",9365:"14.",9345:"(14)",9326:"15",9455:"15",9366:"15.",9346:"(15)",9327:"16",9456:"16",9367:"16.",9347:"(16)",9328:"17",9457:"17",9368:"17.",9348:"(17)",9329:"18",9458:"18",9369:"18.",9349:"(18)",9330:"19",9459:"19",9370:"19.",9350:"(19)",9331:"20",9460:"20",9371:"20.",9351:"(20)",171:'"',187:'"',8220:'"',8221:'"',8222:'"',8243:'"',8246:'"',10077:'"',10078:'"',10094:'"',10095:'"',65282:'"',8216:"'",8217:"'",8218:"'",8219:"'",8242:"'",8245:"'",8249:"'",8250:"'",10075:"'",10076:"'",65287:"'",8208:"-",8209:"-",8210:"-",8211:"-",8212:"-",8315:"-",8331:"-",65293:"-",8261:"[",10098:"[",65339:"[",8262:"]",10099:"]",65341:"]",8317:"(",8333:"(",10088:"(",10090:"(",65288:"(",11816:"((",8318:")",8334:")",10089:")",10091:")",65289:")",11817:"))",10092:"<",10096:"<",65308:"<",10093:">",10097:">",65310:">",10100:"{",65371:"{",10101:"}",65373:"}",8314:"+",8330:"+",65291:"+",8316:"=",8332:"=",65309:"=",65281:"!",8252:"!!",8265:"!?",65283:"#",65284:"$",8274:"%",65285:"%",65286:"&",8270:"*",65290:"*",65292:",",65294:".",8260:"/",65295:"/",65306:":",8271:";",65307:";",65311:"?",8263:"??",8264:"?!",65312:"@",65340:"\\",8248:"^",65342:"^",65343:"_",8275:"~",65374:"~"},foldReplaceChar=function(o,e,a){var r=foldMapping[o];return r?r:e?a:""},foldToAscii=function(o,e){if(null===o)return"";if("number"==typeof o)return""+o;if("string"!=typeof o)throw"Only objects of the types string, number and null can be folded";for(var a="undefined"!=typeof e&&null!==e,r="",u=0;u<o.length;u++){var t=fixedCharCodeAt(o,u);t&&(r+=128>t?String.fromCharCode(t):foldReplaceChar(t,a,e))}return r};
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return Pn.apply(null,arguments)}function e(t){Pn=t}function n(t){return"[object Array]"===Object.prototype.toString.call(t)}function i(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function r(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a(t,e){for(var n in e)s(e,n)&&(t[n]=e[n]);return s(e,"toString")&&(t.toString=e.toString),s(e,"valueOf")&&(t.valueOf=e.valueOf),t}function o(t,e,n,i){return Ot(t,e,n,i,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function d(t){return null==t._pf&&(t._pf=u()),t._pf}function l(t){if(null==t._isValid){var e=d(t);t._isValid=!(isNaN(t._d.getTime())||!(e.overflow<0)||e.empty||e.invalidMonth||e.invalidWeekday||e.nullInput||e.invalidFormat||e.userInvalidated),t._strict&&(t._isValid=t._isValid&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour)}return t._isValid}function c(t){var e=o(NaN);return null!=t?a(d(e),t):d(e).userInvalidated=!0,e}function f(t,e){var n,i,r;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=d(e)),"undefined"!=typeof e._locale&&(t._locale=e._locale),Hn.length>0)for(n in Hn)i=Hn[n],r=e[i],"undefined"!=typeof r&&(t[i]=r);return t}function h(e){f(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),Ln===!1&&(Ln=!0,t.updateOffset(this),Ln=!1)}function m(t){return t instanceof h||null!=t&&null!=t._isAMomentObject}function _(t){return 0>t?Math.ceil(t):Math.floor(t)}function y(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=_(e)),n}function p(t,e,n){var i,r=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),a=0;for(i=0;r>i;i++)(n&&t[i]!==e[i]||!n&&y(t[i])!==y(e[i]))&&a++;return a+s}function g(){}function D(t){return t?t.toLowerCase().replace("_","-"):t}function v(t){for(var e,n,i,r,s=0;s<t.length;){for(r=D(t[s]).split("-"),e=r.length,n=D(t[s+1]),n=n?n.split("-"):null;e>0;){if(i=M(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&p(r,n,!0)>=e-1)break;e--}s++}return null}function M(t){var e=null;if(!In[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=xn._abbr,require("./locale/"+t),Y(e)}catch(n){}return In[t]}function Y(t,e){var n;return t&&(n="undefined"==typeof e?S(t):w(t,e),n&&(xn=n)),xn._abbr}function w(t,e){return null!==e?(e.abbr=t,In[t]=In[t]||new g,In[t].set(e),Y(t),In[t]):(delete In[t],null)}function S(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return xn;if(!n(t)){if(e=M(t))return e;t=[t]}return v(t)}function k(t,e){var n=t.toLowerCase();An[n]=An[n+"s"]=An[e]=t}function T(t){return"string"==typeof t?An[t]||An[t.toLowerCase()]:void 0}function b(t){var e,n,i={};for(n in t)s(t,n)&&(e=T(n),e&&(i[e]=t[n]));return i}function O(e,n){return function(i){return null!=i?(W(this,e,i),t.updateOffset(this,n),this):U(this,e)}}function U(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function W(t,e,n){return t._d["set"+(t._isUTC?"UTC":"")+e](n)}function C(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if(t=T(t),"function"==typeof this[t])return this[t](e);return this}function G(t,e,n){var i=""+Math.abs(t),r=e-i.length,s=t>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+i}function F(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(jn[t]=r),e&&(jn[e[0]]=function(){return G(r.apply(this,arguments),e[1],e[2])}),n&&(jn[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function P(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function x(t){var e,n,i=t.match(zn);for(e=0,n=i.length;n>e;e++)jn[i[e]]?i[e]=jn[i[e]]:i[e]=P(i[e]);return function(r){var s="";for(e=0;n>e;e++)s+=i[e]instanceof Function?i[e].call(r,t):i[e];return s}}function H(t,e){return t.isValid()?(e=L(e,t.localeData()),Zn[e]=Zn[e]||x(e),Zn[e](t)):t.localeData().invalidDate()}function L(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Nn.lastIndex=0;i>=0&&Nn.test(t);)t=t.replace(Nn,n),Nn.lastIndex=0,i-=1;return t}function I(t){return"function"==typeof t&&"[object Function]"===Object.prototype.toString.call(t)}function A(t,e,n){ri[t]=I(e)?e:function(t){return t&&n?n:e}}function z(t,e){return s(ri,t)?ri[t](e._strict,e._locale):new RegExp(N(t))}function N(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=y(t)}),n=0;n<t.length;n++)si[t[n]]=i}function j(t,e){Z(t,function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)})}function E(t,e,n){null!=e&&s(si,t)&&si[t](e,n._a,n,t)}function V(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function q(t){return this._months[t.month()]}function J(t){return this._monthsShort[t.month()]}function $(t,e,n){var i,r,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=o([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function R(t,e){var n;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),V(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function B(e){return null!=e?(R(this,e),t.updateOffset(this,!0),this):U(this,"Month")}function Q(){return V(this.year(),this.month())}function X(t){var e,n=t._a;return n&&-2===d(t).overflow&&(e=n[oi]<0||n[oi]>11?oi:n[ui]<1||n[ui]>V(n[ai],n[oi])?ui:n[di]<0||n[di]>24||24===n[di]&&(0!==n[li]||0!==n[ci]||0!==n[fi])?di:n[li]<0||n[li]>59?li:n[ci]<0||n[ci]>59?ci:n[fi]<0||n[fi]>999?fi:-1,d(t)._overflowDayOfYear&&(ai>e||e>ui)&&(e=ui),d(t).overflow=e),t}function K(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function tt(t,e){var n=!0;return a(function(){return n&&(K(t+"\n"+(new Error).stack),n=!1),e.apply(this,arguments)},e)}function et(t,e){_i[t]||(K(e),_i[t]=!0)}function nt(t){var e,n,i=t._i,r=yi.exec(i);if(r){for(d(t).iso=!0,e=0,n=pi.length;n>e;e++)if(pi[e][1].exec(i)){t._f=pi[e][0];break}for(e=0,n=gi.length;n>e;e++)if(gi[e][1].exec(i)){t._f+=(r[6]||" ")+gi[e][0];break}i.match(ei)&&(t._f+="Z"),Mt(t)}else t._isValid=!1}function it(e){var n=Di.exec(e._i);return null!==n?void(e._d=new Date(+n[1])):(nt(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function rt(t,e,n,i,r,s,a){var o=new Date(t,e,n,i,r,s,a);return 1970>t&&o.setFullYear(t),o}function st(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function at(t){return ot(t)?366:365}function ot(t){return t%4===0&&t%100!==0||t%400===0}function ut(){return ot(this.year())}function dt(t,e,n){var i,r=n-e,s=n-t.day();return s>r&&(s-=7),r-7>s&&(s+=7),i=Ut(t).add(s,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function lt(t){return dt(t,this._week.dow,this._week.doy).week}function ct(){return this._week.dow}function ft(){return this._week.doy}function ht(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function mt(t){var e=dt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function _t(t,e,n,i,r){var s,a=6+r-i,o=st(t,0,1+a),u=o.getUTCDay();return r>u&&(u+=7),n=null!=n?1*n:r,s=1+a+7*(e-1)-u+n,{year:s>0?t:t-1,dayOfYear:s>0?s:at(t-1)+s}}function yt(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function pt(t,e,n){return null!=t?t:null!=e?e:n}function gt(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Dt(t){var e,n,i,r,s=[];if(!t._d){for(i=gt(t),t._w&&null==t._a[ui]&&null==t._a[oi]&&vt(t),t._dayOfYear&&(r=pt(t._a[ai],i[ai]),t._dayOfYear>at(r)&&(d(t)._overflowDayOfYear=!0),n=st(r,0,t._dayOfYear),t._a[oi]=n.getUTCMonth(),t._a[ui]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;7>e;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[di]&&0===t._a[li]&&0===t._a[ci]&&0===t._a[fi]&&(t._nextDay=!0,t._a[di]=0),t._d=(t._useUTC?st:rt).apply(null,s),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[di]=24)}}function vt(t){var e,n,i,r,s,a,o;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(s=1,a=4,n=pt(e.GG,t._a[ai],dt(Ut(),1,4).year),i=pt(e.W,1),r=pt(e.E,1)):(s=t._locale._week.dow,a=t._locale._week.doy,n=pt(e.gg,t._a[ai],dt(Ut(),s,a).year),i=pt(e.w,1),null!=e.d?(r=e.d,s>r&&++i):r=null!=e.e?e.e+s:s),o=_t(n,i,r,a,s),t._a[ai]=o.year,t._dayOfYear=o.dayOfYear}function Mt(e){if(e._f===t.ISO_8601)return void nt(e);e._a=[],d(e).empty=!0;var n,i,r,s,a,o=""+e._i,u=o.length,l=0;for(r=L(e._f,e._locale).match(zn)||[],n=0;n<r.length;n++)s=r[n],i=(o.match(z(s,e))||[])[0],i&&(a=o.substr(0,o.indexOf(i)),a.length>0&&d(e).unusedInput.push(a),o=o.slice(o.indexOf(i)+i.length),l+=i.length),jn[s]?(i?d(e).empty=!1:d(e).unusedTokens.push(s),E(s,i,e)):e._strict&&!i&&d(e).unusedTokens.push(s);d(e).charsLeftOver=u-l,o.length>0&&d(e).unusedInput.push(o),d(e).bigHour===!0&&e._a[di]<=12&&e._a[di]>0&&(d(e).bigHour=void 0),e._a[di]=Yt(e._locale,e._a[di],e._meridiem),Dt(e),X(e)}function Yt(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&12>e&&(e+=12),i||12!==e||(e=0),e):e}function wt(t){var e,n,i,r,s;if(0===t._f.length)return d(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)s=0,e=f({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],Mt(e),l(e)&&(s+=d(e).charsLeftOver,s+=10*d(e).unusedTokens.length,d(e).score=s,(null==i||i>s)&&(i=s,n=e));a(t,n||e)}function St(t){if(!t._d){var e=b(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],Dt(t)}}function kt(t){var e=new h(X(Tt(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function Tt(t){var e=t._i,r=t._f;return t._locale=t._locale||S(t._l),null===e||void 0===r&&""===e?c({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),m(e)?new h(X(e)):(n(r)?wt(t):r?Mt(t):i(e)?t._d=e:bt(t),t))}function bt(e){var s=e._i;void 0===s?e._d=new Date:i(s)?e._d=new Date(+s):"string"==typeof s?it(e):n(s)?(e._a=r(s.slice(0),function(t){return parseInt(t,10)}),Dt(e)):"object"==typeof s?St(e):"number"==typeof s?e._d=new Date(s):t.createFromInputFallback(e)}function Ot(t,e,n,i,r){var s={};return"boolean"==typeof n&&(i=n,n=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=r,s._l=n,s._i=t,s._f=e,s._strict=i,kt(s)}function Ut(t,e,n,i){return Ot(t,e,n,i,!1)}function Wt(t,e){var i,r;if(1===e.length&&n(e[0])&&(e=e[0]),!e.length)return Ut();for(i=e[0],r=1;r<e.length;++r)(!e[r].isValid()||e[r][t](i))&&(i=e[r]);return i}function Ct(){var t=[].slice.call(arguments,0);return Wt("isBefore",t)}function Gt(){var t=[].slice.call(arguments,0);return Wt("isAfter",t)}function Ft(t){var e=b(t),n=e.year||0,i=e.quarter||0,r=e.month||0,s=e.week||0,a=e.day||0,o=e.hour||0,u=e.minute||0,d=e.second||0,l=e.millisecond||0;this._milliseconds=+l+1e3*d+6e4*u+36e5*o,this._days=+a+7*s,this._months=+r+3*i+12*n,this._data={},this._locale=S(),this._bubble()}function Pt(t){return t instanceof Ft}function xt(t,e){F(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+G(~~(t/60),2)+e+G(~~t%60,2)})}function Ht(t){var e=(t||"").match(ei)||[],n=e[e.length-1]||[],i=(n+"").match(Si)||["-",0,0],r=+(60*i[1])+y(i[2]);return"+"===i[0]?r:-r}function Lt(e,n){var r,s;return n._isUTC?(r=n.clone(),s=(m(e)||i(e)?+e:+Ut(e))-+r,r._d.setTime(+r._d+s),t.updateOffset(r,!1),r):Ut(e).local()}function It(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function At(e,n){var i,r=this._offset||0;return null!=e?("string"==typeof e&&(e=Ht(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&n&&(i=It(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?ee(this,Bt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:It(this)}function zt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Nt(t){return this.utcOffset(0,t)}function Zt(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(It(this),"m")),this}function jt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ht(this._i)),this}function Et(t){return t=t?Ut(t).utcOffset():0,(this.utcOffset()-t)%60===0}function Vt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function qt(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var t={};if(f(t,this),t=Tt(t),t._a){var e=t._isUTC?o(t._a):Ut(t._a);this._isDSTShifted=this.isValid()&&p(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Jt(){return!this._isUTC}function $t(){return this._isUTC}function Rt(){return this._isUTC&&0===this._offset}function Bt(t,e){var n,i,r,a=t,o=null;return Pt(t)?a={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(a={},e?a[e]=t:a.milliseconds=t):(o=ki.exec(t))?(n="-"===o[1]?-1:1,a={y:0,d:y(o[ui])*n,h:y(o[di])*n,m:y(o[li])*n,s:y(o[ci])*n,ms:y(o[fi])*n}):(o=Ti.exec(t))?(n="-"===o[1]?-1:1,a={y:Qt(o[2],n),M:Qt(o[3],n),d:Qt(o[4],n),h:Qt(o[5],n),m:Qt(o[6],n),s:Qt(o[7],n),w:Qt(o[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(r=Kt(Ut(a.from),Ut(a.to)),a={},a.ms=r.milliseconds,a.M=r.months),i=new Ft(a),Pt(t)&&s(t,"_locale")&&(i._locale=t._locale),i}function Qt(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Xt(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Kt(t,e){var n;return e=Lt(e,t),t.isBefore(e)?n=Xt(t,e):(n=Xt(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function te(t,e){return function(n,i){var r,s;return null===i||isNaN(+i)||(et(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),s=n,n=i,i=s),n="string"==typeof n?+n:n,r=Bt(n,i),ee(this,r,t),this}}function ee(e,n,i,r){var s=n._milliseconds,a=n._days,o=n._months;r=null==r?!0:r,s&&e._d.setTime(+e._d+s*i),a&&W(e,"Date",U(e,"Date")+a*i),o&&R(e,U(e,"Month")+o*i),r&&t.updateOffset(e,a||o)}function ne(t,e){var n=t||Ut(),i=Lt(n,this).startOf("day"),r=this.diff(i,"days",!0),s=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(e&&e[s]||this.localeData().calendar(s,this,Ut(n)))}function ie(){return new h(this)}function re(t,e){var n;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=m(t)?t:Ut(t),+this>+t):(n=m(t)?+t:+Ut(t),n<+this.clone().startOf(e))}function se(t,e){var n;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=m(t)?t:Ut(t),+t>+this):(n=m(t)?+t:+Ut(t),+this.clone().endOf(e)<n)}function ae(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)}function oe(t,e){var n;return e=T(e||"millisecond"),"millisecond"===e?(t=m(t)?t:Ut(t),+this===+t):(n=+Ut(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))}function ue(t,e,n){var i,r,s=Lt(t,this),a=6e4*(s.utcOffset()-this.utcOffset());return e=T(e),"year"===e||"month"===e||"quarter"===e?(r=de(this,s),"quarter"===e?r/=3:"year"===e&&(r/=12)):(i=this-s,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-a)/864e5:"week"===e?(i-a)/6048e5:i),n?r:_(r)}function de(t,e){var n,i,r=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(r,"months");return 0>e-s?(n=t.clone().add(r-1,"months"),i=(e-s)/(s-n)):(n=t.clone().add(r+1,"months"),i=(e-s)/(n-s)),-(r+i)}function le(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ce(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():H(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):H(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function fe(e){var n=H(this,e||t.defaultFormat);return this.localeData().postformat(n)}function he(t,e){return this.isValid()?Bt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function me(t){return this.from(Ut(),t)}function _e(t,e){return this.isValid()?Bt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function ye(t){return this.to(Ut(),t)}function pe(t){var e;return void 0===t?this._locale._abbr:(e=S(t),null!=e&&(this._locale=e),this)}function ge(){return this._locale}function De(t){switch(t=T(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function ve(t){return t=T(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function Me(){return+this._d-6e4*(this._offset||0)}function Ye(){return Math.floor(+this/1e3)}function we(){return this._offset?new Date(+this):this._d}function Se(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function ke(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Te(){return l(this)}function be(){return a({},d(this))}function Oe(){return d(this).overflow}function Ue(t,e){F(0,[t,t.length],0,e)}function We(t,e,n){return dt(Ut([t,11,31+e-n]),e,n).week}function Ce(t){var e=dt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function Ge(t){var e=dt(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Fe(){return We(this.year(),1,4)}function Pe(){var t=this.localeData()._week;return We(this.year(),t.dow,t.doy)}function xe(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function He(t,e){return"string"!=typeof t?t:isNaN(t)?(t=e.weekdaysParse(t),"number"==typeof t?t:null):parseInt(t,10)}function Le(t){return this._weekdays[t.day()]}function Ie(t){return this._weekdaysShort[t.day()]}function Ae(t){return this._weekdaysMin[t.day()]}function ze(t){var e,n,i;for(this._weekdaysParse=this._weekdaysParse||[],e=0;7>e;e++)if(this._weekdaysParse[e]||(n=Ut([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function Ne(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=He(t,this.localeData()),this.add(t-e,"d")):e}function Ze(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function je(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function Ee(t,e){F(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Ve(t,e){return e._meridiemParse}function qe(t){return"p"===(t+"").toLowerCase().charAt(0)}function Je(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function $e(t,e){e[fi]=y(1e3*("0."+t))}function Re(){return this._isUTC?"UTC":""}function Be(){return this._isUTC?"Coordinated Universal Time":""}function Qe(t){return Ut(1e3*t)}function Xe(){return Ut.apply(null,arguments).parseZone()}function Ke(t,e,n){var i=this._calendar[t];return"function"==typeof i?i.call(e,n):i}function tn(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function en(){return this._invalidDate}function nn(t){return this._ordinal.replace("%d",t)}function rn(t){return t}function sn(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)}function an(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)}function on(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function un(t,e,n,i){var r=S(),s=o().set(i,e);return r[n](s,t)}function dn(t,e,n,i,r){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return un(t,e,n,r);var s,a=[];for(s=0;i>s;s++)a[s]=un(t,s,n,r);return a}function ln(t,e){return dn(t,e,"months",12,"month")}function cn(t,e){return dn(t,e,"monthsShort",12,"month")}function fn(t,e){return dn(t,e,"weekdays",7,"day")}function hn(t,e){return dn(t,e,"weekdaysShort",7,"day")}function mn(t,e){return dn(t,e,"weekdaysMin",7,"day")}function _n(){var t=this._data;return this._milliseconds=Ri(this._milliseconds),this._days=Ri(this._days),this._months=Ri(this._months),t.milliseconds=Ri(t.milliseconds),t.seconds=Ri(t.seconds),t.minutes=Ri(t.minutes),t.hours=Ri(t.hours),t.months=Ri(t.months),t.years=Ri(t.years),this}function yn(t,e,n,i){var r=Bt(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function pn(t,e){return yn(this,t,e,1)}function gn(t,e){return yn(this,t,e,-1)}function Dn(t){return 0>t?Math.floor(t):Math.ceil(t)}function vn(){var t,e,n,i,r,s=this._milliseconds,a=this._days,o=this._months,u=this._data;return s>=0&&a>=0&&o>=0||0>=s&&0>=a&&0>=o||(s+=864e5*Dn(Yn(o)+a),a=0,o=0),u.milliseconds=s%1e3,t=_(s/1e3),u.seconds=t%60,e=_(t/60),u.minutes=e%60,n=_(e/60),u.hours=n%24,a+=_(n/24),r=_(Mn(a)),o+=r,a-=Dn(Yn(r)),i=_(o/12),o%=12,u.days=a,u.months=o,u.years=i,this}function Mn(t){return 4800*t/146097}function Yn(t){return 146097*t/4800}function wn(t){var e,n,i=this._milliseconds;if(t=T(t),"month"===t||"year"===t)return e=this._days+i/864e5,n=this._months+Mn(e),"month"===t?n:n/12;switch(e=this._days+Math.round(Yn(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 1440*e+i/6e4;case"second":return 86400*e+i/1e3;case"millisecond":return Math.floor(864e5*e)+i;default:throw new Error("Unknown unit "+t)}}function Sn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)}function kn(t){return function(){return this.as(t)}}function Tn(t){return t=T(t),this[t+"s"]()}function bn(t){return function(){return this._data[t]}}function On(){return _(this.days()/7)}function Un(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function Wn(t,e,n){var i=Bt(t).abs(),r=cr(i.as("s")),s=cr(i.as("m")),a=cr(i.as("h")),o=cr(i.as("d")),u=cr(i.as("M")),d=cr(i.as("y")),l=r<fr.s&&["s",r]||1===s&&["m"]||s<fr.m&&["mm",s]||1===a&&["h"]||a<fr.h&&["hh",a]||1===o&&["d"]||o<fr.d&&["dd",o]||1===u&&["M"]||u<fr.M&&["MM",u]||1===d&&["y"]||["yy",d];return l[2]=e,l[3]=+t>0,l[4]=n,Un.apply(null,l)}function Cn(t,e){return void 0===fr[t]?!1:void 0===e?fr[t]:(fr[t]=e,!0)}function Gn(t){var e=this.localeData(),n=Wn(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function Fn(){var t,e,n,i=hr(this._milliseconds)/1e3,r=hr(this._days),s=hr(this._months);t=_(i/60),e=_(t/60),i%=60,t%=60,n=_(s/12),s%=12;var a=n,o=s,u=r,d=e,l=t,c=i,f=this.asSeconds();return f?(0>f?"-":"")+"P"+(a?a+"Y":"")+(o?o+"M":"")+(u?u+"D":"")+(d||l||c?"T":"")+(d?d+"H":"")+(l?l+"M":"")+(c?c+"S":""):"P0D"}var Pn,xn,Hn=t.momentProperties=[],Ln=!1,In={},An={},zn=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Nn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Zn={},jn={},En=/\d/,Vn=/\d\d/,qn=/\d{3}/,Jn=/\d{4}/,$n=/[+-]?\d{6}/,Rn=/\d\d?/,Bn=/\d{1,3}/,Qn=/\d{1,4}/,Xn=/[+-]?\d{1,6}/,Kn=/\d+/,ti=/[+-]?\d+/,ei=/Z|[+-]\d\d:?\d\d/gi,ni=/[+-]?\d+(\.\d{1,3})?/,ii=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ri={},si={},ai=0,oi=1,ui=2,di=3,li=4,ci=5,fi=6;F("M",["MM",2],"Mo",function(){return this.month()+1}),F("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),F("MMMM",0,0,function(t){return this.localeData().months(this,t)}),k("month","M"),A("M",Rn),A("MM",Rn,Vn),A("MMM",ii),A("MMMM",ii),Z(["M","MM"],function(t,e){e[oi]=y(t)-1}),Z(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[oi]=r:d(n).invalidMonth=t});var hi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),mi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),_i={};t.suppressDeprecationWarnings=!1;var yi=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],gi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Di=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=tt("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),F(0,["YY",2],0,function(){return this.year()%100}),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),k("year","y"),A("Y",ti),A("YY",Rn,Vn),A("YYYY",Qn,Jn),A("YYYYY",Xn,$n),A("YYYYYY",Xn,$n),Z(["YYYYY","YYYYYY"],ai),Z("YYYY",function(e,n){n[ai]=2===e.length?t.parseTwoDigitYear(e):y(e)}),Z("YY",function(e,n){n[ai]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(t){return y(t)+(y(t)>68?1900:2e3)};var vi=O("FullYear",!1);F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),k("week","w"),k("isoWeek","W"),A("w",Rn),A("ww",Rn,Vn),A("W",Rn),A("WW",Rn,Vn),j(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=y(t)});var Mi={dow:0,doy:6};F("DDD",["DDDD",3],"DDDo","dayOfYear"),k("dayOfYear","DDD"),A("DDD",Bn),A("DDDD",qn),Z(["DDD","DDDD"],function(t,e,n){n._dayOfYear=y(t)}),t.ISO_8601=function(){};var Yi=tt("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=Ut.apply(null,arguments);return this>t?this:t}),wi=tt("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=Ut.apply(null,arguments);return t>this?this:t});xt("Z",":"),xt("ZZ",""),A("Z",ei),A("ZZ",ei),Z(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Ht(t)});var Si=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var ki=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ti=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Bt.fn=Ft.prototype;var bi=te(1,"add"),Oi=te(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ui=tt("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});F(0,["gg",2],0,function(){return this.weekYear()%100}),F(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ue("gggg","weekYear"),Ue("ggggg","weekYear"),Ue("GGGG","isoWeekYear"),Ue("GGGGG","isoWeekYear"),k("weekYear","gg"),k("isoWeekYear","GG"),A("G",ti),A("g",ti),A("GG",Rn,Vn),A("gg",Rn,Vn),A("GGGG",Qn,Jn),A("gggg",Qn,Jn),A("GGGGG",Xn,$n),A("ggggg",Xn,$n),j(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=y(t)}),j(["gg","GG"],function(e,n,i,r){n[r]=t.parseTwoDigitYear(e)}),F("Q",0,0,"quarter"),k("quarter","Q"),A("Q",En),Z("Q",function(t,e){e[oi]=3*(y(t)-1)}),F("D",["DD",2],"Do","date"),k("date","D"),A("D",Rn),A("DD",Rn,Vn),A("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),Z(["D","DD"],ui),Z("Do",function(t,e){e[ui]=y(t.match(Rn)[0],10)});var Wi=O("Date",!0);F("d",0,"do","day"),F("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),F("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),F("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),k("day","d"),k("weekday","e"),k("isoWeekday","E"),A("d",Rn),A("e",Rn),A("E",Rn),A("dd",ii),A("ddd",ii),A("dddd",ii),j(["dd","ddd","dddd"],function(t,e,n){var i=n._locale.weekdaysParse(t);null!=i?e.d=i:d(n).invalidWeekday=t}),j(["d","e","E"],function(t,e,n,i){e[i]=y(t)});var Ci="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Gi="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Fi="Su_Mo_Tu_We_Th_Fr_Sa".split("_");F("H",["HH",2],0,"hour"),F("h",["hh",2],0,function(){return this.hours()%12||12}),Ee("a",!0),Ee("A",!1),k("hour","h"),A("a",Ve),A("A",Ve),A("H",Rn),A("h",Rn),A("HH",Rn,Vn),A("hh",Rn,Vn),Z(["H","HH"],di),Z(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),Z(["h","hh"],function(t,e,n){e[di]=y(t),d(n).bigHour=!0});var Pi=/[ap]\.?m?\.?/i,xi=O("Hours",!0);F("m",["mm",2],0,"minute"),k("minute","m"),A("m",Rn),A("mm",Rn,Vn),Z(["m","mm"],li);var Hi=O("Minutes",!1);F("s",["ss",2],0,"second"),k("second","s"),A("s",Rn),A("ss",Rn,Vn),Z(["s","ss"],ci);var Li=O("Seconds",!1);F("S",0,0,function(){return~~(this.millisecond()/100)}),F(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,function(){return 10*this.millisecond()}),F(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),F(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),F(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),F(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),F(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),k("millisecond","ms"),A("S",Bn,En),A("SS",Bn,Vn),A("SSS",Bn,qn);var Ii;for(Ii="SSSS";Ii.length<=9;Ii+="S")A(Ii,Kn);for(Ii="S";Ii.length<=9;Ii+="S")Z(Ii,$e);var Ai=O("Milliseconds",!1);F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var zi=h.prototype;zi.add=bi,zi.calendar=ne,zi.clone=ie,zi.diff=ue,zi.endOf=ve,zi.format=fe,zi.from=he,zi.fromNow=me,zi.to=_e,zi.toNow=ye,zi.get=C,zi.invalidAt=Oe,zi.isAfter=re,zi.isBefore=se,zi.isBetween=ae,zi.isSame=oe,zi.isValid=Te,zi.lang=Ui,zi.locale=pe,zi.localeData=ge,zi.max=wi,zi.min=Yi,zi.parsingFlags=be,zi.set=C,zi.startOf=De,zi.subtract=Oi,zi.toArray=Se,zi.toObject=ke,zi.toDate=we,zi.toISOString=ce,zi.toJSON=ce,zi.toString=le,zi.unix=Ye,zi.valueOf=Me,zi.year=vi,zi.isLeapYear=ut,zi.weekYear=Ce,zi.isoWeekYear=Ge,zi.quarter=zi.quarters=xe,zi.month=B,zi.daysInMonth=Q,zi.week=zi.weeks=ht,zi.isoWeek=zi.isoWeeks=mt,zi.weeksInYear=Pe,zi.isoWeeksInYear=Fe,zi.date=Wi,zi.day=zi.days=Ne,zi.weekday=Ze,zi.isoWeekday=je,zi.dayOfYear=yt,zi.hour=zi.hours=xi,zi.minute=zi.minutes=Hi,zi.second=zi.seconds=Li,
zi.millisecond=zi.milliseconds=Ai,zi.utcOffset=At,zi.utc=Nt,zi.local=Zt,zi.parseZone=jt,zi.hasAlignedHourOffset=Et,zi.isDST=Vt,zi.isDSTShifted=qt,zi.isLocal=Jt,zi.isUtcOffset=$t,zi.isUtc=Rt,zi.isUTC=Rt,zi.zoneAbbr=Re,zi.zoneName=Be,zi.dates=tt("dates accessor is deprecated. Use date instead.",Wi),zi.months=tt("months accessor is deprecated. Use month instead",B),zi.years=tt("years accessor is deprecated. Use year instead",vi),zi.zone=tt("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",zt);var Ni=zi,Zi={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},ji={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ei="Invalid date",Vi="%d",qi=/\d{1,2}/,Ji={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},$i=g.prototype;$i._calendar=Zi,$i.calendar=Ke,$i._longDateFormat=ji,$i.longDateFormat=tn,$i._invalidDate=Ei,$i.invalidDate=en,$i._ordinal=Vi,$i.ordinal=nn,$i._ordinalParse=qi,$i.preparse=rn,$i.postformat=rn,$i._relativeTime=Ji,$i.relativeTime=sn,$i.pastFuture=an,$i.set=on,$i.months=q,$i._months=hi,$i.monthsShort=J,$i._monthsShort=mi,$i.monthsParse=$,$i.week=lt,$i._week=Mi,$i.firstDayOfYear=ft,$i.firstDayOfWeek=ct,$i.weekdays=Le,$i._weekdays=Ci,$i.weekdaysMin=Ae,$i._weekdaysMin=Fi,$i.weekdaysShort=Ie,$i._weekdaysShort=Gi,$i.weekdaysParse=ze,$i.isPM=qe,$i._meridiemParse=Pi,$i.meridiem=Je,Y("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===y(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),t.lang=tt("moment.lang is deprecated. Use moment.locale instead.",Y),t.langData=tt("moment.langData is deprecated. Use moment.localeData instead.",S);var Ri=Math.abs,Bi=kn("ms"),Qi=kn("s"),Xi=kn("m"),Ki=kn("h"),tr=kn("d"),er=kn("w"),nr=kn("M"),ir=kn("y"),rr=bn("milliseconds"),sr=bn("seconds"),ar=bn("minutes"),or=bn("hours"),ur=bn("days"),dr=bn("months"),lr=bn("years"),cr=Math.round,fr={s:45,m:45,h:22,d:26,M:11},hr=Math.abs,mr=Ft.prototype;mr.abs=_n,mr.add=pn,mr.subtract=gn,mr.as=wn,mr.asMilliseconds=Bi,mr.asSeconds=Qi,mr.asMinutes=Xi,mr.asHours=Ki,mr.asDays=tr,mr.asWeeks=er,mr.asMonths=nr,mr.asYears=ir,mr.valueOf=Sn,mr._bubble=vn,mr.get=Tn,mr.milliseconds=rr,mr.seconds=sr,mr.minutes=ar,mr.hours=or,mr.days=ur,mr.weeks=On,mr.months=dr,mr.years=lr,mr.humanize=Gn,mr.toISOString=Fn,mr.toString=Fn,mr.toJSON=Fn,mr.locale=pe,mr.localeData=ge,mr.toIsoString=tt("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Fn),mr.lang=Ui,F("X",0,0,"unix"),F("x",0,0,"valueOf"),A("x",ti),A("X",ni),Z("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),Z("x",function(t,e,n){n._d=new Date(y(t))}),t.version="2.10.6",e(Ut),t.fn=Ni,t.min=Ct,t.max=Gt,t.utc=o,t.unix=Qe,t.months=ln,t.isDate=i,t.locale=Y,t.invalid=c,t.duration=Bt,t.isMoment=m,t.weekdays=fn,t.parseZone=Xe,t.localeData=S,t.isDuration=Pt,t.monthsShort=cn,t.weekdaysMin=mn,t.defineLocale=w,t.weekdaysShort=hn,t.normalizeUnits=T,t.relativeTimeThreshold=Cn;var _r=t;return _r});
!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?a(require("../moment")):"function"==typeof define&&define.amd?define(["moment"],a):a(e.moment)}(this,function(e){"use strict";function a(e,a,n,t){var d={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return a?d[n][0]:d[n][1]}function n(e,a,n,t){var d={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return a?d[n][0]:d[n][1]}e.defineLocale("pd-de",{months:"Januar_Februar_MÃ¤rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH[h]mm",LTS:"HH[h]mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH[h]mm",LLLL:"dddd, D. MMMM YYYY HH[h]mm",llll:"dddd, D. MMMM YYYY",ll:"DD. MMM"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:a,mm:"%d Minuten",h:a,hh:"%d Stunden",d:a,dd:a,M:a,MM:a,y:a,yy:a},ordinalParse:/\d{1,2}\./,ordinal:"%d.",postformat:function(e){return e=e.charAt(0).toUpperCase()+e.slice(1)},week:{dow:1,doy:4}}),e.defineLocale("pd-fr",{months:"janvier_fÃ©vrier_mars_avril_mai_juin_juillet_aoÃ»t_septembre_octobre_novembre_dÃ©cembre".split("_"),monthsShort:"janv._fÃ©vr._mars_avr._mai_juin_juil._aoÃ»t_sept._oct._nov._dÃ©c.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm",llll:"dddd, D MMMM YYYY",ll:"DD. MMM"},calendar:{sameDay:"[Aujourd'hui Ã ] LT",nextDay:"[Demain Ã ] LT",nextWeek:"dddd [Ã ] LT",lastDay:"[Hier Ã ] LT",lastWeek:"dddd [dernier Ã ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(e){return e+(1===e?"er":"")},postformat:function(e){return e=e.charAt(0).toUpperCase()+e.slice(1),e=e.replace(":","h")},week:{dow:1,doy:4}}),e.defineLocale("pd-it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_LunedÃ¬_MartedÃ¬_MercoledÃ¬_GiovedÃ¬_VenerdÃ¬_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm",llll:"dddd, D MMMM YYYY",ll:"DD. MMM"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}Âº/,ordinal:"%dÂº",postformat:function(e){return e=e.charAt(0).toUpperCase()+e.slice(1),e=e.replace(":","h")},week:{dow:1,doy:4}}),e.defineLocale("pd-rm",{months:"Januar_Februar_MÃ¤rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH&#104;mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm",llll:"dddd, D. MMMM YYYY",ll:"DD. MMM"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:n,mm:"%d Minuten",h:n,hh:"%d Stunden",d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",postformat:function(e){return e=e.charAt(0).toUpperCase()+e.slice(1),e=e.replace(":","h")},week:{dow:1,doy:4}}),e.defineLocale("pd-en",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm",llll:"dddd, D MMMM YYYY",ll:"DD MMM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var a=e%10,n=1===~~(e%100/10)?"th":1===a?"st":2===a?"nd":3===a?"rd":"th";return e+n},postformat:function(e){return e=e.charAt(0).toUpperCase()+e.slice(1),e=e.replace(":","h")},week:{dow:1,doy:4}})});
!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["moment"],e):"object"==typeof module&&module.exports?module.exports=e(require("moment")):e(t.moment)}(this,function(t){"use strict";function e(t){return t>96?t-87:t>64?t-29:t-48}function n(t){var n,o=0,r=t.split("."),s=r[0],i=r[1]||"",a=1,f=0,u=1;for(45===t.charCodeAt(0)&&(o=1,u=-1),o;o<s.length;o++)n=e(s.charCodeAt(o)),f=60*f+n;for(o=0;o<i.length;o++)a/=60,n=e(i.charCodeAt(o)),f+=n*a;return f*u}function o(t){for(var e=0;e<t.length;e++)t[e]=n(t[e])}function r(t,e){for(var n=0;e>n;n++)t[n]=Math.round((t[n-1]||0)+6e4*t[n]);t[e-1]=1/0}function s(t,e){var n,o=[];for(n=0;n<e.length;n++)o[n]=t[e[n]];return o}function i(t){var e=t.split("|"),n=e[2].split(" "),i=e[3].split(""),a=e[4].split(" ");return o(n),o(i),o(a),r(a,i.length),{name:e[0],abbrs:s(e[1].split(" "),i),offsets:s(n,i),untils:a,population:0|e[5]}}function a(t){t&&this._set(i(t))}function f(t){var e=t.toTimeString(),n=e.match(/\([a-z ]+\)/i);n&&n[0]?(n=n[0].match(/[A-Z]/g),n=n?n.join(""):void 0):(n=e.match(/[A-Z]{3,5}/g),n=n?n[0]:void 0),"GMT"===n&&(n=void 0),this.at=+t,this.abbr=n,this.offset=t.getTimezoneOffset()}function u(t){this.zone=t,this.offsetScore=0,this.abbrScore=0}function c(t,e){for(var n,o;o=6e4*((e.at-t.at)/12e4|0);)n=new f(new Date(t.at+o)),n.offset===t.offset?t=n:e=n;return t}function l(){var t,e,n,o=(new Date).getFullYear()-2,r=new f(new Date(o,0,1)),s=[r];for(n=1;48>n;n++)e=new f(new Date(o,n,1)),e.offset!==r.offset&&(t=c(r,e),s.push(t),s.push(new f(new Date(t.at+6e4)))),r=e;for(n=0;4>n;n++)s.push(new f(new Date(o+n,0,1))),s.push(new f(new Date(o+n,6,1)));return s}function h(t,e){return t.offsetScore!==e.offsetScore?t.offsetScore-e.offsetScore:t.abbrScore!==e.abbrScore?t.abbrScore-e.abbrScore:e.zone.population-t.zone.population}function p(t,e){var n,r;for(o(e),n=0;n<e.length;n++)r=e[n],C[r]=C[r]||{},C[r][t]=!0}function m(t){var e,n,o,r=t.length,s={},i=[];for(e=0;r>e;e++){o=C[t[e].offset]||{};for(n in o)o.hasOwnProperty(n)&&(s[n]=!0)}for(e in s)s.hasOwnProperty(e)&&i.push(x[e]);return i}function d(){try{var t=Intl.DateTimeFormat().resolvedOptions().timeZone;if(t){var e=x[z(t)];if(e)return e;S("Moment Timezone found "+t+" from the Intl api, but did not have that data loaded.")}}catch(n){}var o,r,s,i=l(),a=i.length,f=m(i),c=[];for(r=0;r<f.length;r++){for(o=new u(g(f[r]),a),s=0;a>s;s++)o.scoreOffsetAt(i[s]);c.push(o)}return c.sort(h),c.length>0?c[0].zone.name:void 0}function v(t){return(!j||t)&&(j=d()),j}function z(t){return(t||"").toLowerCase().replace(/\//g,"_")}function b(t){var e,n,o,r;for("string"==typeof t&&(t=[t]),e=0;e<t.length;e++)o=t[e].split("|"),n=o[0],r=z(n),Z[r]=t[e],x[r]=n,o[5]&&p(r,o[2].split(" "))}function g(t,e){t=z(t);var n,o=Z[t];return o instanceof a?o:"string"==typeof o?(o=new a(o),Z[t]=o,o):q[t]&&e!==g&&(n=g(q[t],g))?(o=Z[t]=new a,o._set(n),o.name=x[t],o):null}function _(){var t,e=[];for(t in x)x.hasOwnProperty(t)&&(Z[t]||Z[q[t]])&&x[t]&&e.push(x[t]);return e.sort()}function w(t){var e,n,o,r;for("string"==typeof t&&(t=[t]),e=0;e<t.length;e++)n=t[e].split("|"),o=z(n[0]),r=z(n[1]),q[o]=r,x[o]=n[0],q[r]=o,x[r]=n[1]}function M(t){b(t.zones),w(t.links),O.dataVersion=t.version}function A(t){return A.didShowError||(A.didShowError=!0,S("moment.tz.zoneExists('"+t+"') has been deprecated in favor of !moment.tz.zone('"+t+"')")),!!g(t)}function y(t){return!(!t._a||void 0!==t._tzm)}function S(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t)}function O(e){var n=Array.prototype.slice.call(arguments,0,-1),o=arguments[arguments.length-1],r=g(o),s=t.utc.apply(null,n);return r&&!t.isMoment(e)&&y(s)&&s.add(r.parse(s),"minutes"),s.tz(o),s}function D(t){return function(){return this._z?this._z.abbr(this):t.call(this)}}function T(t){return function(){return this._z=null,t.apply(this,arguments)}}var j,E="0.5.13",Z={},q={},x={},C={},k=t.version.split("."),F=+k[0],P=+k[1];(2>F||2===F&&6>P)&&S("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+t.version+". See momentjs.com"),a.prototype={_set:function(t){this.name=t.name,this.abbrs=t.abbrs,this.untils=t.untils,this.offsets=t.offsets,this.population=t.population},_index:function(t){var e,n=+t,o=this.untils;for(e=0;e<o.length;e++)if(n<o[e])return e},parse:function(t){var e,n,o,r,s=+t,i=this.offsets,a=this.untils,f=a.length-1;for(r=0;f>r;r++)if(e=i[r],n=i[r+1],o=i[r?r-1:r],n>e&&O.moveAmbiguousForward?e=n:e>o&&O.moveInvalidForward&&(e=o),s<a[r]-6e4*e)return i[r];return i[f]},abbr:function(t){return this.abbrs[this._index(t)]},offset:function(t){return this.offsets[this._index(t)]}},u.prototype.scoreOffsetAt=function(t){this.offsetScore+=Math.abs(this.zone.offset(t.at)-t.offset),this.zone.abbr(t.at).replace(/[^A-Z]/g,"")!==t.abbr&&this.abbrScore++},O.version=E,O.dataVersion="",O._zones=Z,O._links=q,O._names=x,O.add=b,O.link=w,O.load=M,O.zone=g,O.zoneExists=A,O.guess=v,O.names=_,O.Zone=a,O.unpack=i,O.unpackBase60=n,O.needsOffset=y,O.moveInvalidForward=!0,O.moveAmbiguousForward=!1;var I=t.fn;t.tz=O,t.defaultZone=null,t.updateOffset=function(e,n){var o,r=t.defaultZone;void 0===e._z&&(r&&y(e)&&!e._isUTC&&(e._d=t.utc(e._a)._d,e.utc().add(r.parse(e),"minutes")),e._z=r),e._z&&(o=e._z.offset(e),Math.abs(o)<16&&(o/=60),void 0!==e.utcOffset?e.utcOffset(-o,n):e.zone(o,n))},I.tz=function(e){return e?(this._z=g(e),this._z?t.updateOffset(this):S("Moment Timezone has no data for "+e+". See http://momentjs.com/timezone/docs/#/data-loading/."),this):this._z?this._z.name:void 0},I.zoneName=D(I.zoneName),I.zoneAbbr=D(I.zoneAbbr),I.utc=T(I.utc),t.tz.setDefault=function(e){return(2>F||2===F&&9>P)&&S("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+t.version+"."),t.defaultZone=e?g(e):null,t};var N=t.momentProperties;return"[object Array]"===Object.prototype.toString.call(N)?(N.push("_z"),N.push("_a")):N&&(N._z=null),M({version:"2017b",zones:["Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|11e6"],links:["Europe/Paris|Europe/Zurich"]}),t}),moment.tz.setDefault("Europe/Zurich");
!function(t,e){"use strict";var n;if("object"==typeof exports){try{n=require("moment")}catch(i){}module.exports=e(n)}else"function"==typeof define&&define.amd?define(function(t){var i="moment";try{n=t(i)}catch(a){}return e(n)}):t.Pikaday=e(t.moment)}(this,function(t){"use strict";var e="function"==typeof t,n=!!window.addEventListener,i=window.document,a=window.setTimeout,o=function(t,e,i,a){n?t.addEventListener(e,i,!!a):t.attachEvent("on"+e,i)},s=function(t,e,i,a){n?t.removeEventListener(e,i,!!a):t.detachEvent("on"+e,i)},r=function(t,e,n){var a;i.createEvent?(a=i.createEvent("HTMLEvents"),a.initEvent(e,!0,!1),a=D(a,n),t.dispatchEvent(a)):i.createEventObject&&(a=i.createEventObject(),a=D(a,n),t.fireEvent("on"+e,a))},h=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},l=function(t,e){return-1!==(" "+t.className+" ").indexOf(" "+e+" ")},d=function(t,e){l(t,e)||(t.className=""===t.className?e:t.className+" "+e)},u=function(t,e){t.className=h((" "+t.className+" ").replace(" "+e+" "," "))},c=function(t){return/Array/.test(Object.prototype.toString.call(t))},f=function(t){return/Date/.test(Object.prototype.toString.call(t))&&!isNaN(t.getTime())},g=function(t){var e=t.getDay();return 0===e||6===e},m=function(t){return t%4===0&&t%100!==0||t%400===0},p=function(t,e){return[31,m(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},y=function(t){f(t)&&t.setHours(0,0,0,0)},_=function(t,e){return t.getTime()===e.getTime()},D=function(t,e,n){var i,a;for(i in e)a=void 0!==t[i],a&&"object"==typeof e[i]&&null!==e[i]&&void 0===e[i].nodeName?f(e[i])?n&&(t[i]=new Date(e[i].getTime())):c(e[i])?n&&(t[i]=e[i].slice(0)):t[i]=D({},e[i],n):(n||!a)&&(t[i]=e[i]);return t},v=function(t){return t.month<0&&(t.year-=Math.ceil(Math.abs(t.month)/12),t.month+=12),t.month>11&&(t.year+=Math.floor(Math.abs(t.month)/12),t.month-=12),t},b={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},w=function(t,e,n){for(e+=t.firstDay;e>=7;)e-=7;return n?t.i18n.weekdaysShort[e]:t.i18n.weekdays[e]},M=function(t){if(t.isEmpty)return'<td class="is-empty"></td>';var e=[];return t.isDisabled&&e.push("is-disabled"),t.isToday&&e.push("is-today"),t.isSelected&&e.push("is-selected"),t.isInRange&&e.push("is-inrange"),t.isStartRange&&e.push("is-startrange"),t.isEndRange&&e.push("is-endrange"),'<td data-day="'+t.day+'" class="'+e.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+t.year+'" data-pika-month="'+t.month+'" data-pika-day="'+t.day+'">'+t.day+"</button></td>"},k=function(t,e,n){var i=new Date(n,0,1),a=Math.ceil(((new Date(n,e,t)-i)/864e5+i.getDay()+1)/7);return'<td class="pika-week">'+a+"</td>"},R=function(t,e){return"<tr>"+(e?t.reverse():t).join("")+"</tr>"},x=function(t){return"<tbody>"+t.join("")+"</tbody>"},N=function(t){var e,n=[];for(t.showWeekNumber&&n.push("<th></th>"),e=0;7>e;e++)n.push('<th scope="col"><abbr title="'+w(t,e)+'">'+w(t,e,!0)+"</abbr></th>");return"<thead>"+(t.isRTL?n.reverse():n).join("")+"</thead>"},C=function(t,e,n,i,a){var o,s,r,h,l,d=t._o,u=n===d.minYear,f=n===d.maxYear,g='<div class="pika-title">',m=!0,p=!0;for(r=[],o=0;12>o;o++)r.push('<option value="'+(n===a?o-e:12+o-e)+'"'+(o===i?" selected":"")+(u&&o<d.minMonth||f&&o>d.maxMonth?"disabled":"")+">"+d.i18n.months[o]+"</option>");for(h='<div class="pika-label">'+d.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+r.join("")+"</select></div>",c(d.yearRange)?(o=d.yearRange[0],s=d.yearRange[1]+1):(o=n-d.yearRange,s=1+n+d.yearRange),r=[];s>o&&o<=d.maxYear;o++)o>=d.minYear&&r.push('<option value="'+o+'"'+(o===n?" selected":"")+">"+o+"</option>");return l='<div class="pika-label">'+n+d.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+r.join("")+"</select></div>",g+=d.showMonthAfterYear?l+h:h+l,u&&(0===i||d.minMonth>=i)&&(m=!1),f&&(11===i||d.maxMonth<=i)&&(p=!1),0===e&&(g+='<button class="pika-prev'+(m?"":" is-disabled")+'" type="button">'+d.i18n.previousMonth+"</button>"),e===t._o.numberOfMonths-1&&(g+='<button class="pika-next'+(p?"":" is-disabled")+'" type="button">'+d.i18n.nextMonth+"</button>"),g+="</div>"},T=function(t,e){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+N(t)+x(e)+"</table>"},E=function(s){var r=this,h=r.config(s);r._onMouseDown=function(t){if(r._v){t=t||window.event;var e=t.target||t.srcElement;if(e)if(l(e,"is-disabled")||(l(e,"pika-button")&&!l(e,"is-empty")?(r.setDate(new Date(e.getAttribute("data-pika-year"),e.getAttribute("data-pika-month"),e.getAttribute("data-pika-day"))),h.bound&&a(function(){r.hide(),h.field&&h.field.blur()},100)):l(e,"pika-prev")?r.prevMonth():l(e,"pika-next")&&r.nextMonth()),l(e,"pika-select"))r._c=!0;else{if(!t.preventDefault)return t.returnValue=!1,!1;t.preventDefault()}}},r._onChange=function(t){t=t||window.event;var e=t.target||t.srcElement;e&&(l(e,"pika-select-month")?r.gotoMonth(e.value):l(e,"pika-select-year")&&r.gotoYear(e.value))},r._onInputChange=function(n){var i;n.firedBy!==r&&(e?(i=t(h.field.value,h.format),i=i&&i.isValid()?i.toDate():null):i=new Date(Date.parse(h.field.value)),f(i)&&r.setDate(i),r._v||r.show())},r._onInputFocus=function(){r.show()},r._onInputClick=function(){r.show()},r._onInputBlur=function(){var t=i.activeElement;do if(l(t,"pika-single"))return;while(t=t.parentNode);r._c||(r._b=a(function(){r.hide()},50)),r._c=!1},r._onClick=function(t){t=t||window.event;var e=t.target||t.srcElement,i=e;if(e){!n&&l(e,"pika-select")&&(e.onchange||(e.setAttribute("onchange","return;"),o(e,"change",r._onChange)));do if(l(i,"pika-single")||i===h.trigger)return;while(i=i.parentNode);r._v&&e!==h.trigger&&i!==h.trigger&&r.hide()}},r.el=i.createElement("div"),r.el.className="pika-single"+(h.isRTL?" is-rtl":"")+(h.theme?" "+h.theme:""),o(r.el,"mousedown",r._onMouseDown,!0),o(r.el,"touchend",r._onMouseDown,!0),o(r.el,"change",r._onChange),h.field&&(h.container?h.container.appendChild(r.el):h.bound?i.body.appendChild(r.el):h.field.parentNode.insertBefore(r.el,h.field.nextSibling),o(h.field,"change",r._onInputChange),h.defaultDate||(e&&h.field.value?h.defaultDate=t(h.field.value,h.format).toDate():h.defaultDate=new Date(Date.parse(h.field.value)),h.setDefaultDate=!0));var d=h.defaultDate;f(d)?h.setDefaultDate?r.setDate(d,!0):r.gotoDate(d):r.gotoDate(new Date),h.bound?(this.hide(),r.el.className+=" is-bound",o(h.trigger,"click",r._onInputClick),o(h.trigger,"focus",r._onInputFocus),o(h.trigger,"blur",r._onInputBlur)):this.show()};return E.prototype={config:function(t){this._o||(this._o=D({},b,!0));var e=D(this._o,t,!0);e.isRTL=!!e.isRTL,e.field=e.field&&e.field.nodeName?e.field:null,e.theme="string"==typeof e.theme&&e.theme?e.theme:null,e.bound=!!(void 0!==e.bound?e.field&&e.bound:e.field),e.trigger=e.trigger&&e.trigger.nodeName?e.trigger:e.field,e.disableWeekends=!!e.disableWeekends,e.disableDayFn="function"==typeof e.disableDayFn?e.disableDayFn:null;var n=parseInt(e.numberOfMonths,10)||1;if(e.numberOfMonths=n>4?4:n,f(e.minDate)||(e.minDate=!1),f(e.maxDate)||(e.maxDate=!1),e.minDate&&e.maxDate&&e.maxDate<e.minDate&&(e.maxDate=e.minDate=!1),e.minDate&&this.setMinDate(e.minDate),e.maxDate&&this.setMaxDate(e.maxDate),c(e.yearRange)){var i=(new Date).getFullYear()-10;e.yearRange[0]=parseInt(e.yearRange[0],10)||i,e.yearRange[1]=parseInt(e.yearRange[1],10)||i}else e.yearRange=Math.abs(parseInt(e.yearRange,10))||b.yearRange,e.yearRange>100&&(e.yearRange=100);return e},toString:function(n){return f(this._d)?e?t(this._d).format(n||this._o.format):this._d.toDateString():""},getMoment:function(){return e?t(this._d):null},setMoment:function(n,i){e&&t.isMoment(n)&&this.setDate(n.toDate(),i)},getDate:function(){return f(this._d)?new Date(this._d.getTime()):null},setDate:function(t,e){if(!t)return this._d=null,this._o.field&&(this._o.field.value="",r(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof t&&(t=new Date(Date.parse(t))),f(t)){var n=this._o.minDate,i=this._o.maxDate;f(n)&&n>t?t=n:f(i)&&t>i&&(t=i),this._d=new Date(t.getTime()),y(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),r(this._o.field,"change",{firedBy:this})),e||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(t){var e=!0;if(f(t)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),a=t.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),e=a<n.getTime()||i.getTime()<a}e&&(this.calendars=[{month:t.getMonth(),year:t.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustCalendars:function(){this.calendars[0]=v(this.calendars[0]);for(var t=1;t<this._o.numberOfMonths;t++)this.calendars[t]=v({month:this.calendars[0].month+t,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(t){isNaN(t)||(this.calendars[0].month=parseInt(t,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(t){isNaN(t)||(this.calendars[0].year=parseInt(t,10),this.adjustCalendars())},setMinDate:function(t){y(t),this._o.minDate=t,this._o.minYear=t.getFullYear(),this._o.minMonth=t.getMonth(),this.draw()},setMaxDate:function(t){y(t),this._o.maxDate=t,this._o.maxYear=t.getFullYear(),this._o.maxMonth=t.getMonth(),this.draw()},setStartRange:function(t){this._o.startRange=t},setEndRange:function(t){this._o.endRange=t},draw:function(t){if(this._v||t){var e=this._o,n=e.minYear,i=e.maxYear,o=e.minMonth,s=e.maxMonth,r="";this._y<=n&&(this._y=n,!isNaN(o)&&this._m<o&&(this._m=o)),this._y>=i&&(this._y=i,!isNaN(s)&&this._m>s&&(this._m=s));for(var h=0;h<e.numberOfMonths;h++)r+='<div class="pika-lendar">'+C(this,h,this.calendars[h].year,this.calendars[h].month,this.calendars[0].year)+this.render(this.calendars[h].year,this.calendars[h].month)+"</div>";if(this.el.innerHTML=r,e.bound&&"hidden"!==e.field.type&&a(function(){e.trigger.focus()},1),"function"==typeof this._o.onDraw){var l=this;a(function(){l._o.onDraw.call(l)},0)}}},adjustPosition:function(){var t,e,n,a,o,s,r,h,l,d;if(!this._o.container){if(this.el.style.position="absolute",t=this._o.trigger,e=t,n=this.el.offsetWidth,a=this.el.offsetHeight,o=window.innerWidth||i.documentElement.clientWidth,s=window.innerHeight||i.documentElement.clientHeight,r=window.pageYOffset||i.body.scrollTop||i.documentElement.scrollTop,"function"==typeof t.getBoundingClientRect)d=t.getBoundingClientRect(),h=d.left+window.pageXOffset,l=d.bottom+window.pageYOffset;else for(h=e.offsetLeft,l=e.offsetTop+e.offsetHeight;e=e.offsetParent;)h+=e.offsetLeft,l+=e.offsetTop;(this._o.reposition&&h+n>o||this._o.position.indexOf("right")>-1&&h-n+t.offsetWidth>0)&&(h=h-n+t.offsetWidth),(this._o.reposition&&l+a>s+r||this._o.position.indexOf("top")>-1&&l-a-t.offsetHeight>0)&&(l=l-a-t.offsetHeight),this.el.style.left=h+"px",this.el.style.top=l+"px"}},render:function(t,e){var n=this._o,i=new Date,a=p(t,e),o=new Date(t,e,1).getDay(),s=[],r=[];y(i),n.firstDay>0&&(o-=n.firstDay,0>o&&(o+=7));for(var h=a+o,l=h;l>7;)l-=7;h+=7-l;for(var d=0,u=0;h>d;d++){var c=new Date(t,e,1+(d-o)),m=f(this._d)?_(c,this._d):!1,D=_(c,i),v=o>d||d>=a+o,b=n.startRange&&_(n.startRange,c),w=n.endRange&&_(n.endRange,c),x=n.startRange&&n.endRange&&n.startRange<c&&c<n.endRange,N=n.minDate&&c<n.minDate||n.maxDate&&c>n.maxDate||n.disableWeekends&&g(c)||n.disableDayFn&&n.disableDayFn(c),C={day:1+(d-o),month:e,year:t,isSelected:m,isToday:D,isDisabled:N,isEmpty:v,isStartRange:b,isEndRange:w,isInRange:x};r.push(M(C)),7===++u&&(n.showWeekNumber&&r.unshift(k(d-o,e,t)),s.push(R(r,n.isRTL)),r=[],u=0)}return T(n,s)},isVisible:function(){return this._v},show:function(){this._v||(u(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(o(i,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var t=this._v;t!==!1&&(this._o.bound&&s(i,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",d(this.el,"is-hidden"),this._v=!1,void 0!==t&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),s(this.el,"mousedown",this._onMouseDown,!0),s(this.el,"touchend",this._onMouseDown,!0),s(this.el,"change",this._onChange),this._o.field&&(s(this._o.field,"change",this._onInputChange),this._o.bound&&(s(this._o.trigger,"click",this._onInputClick),s(this._o.trigger,"focus",this._onInputFocus),s(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},E});
!function(e,t){"use strict";"object"==typeof exports?t(require("jquery"),require("../pikaday")):"function"==typeof define&&define.amd?define(["jquery","pikaday"],t):t(e.jQuery,e.Pikaday)}(this,function(e,t){"use strict";e.fn.pikaday=function(){var i=arguments;return i&&i.length||(i=[{}]),this.each(function(){var a=e(this),n=a.data("pikaday");if(n instanceof t)"string"==typeof i[0]&&"function"==typeof n[i[0]]&&n[i[0]].apply(n,Array.prototype.slice.call(i,1));else if("object"==typeof i[0]){var r=e.extend({},i[0]);r.field=a[0],a.data("pikaday",new t(r))}})}});
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,o=this;t(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||t(o).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.alert");s||i.data("bs.alert",s=new o(this)),"string"==typeof e&&s[e].call(i)})}var i='[data-dismiss="alert"]',o=function(e){t(e).on("click",i,this.close)};o.VERSION="3.3.4",o.TRANSITION_DURATION=150,o.prototype.close=function(e){function i(){a.detach().trigger("closed.bs.alert").remove()}var s=t(this),n=s.attr("data-target");n||(n=s.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,""));var a=t(n);e&&e.preventDefault(),a.length||(a=s.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(o.TRANSITION_DURATION):i())};var s=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=o,t.fn.alert.noConflict=function(){return t.fn.alert=s,this},t(document).on("click.bs.alert.data-api",i,o.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.button"),n="object"==typeof e&&e;s||o.data("bs.button",s=new i(this,n)),"toggle"==e?s.toggle():e&&s.setState(e)})}var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.isLoading=!1};i.VERSION="3.3.4",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",o=this.$element,s=o.is("input")?"val":"html",n=o.data();e+="Text",null==n.resetText&&o.data("resetText",o[s]()),setTimeout(t.proxy(function(){o[s](null==n[e]?this.options[e]:n[e]),"loadingText"==e?(this.isLoading=!0,o.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,o.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var o=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=o,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var o=t(i.target);o.hasClass("btn")||(o=o.closest(".btn")),e.call(o,"toggle"),i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.carousel"),n=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e),a="string"==typeof e?e:n.slide;s||o.data("bs.carousel",s=new i(this,n)),"number"==typeof e?s.to(e):a?s[a]():n.interval&&s.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.4",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),o="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(o&&!this.options.wrap)return e;var s="prev"==t?-1:1,n=(i+s)%this.$items.length;return this.$items.eq(n)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,o){var s=this.$element.find(".item.active"),n=o||this.getItemForDirection(e,s),a=this.interval,r="next"==e?"left":"right",l=this;if(n.hasClass("active"))return this.sliding=!1;var h=n[0],d=t.Event("slide.bs.carousel",{relatedTarget:h,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=t(this.$indicators.children()[this.getItemIndex(n)]);p&&p.addClass("active")}var c=t.Event("slid.bs.carousel",{relatedTarget:h,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(n.addClass(e),n[0].offsetWidth,s.addClass(r),n.addClass(r),s.one("bsTransitionEnd",function(){n.removeClass([e,r].join(" ")).addClass("active"),s.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(c)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(s.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger(c)),a&&this.cycle(),this}};var o=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=o,this};var s=function(i){var o,s=t(this),n=t(s.attr("data-target")||(o=s.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""));if(n.hasClass("carousel")){var a=t.extend({},n.data(),s.data()),r=s.attr("data-slide-to");r&&(a.interval=!1),e.call(n,a),r&&n.data("bs.carousel").to(r),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",s).on("click.bs.carousel.data-api","[data-slide-to]",s),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i,o=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(o)}function i(e){return this.each(function(){var i=t(this),s=i.data("bs.collapse"),n=t.extend({},o.DEFAULTS,i.data(),"object"==typeof e&&e);!s&&n.toggle&&/show|hide/.test(e)&&(n.toggle=!1),s||i.data("bs.collapse",s=new o(this,n)),"string"==typeof e&&s[e]()})}var o=function(e,i){this.$element=t(e),this.options=t.extend({},o.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};o.VERSION="3.3.4",o.TRANSITION_DURATION=350,o.DEFAULTS={toggle:!0},o.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,s=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(s&&s.length&&(e=s.data("bs.collapse"),e&&e.transitioning))){var n=t.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){s&&s.length&&(i.call(s,"hide"),e||s.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(o.TRANSITION_DURATION)[a](this.$element[0][l])}}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var s=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(o.TRANSITION_DURATION):s.call(this)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},o.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,o){var s=t(o);this.addAriaAndCollapsedClass(e(s),s)},this)).end()},o.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var s=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=o,t.fn.collapse.noConflict=function(){return t.fn.collapse=s,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(o){var s=t(this);s.attr("data-target")||o.preventDefault();var n=e(s),a=n.data("bs.collapse"),r=a?"toggle":s.data();i.call(n,r)})}(jQuery),+function(t){"use strict";function e(e,o){return this.each(function(){var s=t(this),n=s.data("bs.modal"),a=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);n||s.data("bs.modal",n=new i(this,a)),"string"==typeof e?n[e](o):a.show&&n.show(o)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.4",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var o=this,s=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(s),this.isShown||s.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var s=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),s&&o.$element[0].offsetWidth,o.$element.addClass("in").attr("aria-hidden",!1),o.enforceFocus();var n=t.Event("shown.bs.modal",{relatedTarget:e});s?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(n)}).emulateTransitionEnd(i.TRANSITION_DURATION):o.$element.trigger("focus").trigger(n)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var o=this,s=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&s;if(this.$backdrop=t('<div class="modal-backdrop '+s+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var o=t(this),s=o.attr("href"),n=t(o.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),a=n.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},n.data(),o.data());o.is("a")&&i.preventDefault(),n.one("show.bs.modal",function(t){t.isDefaultPrevented()||n.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(n,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.tooltip"),n="object"==typeof e&&e;(s||!/destroy|hide/.test(e))&&(s||o.data("bs.tooltip",s=new i(this,n)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.3.4",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,o){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var s=this.options.trigger.split(" "),n=s.length;n--;){var a=s[n];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,o){i[t]!=o&&(e[t]=o)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i&&i.$tip&&i.$tip.is(":visible")?void(i.hoverState="in"):(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var o=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!o)return;var s=this,n=this.tip(),a=this.getUID(this.type);this.setContent(),n.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&n.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,h=l.test(r);h&&(r=r.replace(l,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element);var d=this.getPosition(),p=n[0].offsetWidth,c=n[0].offsetHeight;if(h){var f=r,u=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(u);r="bottom"==r&&d.bottom+c>g.bottom?"top":"top"==r&&d.top-c<g.top?"bottom":"right"==r&&d.right+p>g.width?"left":"left"==r&&d.left-p<g.left?"right":r,n.removeClass(f).addClass(r)}var m=this.getCalculatedOffset(r,d,p,c);this.applyPlacement(m,r);var v=function(){var t=s.hoverState;s.$element.trigger("shown.bs."+s.type),s.hoverState=null,"out"==t&&s.leave(s)};t.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",v).emulateTransitionEnd(i.TRANSITION_DURATION):v()}},i.prototype.applyPlacement=function(e,i){var o=this.tip(),s=o[0].offsetWidth,n=o[0].offsetHeight,a=parseInt(o.css("margin-top"),10),r=parseInt(o.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top=e.top+a,e.left=e.left+r,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var l=o[0].offsetWidth,h=o[0].offsetHeight;"top"==i&&h!=n&&(e.top=e.top+n-h);var d=this.getViewportAdjustedDelta(i,e,l,h);d.left?e.left+=d.left:e.top+=d.top;var p=/top|bottom/.test(i),c=p?2*d.left-s+l:2*d.top-n+h,f=p?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(c,o[0][f],p)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function o(){"in"!=s.hoverState&&n.detach(),s.$element.removeAttr("aria-describedby").trigger("hidden.bs."+s.type),e&&e()}var s=this,n=t(this.$tip),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],o="BODY"==i.tagName,s=i.getBoundingClientRect();null==s.width&&(s=t.extend({},s,{width:s.right-s.left,height:s.bottom-s.top}));var n=o?{top:0,left:0}:e.offset(),a={scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=o?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},s,a,r,n)},i.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,o){var s={top:0,left:0};if(!this.$viewport)return s;var n=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-n-a.scroll,l=e.top+n-a.scroll+o;r<a.top?s.top=a.top-r:l>a.top+a.height&&(s.top=a.top+a.height-l)}else{var h=e.left-n,d=e.left+n+i;h<a.left?s.left=a.left-h:d>a.width&&(s.left=a.left+a.width-d)}return s},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var o=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=o,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.popover"),n="object"==typeof e&&e;(s||!/destroy|hide/.test(e))&&(s||o.data("bs.popover",s=new i(this,n)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.4",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var o=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=o,this}}(jQuery),+function(t){"use strict";function e(i,o){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var o=t(this),s=o.data("bs.scrollspy"),n="object"==typeof i&&i;s||o.data("bs.scrollspy",s=new e(this,n)),"string"==typeof i&&s[i]()})}e.VERSION="3.3.4",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",o=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",o=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),s=e.data("target")||e.attr("href"),n=/^#./.test(s)&&t(s);return n&&n.length&&n.is(":visible")&&[[n[i]().top+o,s]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),o=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,n=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=o)return a!=(t=n[n.length-1])&&this.activate(t);if(a&&e<s[0])return this.activeTarget=null,this.clear();for(t=s.length;t--;)a!=n[t]&&e>=s[t]&&(void 0===s[t+1]||e<s[t+1])&&this.activate(n[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(i).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var o=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.tab");s||o.data("bs.tab",s=new i(this)),"string"==typeof e&&s[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.4",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=e.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=i.find(".active:last a"),n=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:s[0]});if(s.trigger(n),e.trigger(a),!a.isDefaultPrevented()&&!n.isDefaultPrevented()){var r=t(o);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){s.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:s[0]})})}}},i.prototype.activate=function(e,o,s){function n(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),s&&s()}var a=o.find("> .active"),r=s&&t.support.transition&&(a.length&&a.hasClass("fade")||!!o.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),a.removeClass("in")};var o=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=o,this};var s=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',s).on("click.bs.tab.data-api",'[data-toggle="pill"]',s)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var o=t(this),s=o.data("bs.affix"),n="object"==typeof e&&e;s||o.data("bs.affix",s=new i(this,n)),"string"==typeof e&&s[e]()})}var i=function(e,o){this.options=t.extend({},i.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.4",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,o){var s=this.$target.scrollTop(),n=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return i>s?"top":!1;if("bottom"==this.affixed)return null!=i?s+this.unpin<=n.top?!1:"bottom":t-o>=s+a?!1:"bottom";var r=null==this.affixed,l=r?s:n.top,h=r?a:e;
return null!=i&&i>=s?"top":null!=o&&l+h>=t-o?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),o=this.options.offset,s=o.top,n=o.bottom,a=t(document.body).height();"object"!=typeof o&&(n=s=o),"function"==typeof s&&(s=o.top(this.$element)),"function"==typeof n&&(n=o.bottom(this.$element));var r=this.getState(a,e,s,n);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),h=t.Event(l+".bs.affix");if(this.$element.trigger(h),h.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-e-n})}};var o=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),o=i.data();o.offset=o.offset||{},null!=o.offsetBottom&&(o.offset.bottom=o.offsetBottom),null!=o.offsetTop&&(o.offset.top=o.offsetTop),e.call(i,o)})})}(jQuery);
!function(t,e){function n(t,e,n){var r=t.children(),o=!1;t.empty();for(var i=0,d=r.length;d>i;i++){var l=r.eq(i);if(t.append(l),n&&t.append(n),a(t,e)){l.remove(),o=!0;break}n&&n.detach()}return o}function r(e,n,i,d,l){var s=!1,c="a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",u="script, .dotdotdot-keep";return e.contents().detach().each(function(){var h=this,f=t(h);if("undefined"==typeof h)return!0;if(f.is(u))e.append(f);else{if(s)return!0;e.append(f),!l||f.is(d.after)||f.find(d.after).length||e[e.is(c)?"after":"append"](l),a(i,d)&&(s=3==h.nodeType?o(f,n,i,d,l):r(f,n,i,d,l),s||(f.detach(),s=!0)),s||l&&l.detach()}}),n.addClass("is-truncated"),s}function o(e,n,r,o,d){var c=e[0];if(!c)return!1;var h=s(c),f=-1!==h.indexOf(" ")?" ":"ã",p="letter"==o.wrap?"":f,g=h.split(p),v=-1,w=-1,b=0,y=g.length-1;for(o.fallbackToLetter&&0==b&&0==y&&(p="",g=h.split(p),y=g.length-1);y>=b&&(0!=b||0!=y);){var m=Math.floor((b+y)/2);if(m==w)break;w=m,l(c,g.slice(0,w+1).join(p)+o.ellipsis),r.children().each(function(){t(this).toggle().toggle()}),a(r,o)?(y=w,o.fallbackToLetter&&0==b&&0==y&&(p="",g=g[0].split(p),v=-1,w=-1,b=0,y=g.length-1)):(v=w,b=w)}if(-1==v||1==g.length&&0==g[0].length){var x=e.parent();e.detach();var T=d&&d.closest(x).length?d.length:0;x.contents().length>T?c=u(x.contents().eq(-1-T),n):(c=u(x,n,!0),T||x.detach()),c&&(h=i(s(c),o),l(c,h),T&&d&&t(c).parent().append(d))}else h=i(g.slice(0,v+1).join(p),o),l(c,h);return!0}function a(t,e){return t.innerHeight()>e.maxHeight}function i(e,n){for(;t.inArray(e.slice(-1),n.lastCharacter.remove)>-1;)e=e.slice(0,-1);return t.inArray(e.slice(-1),n.lastCharacter.noEllipsis)<0&&(e+=n.ellipsis),e}function d(t){return{width:t.innerWidth(),height:t.innerHeight()}}function l(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function s(t){return t.innerText?t.innerText:t.nodeValue?t.nodeValue:t.textContent?t.textContent:""}function c(t){do t=t.previousSibling;while(t&&1!==t.nodeType&&3!==t.nodeType);return t}function u(e,n,r){var o,a=e&&e[0];if(a){if(!r){if(3===a.nodeType)return a;if(t.trim(e.text()))return u(e.contents().last(),n)}for(o=c(a);!o;){if(e=e.parent(),e.is(n)||!e.length)return!1;o=c(e[0])}if(o)return u(t(o),n)}return!1}function h(e,n){return e?"string"==typeof e?(e=t(e,n),e.length?e:!1):e.jquery?e:!1:!1}function f(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],r=0,o=n.length;o>r;r++){var a=parseInt(t.css(n[r]),10);isNaN(a)&&(a=0),e-=a}return e}if(!t.fn.dotdotdot){t.fn.dotdotdot=function(e){if(0==this.length)return t.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){t(this).dotdotdot(e)});var o=this;o.data("dotdotdot")&&o.trigger("destroy.dot"),o.data("dotdotdot-style",o.attr("style")||""),o.css("word-wrap","break-word"),"nowrap"===o.css("white-space")&&o.css("white-space","normal"),o.bind_events=function(){return o.bind("update.dot",function(e,d){switch(o.removeClass("is-truncated"),e.preventDefault(),e.stopPropagation(),typeof l.height){case"number":l.maxHeight=l.height;break;case"function":l.maxHeight=l.height.call(o[0]);break;default:l.maxHeight=f(o)}l.maxHeight+=l.tolerance,"undefined"!=typeof d&&(("string"==typeof d||"nodeType"in d&&1===d.nodeType)&&(d=t("<div />").append(d).contents()),d instanceof t&&(i=d)),g=o.wrapInner('<div class="dotdotdot" />').children(),g.contents().detach().end().append(i.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var c=!1,u=!1;return s.afterElement&&(c=s.afterElement.clone(!0),c.show(),s.afterElement.detach()),a(g,l)&&(u="children"==l.wrap?n(g,l,c):r(g,o,g,l,c)),g.replaceWith(g.contents()),g=null,t.isFunction(l.callback)&&l.callback.call(o[0],u,i),s.isTruncated=u,u}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],s.isTruncated),s.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],i),i}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),o.unwatch().unbind_events().contents().detach().end().append(i).attr("style",o.data("dotdotdot-style")||"").data("dotdotdot",!1)}),o},o.unbind_events=function(){return o.unbind(".dot"),o},o.watch=function(){if(o.unwatch(),"window"==l.watch){var e=t(window),n=e.width(),r=e.height();e.bind("resize.dot"+s.dotId,function(){n==e.width()&&r==e.height()&&l.windowResizeFix||(n=e.width(),r=e.height(),u&&clearInterval(u),u=setTimeout(function(){o.trigger("update.dot")},100))})}else c=d(o),u=setInterval(function(){if(o.is(":visible")){var t=d(o);(c.width!=t.width||c.height!=t.height)&&(o.trigger("update.dot"),c=t)}},500);return o},o.unwatch=function(){return t(window).unbind("resize.dot"+s.dotId),u&&clearInterval(u),o};var i=o.contents(),l=t.extend(!0,{},t.fn.dotdotdot.defaults,e),s={},c={},u=null,g=null;return l.lastCharacter.remove instanceof Array||(l.lastCharacter.remove=t.fn.dotdotdot.defaultArrays.lastCharacter.remove),l.lastCharacter.noEllipsis instanceof Array||(l.lastCharacter.noEllipsis=t.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),s.afterElement=h(l.after,o),s.isTruncated=!1,s.dotId=p++,o.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&o.watch(),o},t.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},t.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","ã",",",";",".","!","?"],noEllipsis:[]}},t.fn.dotdotdot.debug=function(){};var p=1,g=t.fn.html;t.fn.html=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?this.trigger("update",[n]):g.apply(this,arguments)};var v=t.fn.text;t.fn.text=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?(n=t("<div />").text(n).html(),this.trigger("update",[n])):v.apply(this,arguments)}}}(jQuery);
!function(r){"use strict";function t(t,e,n,o){function i(r,t){return r-=o,t-=o,0>r||r>=u||0>t||t>=u?!1:a.isDark(r,t)}var a=r(n,e);a.addData(t),a.make(),o=o||0;var u=a.getModuleCount(),f=a.getModuleCount()+2*o,c=function(r,t,e,n){var o=this.isDark,i=1/f;this.isDark=function(a,u){var f=u*i,c=a*i,l=f+i,g=c+i;return o(a,u)&&(r>l||f>e||t>g||c>n)}};this.text=t,this.level=e,this.version=n,this.moduleCount=f,this.isDark=i,this.addBlank=c}function e(r,e,n,o,i){n=Math.max(1,n||1),o=Math.min(40,o||40);for(var a=n;o>=a;a+=1)try{return new t(r,e,a,i)}catch(u){}}function n(r,t,e){var n=e.size,o="bold "+e.mSize*n+"px "+e.fontname,i=w("<canvas/>")[0].getContext("2d");i.font=o;var a=i.measureText(e.label).width,u=e.mSize,f=a/n,c=(1-f)*e.mPosX,l=(1-u)*e.mPosY,g=c+f,s=l+u,h=.01;1===e.mode?r.addBlank(0,l-h,n,s+h):r.addBlank(c-h,l-h,g+h,s+h),t.fillStyle=e.fontcolor,t.font=o,t.fillText(e.label,c*n,l*n+.75*e.mSize*n)}function o(r,t,e){var n=e.size,o=e.image.naturalWidth||1,i=e.image.naturalHeight||1,a=e.mSize,u=a*o/i,f=(1-u)*e.mPosX,c=(1-a)*e.mPosY,l=f+u,g=c+a,s=.01;3===e.mode?r.addBlank(0,c-s,n,g+s):r.addBlank(f-s,c-s,l+s,g+s),t.drawImage(e.image,f*n,c*n,u*n,a*n)}function i(r,t,e){w(e.background).is("img")?t.drawImage(e.background,0,0,e.size,e.size):e.background&&(t.fillStyle=e.background,t.fillRect(e.left,e.top,e.size,e.size));var i=e.mode;1===i||2===i?n(r,t,e):(3===i||4===i)&&o(r,t,e)}function a(r,t,e,n,o,i,a,u){r.isDark(a,u)&&t.rect(n,o,i,i)}function u(r,t,e,n,o,i,a,u,f,c){a?r.moveTo(t+i,e):r.moveTo(t,e),u?(r.lineTo(n-i,e),r.arcTo(n,e,n,o,i)):r.lineTo(n,e),f?(r.lineTo(n,o-i),r.arcTo(n,o,t,o,i)):r.lineTo(n,o),c?(r.lineTo(t+i,o),r.arcTo(t,o,t,e,i)):r.lineTo(t,o),a?(r.lineTo(t,e+i),r.arcTo(t,e,n,e,i)):r.lineTo(t,e)}function f(r,t,e,n,o,i,a,u,f,c){a&&(r.moveTo(t+i,e),r.lineTo(t,e),r.lineTo(t,e+i),r.arcTo(t,e,t+i,e,i)),u&&(r.moveTo(n-i,e),r.lineTo(n,e),r.lineTo(n,e+i),r.arcTo(n,e,n-i,e,i)),f&&(r.moveTo(n-i,o),r.lineTo(n,o),r.lineTo(n,o-i),r.arcTo(n,o,n-i,o,i)),c&&(r.moveTo(t+i,o),r.lineTo(t,o),r.lineTo(t,o-i),r.arcTo(t,o,t+i,o,i))}function c(r,t,e,n,o,i,a,c){var l=r.isDark,g=n+i,s=o+i,h=e.radius*i,v=a-1,d=a+1,w=c-1,m=c+1,p=l(a,c),y=l(v,w),T=l(v,c),B=l(v,m),A=l(a,m),E=l(d,m),k=l(d,c),M=l(d,w),C=l(a,w);p?u(t,n,o,g,s,h,!T&&!C,!T&&!A,!k&&!A,!k&&!C):f(t,n,o,g,s,h,T&&C&&y,T&&A&&B,k&&A&&E,k&&C&&M)}function l(r,t,e){var n,o,i=r.moduleCount,u=e.size/i,f=a;for(p&&e.radius>0&&e.radius<=.5&&(f=c),t.beginPath(),n=0;i>n;n+=1)for(o=0;i>o;o+=1){var l=e.left+o*u,g=e.top+n*u,s=u;f(r,t,e,l,g,s,n,o)}if(w(e.fill).is("img")){t.strokeStyle="rgba(0,0,0,0.5)",t.lineWidth=2,t.stroke();var h=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",t.fill(),t.globalCompositeOperation=h,t.clip(),t.drawImage(e.fill,0,0,e.size,e.size),t.restore()}else t.fillStyle=e.fill,t.fill()}function g(r,t){var n=e(t.text,t.ecLevel,t.minVersion,t.maxVersion,t.quiet);if(!n)return null;var o=w(r).data("qrcode",n),a=o[0].getContext("2d");return i(n,a,t),l(n,a,t),o}function s(r){var t=w("<canvas/>").attr("width",r.size).attr("height",r.size);return g(t,r)}function h(r){return w("<img/>").attr("src",s(r)[0].toDataURL("image/png"))}function v(r){var t=e(r.text,r.ecLevel,r.minVersion,r.maxVersion,r.quiet);if(!t)return null;var n,o,i=r.size,a=r.background,u=Math.floor,f=t.moduleCount,c=u(i/f),l=u(.5*(i-c*f)),g={position:"relative",left:0,top:0,padding:0,margin:0,width:i,height:i},s={position:"absolute",padding:0,margin:0,width:c,height:c,"background-color":r.fill},h=w("<div/>").data("qrcode",t).css(g);for(a&&h.css("background-color",a),n=0;f>n;n+=1)for(o=0;f>o;o+=1)t.isDark(n,o)&&w("<div/>").css(s).css({left:l+o*c,top:l+n*c}).appendTo(h);return h}function d(r){return m&&"canvas"===r.render?s(r):m&&"image"===r.render?h(r):v(r)}var w=jQuery,m=function(){var r=document.createElement("canvas");return Boolean(r.getContext&&r.getContext("2d"))}(),p="[object Opera]"!==Object.prototype.toString.call(window.opera),y={render:"canvas",minVersion:1,maxVersion:40,ecLevel:"L",left:0,top:0,size:200,fill:"#000",background:null,text:"no text",radius:0,quiet:0,mode:0,mSize:.1,mPosX:.5,mPosY:.5,label:"no label",fontname:"sans",fontcolor:"#000",image:null};w.fn.qrcode=function(r){var t=w.extend({},y,r);return this.each(function(){"canvas"===this.nodeName.toLowerCase()?g(this,t):w(this).append(d(t))})}}(function(){var r=function(){function r(t,e){if("undefined"==typeof t.length)throw new Error(t.length+"/"+e);var n=function(){for(var r=0;r<t.length&&0==t[r];)r+=1;for(var n=new Array(t.length-r+e),o=0;o<t.length-r;o+=1)n[o]=t[o+r];return n}(),o={};return o.getAt=function(r){return n[r]},o.getLength=function(){return n.length},o.multiply=function(t){for(var e=new Array(o.getLength()+t.getLength()-1),n=0;n<o.getLength();n+=1)for(var i=0;i<t.getLength();i+=1)e[n+i]^=a.gexp(a.glog(o.getAt(n))+a.glog(t.getAt(i)));return r(e,0)},o.mod=function(t){if(o.getLength()-t.getLength()<0)return o;for(var e=a.glog(o.getAt(0))-a.glog(t.getAt(0)),n=new Array(o.getLength()),i=0;i<o.getLength();i+=1)n[i]=o.getAt(i);for(var i=0;i<t.getLength();i+=1)n[i]^=a.gexp(a.glog(t.getAt(i))+e);return r(n,0).mod(t)},o}var t=function(t,e){var o=236,a=17,l=t,g=n[e],s=null,h=0,d=null,w=new Array,m={},p=function(r,t){h=4*l+17,s=function(r){for(var t=new Array(r),e=0;r>e;e+=1){t[e]=new Array(r);for(var n=0;r>n;n+=1)t[e][n]=null}return t}(h),y(0,0),y(h-7,0),y(0,h-7),A(),B(),k(r,t),l>=7&&E(r),null==d&&(d=D(l,g,w)),M(d,t)},y=function(r,t){for(var e=-1;7>=e;e+=1)if(!(-1>=r+e||r+e>=h))for(var n=-1;7>=n;n+=1)-1>=t+n||t+n>=h||(e>=0&&6>=e&&(0==n||6==n)||n>=0&&6>=n&&(0==e||6==e)||e>=2&&4>=e&&n>=2&&4>=n?s[r+e][t+n]=!0:s[r+e][t+n]=!1)},T=function(){for(var r=0,t=0,e=0;8>e;e+=1){p(!0,e);var n=i.getLostPoint(m);(0==e||r>n)&&(r=n,t=e)}return t},B=function(){for(var r=8;h-8>r;r+=1)null==s[r][6]&&(s[r][6]=r%2==0);for(var t=8;h-8>t;t+=1)null==s[6][t]&&(s[6][t]=t%2==0)},A=function(){for(var r=i.getPatternPosition(l),t=0;t<r.length;t+=1)for(var e=0;e<r.length;e+=1){var n=r[t],o=r[e];if(null==s[n][o])for(var a=-2;2>=a;a+=1)for(var u=-2;2>=u;u+=1)-2==a||2==a||-2==u||2==u||0==a&&0==u?s[n+a][o+u]=!0:s[n+a][o+u]=!1}},E=function(r){for(var t=i.getBCHTypeNumber(l),e=0;18>e;e+=1){var n=!r&&1==(t>>e&1);s[Math.floor(e/3)][e%3+h-8-3]=n}for(var e=0;18>e;e+=1){var n=!r&&1==(t>>e&1);s[e%3+h-8-3][Math.floor(e/3)]=n}},k=function(r,t){for(var e=g<<3|t,n=i.getBCHTypeInfo(e),o=0;15>o;o+=1){var a=!r&&1==(n>>o&1);6>o?s[o][8]=a:8>o?s[o+1][8]=a:s[h-15+o][8]=a}for(var o=0;15>o;o+=1){var a=!r&&1==(n>>o&1);8>o?s[8][h-o-1]=a:9>o?s[8][15-o-1+1]=a:s[8][15-o-1]=a}s[h-8][8]=!r},M=function(r,t){for(var e=-1,n=h-1,o=7,a=0,u=i.getMaskFunction(t),f=h-1;f>0;f-=2)for(6==f&&(f-=1);;){for(var c=0;2>c;c+=1)if(null==s[n][f-c]){var l=!1;a<r.length&&(l=1==(r[a]>>>o&1));var g=u(n,f-c);g&&(l=!l),s[n][f-c]=l,o-=1,-1==o&&(a+=1,o=7)}if(n+=e,0>n||n>=h){n-=e,e=-e;break}}},C=function(t,e){for(var n=0,o=0,a=0,u=new Array(e.length),f=new Array(e.length),c=0;c<e.length;c+=1){var l=e[c].dataCount,g=e[c].totalCount-l;o=Math.max(o,l),a=Math.max(a,g),u[c]=new Array(l);for(var s=0;s<u[c].length;s+=1)u[c][s]=255&t.getBuffer()[s+n];n+=l;var h=i.getErrorCorrectPolynomial(g),v=r(u[c],h.getLength()-1),d=v.mod(h);f[c]=new Array(h.getLength()-1);for(var s=0;s<f[c].length;s+=1){var w=s+d.getLength()-f[c].length;f[c][s]=w>=0?d.getAt(w):0}}for(var m=0,s=0;s<e.length;s+=1)m+=e[s].totalCount;for(var p=new Array(m),y=0,s=0;o>s;s+=1)for(var c=0;c<e.length;c+=1)s<u[c].length&&(p[y]=u[c][s],y+=1);for(var s=0;a>s;s+=1)for(var c=0;c<e.length;c+=1)s<f[c].length&&(p[y]=f[c][s],y+=1);return p},D=function(r,t,e){for(var n=u.getRSBlocks(r,t),c=f(),l=0;l<e.length;l+=1){var g=e[l];c.put(g.getMode(),4),c.put(g.getLength(),i.getLengthInBits(g.getMode(),r)),g.write(c)}for(var s=0,l=0;l<n.length;l+=1)s+=n[l].dataCount;if(c.getLengthInBits()>8*s)throw new Error("code length overflow. ("+c.getLengthInBits()+">"+8*s+")");for(c.getLengthInBits()+4<=8*s&&c.put(0,4);c.getLengthInBits()%8!=0;)c.putBit(!1);for(;!(c.getLengthInBits()>=8*s)&&(c.put(o,8),!(c.getLengthInBits()>=8*s));)c.put(a,8);return C(c,n)};return m.addData=function(r){var t=c(r);w.push(t),d=null},m.isDark=function(r,t){if(0>r||r>=h||0>t||t>=h)throw new Error(r+","+t);return s[r][t]},m.getModuleCount=function(){return h},m.make=function(){p(!1,T())},m.createTableTag=function(r,t){r=r||2,t="undefined"==typeof t?4*r:t;var e="";e+='<table style="',e+=" border-width: 0px; border-style: none;",e+=" border-collapse: collapse;",e+=" padding: 0px; margin: "+t+"px;",e+='">',e+="<tbody>";for(var n=0;n<m.getModuleCount();n+=1){e+="<tr>";for(var o=0;o<m.getModuleCount();o+=1)e+='<td style="',e+=" border-width: 0px; border-style: none;",e+=" border-collapse: collapse;",e+=" padding: 0px; margin: 0px;",e+=" width: "+r+"px;",e+=" height: "+r+"px;",e+=" background-color: ",e+=m.isDark(n,o)?"#000000":"#ffffff",e+=";",e+='"/>';e+="</tr>"}return e+="</tbody>",e+="</table>"},m.createImgTag=function(r,t){r=r||2,t="undefined"==typeof t?4*r:t;var e=m.getModuleCount()*r+2*t,n=t,o=e-t;return v(e,e,function(t,e){if(t>=n&&o>t&&e>=n&&o>e){var i=Math.floor((t-n)/r),a=Math.floor((e-n)/r);return m.isDark(a,i)?0:1}return 1})},m};t.stringToBytes=function(r){for(var t=new Array,e=0;e<r.length;e+=1){var n=r.charCodeAt(e);t.push(255&n)}return t},t.createStringToBytes=function(r,t){var e=function(){for(var e=s(r),n=function(){var r=e.read();if(-1==r)throw new Error;return r},o=0,i={};;){var a=e.read();if(-1==a)break;var u=n(),f=n(),c=n(),l=String.fromCharCode(a<<8|u),g=f<<8|c;i[l]=g,o+=1}if(o!=t)throw new Error(o+" != "+t);return i}(),n="?".charCodeAt(0);return function(r){for(var t=new Array,o=0;o<r.length;o+=1){var i=r.charCodeAt(o);if(128>i)t.push(i);else{var a=e[r.charAt(o)];"number"==typeof a?(255&a)==a?t.push(a):(t.push(a>>>8),t.push(255&a)):t.push(n)}}return t}};var e={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},n={L:1,M:0,Q:3,H:2},o={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},i=function(){var t=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,i=7973,u=21522,f={},c=function(r){for(var t=0;0!=r;)t+=1,r>>>=1;return t};return f.getBCHTypeInfo=function(r){for(var t=r<<10;c(t)-c(n)>=0;)t^=n<<c(t)-c(n);return(r<<10|t)^u},f.getBCHTypeNumber=function(r){for(var t=r<<12;c(t)-c(i)>=0;)t^=i<<c(t)-c(i);return r<<12|t},f.getPatternPosition=function(r){return t[r-1]},f.getMaskFunction=function(r){switch(r){case o.PATTERN000:return function(r,t){return(r+t)%2==0};case o.PATTERN001:return function(r,t){return r%2==0};case o.PATTERN010:return function(r,t){return t%3==0};case o.PATTERN011:return function(r,t){return(r+t)%3==0};case o.PATTERN100:return function(r,t){return(Math.floor(r/2)+Math.floor(t/3))%2==0};case o.PATTERN101:return function(r,t){return r*t%2+r*t%3==0};case o.PATTERN110:return function(r,t){return(r*t%2+r*t%3)%2==0};case o.PATTERN111:return function(r,t){return(r*t%3+(r+t)%2)%2==0};default:throw new Error("bad maskPattern:"+r)}},f.getErrorCorrectPolynomial=function(t){for(var e=r([1],0),n=0;t>n;n+=1)e=e.multiply(r([1,a.gexp(n)],0));return e},f.getLengthInBits=function(r,t){if(t>=1&&10>t)switch(r){case e.MODE_NUMBER:return 10;case e.MODE_ALPHA_NUM:return 9;case e.MODE_8BIT_BYTE:return 8;case e.MODE_KANJI:return 8;default:throw new Error("mode:"+r)}else if(27>t)switch(r){case e.MODE_NUMBER:return 12;case e.MODE_ALPHA_NUM:return 11;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 10;default:throw new Error("mode:"+r)}else{if(!(41>t))throw new Error("type:"+t);switch(r){case e.MODE_NUMBER:return 14;case e.MODE_ALPHA_NUM:return 13;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 12;default:throw new Error("mode:"+r)}}},f.getLostPoint=function(r){for(var t=r.getModuleCount(),e=0,n=0;t>n;n+=1)for(var o=0;t>o;o+=1){for(var i=0,a=r.isDark(n,o),u=-1;1>=u;u+=1)if(!(0>n+u||n+u>=t))for(var f=-1;1>=f;f+=1)0>o+f||o+f>=t||(0!=u||0!=f)&&a==r.isDark(n+u,o+f)&&(i+=1);i>5&&(e+=3+i-5)}for(var n=0;t-1>n;n+=1)for(var o=0;t-1>o;o+=1){var c=0;r.isDark(n,o)&&(c+=1),r.isDark(n+1,o)&&(c+=1),r.isDark(n,o+1)&&(c+=1),r.isDark(n+1,o+1)&&(c+=1),(0==c||4==c)&&(e+=3)}for(var n=0;t>n;n+=1)for(var o=0;t-6>o;o+=1)r.isDark(n,o)&&!r.isDark(n,o+1)&&r.isDark(n,o+2)&&r.isDark(n,o+3)&&r.isDark(n,o+4)&&!r.isDark(n,o+5)&&r.isDark(n,o+6)&&(e+=40);for(var o=0;t>o;o+=1)for(var n=0;t-6>n;n+=1)r.isDark(n,o)&&!r.isDark(n+1,o)&&r.isDark(n+2,o)&&r.isDark(n+3,o)&&r.isDark(n+4,o)&&!r.isDark(n+5,o)&&r.isDark(n+6,o)&&(e+=40);for(var l=0,o=0;t>o;o+=1)for(var n=0;t>n;n+=1)r.isDark(n,o)&&(l+=1);var g=Math.abs(100*l/t/t-50)/5;return e+=10*g},f}(),a=function(){for(var r=new Array(256),t=new Array(256),e=0;8>e;e+=1)r[e]=1<<e;for(var e=8;256>e;e+=1)r[e]=r[e-4]^r[e-5]^r[e-6]^r[e-8];for(var e=0;255>e;e+=1)t[r[e]]=e;var n={};return n.glog=function(r){if(1>r)throw new Error("glog("+r+")");return t[r]},n.gexp=function(t){for(;0>t;)t+=255;for(;t>=256;)t-=255;return r[t]},n}(),u=function(){var r=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(r,t){var e={};return e.totalCount=r,e.dataCount=t,e},e={},o=function(t,e){switch(e){case n.L:return r[4*(t-1)+0];case n.M:return r[4*(t-1)+1];case n.Q:return r[4*(t-1)+2];case n.H:return r[4*(t-1)+3];default:return}};return e.getRSBlocks=function(r,e){var n=o(r,e);if("undefined"==typeof n)throw new Error("bad rs block @ typeNumber:"+r+"/errorCorrectLevel:"+e);for(var i=n.length/3,a=new Array,u=0;i>u;u+=1)for(var f=n[3*u+0],c=n[3*u+1],l=n[3*u+2],g=0;f>g;g+=1)a.push(t(c,l));return a},e}(),f=function(){var r=new Array,t=0,e={};return e.getBuffer=function(){return r},e.getAt=function(t){var e=Math.floor(t/8);return 1==(r[e]>>>7-t%8&1)},e.put=function(r,t){for(var n=0;t>n;n+=1)e.putBit(1==(r>>>t-n-1&1))},e.getLengthInBits=function(){return t},e.putBit=function(e){var n=Math.floor(t/8);r.length<=n&&r.push(0),e&&(r[n]|=128>>>t%8),t+=1},e},c=function(r){var n=e.MODE_8BIT_BYTE,o=t.stringToBytes(r),i={};return i.getMode=function(){return n},i.getLength=function(r){return o.length},i.write=function(r){for(var t=0;t<o.length;t+=1)r.put(o[t],8)},i},l=function(){var r=new Array,t={};return t.writeByte=function(t){r.push(255&t)},t.writeShort=function(r){t.writeByte(r),t.writeByte(r>>>8)},t.writeBytes=function(r,e,n){e=e||0,n=n||r.length;for(var o=0;n>o;o+=1)t.writeByte(r[o+e])},t.writeString=function(r){for(var e=0;e<r.length;e+=1)t.writeByte(r.charCodeAt(e))},t.toByteArray=function(){return r},t.toString=function(){var t="";t+="[";for(var e=0;e<r.length;e+=1)e>0&&(t+=","),t+=r[e];return t+="]"},t},g=function(){var r=0,t=0,e=0,n="",o={},i=function(r){n+=String.fromCharCode(a(63&r))},a=function(r){if(0>r);else{if(26>r)return 65+r;if(52>r)return 97+(r-26);if(62>r)return 48+(r-52);if(62==r)return 43;if(63==r)return 47}throw new Error("n:"+r)};return o.writeByte=function(n){for(r=r<<8|255&n,t+=8,e+=1;t>=6;)i(r>>>t-6),t-=6},o.flush=function(){if(t>0&&(i(r<<6-t),r=0,t=0),e%3!=0)for(var o=3-e%3,a=0;o>a;a+=1)n+="="},o.toString=function(){return n},o},s=function(r){var t=r,e=0,n=0,o=0,i={};i.read=function(){for(;8>o;){if(e>=t.length){if(0==o)return-1;throw new Error("unexpected end of file./"+o)}var r=t.charAt(e);if(e+=1,"="==r)return o=0,-1;r.match(/^\s$/)||(n=n<<6|a(r.charCodeAt(0)),o+=6)}var i=n>>>o-8&255;return o-=8,i};var a=function(r){if(r>=65&&90>=r)return r-65;if(r>=97&&122>=r)return r-97+26;if(r>=48&&57>=r)return r-48+52;if(43==r)return 62;if(47==r)return 63;throw new Error("c:"+r)};return i},h=function(r,t){var e=r,n=t,o=new Array(r*t),i={};i.setPixel=function(r,t,n){o[t*e+r]=n},i.write=function(r){r.writeString("GIF87a"),r.writeShort(e),r.writeShort(n),r.writeByte(128),r.writeByte(0),r.writeByte(0),r.writeByte(0),r.writeByte(0),r.writeByte(0),r.writeByte(255),r.writeByte(255),r.writeByte(255),r.writeString(","),r.writeShort(0),r.writeShort(0),r.writeShort(e),r.writeShort(n),r.writeByte(0);var t=2,o=u(t);r.writeByte(t);for(var i=0;o.length-i>255;)r.writeByte(255),r.writeBytes(o,i,255),i+=255;r.writeByte(o.length-i),r.writeBytes(o,i,o.length-i),r.writeByte(0),r.writeString(";")};var a=function(r){var t=r,e=0,n=0,o={};return o.write=function(r,o){if(r>>>o!=0)throw new Error("length over");for(;e+o>=8;)t.writeByte(255&(r<<e|n)),o-=8-e,r>>>=8-e,n=0,e=0;n=r<<e|n,e+=o},o.flush=function(){e>0&&t.writeByte(n)},o},u=function(r){for(var t=1<<r,e=(1<<r)+1,n=r+1,i=f(),u=0;t>u;u+=1)i.add(String.fromCharCode(u));i.add(String.fromCharCode(t)),i.add(String.fromCharCode(e));var c=l(),g=a(c);g.write(t,n);var s=0,h=String.fromCharCode(o[s]);for(s+=1;s<o.length;){var v=String.fromCharCode(o[s]);s+=1,i.contains(h+v)?h+=v:(g.write(i.indexOf(h),n),i.size()<4095&&(i.size()==1<<n&&(n+=1),i.add(h+v)),h=v)}return g.write(i.indexOf(h),n),g.write(e,n),g.flush(),c.toByteArray()},f=function(){var r={},t=0,e={};return e.add=function(n){if(e.contains(n))throw new Error("dup key:"+n);r[n]=t,t+=1},e.size=function(){return t},e.indexOf=function(t){return r[t]},e.contains=function(t){return"undefined"!=typeof r[t]},e};return i},v=function(r,t,e,n){for(var o=h(r,t),i=0;t>i;i+=1)for(var a=0;r>a;a+=1)o.setPixel(a,i,e(a,i));var u=l();o.write(u);for(var f=g(),c=u.toByteArray(),s=0;s<c.length;s+=1)f.writeByte(c[s]);f.flush();var v="";return v+="<img",v+=' src="',v+="data:image/gif;base64,",v+=f,v+='"',v+=' width="',v+=r,v+='"',v+=' height="',v+=t,v+='"',n&&(v+=' alt="',v+=n,v+='"'),v+="/>"};return t}();return function(r){"function"==typeof define&&define.amd?define([],r):"object"==typeof exports&&(module.exports=r())}(function(){return r}),!function(r){r.stringToBytes=function(r){function t(r){for(var t=[],e=0;e<r.length;e++){var n=r.charCodeAt(e);128>n?t.push(n):2048>n?t.push(192|n>>6,128|63&n):55296>n||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(e++,n=65536+((1023&n)<<10|1023&r.charCodeAt(e)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return t}return t(r)}}(r),r}());
!function(e,t,i,n){"use strict";var o=i("html"),a=i(e),r=i(t),s=i.fancybox=function(){s.open.apply(this,arguments)},l=navigator.userAgent.match(/msie/i),c=null,d=t.createTouch!==n,p=function(e){return e&&e.hasOwnProperty&&e instanceof i},h=function(e){return e&&"string"===i.type(e)},f=function(e){return h(e)&&e.indexOf("%")>0},u=function(e){return e&&!(e.style.overflow&&"hidden"===e.style.overflow)&&(e.clientWidth&&e.scrollWidth>e.clientWidth||e.clientHeight&&e.scrollHeight>e.clientHeight)},g=function(e,t){var i=parseInt(e,10)||0;return t&&f(e)&&(i=s.getViewport()[t]/100*i),Math.ceil(i)},m=function(e,t){return g(e,t)+"px"};i.extend(s,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!d,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{34:"up",39:"left",40:"up"},prev:{33:"down",37:"right",38:"down"},close:[27,8],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(l?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:i.noop,beforeLoad:i.noop,afterLoad:i.noop,beforeShow:i.noop,afterShow:i.noop,beforeChange:i.noop,beforeClose:i.noop,afterClose:i.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(e,t){return e&&(i.isPlainObject(t)||(t={}),!1!==s.close(!0))?(i.isArray(e)||(e=p(e)?i(e).get():[e]),i.each(e,function(o,a){var r,l,c,d,f,u,g,m={};"object"===i.type(a)&&(a.nodeType&&(a=i(a)),p(a)?(m={href:a.data("fancybox-href")||a.attr("href"),title:a.data("fancybox-title")||a.attr("title"),isDom:!0,element:a},i.metadata&&i.extend(!0,m,a.metadata())):m=a),r=t.href||m.href||(h(a)?a:null),l=t.title!==n?t.title:m.title||"",c=t.content||m.content,d=c?"html":t.type||m.type,!d&&m.isDom&&(d=a.data("fancybox-type"),d||(f=a.prop("class").match(/fancybox\.(\w+)/),d=f?f[1]:null)),h(r)&&(d||(s.isImage(r)?d="image":s.isSWF(r)?d="swf":"#"===r.charAt(0)?d="inline":h(a)&&(d="html",c=a)),"ajax"===d&&(u=r.split(/\s+/,2),r=u.shift(),g=u.shift())),c||("inline"===d?r?c=i(h(r)?r.replace(/.*(?=#[^\s]+$)/,""):r):m.isDom&&(c=a):"html"===d?c=r:d||r||!m.isDom||(d="inline",c=a)),i.extend(m,{href:r,type:d,content:c,title:l,selector:g}),e[o]=m}),s.opts=i.extend(!0,{},s.defaults,t),t.keys!==n&&(s.opts.keys=t.keys?i.extend({},s.defaults.keys,t.keys):!1),s.group=e,s._start(s.opts.index)):void 0},cancel:function(){var e=s.coming;e&&!1!==s.trigger("onCancel")&&(s.hideLoading(),s.ajaxLoad&&s.ajaxLoad.abort(),s.ajaxLoad=null,s.imgPreload&&(s.imgPreload.onload=s.imgPreload.onerror=null),e.wrap&&e.wrap.stop(!0,!0).trigger("onReset").remove(),s.coming=null,s.current||s._afterZoomOut(e))},close:function(e){s.cancel(),!1!==s.trigger("beforeClose")&&(s.unbindEvents(),s.isActive&&(s.isOpen&&e!==!0?(s.isOpen=s.isOpened=!1,s.isClosing=!0,i(".fancybox-item, .fancybox-nav").remove(),s.wrap.stop(!0,!0).removeClass("fancybox-opened"),s.transitions[s.current.closeMethod]()):(i(".fancybox-wrap").stop(!0).trigger("onReset").remove(),s._afterZoomOut())))},play:function(e){var t=function(){clearTimeout(s.player.timer)},i=function(){t(),s.current&&s.player.isActive&&(s.player.timer=setTimeout(s.next,s.current.playSpeed))},n=function(){t(),r.unbind(".player"),s.player.isActive=!1,s.trigger("onPlayEnd")},o=function(){s.current&&(s.current.loop||s.current.index<s.group.length-1)&&(s.player.isActive=!0,r.bind({"onCancel.player beforeClose.player":n,"onUpdate.player":i,"beforeLoad.player":t}),i(),s.trigger("onPlayStart"))};e===!0||!s.player.isActive&&e!==!1?o():n()},next:function(e){var t=s.current;t&&(h(e)||(e=t.direction.next),s.jumpto(t.index+1,e,"next"))},prev:function(e){var t=s.current;t&&(h(e)||(e=t.direction.prev),s.jumpto(t.index-1,e,"prev"))},jumpto:function(e,t,i){var o=s.current;o&&(e=g(e),s.direction=t||o.direction[e>=o.index?"next":"prev"],s.router=i||"jumpto",o.loop&&(0>e&&(e=o.group.length+e%o.group.length),e%=o.group.length),o.group[e]!==n&&(s.cancel(),s._start(e)))},reposition:function(e,t){var n,o=s.current,a=o?o.wrap:null;a&&(n=s._getPosition(t),e&&"scroll"===e.type?(delete n.position,a.stop(!0,!0).animate(n,200)):(a.css(n),o.pos=i.extend({},o.dim,n)))},update:function(e){var t=e&&e.type,i=!t||"orientationchange"===t;i&&(clearTimeout(c),c=null),s.isOpen&&!c&&(c=setTimeout(function(){var n=s.current;n&&!s.isClosing&&(s.wrap.removeClass("fancybox-tmp"),(i||"load"===t||"resize"===t&&n.autoResize)&&s._setDimension(),"scroll"===t&&n.canShrink||s.reposition(e),s.trigger("onUpdate"),c=null)},i&&!d?0:300))},toggle:function(e){s.isOpen&&(s.current.fitToView="boolean"===i.type(e)?e:!s.current.fitToView,d&&(s.wrap.removeAttr("style").addClass("fancybox-tmp"),s.trigger("onUpdate")),s.update())},hideLoading:function(){r.unbind(".loading"),i("#fancybox-loading").remove()},showLoading:function(){var e,t;s.hideLoading(),e=i('<div id="fancybox-loading"><div></div></div>').click(s.cancel).appendTo("body"),r.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),s.cancel())}),s.defaults.fixed||(t=s.getViewport(),e.css({position:"absolute",top:.5*t.h+t.y,left:.5*t.w+t.x}))},getViewport:function(){var t=s.current&&s.current.locked||!1,i={x:a.scrollLeft(),y:a.scrollTop()};return t?(i.w=t[0].clientWidth,i.h=t[0].clientHeight):(i.w=d&&e.innerWidth?e.innerWidth:a.width(),i.h=d&&e.innerHeight?e.innerHeight:a.height()),i},unbindEvents:function(){s.wrap&&p(s.wrap)&&s.wrap.unbind(".fb"),r.unbind(".fb"),a.unbind(".fb")},bindEvents:function(){var e,t=s.current;t&&(a.bind("orientationchange.fb"+(d?"":" resize.fb")+(t.autoCenter&&!t.locked?" scroll.fb":""),s.update),e=t.keys,e&&r.bind("keydown.fb",function(o){var a=o.which||o.keyCode,r=o.target||o.srcElement;return 27===a&&s.coming?!1:void(o.ctrlKey||o.altKey||o.shiftKey||o.metaKey||r&&(r.type||i(r).is("[contenteditable]"))||i.each(e,function(e,r){return t.group.length>1&&r[a]!==n?(s[e](r[a]),o.preventDefault(),!1):i.inArray(a,r)>-1?(s[e](),o.preventDefault(),!1):void 0}))}),i.fn.mousewheel&&t.mouseWheel&&s.wrap.bind("mousewheel.fb",function(e,n,o,a){for(var r=e.target||null,l=i(r),c=!1;l.length&&!(c||l.is(".fancybox-skin")||l.is(".fancybox-wrap"));)c=u(l[0]),l=i(l).parent();0===n||c||s.group.length>1&&!t.canShrink&&(a>0||o>0?s.prev(a>0?"down":"left"):(0>a||0>o)&&s.next(0>a?"up":"right"),e.preventDefault())}))},trigger:function(e,t){var n,o=t||s.coming||s.current;if(o){if(i.isFunction(o[e])&&(n=o[e].apply(o,Array.prototype.slice.call(arguments,1))),n===!1)return!1;o.helpers&&i.each(o.helpers,function(t,n){n&&s.helpers[t]&&i.isFunction(s.helpers[t][e])&&s.helpers[t][e](i.extend(!0,{},s.helpers[t].defaults,n),o)}),r.trigger(e)}},isImage:function(e){return h(e)&&e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(e){return h(e)&&e.match(/\.(swf)((\?|#).*)?$/i)},_start:function(e){var t,n,o,a,r,l={};if(e=g(e),t=s.group[e]||null,!t)return!1;if(l=i.extend(!0,{},s.opts,t),a=l.margin,r=l.padding,"number"===i.type(a)&&(l.margin=[a,a,a,a]),"number"===i.type(r)&&(l.padding=[r,r,r,r]),l.modal&&i.extend(!0,l,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),l.autoSize&&(l.autoWidth=l.autoHeight=!0),"auto"===l.width&&(l.autoWidth=!0),"auto"===l.height&&(l.autoHeight=!0),l.group=s.group,l.index=e,s.coming=l,!1===s.trigger("beforeLoad"))return void(s.coming=null);if(o=l.type,n=l.href,!o)return s.coming=null,s.current&&s.router&&"jumpto"!==s.router?(s.current.index=e,s[s.router](s.direction)):!1;if(s.isActive=!0,("image"===o||"swf"===o)&&(l.autoHeight=l.autoWidth=!1,l.scrolling="visible"),"image"===o&&(l.aspectRatio=!0),"iframe"===o&&d&&(l.scrolling="scroll"),l.wrap=i(l.tpl.wrap).addClass("fancybox-"+(d?"mobile":"desktop")+" fancybox-type-"+o+" fancybox-tmp "+l.wrapCSS).appendTo(l.parent||"body"),i.extend(l,{skin:i(".fancybox-skin",l.wrap),outer:i(".fancybox-outer",l.wrap),inner:i(".fancybox-inner",l.wrap)}),i.each(["Top","Right","Bottom","Left"],function(e,t){l.skin.css("padding"+t,m(l.padding[e]))}),s.trigger("onReady"),"inline"===o||"html"===o){if(!l.content||!l.content.length)return s._error("content")}else if(!n)return s._error("href");"image"===o?s._loadImage():"ajax"===o?s._loadAjax():"iframe"===o?s._loadIframe():s._afterLoad()},_error:function(e){i.extend(s.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:e,content:s.coming.tpl.error}),s._afterLoad()},_loadImage:function(){var e=s.imgPreload=new Image;e.onload=function(){this.onload=this.onerror=null,s.coming.width=this.width/s.opts.pixelRatio,s.coming.height=this.height/s.opts.pixelRatio,s._afterLoad()},e.onerror=function(){this.onload=this.onerror=null,s._error("image")},e.src=s.coming.href,e.complete!==!0&&s.showLoading()},_loadAjax:function(){var e=s.coming;s.showLoading(),s.ajaxLoad=i.ajax(i.extend({},e.ajax,{url:e.href,error:function(e,t){s.coming&&"abort"!==t?s._error("ajax",e):s.hideLoading()},success:function(t,i){"success"===i&&(e.content=t,s._afterLoad())}}))},_loadIframe:function(){var e=s.coming,t=i(e.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",d?"auto":e.iframe.scrolling).attr("src",e.href);i(e.wrap).bind("onReset",function(){try{i(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),e.iframe.preload&&(s.showLoading(),t.one("load",function(){i(this).data("ready",1),d||i(this).bind("load.fb",s.update),i(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),s._afterLoad()})),e.content=t.appendTo(e.inner),e.iframe.preload||s._afterLoad()},_preloadImages:function(){var e,t,i=s.group,n=s.current,o=i.length,a=n.preload?Math.min(n.preload,o-1):0;for(t=1;a>=t;t+=1)e=i[(n.index+t)%o],"image"===e.type&&e.href&&((new Image).src=e.href)},_afterLoad:function(){var e,t,n,o,a,r,l=s.coming,c=s.current,d="fancybox-placeholder";if(s.hideLoading(),l&&s.isActive!==!1){if(!1===s.trigger("afterLoad",l,c))return l.wrap.stop(!0).trigger("onReset").remove(),void(s.coming=null);switch(c&&(s.trigger("beforeChange",c),c.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),s.unbindEvents(),e=l,t=l.content,n=l.type,o=l.scrolling,i.extend(s,{wrap:e.wrap,skin:e.skin,outer:e.outer,inner:e.inner,current:e,previous:c}),a=e.href,n){case"inline":case"ajax":case"html":e.selector?t=i("<div>").html(t).find(e.selector):p(t)&&(t.data(d)||t.data(d,i('<div class="'+d+'"></div>').insertAfter(t).hide()),t=t.show().detach(),e.wrap.bind("onReset",function(){i(this).find(t).length&&t.hide().replaceAll(t.data(d)).data(d,!1)}));break;case"image":t=e.tpl.image.replace("{href}",a);break;case"swf":t='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+a+'"></param>',r="",i.each(e.swf,function(e,i){t+='<param name="'+e+'" value="'+i+'"></param>',r+=" "+e+'="'+i+'"'}),t+='<embed src="'+a+'" type="application/x-shockwave-flash" width="100%" height="100%"'+r+"></embed></object>"}p(t)&&t.parent().is(e.inner)||e.inner.append(t),s.trigger("beforeShow"),e.inner.css("overflow","yes"===o?"scroll":"no"===o?"hidden":o),s._setDimension(),s.reposition(),s.isOpen=!1,s.coming=null,s.bindEvents(),s.isOpened?c.prevMethod&&s.transitions[c.prevMethod]():i(".fancybox-wrap").not(e.wrap).stop(!0).trigger("onReset").remove(),s.transitions[s.isOpened?e.nextMethod:e.openMethod](),s._preloadImages()}},_setDimension:function(){var e,t,n,o,a,r,l,c,d,p,h,u,y,x,v,b=s.getViewport(),w=0,k=!1,C=!1,O=s.wrap,T=s.skin,W=s.inner,E=s.current,_=E.width,S=E.height,L=E.minWidth,R=E.minHeight,j=E.maxWidth,P=E.maxHeight,H=E.scrolling,M=E.scrollOutside?E.scrollbarWidth:0,A=E.margin,I=g(A[1]+A[3]),D=g(A[0]+A[2]);if(O.add(T).add(W).width("auto").height("auto").removeClass("fancybox-tmp"),e=g(T.outerWidth(!0)-T.width()),t=g(T.outerHeight(!0)-T.height()),n=I+e,o=D+t,a=f(_)?(b.w-n)*g(_)/100:_,r=f(S)?(b.h-o)*g(S)/100:S,"iframe"===E.type){if(x=E.content,E.autoHeight&&1===x.data("ready"))try{x[0].contentWindow.document.location&&(W.width(a).height(9999),v=x.contents().find("body"),M&&v.css("overflow-x","hidden"),r=v.outerHeight(!0))}catch(z){}}else(E.autoWidth||E.autoHeight)&&(W.addClass("fancybox-tmp"),E.autoWidth||W.width(a),E.autoHeight||W.height(r),E.autoWidth&&(a=W.width()),E.autoHeight&&(r=W.height()),W.removeClass("fancybox-tmp"));if(_=g(a),S=g(r),d=a/r,L=g(f(L)?g(L,"w")-n:L),j=g(f(j)?g(j,"w")-n:j),R=g(f(R)?g(R,"h")-o:R),P=g(f(P)?g(P,"h")-o:P),l=j,c=P,E.fitToView&&(j=Math.min(b.w-n,j),P=Math.min(b.h-o,P)),u=b.w-I,y=b.h-D,E.aspectRatio?(_>j&&(_=j,S=g(_/d)),S>P&&(S=P,_=g(S*d)),L>_&&(_=L,S=g(_/d)),R>S&&(S=R,_=g(S*d))):(_=Math.max(L,Math.min(_,j)),E.autoHeight&&"iframe"!==E.type&&(W.width(_),S=W.height()),S=Math.max(R,Math.min(S,P))),E.fitToView)if(W.width(_).height(S),O.width(_+e),p=O.width(),h=O.height(),E.aspectRatio)for(;(p>u||h>y)&&_>L&&S>R&&!(w++>19);)S=Math.max(R,Math.min(P,S-10)),_=g(S*d),L>_&&(_=L,S=g(_/d)),_>j&&(_=j,S=g(_/d)),W.width(_).height(S),O.width(_+e),p=O.width(),h=O.height();else _=Math.max(L,Math.min(_,_-(p-u))),S=Math.max(R,Math.min(S,S-(h-y)));M&&"auto"===H&&r>S&&u>_+e+M&&(_+=M),W.width(_).height(S),O.width(_+e),p=O.width(),h=O.height(),k=(p>u||h>y)&&_>L&&S>R,C=E.aspectRatio?l>_&&c>S&&a>_&&r>S:(l>_||c>S)&&(a>_||r>S),i.extend(E,{dim:{width:m(p),height:m(h)},origWidth:a,origHeight:r,canShrink:k,canExpand:C,wPadding:e,hPadding:t,wrapSpace:h-T.outerHeight(!0),skinSpace:T.height()-S}),!x&&E.autoHeight&&S>R&&P>S&&!C&&W.height("auto")},_getPosition:function(e){var t=s.current,i=s.getViewport(),n=t.margin,o=s.wrap.width()+n[1]+n[3],a=s.wrap.height()+n[0]+n[2],r={position:"absolute",top:n[0],left:n[3]};return t.autoCenter&&t.fixed&&!e&&a<=i.h&&o<=i.w?r.position="fixed":t.locked||(r.top+=i.y,r.left+=i.x),r.top=m(Math.max(r.top,r.top+(i.h-a)*t.topRatio)),r.left=m(Math.max(r.left,r.left+(i.w-o)*t.leftRatio)),r},_afterZoomIn:function(){var e=s.current;e&&(s.isOpen=s.isOpened=!0,s.wrap.css("overflow","visible").addClass("fancybox-opened"),s.update(),(e.closeClick||e.nextClick&&s.group.length>1)&&s.inner.css("cursor","pointer").bind("click.fb",function(t){i(t.target).is("a")||i(t.target).parent().is("a")||(t.preventDefault(),s[e.closeClick?"close":"next"]())}),e.closeBtn&&i(e.tpl.closeBtn).appendTo(s.skin).bind("click.fb",function(e){e.preventDefault(),s.close()}),e.arrows&&s.group.length>1&&((e.loop||e.index>0)&&i(e.tpl.prev).appendTo(s.outer).bind("click.fb",s.prev),(e.loop||e.index<s.group.length-1)&&i(e.tpl.next).appendTo(s.outer).bind("click.fb",s.next)),s.trigger("afterShow"),s.helpers.accessibility.disableTabbingBehindOverlay(),e.loop||e.index!==e.group.length-1?s.opts.autoPlay&&!s.player.isActive&&(s.opts.autoPlay=!1,s.play()):s.play(!1))},_afterZoomOut:function(e){e=e||s.current,i(".fancybox-wrap").trigger("onReset").remove(),i.extend(s,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),s.trigger("afterClose",e),s.helpers.accessibility.restoreOriginalTabbingFunctionality()}}),s.transitions={getOrigPosition:function(){var e=s.current,t=e.element,i=e.orig,n={},o=50,a=50,r=e.hPadding,l=e.wPadding,c=s.getViewport();return!i&&e.isDom&&t.is(":visible")&&(i=t.find("img:first"),i.length||(i=t)),p(i)?(n=i.offset(),i.is("img")&&(o=i.outerWidth(),a=i.outerHeight())):(n.top=c.y+(c.h-a)*e.topRatio,n.left=c.x+(c.w-o)*e.leftRatio),("fixed"===s.wrap.css("position")||e.locked)&&(n.top-=c.y,n.left-=c.x),n={top:m(n.top-r*e.topRatio),left:m(n.left-l*e.leftRatio),width:m(o+l),height:m(a+r)}},step:function(e,t){var i,n,o,a=t.prop,r=s.current,l=r.wrapSpace,c=r.skinSpace;("width"===a||"height"===a)&&(i=t.end===t.start?1:(e-t.start)/(t.end-t.start),s.isClosing&&(i=1-i),n="width"===a?r.wPadding:r.hPadding,o=e-n,s.skin[a](g("width"===a?o:o-l*i)),s.inner[a](g("width"===a?o:o-l*i-c*i)))},zoomIn:function(){var e=s.current,t=e.pos,n=e.openEffect,o="elastic"===n,a=i.extend({opacity:1},t);delete a.position,o?(t=this.getOrigPosition(),e.openOpacity&&(t.opacity=.1)):"fade"===n&&(t.opacity=.1),s.wrap.css(t).animate(a,{duration:"none"===n?0:e.openSpeed,easing:e.openEasing,step:o?this.step:null,complete:s._afterZoomIn})},zoomOut:function(){var e=s.current,t=e.closeEffect,i="elastic"===t,n={opacity:.1};i&&(n=this.getOrigPosition(),e.closeOpacity&&(n.opacity=.1)),s.wrap.animate(n,{duration:"none"===t?0:e.closeSpeed,easing:e.closeEasing,step:i?this.step:null,complete:s._afterZoomOut})},changeIn:function(){var e,t=s.current,i=t.nextEffect,n=t.pos,o={opacity:1},a=s.direction,r=200;n.opacity=.1,"elastic"===i&&(e="down"===a||"up"===a?"top":"left","down"===a||"right"===a?(n[e]=m(g(n[e])-r),o[e]="+="+r+"px"):(n[e]=m(g(n[e])+r),o[e]="-="+r+"px")),"none"===i?s._afterZoomIn():s.wrap.css(n).animate(o,{duration:t.nextSpeed,easing:t.nextEasing,complete:s._afterZoomIn})},changeOut:function(){var e=s.previous,t=e.prevEffect,n={opacity:.1},o=s.direction,a=200;"elastic"===t&&(n["down"===o||"up"===o?"top":"left"]=("up"===o||"left"===o?"-":"+")+"="+a+"px"),e.wrap.animate(n,{duration:"none"===t?0:e.prevSpeed,easing:e.prevEasing,complete:function(){i(this).trigger("onReset").remove()}})}},s.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!d,fixed:!0,focusOnOriginElement:!0},overlay:null,fixed:!1,el:i("html"),create:function(e){e=i.extend({},this.defaults,e),this.overlay&&this.close(),this.overlay=i('<div class="fancybox-overlay"></div>').appendTo(s.coming?s.coming.parent:e.parent),this.fixed=!1,e.fixed&&s.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0),this.focusOnOriginElement=e.focusOnOriginElement},open:function(e){var t=this;e=i.extend({},this.defaults,e),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(e),this.fixed||(a.bind("resize.overlay",i.proxy(this.update,this)),this.update()),e.closeClick&&this.overlay.bind("click.overlay",function(e){return i(e.target).hasClass("fancybox-overlay")?(s.isActive?s.close():t.close(),!1):void 0}),this.overlay.css(e.css).show()},close:function(){var e,t;a.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&(i(".fancybox-margin").removeClass("fancybox-margin"),e=a.scrollTop(),t=a.scrollLeft(),this.el.removeClass("fancybox-lock"),a.scrollTop(e).scrollLeft(t)),i(".fancybox-overlay").remove().hide(),this.focusOnOriginElement&&s.helpers.accessibility.focusOnOriginElement(),i.extend(this,{overlay:null,fixed:!1})},update:function(){var e,i="100%";this.overlay.width(i).height("100%"),l?(e=Math.max(t.documentElement.offsetWidth,t.body.offsetWidth),r.width()>e&&(i=r.width())):r.width()>a.width()&&(i=r.width()),this.overlay.width(i).height(r.height())},onReady:function(e,t){var n=this.overlay;i(".fancybox-overlay").stop(!0,!0),n||this.create(e),e.locked&&this.fixed&&t.fixed&&(n||(this.margin=r.height()>a.height()?i("html").css("margin-right").replace("px",""):!1),t.locked=this.overlay.append(t.wrap),t.fixed=!1),e.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(e,t){var n,o;t.locked&&(this.margin!==!1&&(i("*").filter(function(){return"fixed"===i(this).css("position")&&!i(this).hasClass("fancybox-overlay")&&!i(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),n=a.scrollTop(),o=a.scrollLeft(),this.el.addClass("fancybox-lock"),a.scrollTop(n).scrollLeft(o)),this.open(e)},onUpdate:function(){this.fixed||this.update()},afterClose:function(e){this.overlay&&!s.coming&&this.overlay.fadeOut(e.speedOut,i.proxy(this.close,this))}},s.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(e){var t,n,o=s.current,a=o.title,r=e.type;if(i.isFunction(a)&&(a=a.call(o.element,o)),h(a)&&""!==i.trim(a)){switch(t=i('<div class="fancybox-title fancybox-title-'+r+'-wrap">'+a+"</div>"),r){case"inside":n=s.skin;break;case"outside":n=s.wrap;break;case"over":n=s.inner;break;default:n=s.skin,t.appendTo("body"),l&&t.width(t.width()),t.wrapInner('<span class="child"></span>'),s.current.margin[2]+=Math.abs(g(t.css("margin-bottom")))}t["top"===e.position?"prependTo":"appendTo"](n)}}},i.fn.fancybox=function(e){var t,n=i(this),o=this.selector||"",a=function(a){var r,l,c=i(this).blur(),d=t;s.helpers.accessibility.storeOriginElement(c),a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||c.is(".fancybox-wrap")||(r=e.groupAttr||"data-fancybox-group",l=c.attr(r),l||(r="rel",l=c.get(0)[r]),l&&""!==l&&"nofollow"!==l&&(c=o.length?i(o):n,c=c.filter("["+r+'="'+l+'"]'),d=c.index(this)),e.index=d,s.open(c,e)!==!1&&a.preventDefault())};return e=e||{},t=e.index||0,o&&e.live!==!1?r.undelegate(o,"click.fb-start").delegate(o+":not('.fancybox-item, .fancybox-nav')","click.fb-start",a):n.unbind("click.fb-start").bind("click.fb-start",a),this.filter("[data-fancybox-start=1]").trigger("click"),this},r.ready(function(){var t,a;i.scrollbarWidth===n&&(i.scrollbarWidth=function(){var e=i('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),t=e.children(),n=t.innerWidth()-t.height(99).innerWidth();return e.remove(),n}),i.support.fixedPosition===n&&(i.support.fixedPosition=function(){var e=i('<div style="position:fixed;top:20px;"></div>').appendTo("body"),t=20===e[0].offsetTop||15===e[0].offsetTop;return e.remove(),t}()),i.extend(s.defaults,{scrollbarWidth:i.scrollbarWidth(),fixed:i.support.fixedPosition,parent:i("body")}),t=i(e).width(),o.addClass("fancybox-lock-test"),a=i(e).width(),o.removeClass("fancybox-lock-test"),i("<style type='text/css'>.fancybox-margin{margin-right:"+(a-t)+"px;}</style>").appendTo("head")})}(window,document,jQuery);
!function(i){i.fancybox.helpers.accessibility={originElement:null,disableTabbingBehindOverlay:function(){var t=i("html").find("a, input, button, area, frame, iframe, [tabindex]").not('*[tabindex="-1"]');t.each(function(){if(0==i(this).parents(".fancybox-wrap").length){var t=i(this).attr("tabindex");t="undefined"==typeof t||""===t?"":t,i(this).data("disabledTabIndex",t).addClass("tab-disabled").attr("tabindex","-1")}})},restoreOriginalTabbingFunctionality:function(){var t=i("html").find(".tab-disabled");t.each(function(){var t=i(this).data("disabledTabIndex");switch(t){case"":i(this).removeAttr("tabindex");break;default:i(this).attr("tabindex",t)}i(this).removeClass("tab-disabled")})},storeOriginElement:function(i){this.originElement=i},focusOnOriginElement:function(){this.originElement&&this.originElement.focus()}}}(jQuery);
!function(e){"use strict";e.fn.focusbox=function(o){var t=null,n=null,c=0,u=0,s=this,l=!1,a=!1,i=null,d=250,r=!1;if(0==s.length)return void C("Focusbox cannot instantiate, target element not found",!0);var m=e.extend({transitionDurationMs:150,boxOutlineMarginPx:0,trackFocussedElement:!1,zIndex:9999,onFocusCallback:null,focusValidationCallback:null,nodeSkipList:["html","body"],debugMode:!1},o),b=function(e){C("Focusbox: onElementFocus: start");try{if(m.nodeSkipList.length>0&&-1!=m.nodeSkipList.indexOf(e.target.nodeName.toLowerCase()))return void C("Focusbox: onElementFocus: node type '"+e.target.nodeName+"' was skipped");m.trackFocussedElement&&null!=i&&(C("Focusbox: onElementFocus: tracking enabled and timer active, resetting"),clearTimeout(i),i=null);var o=!1;r&&(r=!1,C("Focusbox: onElementFocus: focus is valid because skipFocusCheckOnNextFocus"),o=!0);var c=e.target;if(o||(null!=m.focusValidationCallback&&0==l&&m.focusValidationCallback&&m.focusValidationCallback.constructor&&m.focusValidationCallback.call&&m.focusValidationCallback.apply&&(l=!0),1==l&&m.focusValidationCallback(e)&&(C("Focusbox: onElementFocus: focusValidationCallback said its ok"),o=!0)),o||(y()?(o=!0,C("Focusbox: onElementFocus: elementFocusCausedByTabKey()")):(C("Focusbox: onElementFocus: !elementFocusCausedByTabKey()"),E())),o){var u=p(c);t.style.left=u.left-m.boxOutlineMarginPx+"px",t.style.top=u.top-m.boxOutlineMarginPx+"px",t.style.width=c.offsetWidth+2*m.boxOutlineMarginPx+"px",t.style.height=c.offsetHeight+2*m.boxOutlineMarginPx+"px",9999!=m.zIndex&&(t.style.zIndex=m.zIndex),"none"==t.style.display&&(t.style.display=""),m.trackFocussedElement&&(C("Focusbox: onElementFocus: tracking requested, setting timer to trackFocussedElement"),m.debugMode&&(d=2e3),i=setTimeout(function(){f(c)},d)),c.addEventListener("blur",k),n=c,null!=m.onFocusCallback&&0==a&&m.onFocusCallback&&m.onFocusCallback.constructor&&m.onFocusCallback.call&&m.onFocusCallback.apply&&(a=!0),1==a&&(C("Focusbox: onElementFocus: onFocusCallback valid and executed"),m.onFocusCallback(e))}}catch(s){g(s)}C("Focusbox: onElementFocus: done")},f=function(e){C("Focusbox: trackFocussedElement");var o=e.getAttribute("id");o||(C("Focusbox: trackFocussedElement: item has no ID, generating..."),o=Date.now(),o="focusbox-id-"+o,e.setAttribute("id",o)),C("Focusbox: trackFocussedElement: tracking item by ID '"+o+"'");var n=document.getElementById(o);if(!n)return C("Focusbox: trackFocussedElement: item doesn't exist in DOM"),E(),clearTimeout(i),void(i=null);if(n!=document.activeElement&&(C("Focusbox: trackFocussedElement: item doesn't have focus"),null==document.activeElement||"BODY"==document.activeElement.nodeName))return C("Focusbox: trackFocussedElement: focussed item is the body, so calling .focus() on item"),clearTimeout(i),i=null,E(),void h(n);var c=p(n),u=c.left-m.boxOutlineMarginPx+"px",s=c.top-m.boxOutlineMarginPx+"px";(t.style.left!=u||t.style.top!=s)&&(C("Focusbox: trackFocussedElement: item has moved; repositioning"),t.style.left=u,t.style.top=s),clearTimeout(i),i=setTimeout(function(){f(e)},d)},x=function(e){try{var o=e.which;(9===o||o>=37&&40>=o)&&(c=Date.now())}catch(t){g(t)}},F=function(e){try{u=Date.now()}catch(o){g(o)}},y=function(){try{var e=Date.now()-c,o=Date.now()-u,t=42>e,n=42>o;return t?(C("Focusbox: elementFocusCausedByTabKey: keyDownProbable (tab)"),!0):n?(C("Focusbox: elementFocusCausedByTabKey: mouseClickProbable (mouse)"),!1):e>=o?(C("Focusbox: elementFocusCausedByTabKey: mouseClickTimespan < keyDownTimespan (mouse)"),!1):(C("Focusbox: elementFocusCausedByTabKey: mouseClickTimespan >= keyDownTimespan ("+o+" >= "+e+") (tab)"),!0)}catch(s){g(s)}return!0},k=function(e){try{e.target.removeEventListener("blur",k),m.trackFocussedElement&&(C("Focusbox: removeFocusBox: item was tracked but tracking removed on blur"),clearTimeout(i),i=null),setTimeout(function(){try{(null==document.activeElement||"BODY"==document.activeElement.nodeName)&&E()}catch(e){g(e)}},100)}catch(o){g(o)}},E=function(){t.style.display="none"},p=function(e){try{var o=e.getBoundingClientRect(),t=document.documentElement.clientLeft||document.body.clientLeft,n=document.documentElement.clientTop||document.body.clientTop,c=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,u=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,s=o.left+c-t,l=o.top+u-n;return s=Math.round(s),l=Math.round(l),{top:l||0,left:s||0}}catch(a){g(a)}},v=function(){try{document.documentElement.addEventListener("focus",b,!0),document.documentElement.addEventListener("keydown",x,!1),document.documentElement.addEventListener("mousedown",F,!1),t=document.createElement("div"),t.id="focusbox",t.style.transitionDuration=t.style.WebkitTransitionDuration=m.transitionDurationMs/1e3+"s",t.style.display="none",document.body.appendChild(t),s[0].classList.add("focusbox")}catch(e){g(e)}},g=function(e){try{C("Focusbox unexpected error, removing focusbox from page for usability: "+e,!0),document.documentElement.removeEventListener("focus",b,!0),document.documentElement.removeEventListener("keydown",x,!1),document.documentElement.removeEventListener("mousedown",F,!1),E(),null!=t.parentNode&&t.parentNode.removeChild(t),s[0].classList.remove("focusbox")}catch(e){C("Focusbox unexpected error in destroy: "+e,!0)}},C=function(e,o){console.log&&(m.debugMode||o)&&console.log(e)},h=function(e){C("Focusbox: focusOnElement"),r=!0,e.focus()},T=function(){return C("Focusbox: focusBoxIsVisible"),""==t.style.display};e.fn.focusbox.FocusOnElement=h,e.fn.focusbox.FocusBoxIsVisible=T,v()}}(jQuery);
!function(n,e){"function"==typeof define&&define.amd?define([],e):"undefined"!=typeof module&&module.exports?module.exports=e():n.lscache=e()}(this,function(){function n(){var n="__lscachetest__",t=n;if(void 0!==d)return d;try{c(n,t),u(n),d=!0}catch(r){d=e(r)?!0:!1}return d}function e(n){return n&&"QUOTA_EXCEEDED_ERR"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name||"QuotaExceededError"===n.name?!0:!1}function t(){return void 0===h&&(h=null!=window.JSON),h}function r(n){return n+g}function o(){return Math.floor((new Date).getTime()/v)}function i(n){return localStorage.getItem(p+y+n)}function c(n,e){localStorage.removeItem(p+y+n),localStorage.setItem(p+y+n,e)}function u(n){localStorage.removeItem(p+y+n)}function a(n){for(var e=new RegExp("^"+p+y+"(.*)"),t=localStorage.length-1;t>=0;--t){var o=localStorage.key(t);o=o&&o.match(e),o=o&&o[1],o&&o.indexOf(g)<0&&n(o,r(o))}}function f(n){var e=r(n);u(n),u(e)}function l(n){var e=r(n),t=i(e);if(t){var c=parseInt(t,m);if(o()>=c)return u(n),u(e),!0}}function s(n,e){E&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+n),e&&window.console.warn("lscache - The error was: "+e.message))}var d,h,p="lscache-",g="-cacheexpiration",m=10,v=6e4,w=Math.floor(864e13/v),y="",E=!1,S={set:function(l,d,h){if(n()){if("string"!=typeof d){if(!t())return;try{d=JSON.stringify(d)}catch(p){return}}try{c(l,d)}catch(p){if(!e(p))return void s("Could not add item with key '"+l+"'",p);var g,v=[];a(function(n,e){var t=i(e);t=t?parseInt(t,m):w,v.push({key:n,size:(i(n)||"").length,expiration:t})}),v.sort(function(n,e){return e.expiration-n.expiration});for(var y=(d||"").length;v.length&&y>0;)g=v.pop(),s("Cache is full, removing item with key '"+l+"'"),f(g.key),y-=g.size;try{c(l,d)}catch(p){return void s("Could not add item with key '"+l+"', perhaps it's too big?",p)}}h?c(r(l),(o()+h).toString(m)):u(r(l))}},get:function(e){if(!n())return null;if(l(e))return null;var r=i(e);if(!r||!t())return r;try{return JSON.parse(r)}catch(o){return r}},remove:function(e){n()&&f(e)},supported:function(){return n()},flush:function(){n()&&a(function(n){f(n)})},flushExpired:function(){n()&&a(function(n){l(n)})},setBucket:function(n){y=n},resetBucket:function(){y=""},enableWarnings:function(n){E=n}};return S});
!function(t,e){function i(e,i){var s,o,r,a=e.nodeName.toLowerCase();return"area"===a?(s=e.parentNode,o=s.name,e.href&&o&&"map"===s.nodeName.toLowerCase()?(r=t("img[usemap=#"+o+"]")[0],!!r&&n(r)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var s=0,o=/^ui-id-\d+$/;t.ui=t.ui||{},t.extend(t.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var n,s,o=t(this[0]);o.length&&o[0]!==document;){if(n=o.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++s)})},removeUniqueId:function(){return this.each(function(){o.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var n=t.attr(e,"tabindex"),s=isNaN(n);return(s||n>=0)&&i(e,!s)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,n){function s(e,i,n,s){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),s&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(i){return i===e?a["inner"+n].call(this):this.each(function(){t(this).css(r,s(this,i)+"px")})},t.fn["outer"+n]=function(e,i){return"number"!=typeof e?a["outer"+n].call(this,e):this.each(function(){t(this).css(r,s(this,e,!0,i)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.support.selectstart="onselectstart"in document.createElement("div"),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,n){var s,o=t.ui[e].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(t,e,i){var n,s=t.plugins[e];if(s&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(n=0;n<s.length;n++)t.options[s[n][0]]&&s[n][1].apply(t.element,i)}},hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[n]>0?!0:(e[n]=1,s=e[n]>0,e[n]=0,s)}})}(jQuery),function(t,e){var i=0,n=Array.prototype.slice,s=t.cleanData;t.cleanData=function(e){for(var i,n=0;null!=(i=e[n]);n++)try{t(i).triggerHandler("remove")}catch(o){}s(e)},t.widget=function(e,i,n){var s,o,r,a,u={},l=e.split(".")[0];e=e.split(".")[1],s=l+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s.toLowerCase()]=function(e){return!!t.data(e,s)},t[l]=t[l]||{},o=t[l][e],r=t[l][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new r(t,e)},t.extend(r,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){return t.isFunction(n)?void(u[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(u[e]=n)}),r.prototype=t.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix||e:e},u,{constructor:r,namespace:l,widgetName:e,widgetFullName:s}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete o._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r)},t.widget.extend=function(i){for(var s,o,r=n.call(arguments,1),a=0,u=r.length;u>a;a++)for(s in r[a])o=r[a][s],r[a].hasOwnProperty(s)&&o!==e&&(i[s]=t.isPlainObject(o)?t.isPlainObject(i[s])?t.widget.extend({},i[s],o):t.widget.extend({},o):o);return i},t.widget.bridge=function(i,s){var o=s.prototype.widgetFullName||i;t.fn[i]=function(r){var a="string"==typeof r,u=n.call(arguments,1),l=this;return r=!a&&u.length?t.widget.extend.apply(null,[r].concat(u)):r,a?this.each(function(){var n,s=t.data(this,o);return s?t.isFunction(s[r])&&"_"!==r.charAt(0)?(n=s[r].apply(s,u),n!==s&&n!==e?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+r+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+r+"'")}):this.each(function(){var e=t.data(this,o);e?e.option(r||{})._init():t.data(this,o,new s(r,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,n){var s,o,r,a=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(a={},s=i.split("."),i=s.shift(),s.length){for(o=a[i]=t.widget.extend({},this.options[i]),r=0;r<s.length-1;r++)o[s[r]]=o[s[r]]||{},o=o[s[r]];if(i=s.pop(),1===arguments.length)return o[i]===e?null:o[i];o[i]=n}else{if(1===arguments.length)return this.options[i]===e?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(t){for(var e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,n){var s,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,r){function a(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?o[r]:r).apply(o,arguments):void 0}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||t.guid++);var u=n.match(/^(\w+)\s*(.*)$/),l=u[1]+o.eventNamespace,h=u[2];h?s.delegate(h,l,a):i.bind(l,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var s,o,r=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,o){"string"==typeof s&&(s={effect:s});var r,a=s?s===!0||"number"==typeof s?i:s.effect||i:e;s=s||{},"number"==typeof s&&(s={duration:s}),r=!t.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),r&&t.effects&&t.effects.effect[a]?n[e](s):a!==e&&n[a]?n[a](s.duration,s.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}})}(jQuery),function(t,e){function i(t,e,i){return[parseFloat(t[0])*(f.test(t[0])?e/100:1),parseFloat(t[1])*(f.test(t[1])?i/100:1)]}function n(e,i){return parseInt(t.css(e,i),10)||0}function s(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var o,r=Math.max,a=Math.abs,u=Math.round,l=/left|center|right/,h=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,f=/%$/,m=t.fn.position;t.position={scrollbarWidth:function(){if(o!==e)return o;var i,n,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=s.children()[0];return t("body").append(s),i=r.offsetWidth,s.css("overflow","scroll"),n=r.offsetWidth,i===n&&(n=s[0].clientWidth),s.remove(),o=i-n},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),s=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return m.apply(this,arguments);e=t.extend({},e);var o,f,p,v,g,_,b=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),x=(e.collision||"flip").split(" "),C={};return _=s(b),b[0].preventDefault&&(e.at="left top"),f=_.width,p=_.height,v=_.offset,g=t.extend({},v),t.each(["my","at"],function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=l.test(n[0])?n.concat(["center"]):h.test(n[0])?["center"].concat(n):["center","center"]),n[0]=l.test(n[0])?n[0]:"center",n[1]=h.test(n[1])?n[1]:"center",t=c.exec(n[0]),i=c.exec(n[1]),C[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(n[0])[0],d.exec(n[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?g.left+=f:"center"===e.at[0]&&(g.left+=f/2),"bottom"===e.at[1]?g.top+=p:"center"===e.at[1]&&(g.top+=p/2),o=i(C.at,f,p),g.left+=o[0],g.top+=o[1],this.each(function(){var s,l,h=t(this),c=h.outerWidth(),d=h.outerHeight(),m=n(this,"marginLeft"),_=n(this,"marginTop"),E=c+m+n(this,"marginRight")+w.width,T=d+_+n(this,"marginBottom")+w.height,A=t.extend({},g),W=i(C.my,h.outerWidth(),h.outerHeight());"right"===e.my[0]?A.left-=c:"center"===e.my[0]&&(A.left-=c/2),"bottom"===e.my[1]?A.top-=d:"center"===e.my[1]&&(A.top-=d/2),A.left+=W[0],A.top+=W[1],t.support.offsetFractions||(A.left=u(A.left),A.top=u(A.top)),s={marginLeft:m,marginTop:_},t.each(["left","top"],function(i,n){t.ui.position[x[i]]&&t.ui.position[x[i]][n](A,{targetWidth:f,targetHeight:p,elemWidth:c,elemHeight:d,collisionPosition:s,collisionWidth:E,collisionHeight:T,offset:[o[0]+W[0],o[1]+W[1]],my:e.my,at:e.at,within:y,elem:h})}),e.using&&(l=function(t){var i=v.left-A.left,n=i+f-c,s=v.top-A.top,o=s+p-d,u={target:{element:b,left:v.left,top:v.top,width:f,height:p},element:{element:h,left:A.left,top:A.top,width:c,height:d},horizontal:0>n?"left":i>0?"right":"center",vertical:0>o?"top":s>0?"bottom":"middle"};c>f&&a(i+n)<f&&(u.horizontal="center"),d>p&&a(s+o)<p&&(u.vertical="middle"),u.important=r(a(i),a(n))>r(a(s),a(o))?"horizontal":"vertical",e.using.call(this,t,u)}),h.offset(t.extend(A,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=t.left-e.collisionPosition.marginLeft,u=s-a,l=a+e.collisionWidth-o-s;e.collisionWidth>o?u>0&&0>=l?(i=t.left+u+e.collisionWidth-o-s,t.left+=u-i):t.left=l>0&&0>=u?s:u>l?s+o-e.collisionWidth:s:u>0?t.left+=u:l>0?t.left-=l:t.left=r(t.left-a,t.left)},top:function(t,e){var i,n=e.within,s=n.isWindow?n.scrollTop:n.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,u=s-a,l=a+e.collisionHeight-o-s;e.collisionHeight>o?u>0&&0>=l?(i=t.top+u+e.collisionHeight-o-s,t.top+=u-i):t.top=l>0&&0>=u?s:u>l?s+o-e.collisionHeight:s:u>0?t.top+=u:l>0?t.top-=l:t.top=r(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,s=e.within,o=s.offset.left+s.scrollLeft,r=s.width,u=s.isWindow?s.scrollLeft:s.offset.left,l=t.left-e.collisionPosition.marginLeft,h=l-u,c=l+e.collisionWidth-r-u,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,f="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,m=-2*e.offset[0];0>h?(i=t.left+d+f+m+e.collisionWidth-r-o,(0>i||i<a(h))&&(t.left+=d+f+m)):c>0&&(n=t.left-e.collisionPosition.marginLeft+d+f+m-u,(n>0||a(n)<c)&&(t.left+=d+f+m))},top:function(t,e){var i,n,s=e.within,o=s.offset.top+s.scrollTop,r=s.height,u=s.isWindow?s.scrollTop:s.offset.top,l=t.top-e.collisionPosition.marginTop,h=l-u,c=l+e.collisionHeight-r-u,d="top"===e.my[1],f=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,m="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,p=-2*e.offset[1];0>h?(n=t.top+f+m+p+e.collisionHeight-r-o,t.top+f+m+p>h&&(0>n||n<a(h))&&(t.top+=f+m+p)):c>0&&(i=t.top-e.collisionPosition.marginTop+f+m+p-u,t.top+f+m+p>c&&(i>0||a(i)<c)&&(t.top+=f+m+p))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,s,o,r=document.getElementsByTagName("body")[0],a=document.createElement("div");e=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in n)e.style[o]=n[o];e.appendChild(a),i=r||document.documentElement,i.insertBefore(e,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",s=t(a).offset().left,t.support.offsetFractions=s>10&&11>s,e.innerHTML="",i.removeChild(e)}()}(jQuery),function(t){t.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var e,i,n,s=this.element[0].nodeName.toLowerCase(),o="textarea"===s,r="input"===s;this.isMultiLine=o?!0:r?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[o||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(s){if(this.element.prop("readOnly"))return e=!0,n=!0,void(i=!0);e=!1,n=!1,i=!1;var o=t.ui.keyCode;switch(s.keyCode){case o.PAGE_UP:e=!0,this._move("previousPage",s);break;case o.PAGE_DOWN:e=!0,this._move("nextPage",s);break;case o.UP:e=!0,this._keyEvent("previous",s);break;case o.DOWN:e=!0,this._keyEvent("next",s);break;case o.ENTER:case o.NUMPAD_ENTER:this.menu.active&&(e=!0,s.preventDefault(),this.menu.select(s));break;case o.TAB:this.menu.active&&this.menu.select(s);break;case o.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(s),s.preventDefault());break;default:i=!0,this._searchTimeout(s)}},keypress:function(n){if(e)return e=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var s=t.ui.keyCode;switch(n.keyCode){case s.PAGE_UP:this._move("previousPage",n);break;case s.PAGE_DOWN:this._move("nextPage",n);break;case s.UP:this._keyEvent("previous",n);break;case s.DOWN:this._keyEvent("next",n)}}},input:function(t){return n?(n=!1,void t.preventDefault()):void this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(t),void this._change(t))}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(n){n.target===e.element[0]||n.target===i||t.contains(i,n.target)||e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",e,{item:n})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this._appendTo()),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_appendTo:function(){var e=this.options.appendTo;return e&&(e=e.jquery||e.nodeType?t(e):this.document.find(e).eq(0)),e||(e=this.element.closest(".ui-front")),e.length||(e=this.document[0].body),e},_initSource:function(){var e,i,n=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,n){n(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,s){n.xhr&&n.xhr.abort(),n.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){s(t)},error:function(){s([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):this._trigger("search",e)===!1?void 0:this._search(t)},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var e=++this.requestIndex;return t.proxy(function(t){e===this.requestIndex&&this.__response(t),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty();this._renderMenu(i,e),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var n=this;t.each(i,function(t,i){n._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var n=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return n.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t){t.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(e){var i=t(e.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(e),e.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(e):!this.element.is(":focus")&&t(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(".ui-menu").length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,s,o,r,a,u=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:u=!1,s=this.previousFilter||"",o=String.fromCharCode(e.keyCode),r=!1,clearTimeout(this.filterTimer),o===s?r=!0:o=s+o,a=new RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())}),n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(o=String.fromCharCode(e.keyCode),a=new RegExp("^"+i(o),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(t(this).children("a").text())})),n.length?(this.focus(e,n),n.length>1?(this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,n=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),n=e.prev("a"),s=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(s),e.attr("aria-labelledby",n.attr("id"))}),e=n.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(t,e){"icons"===t&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,n;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&t&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,n,s,o,r,a;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,s=e.offset().top-this.activeMenu.offset().top-i-n,o=this.activeMenu.scrollTop(),r=this.activeMenu.height(),a=e.height(),0>s?this.activeMenu.scrollTop(o+s):s+a>r&&this.activeMenu.scrollTop(o+s-r+a))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(e),this.activeMenu=n},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);
e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var n;this.active&&(n="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,n)},nextPage:function(e){var i,n,s;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-n-s<0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(e)},previousPage:function(e){var i,n,s;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,s=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-n+s>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first()))):void this.next(e)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(jQuery);
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var r=t||window.event,l=s.call(arguments,1),c=0,u=0,h=0,f=0,m=0,p=0;if(t=e.event.fix(r),t.type="mousewheel","detail"in r&&(h=-1*r.detail),"wheelDelta"in r&&(h=r.wheelDelta),"wheelDeltaY"in r&&(h=r.wheelDeltaY),"wheelDeltaX"in r&&(u=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(u=-1*h,h=0),c=0===h?u:h,"deltaY"in r&&(h=-1*r.deltaY,c=h),"deltaX"in r&&(u=r.deltaX,0===h&&(c=-1*u)),0!==h||0!==u){if(1===r.deltaMode){var g=e.data(this,"mousewheel-line-height");c*=g,h*=g,u*=g}else if(2===r.deltaMode){var v=e.data(this,"mousewheel-page-height");c*=v,h*=v,u*=v}if(f=Math.max(Math.abs(h),Math.abs(u)),(!i||i>f)&&(i=f,n(r,f)&&(i/=40)),n(r,f)&&(c/=40,u/=40,h/=40),c=Math[c>=1?"floor":"ceil"](c/i),u=Math[u>=1?"floor":"ceil"](u/i),h=Math[h>=1?"floor":"ceil"](h/i),d.settings.normalizeOffset&&this.getBoundingClientRect){var x=this.getBoundingClientRect();m=t.clientX-x.left,p=t.clientY-x.top}return t.deltaX=u,t.deltaY=h,t.deltaFactor=i,t.offsetX=m,t.offsetY=p,t.deltaMode=0,l.unshift(t,c,u,h),a&&clearTimeout(a),a=setTimeout(o,200),(e.event.dispatch||e.event.handle).apply(this,l)}}function o(){i=null}function n(e,t){return d.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var a,i,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],l="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],s=Array.prototype.slice;if(e.event.fixHooks)for(var c=r.length;c;)e.event.fixHooks[r[--c]]=e.event.mouseHooks;var d=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var o=l.length;o;)this.addEventListener(l[--o],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",d.getLineHeight(this)),e.data(this,"mousewheel-page-height",d.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var o=l.length;o;)this.removeEventListener(l[--o],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var o=e(t),n=o["offsetParent"in e.fn?"offsetParent":"parent"]();return n.length||(n=e("body")),parseInt(n.css("fontSize"),10)||parseInt(o.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var r=t||window.event,l=s.call(arguments,1),c=0,u=0,h=0,f=0,m=0,p=0;if(t=e.event.fix(r),t.type="mousewheel","detail"in r&&(h=-1*r.detail),"wheelDelta"in r&&(h=r.wheelDelta),"wheelDeltaY"in r&&(h=r.wheelDeltaY),"wheelDeltaX"in r&&(u=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(u=-1*h,h=0),c=0===h?u:h,"deltaY"in r&&(h=-1*r.deltaY,c=h),"deltaX"in r&&(u=r.deltaX,0===h&&(c=-1*u)),0!==h||0!==u){if(1===r.deltaMode){var g=e.data(this,"mousewheel-line-height");c*=g,h*=g,u*=g}else if(2===r.deltaMode){var v=e.data(this,"mousewheel-page-height");c*=v,h*=v,u*=v}if(f=Math.max(Math.abs(h),Math.abs(u)),(!i||i>f)&&(i=f,n(r,f)&&(i/=40)),n(r,f)&&(c/=40,u/=40,h/=40),c=Math[c>=1?"floor":"ceil"](c/i),u=Math[u>=1?"floor":"ceil"](u/i),h=Math[h>=1?"floor":"ceil"](h/i),d.settings.normalizeOffset&&this.getBoundingClientRect){var x=this.getBoundingClientRect();m=t.clientX-x.left,p=t.clientY-x.top}return t.deltaX=u,t.deltaY=h,t.deltaFactor=i,t.offsetX=m,t.offsetY=p,t.deltaMode=0,l.unshift(t,c,u,h),a&&clearTimeout(a),a=setTimeout(o,200),(e.event.dispatch||e.event.handle).apply(this,l)}}function o(){i=null}function n(e,t){return d.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var a,i,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],l="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],s=Array.prototype.slice;if(e.event.fixHooks)for(var c=r.length;c;)e.event.fixHooks[r[--c]]=e.event.mouseHooks;var d=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var o=l.length;o;)this.addEventListener(l[--o],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",d.getLineHeight(this)),e.data(this,"mousewheel-page-height",d.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var o=l.length;o;)this.removeEventListener(l[--o],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var o=e(t),n=o["offsetParent"in e.fn?"offsetParent":"parent"]();return n.length||(n=e("body")),parseInt(n.css("fontSize"),10)||parseInt(o.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e:e(jQuery,window,document)}(function(e){!function(t){var o="function"==typeof define&&define.amd,n="undefined"!=typeof module&&module.exports,a="https:"==document.location.protocol?"https:":"http:",i="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js";o||(n?require("jquery-mousewheel")(e):e.event.special.mousewheel||e("head").append(decodeURI("%3Cscript src="+a+"//"+i+"%3E%3C/script%3E"))),t()}(function(){var t,o="mCustomScrollbar",n="mCS",a=".mCustomScrollbar",i={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},r=0,l={},s=window.attachEvent&&!window.addEventListener?1:0,c=!1,d=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],u={init:function(t){var t=e.extend(!0,{},i,t),o=h.call(this);if(t.live){var s=t.liveSelector||this.selector||a,c=e(s);if("off"===t.live)return void m(s);l[s]=setTimeout(function(){c.mCustomScrollbar(t),"once"===t.live&&c.length&&m(s)},500)}else m(s);return t.setWidth=t.set_width?t.set_width:t.setWidth,t.setHeight=t.set_height?t.set_height:t.setHeight,t.axis=t.horizontalScroll?"x":p(t.axis),t.scrollInertia=t.scrollInertia>0&&t.scrollInertia<17?17:t.scrollInertia,"object"!=typeof t.mouseWheel&&1==t.mouseWheel&&(t.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),t.mouseWheel.scrollAmount=t.mouseWheelPixels?t.mouseWheelPixels:t.mouseWheel.scrollAmount,t.mouseWheel.normalizeDelta=t.advanced.normalizeMouseWheelDelta?t.advanced.normalizeMouseWheelDelta:t.mouseWheel.normalizeDelta,t.scrollButtons.scrollType=g(t.scrollButtons.scrollType),f(t),e(o).each(function(){var o=e(this);if(!o.data(n)){o.data(n,{idx:++r,opt:t,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:o.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var a=o.data(n),i=a.opt,l=o.data("mcs-axis"),s=o.data("mcs-scrollbar-position"),c=o.data("mcs-theme");l&&(i.axis=l),s&&(i.scrollbarPosition=s),c&&(i.theme=c,f(i)),v.call(this),a&&i.callbacks.onCreate&&"function"==typeof i.callbacks.onCreate&&i.callbacks.onCreate.call(this),e("#mCSB_"+a.idx+"_container img:not(."+d[2]+")").addClass(d[2]),u.update.call(null,o)}})},update:function(t,o){var a=t||h.call(this);return e(a).each(function(){var t=e(this);if(t.data(n)){var a=t.data(n),i=a.opt,r=e("#mCSB_"+a.idx+"_container"),l=e("#mCSB_"+a.idx),s=[e("#mCSB_"+a.idx+"_dragger_vertical"),e("#mCSB_"+a.idx+"_dragger_horizontal")];if(!r.length)return;a.tweenRunning&&Q(t),o&&a&&i.callbacks.onBeforeUpdate&&"function"==typeof i.callbacks.onBeforeUpdate&&i.callbacks.onBeforeUpdate.call(this),t.hasClass(d[3])&&t.removeClass(d[3]),t.hasClass(d[4])&&t.removeClass(d[4]),l.css("max-height","none"),l.height()!==t.height()&&l.css("max-height",t.height()),w.call(this),"y"===i.axis||i.advanced.autoExpandHorizontalScroll||r.css("width",x(r)),a.overflowed=C.call(this),k.call(this),i.autoDraggerLength&&S.call(this),b.call(this),T.call(this);var c=[Math.abs(r[0].offsetTop),Math.abs(r[0].offsetLeft)];"x"!==i.axis&&(a.overflowed[0]?s[0].height()>s[0].parent().height()?B.call(this):(Z(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}),a.contentReset.y=null):(B.call(this),"y"===i.axis?M.call(this):"yx"===i.axis&&a.overflowed[1]&&Z(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==i.axis&&(a.overflowed[1]?s[1].width()>s[1].parent().width()?B.call(this):(Z(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}),a.contentReset.x=null):(B.call(this),"x"===i.axis?M.call(this):"yx"===i.axis&&a.overflowed[0]&&Z(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),o&&a&&(2===o&&i.callbacks.onImageLoad&&"function"==typeof i.callbacks.onImageLoad?i.callbacks.onImageLoad.call(this):3===o&&i.callbacks.onSelectorChange&&"function"==typeof i.callbacks.onSelectorChange?i.callbacks.onSelectorChange.call(this):i.callbacks.onUpdate&&"function"==typeof i.callbacks.onUpdate&&i.callbacks.onUpdate.call(this)),N.call(this)}})},scrollTo:function(t,o){if("undefined"!=typeof t&&null!=t){var a=h.call(this);return e(a).each(function(){var a=e(this);if(a.data(n)){var i=a.data(n),r=i.opt,l={trigger:"external",scrollInertia:r.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},s=e.extend(!0,{},l,o),c=F.call(this,t),d=s.scrollInertia>0&&s.scrollInertia<17?17:s.scrollInertia;c[0]=q.call(this,c[0],"y"),c[1]=q.call(this,c[1],"x"),s.moveDragger&&(c[0]*=i.scrollRatio.y,c[1]*=i.scrollRatio.x),s.dur=ae()?0:d,setTimeout(function(){null!==c[0]&&"undefined"!=typeof c[0]&&"x"!==r.axis&&i.overflowed[0]&&(s.dir="y",s.overwrite="all",Z(a,c[0].toString(),s)),null!==c[1]&&"undefined"!=typeof c[1]&&"y"!==r.axis&&i.overflowed[1]&&(s.dir="x",s.overwrite="none",Z(a,c[1].toString(),s))},s.timeout)}})}},stop:function(){var t=h.call(this);return e(t).each(function(){var t=e(this);t.data(n)&&Q(t)})},disable:function(t){var o=h.call(this);return e(o).each(function(){var o=e(this);o.data(n)&&(o.data(n),N.call(this,"remove"),M.call(this),t&&B.call(this),k.call(this,!0),o.addClass(d[3]))})},destroy:function(){var t=h.call(this);return e(t).each(function(){var a=e(this);if(a.data(n)){var i=a.data(n),r=i.opt,l=e("#mCSB_"+i.idx),s=e("#mCSB_"+i.idx+"_container"),c=e(".mCSB_"+i.idx+"_scrollbar");r.live&&m(r.liveSelector||e(t).selector),N.call(this,"remove"),M.call(this),B.call(this),a.removeData(n),$(this,"mcs"),c.remove(),s.find("img."+d[2]).removeClass(d[2]),l.replaceWith(s.contents()),a.removeClass(o+" _"+n+"_"+i.idx+" "+d[6]+" "+d[7]+" "+d[5]+" "+d[3]).addClass(d[4])}})}},h=function(){return"object"!=typeof e(this)||e(this).length<1?a:this},f=function(t){var o=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],n=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],a=["minimal","minimal-dark"],i=["minimal","minimal-dark"],r=["minimal","minimal-dark"];t.autoDraggerLength=e.inArray(t.theme,o)>-1?!1:t.autoDraggerLength,t.autoExpandScrollbar=e.inArray(t.theme,n)>-1?!1:t.autoExpandScrollbar,t.scrollButtons.enable=e.inArray(t.theme,a)>-1?!1:t.scrollButtons.enable,t.autoHideScrollbar=e.inArray(t.theme,i)>-1?!0:t.autoHideScrollbar,t.scrollbarPosition=e.inArray(t.theme,r)>-1?"outside":t.scrollbarPosition},m=function(e){l[e]&&(clearTimeout(l[e]),$(l,e))},p=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},g=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},v=function(){var t=e(this),a=t.data(n),i=a.opt,r=i.autoExpandScrollbar?" "+d[1]+"_expand":"",l=["<div id='mCSB_"+a.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+a.idx+"_scrollbar mCS-"+i.theme+" mCSB_scrollTools_vertical"+r+"'><div class='"+d[12]+"'><div id='mCSB_"+a.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+a.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+a.idx+"_scrollbar mCS-"+i.theme+" mCSB_scrollTools_horizontal"+r+"'><div class='"+d[12]+"'><div id='mCSB_"+a.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],s="yx"===i.axis?"mCSB_vertical_horizontal":"x"===i.axis?"mCSB_horizontal":"mCSB_vertical",c="yx"===i.axis?l[0]+l[1]:"x"===i.axis?l[1]:l[0],u="yx"===i.axis?"<div id='mCSB_"+a.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",h=i.autoHideScrollbar?" "+d[6]:"",f="x"!==i.axis&&"rtl"===a.langDir?" "+d[7]:"";i.setWidth&&t.css("width",i.setWidth),i.setHeight&&t.css("height",i.setHeight),i.setLeft="y"!==i.axis&&"rtl"===a.langDir?"989999px":i.setLeft,t.addClass(o+" _"+n+"_"+a.idx+h+f).wrapInner("<div id='mCSB_"+a.idx+"' class='mCustomScrollBox mCS-"+i.theme+" "+s+"'><div id='mCSB_"+a.idx+"_container' class='mCSB_container' style='position:relative; top:"+i.setTop+"; left:"+i.setLeft+";' dir='"+a.langDir+"' /></div>");var m=e("#mCSB_"+a.idx),p=e("#mCSB_"+a.idx+"_container");"y"===i.axis||i.advanced.autoExpandHorizontalScroll||p.css("width",x(p)),"outside"===i.scrollbarPosition?("static"===t.css("position")&&t.css("position","relative"),t.css("overflow","visible"),m.addClass("mCSB_outside").after(c)):(m.addClass("mCSB_inside").append(c),p.wrap(u)),_.call(this);var g=[e("#mCSB_"+a.idx+"_dragger_vertical"),e("#mCSB_"+a.idx+"_dragger_horizontal")];g[0].css("min-height",g[0].height()),g[1].css("min-width",g[1].width())},x=function(t){var o=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return e(this).outerWidth(!0)}).get())],n=t.parent().width();return o[0]>n?o[0]:o[1]>n?o[1]:"100%"},w=function(){var t=e(this),o=t.data(n),a=o.opt,i=e("#mCSB_"+o.idx+"_container");if(a.advanced.autoExpandHorizontalScroll&&"y"!==a.axis){i.css({width:"auto","min-width":0,"overflow-x":"scroll"});var r=Math.ceil(i[0].scrollWidth);3===a.advanced.autoExpandHorizontalScroll||2!==a.advanced.autoExpandHorizontalScroll&&r>i.parent().width()?i.css({width:r,"min-width":"100%","overflow-x":"inherit"}):i.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(i[0].getBoundingClientRect().right+.4)-Math.floor(i[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},_=function(){var t=e(this),o=t.data(n),a=o.opt,i=e(".mCSB_"+o.idx+"_scrollbar:first"),r=oe(a.scrollButtons.tabindex)?"tabindex='"+a.scrollButtons.tabindex+"'":"",l=["<a href='#' class='"+d[13]+"' "+r+" />","<a href='#' class='"+d[14]+"' "+r+" />","<a href='#' class='"+d[15]+"' "+r+" />","<a href='#' class='"+d[16]+"' "+r+" />"],s=["x"===a.axis?l[2]:l[0],"x"===a.axis?l[3]:l[1],l[2],l[3]];a.scrollButtons.enable&&i.prepend(s[0]).append(s[1]).next(".mCSB_scrollTools").prepend(s[2]).append(s[3])},S=function(){var t=e(this),o=t.data(n),a=e("#mCSB_"+o.idx),i=e("#mCSB_"+o.idx+"_container"),r=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")],l=[a.height()/i.outerHeight(!1),a.width()/i.outerWidth(!1)],c=[parseInt(r[0].css("min-height")),Math.round(l[0]*r[0].parent().height()),parseInt(r[1].css("min-width")),Math.round(l[1]*r[1].parent().width())],d=s&&c[1]<c[0]?c[0]:c[1],u=s&&c[3]<c[2]?c[2]:c[3];r[0].css({height:d,"max-height":r[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":c[0]+"px"}),r[1].css({width:u,"max-width":r[1].parent().width()-10})},b=function(){var t=e(this),o=t.data(n),a=e("#mCSB_"+o.idx),i=e("#mCSB_"+o.idx+"_container"),r=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")],l=[i.outerHeight(!1)-a.height(),i.outerWidth(!1)-a.width()],s=[l[0]/(r[0].parent().height()-r[0].height()),l[1]/(r[1].parent().width()-r[1].width())];o.scrollRatio={y:s[0],x:s[1]}},y=function(e,t,o){var n=o?d[0]+"_expanded":"",a=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(d[0]+" "+n),a.toggleClass(d[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(d[0]),a.removeClass(d[1])):(e.addClass(d[0]),a.addClass(d[1])))},C=function(){var t=e(this),o=t.data(n),a=e("#mCSB_"+o.idx),i=e("#mCSB_"+o.idx+"_container"),r=null==o.overflowed?i.height():i.outerHeight(!1),l=null==o.overflowed?i.width():i.outerWidth(!1),s=i[0].scrollHeight,c=i[0].scrollWidth;return s>r&&(r=s),c>l&&(l=c),[r>a.height(),l>a.width()]},B=function(){var t=e(this),o=t.data(n),a=o.opt,i=e("#mCSB_"+o.idx),r=e("#mCSB_"+o.idx+"_container"),l=[e("#mCSB_"+o.idx+"_dragger_vertical"),e("#mCSB_"+o.idx+"_dragger_horizontal")];if(Q(t),("x"!==a.axis&&!o.overflowed[0]||"y"===a.axis&&o.overflowed[0])&&(l[0].add(r).css("top",0),Z(t,"_resetY")),"y"!==a.axis&&!o.overflowed[1]||"x"===a.axis&&o.overflowed[1]){var s=dx=0;"rtl"===o.langDir&&(s=i.width()-r.outerWidth(!1),dx=Math.abs(s/o.scrollRatio.x)),r.css("left",s),l[1].css("left",dx),Z(t,"_resetX")}},T=function(){function t(){r=setTimeout(function(){e.event.special.mousewheel?(clearTimeout(r),L.call(o[0])):t()},100)}var o=e(this),a=o.data(n),i=a.opt;if(!a.bindEvents){if(O.call(this),i.contentTouchScroll&&I.call(this),E.call(this),i.mouseWheel.enable){var r;t()}H.call(this),X.call(this),i.advanced.autoScrollOnFocus&&P.call(this),i.scrollButtons.enable&&Y.call(this),i.keyboard.enable&&j.call(this),a.bindEvents=!0}},M=function(){var t=e(this),o=t.data(n),a=o.opt,i=n+"_"+o.idx,r=".mCSB_"+o.idx+"_scrollbar",l=e("#mCSB_"+o.idx+",#mCSB_"+o.idx+"_container,#mCSB_"+o.idx+"_container_wrapper,"+r+" ."+d[12]+",#mCSB_"+o.idx+"_dragger_vertical,#mCSB_"+o.idx+"_dragger_horizontal,"+r+">a"),s=e("#mCSB_"+o.idx+"_container");a.advanced.releaseDraggableSelectors&&l.add(e(a.advanced.releaseDraggableSelectors)),a.advanced.extraDraggableSelectors&&l.add(e(a.advanced.extraDraggableSelectors)),o.bindEvents&&(e(document).add(e(!A()||top.document)).unbind("."+i),l.each(function(){e(this).unbind("."+i)}),clearTimeout(t[0]._focusTimeout),$(t[0],"_focusTimeout"),clearTimeout(o.sequential.step),$(o.sequential,"step"),clearTimeout(s[0].onCompleteTimeout),$(s[0],"onCompleteTimeout"),o.bindEvents=!1)},k=function(t){var o=e(this),a=o.data(n),i=a.opt,r=e("#mCSB_"+a.idx+"_container_wrapper"),l=r.length?r:e("#mCSB_"+a.idx+"_container"),s=[e("#mCSB_"+a.idx+"_scrollbar_vertical"),e("#mCSB_"+a.idx+"_scrollbar_horizontal")],c=[s[0].find(".mCSB_dragger"),s[1].find(".mCSB_dragger")];"x"!==i.axis&&(a.overflowed[0]&&!t?(s[0].add(c[0]).add(s[0].children("a")).css("display","block"),l.removeClass(d[8]+" "+d[10])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&c[0].css("display","none"),l.removeClass(d[10])):(s[0].css("display","none"),l.addClass(d[10])),l.addClass(d[8]))),"y"!==i.axis&&(a.overflowed[1]&&!t?(s[1].add(c[1]).add(s[1].children("a")).css("display","block"),l.removeClass(d[9]+" "+d[11])):(i.alwaysShowScrollbar?(2!==i.alwaysShowScrollbar&&c[1].css("display","none"),l.removeClass(d[11])):(s[1].css("display","none"),l.addClass(d[11])),l.addClass(d[9]))),a.overflowed[0]||a.overflowed[1]?o.removeClass(d[5]):o.addClass(d[5])},D=function(t){var o=t.type,n=t.target.ownerDocument!==document&&null!==frameElement?[e(frameElement).offset().top,e(frameElement).offset().left]:null,a=A()&&t.target.ownerDocument!==top.document&&null!==frameElement?[e(t.view.frameElement).offset().top,e(t.view.frameElement).offset().left]:[0,0];switch(o){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return n?[t.originalEvent.pageY-n[0]+a[0],t.originalEvent.pageX-n[1]+a[1],!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],r=t.originalEvent.touches.length||t.originalEvent.changedTouches.length;return t.target.ownerDocument!==document?[i.screenY,i.screenX,r>1]:[i.pageY,i.pageX,r>1];default:return n?[t.pageY-n[0]+a[0],t.pageX-n[1]+a[1],!1]:[t.pageY,t.pageX,!1]}},O=function(){function t(e,t,n,a){if(f[0].idleTimer=d.scrollInertia<233?250:0,o.attr("id")===h[1])var i="x",s=(o[0].offsetLeft-t+a)*l.scrollRatio.x;else var i="y",s=(o[0].offsetTop-e+n)*l.scrollRatio.y;Z(r,s.toString(),{dir:i,drag:!0})}var o,a,i,r=e(this),l=r.data(n),d=l.opt,u=n+"_"+l.idx,h=["mCSB_"+l.idx+"_dragger_vertical","mCSB_"+l.idx+"_dragger_horizontal"],f=e("#mCSB_"+l.idx+"_container"),m=e("#"+h[0]+",#"+h[1]),p=d.advanced.releaseDraggableSelectors?m.add(e(d.advanced.releaseDraggableSelectors)):m,g=d.advanced.extraDraggableSelectors?e(!A()||top.document).add(e(d.advanced.extraDraggableSelectors)):e(!A()||top.document);m.bind("contextmenu."+u,function(e){e.preventDefault()}).bind("mousedown."+u+" touchstart."+u+" pointerdown."+u+" MSPointerDown."+u,function(t){if(t.stopImmediatePropagation(),t.preventDefault(),ee(t)){c=!0,s&&(document.onselectstart=function(){return!1}),W.call(f,!1),Q(r),o=e(this);var n=o.offset(),l=D(t)[0]-n.top,u=D(t)[1]-n.left,h=o.height()+n.top,m=o.width()+n.left;h>l&&l>0&&m>u&&u>0&&(a=l,i=u),y(o,"active",d.autoExpandScrollbar)}}).bind("touchmove."+u,function(e){e.stopImmediatePropagation(),e.preventDefault();var n=o.offset(),r=D(e)[0]-n.top,l=D(e)[1]-n.left;t(a,i,r,l)}),e(document).add(g).bind("mousemove."+u+" pointermove."+u+" MSPointerMove."+u,function(e){if(o){var n=o.offset(),r=D(e)[0]-n.top,l=D(e)[1]-n.left;if(a===r&&i===l)return;t(a,i,r,l)}}).add(p).bind("mouseup."+u+" touchend."+u+" pointerup."+u+" MSPointerUp."+u,function(){o&&(y(o,"active",d.autoExpandScrollbar),o=null),c=!1,s&&(document.onselectstart=null),W.call(f,!0)})},I=function(){function o(e){if(!te(e)||c||D(e)[2])return void(t=0);t=1,b=0,y=0,d=1,C.removeClass("mCS_touch_action");var o=O.offset();u=D(e)[0]-o.top,h=D(e)[1]-o.left,z=[D(e)[0],D(e)[1]]}function a(e){if(te(e)&&!c&&!D(e)[2]&&(T.documentTouchScroll||e.preventDefault(),e.stopImmediatePropagation(),(!y||b)&&d)){g=J();var t=k.offset(),o=D(e)[0]-t.top,n=D(e)[1]-t.left,a="mcsLinearOut";if(E.push(o),L.push(n),z[2]=Math.abs(D(e)[0]-z[0]),z[3]=Math.abs(D(e)[1]-z[1]),B.overflowed[0])var i=I[0].parent().height()-I[0].height(),r=u-o>0&&o-u>-(i*B.scrollRatio.y)&&(2*z[3]<z[2]||"yx"===T.axis);if(B.overflowed[1])var l=I[1].parent().width()-I[1].width(),f=h-n>0&&n-h>-(l*B.scrollRatio.x)&&(2*z[2]<z[3]||"yx"===T.axis);r||f?(X||e.preventDefault(),b=1):(y=1,C.addClass("mCS_touch_action")),X&&e.preventDefault(),_="yx"===T.axis?[u-o,h-n]:"x"===T.axis?[null,h-n]:[u-o,null],O[0].idleTimer=250,B.overflowed[0]&&s(_[0],R,a,"y","all",!0),B.overflowed[1]&&s(_[1],R,a,"x",W,!0)}}function i(e){if(!te(e)||c||D(e)[2])return void(t=0);t=1,e.stopImmediatePropagation(),Q(C),p=J();var o=k.offset();f=D(e)[0]-o.top,m=D(e)[1]-o.left,E=[],L=[]}function r(e){if(te(e)&&!c&&!D(e)[2]){d=0,e.stopImmediatePropagation(),b=0,y=0,v=J();var t=k.offset(),o=D(e)[0]-t.top,n=D(e)[1]-t.left;if(!(v-g>30)){w=1e3/(v-p);var a="mcsEaseOut",i=2.5>w,r=i?[E[E.length-2],L[L.length-2]]:[0,0];x=i?[o-r[0],n-r[1]]:[o-f,n-m];var u=[Math.abs(x[0]),Math.abs(x[1])];w=i?[Math.abs(x[0]/4),Math.abs(x[1]/4)]:[w,w];var h=[Math.abs(O[0].offsetTop)-x[0]*l(u[0]/w[0],w[0]),Math.abs(O[0].offsetLeft)-x[1]*l(u[1]/w[1],w[1])];_="yx"===T.axis?[h[0],h[1]]:"x"===T.axis?[null,h[1]]:[h[0],null],S=[4*u[0]+T.scrollInertia,4*u[1]+T.scrollInertia];var C=parseInt(T.contentTouchScroll)||0;_[0]=u[0]>C?_[0]:0,_[1]=u[1]>C?_[1]:0,B.overflowed[0]&&s(_[0],S[0],a,"y",W,!1),B.overflowed[1]&&s(_[1],S[1],a,"x",W,!1)}}}function l(e,t){var o=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?o[0]:o[3]:e>60?t>3?o[3]:o[2]:e>30?t>8?o[1]:t>6?o[0]:t>4?t:o[2]:t>8?t:o[3]}function s(e,t,o,n,a,i){e&&Z(C,e.toString(),{dur:t,scrollEasing:o,dir:n,overwrite:a,drag:i})}var d,u,h,f,m,p,g,v,x,w,_,S,b,y,C=e(this),B=C.data(n),T=B.opt,M=n+"_"+B.idx,k=e("#mCSB_"+B.idx),O=e("#mCSB_"+B.idx+"_container"),I=[e("#mCSB_"+B.idx+"_dragger_vertical"),e("#mCSB_"+B.idx+"_dragger_horizontal")],E=[],L=[],R=0,W="yx"===T.axis?"none":"all",z=[],H=O.find("iframe"),P=["touchstart."+M+" pointerdown."+M+" MSPointerDown."+M,"touchmove."+M+" pointermove."+M+" MSPointerMove."+M,"touchend."+M+" pointerup."+M+" MSPointerUp."+M],X=void 0!==document.body.style.touchAction&&""!==document.body.style.touchAction;O.bind(P[0],function(e){o(e)}).bind(P[1],function(e){a(e)}),k.bind(P[0],function(e){i(e)}).bind(P[2],function(e){r(e)}),H.length&&H.each(function(){e(this).bind("load",function(){A(this)&&e(this.contentDocument||this.contentWindow.document).bind(P[0],function(e){o(e),i(e)}).bind(P[1],function(e){a(e)}).bind(P[2],function(e){r(e)})})})},E=function(){function o(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function a(e,t,o){d.type=o&&i?"stepped":"stepless",d.scrollAmount=10,U(r,e,t,"mcsLinearOut",o?60:null)}var i,r=e(this),l=r.data(n),s=l.opt,d=l.sequential,u=n+"_"+l.idx,h=e("#mCSB_"+l.idx+"_container"),f=h.parent();h.bind("mousedown."+u,function(){t||i||(i=1,c=!0)}).add(document).bind("mousemove."+u,function(e){if(!t&&i&&o()){var n=h.offset(),r=D(e)[0]-n.top+h[0].offsetTop,c=D(e)[1]-n.left+h[0].offsetLeft;r>0&&r<f.height()&&c>0&&c<f.width()?d.step&&a("off",null,"stepped"):("x"!==s.axis&&l.overflowed[0]&&(0>r?a("on",38):r>f.height()&&a("on",40)),"y"!==s.axis&&l.overflowed[1]&&(0>c?a("on",37):c>f.width()&&a("on",39)))}}).bind("mouseup."+u+" dragend."+u,function(){t||(i&&(i=0,a("off",null)),c=!1)})},L=function(){function t(t,n){if(Q(o),!z(o,t.target)){var r="auto"!==i.mouseWheel.deltaFactor?parseInt(i.mouseWheel.deltaFactor):s&&t.deltaFactor<100?100:t.deltaFactor||100,d=i.scrollInertia;if("x"===i.axis||"x"===i.mouseWheel.axis)var u="x",h=[Math.round(r*a.scrollRatio.x),parseInt(i.mouseWheel.scrollAmount)],f="auto"!==i.mouseWheel.scrollAmount?h[1]:h[0]>=l.width()?.9*l.width():h[0],m=Math.abs(e("#mCSB_"+a.idx+"_container")[0].offsetLeft),p=c[1][0].offsetLeft,g=c[1].parent().width()-c[1].width(),v="y"===i.mouseWheel.axis?t.deltaY||n:t.deltaX;else var u="y",h=[Math.round(r*a.scrollRatio.y),parseInt(i.mouseWheel.scrollAmount)],f="auto"!==i.mouseWheel.scrollAmount?h[1]:h[0]>=l.height()?.9*l.height():h[0],m=Math.abs(e("#mCSB_"+a.idx+"_container")[0].offsetTop),p=c[0][0].offsetTop,g=c[0].parent().height()-c[0].height(),v=t.deltaY||n;"y"===u&&!a.overflowed[0]||"x"===u&&!a.overflowed[1]||((i.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(v=-v),i.mouseWheel.normalizeDelta&&(v=0>v?-1:1),(v>0&&0!==p||0>v&&p!==g||i.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),t.deltaFactor<5&&!i.mouseWheel.normalizeDelta&&(f=t.deltaFactor,d=17),Z(o,(m-v*f).toString(),{dir:u,dur:d}))}}if(e(this).data(n)){var o=e(this),a=o.data(n),i=a.opt,r=n+"_"+a.idx,l=e("#mCSB_"+a.idx),c=[e("#mCSB_"+a.idx+"_dragger_vertical"),e("#mCSB_"+a.idx+"_dragger_horizontal")],d=e("#mCSB_"+a.idx+"_container").find("iframe");d.length&&d.each(function(){e(this).bind("load",function(){A(this)&&e(this.contentDocument||this.contentWindow.document).bind("mousewheel."+r,function(e,o){t(e,o)})})}),l.bind("mousewheel."+r,function(e,o){t(e,o)})}},R=new Object,A=function(t){var o=!1,n=!1,a=null;if(void 0===t?n="#empty":void 0!==e(t).attr("id")&&(n=e(t).attr("id")),n!==!1&&void 0!==R[n])return R[n];if(t){try{var i=t.contentDocument||t.contentWindow.document;a=i.body.innerHTML}catch(r){}o=null!==a}else{try{var i=top.document;a=i.body.innerHTML}catch(r){}o=null!==a}return n!==!1&&(R[n]=o),o},W=function(e){var t=this.find("iframe");if(t.length){var o=e?"auto":"none";t.css("pointer-events",o)}},z=function(t,o){var a=o.nodeName.toLowerCase(),i=t.data(n).opt.mouseWheel.disableOver,r=["select","textarea"];return e.inArray(a,i)>-1&&!(e.inArray(a,r)>-1&&!e(o).is(":focus"))},H=function(){var t,o=e(this),a=o.data(n),i=n+"_"+a.idx,r=e("#mCSB_"+a.idx+"_container"),l=r.parent(),s=e(".mCSB_"+a.idx+"_scrollbar ."+d[12]);s.bind("mousedown."+i+" touchstart."+i+" pointerdown."+i+" MSPointerDown."+i,function(o){c=!0,e(o.target).hasClass("mCSB_dragger")||(t=1)}).bind("touchend."+i+" pointerup."+i+" MSPointerUp."+i,function(){c=!1}).bind("click."+i,function(n){if(t&&(t=0,e(n.target).hasClass(d[12])||e(n.target).hasClass("mCSB_draggerRail"))){Q(o);var i=e(this),s=i.find(".mCSB_dragger");if(i.parent(".mCSB_scrollTools_horizontal").length>0){if(!a.overflowed[1])return;var c="x",u=n.pageX>s.offset().left?-1:1,h=Math.abs(r[0].offsetLeft)-u*(.9*l.width())}else{if(!a.overflowed[0])return;var c="y",u=n.pageY>s.offset().top?-1:1,h=Math.abs(r[0].offsetTop)-u*(.9*l.height())}Z(o,h.toString(),{dir:c,scrollEasing:"mcsEaseInOut"})}})},P=function(){var t=e(this),o=t.data(n),a=o.opt,i=n+"_"+o.idx,r=e("#mCSB_"+o.idx+"_container"),l=r.parent();r.bind("focusin."+i,function(){var o=e(document.activeElement),n=r.find(".mCustomScrollBox").length,i=0;o.is(a.advanced.autoScrollOnFocus)&&(Q(t),clearTimeout(t[0]._focusTimeout),t[0]._focusTimer=n?(i+17)*n:0,t[0]._focusTimeout=setTimeout(function(){var e=[ne(o)[0],ne(o)[1]],n=[r[0].offsetTop,r[0].offsetLeft],s=[n[0]+e[0]>=0&&n[0]+e[0]<l.height()-o.outerHeight(!1),n[1]+e[1]>=0&&n[0]+e[1]<l.width()-o.outerWidth(!1)],c="yx"!==a.axis||s[0]||s[1]?"all":"none";"x"===a.axis||s[0]||Z(t,e[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:c,dur:i}),"y"===a.axis||s[1]||Z(t,e[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:c,dur:i})},t[0]._focusTimer))})},X=function(){var t=e(this),o=t.data(n),a=n+"_"+o.idx,i=e("#mCSB_"+o.idx+"_container").parent();i.bind("scroll."+a,function(){0===i.scrollTop()&&0===i.scrollLeft()||e(".mCSB_"+o.idx+"_scrollbar").css("visibility","hidden")})},Y=function(){var t=e(this),o=t.data(n),a=o.opt,i=o.sequential,r=n+"_"+o.idx,l=".mCSB_"+o.idx+"_scrollbar",s=e(l+">a");s.bind("contextmenu."+r,function(e){e.preventDefault()}).bind("mousedown."+r+" touchstart."+r+" pointerdown."+r+" MSPointerDown."+r+" mouseup."+r+" touchend."+r+" pointerup."+r+" MSPointerUp."+r+" mouseout."+r+" pointerout."+r+" MSPointerOut."+r+" click."+r,function(n){function r(e,o){i.scrollAmount=a.scrollButtons.scrollAmount,U(t,e,o)}if(n.preventDefault(),ee(n)){var l=e(this).attr("class");switch(i.type=a.scrollButtons.scrollType,n.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===i.type)return;c=!0,o.tweenRunning=!1,r("on",l);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===i.type)return;c=!1,i.dir&&r("off",l);break;case"click":if("stepped"!==i.type||o.tweenRunning)return;r("on",l)}}})},j=function(){function t(t){function n(e,t){r.type=i.keyboard.scrollType,r.scrollAmount=i.keyboard.scrollAmount,"stepped"===r.type&&a.tweenRunning||U(o,e,t)}switch(t.type){case"blur":a.tweenRunning&&r.dir&&n("off",null);
break;case"keydown":case"keyup":var l=t.keyCode?t.keyCode:t.which,s="on";if("x"!==i.axis&&(38===l||40===l)||"y"!==i.axis&&(37===l||39===l)){if((38===l||40===l)&&!a.overflowed[0]||(37===l||39===l)&&!a.overflowed[1])return;"keyup"===t.type&&(s="off"),e(document.activeElement).is(u)||(t.preventDefault(),t.stopImmediatePropagation(),n(s,l))}else if(33===l||34===l){if((a.overflowed[0]||a.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type){Q(o);var h=34===l?-1:1;if("x"===i.axis||"yx"===i.axis&&a.overflowed[1]&&!a.overflowed[0])var f="x",m=Math.abs(c[0].offsetLeft)-h*(.9*d.width());else var f="y",m=Math.abs(c[0].offsetTop)-h*(.9*d.height());Z(o,m.toString(),{dir:f,scrollEasing:"mcsEaseInOut"})}}else if((35===l||36===l)&&!e(document.activeElement).is(u)&&((a.overflowed[0]||a.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type)){if("x"===i.axis||"yx"===i.axis&&a.overflowed[1]&&!a.overflowed[0])var f="x",m=35===l?Math.abs(d.width()-c.outerWidth(!1)):0;else var f="y",m=35===l?Math.abs(d.height()-c.outerHeight(!1)):0;Z(o,m.toString(),{dir:f,scrollEasing:"mcsEaseInOut"})}}}var o=e(this),a=o.data(n),i=a.opt,r=a.sequential,l=n+"_"+a.idx,s=e("#mCSB_"+a.idx),c=e("#mCSB_"+a.idx+"_container"),d=c.parent(),u="input,textarea,select,datalist,keygen,[contenteditable='true']",h=c.find("iframe"),f=["blur."+l+" keydown."+l+" keyup."+l];h.length&&h.each(function(){e(this).bind("load",function(){A(this)&&e(this.contentDocument||this.contentWindow.document).bind(f[0],function(e){t(e)})})}),s.attr("tabindex","0").bind(f[0],function(e){t(e)})},U=function(t,o,a,i,r){function l(e){u.snapAmount&&(h.scrollAmount=u.snapAmount instanceof Array?"x"===h.dir[0]?u.snapAmount[1]:u.snapAmount[0]:u.snapAmount);var o="stepped"!==h.type,n=r?r:e?o?p/1.5:g:1e3/60,a=e?o?7.5:40:2.5,s=[Math.abs(f[0].offsetTop),Math.abs(f[0].offsetLeft)],d=[c.scrollRatio.y>10?10:c.scrollRatio.y,c.scrollRatio.x>10?10:c.scrollRatio.x],m="x"===h.dir[0]?s[1]+h.dir[1]*(d[1]*a):s[0]+h.dir[1]*(d[0]*a),v="x"===h.dir[0]?s[1]+h.dir[1]*parseInt(h.scrollAmount):s[0]+h.dir[1]*parseInt(h.scrollAmount),x="auto"!==h.scrollAmount?v:m,w=i?i:e?o?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",_=!!e;return e&&17>n&&(x="x"===h.dir[0]?s[1]:s[0]),Z(t,x.toString(),{dir:h.dir[0],scrollEasing:w,dur:n,onComplete:_}),e?void(h.dir=!1):(clearTimeout(h.step),void(h.step=setTimeout(function(){l()},n)))}function s(){clearTimeout(h.step),$(h,"step"),Q(t)}var c=t.data(n),u=c.opt,h=c.sequential,f=e("#mCSB_"+c.idx+"_container"),m="stepped"===h.type,p=u.scrollInertia<26?26:u.scrollInertia,g=u.scrollInertia<1?17:u.scrollInertia;switch(o){case"on":if(h.dir=[a===d[16]||a===d[15]||39===a||37===a?"x":"y",a===d[13]||a===d[15]||38===a||37===a?-1:1],Q(t),oe(a)&&"stepped"===h.type)return;l(m);break;case"off":s(),(m||c.tweenRunning&&h.dir)&&l(!0)}},F=function(t){var o=e(this).data(n).opt,a=[];return"function"==typeof t&&(t=t()),t instanceof Array?a=t.length>1?[t[0],t[1]]:"x"===o.axis?[null,t[0]]:[t[0],null]:(a[0]=t.y?t.y:t.x||"x"===o.axis?null:t,a[1]=t.x?t.x:t.y||"y"===o.axis?null:t),"function"==typeof a[0]&&(a[0]=a[0]()),"function"==typeof a[1]&&(a[1]=a[1]()),a},q=function(t,o){if(null!=t&&"undefined"!=typeof t){var a=e(this),i=a.data(n),r=i.opt,l=e("#mCSB_"+i.idx+"_container"),s=l.parent(),c=typeof t;o||(o="x"===r.axis?"x":"y");var d="x"===o?l.outerWidth(!1)-s.width():l.outerHeight(!1)-s.height(),h="x"===o?l[0].offsetLeft:l[0].offsetTop,f="x"===o?"left":"top";switch(c){case"function":return t();case"object":var m=t.jquery?t:e(t);if(!m.length)return;return"x"===o?ne(m)[1]:ne(m)[0];case"string":case"number":if(oe(t))return Math.abs(t);if(-1!==t.indexOf("%"))return Math.abs(d*parseInt(t)/100);if(-1!==t.indexOf("-="))return Math.abs(h-parseInt(t.split("-=")[1]));if(-1!==t.indexOf("+=")){var p=h+parseInt(t.split("+=")[1]);return p>=0?0:Math.abs(p)}if(-1!==t.indexOf("px")&&oe(t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(s.height()-l.outerHeight(!1));if("right"===t)return Math.abs(s.width()-l.outerWidth(!1));if("first"===t||"last"===t){var m=l.find(":"+t);return"x"===o?ne(m)[1]:ne(m)[0]}return e(t).length?"x"===o?ne(e(t))[1]:ne(e(t))[0]:(l.css(f,t),void u.update.call(null,a[0]))}}},N=function(t){function o(){return clearTimeout(h[0].autoUpdate),0===l.parents("html").length?void(l=null):void(h[0].autoUpdate=setTimeout(function(){return c.advanced.updateOnSelectorChange&&(s.poll.change.n=i(),s.poll.change.n!==s.poll.change.o)?(s.poll.change.o=s.poll.change.n,void r(3)):c.advanced.updateOnContentResize&&(s.poll.size.n=l[0].scrollHeight+l[0].scrollWidth+h[0].offsetHeight+l[0].offsetHeight+l[0].offsetWidth,s.poll.size.n!==s.poll.size.o)?(s.poll.size.o=s.poll.size.n,void r(1)):!c.advanced.updateOnImageLoad||"auto"===c.advanced.updateOnImageLoad&&"y"===c.axis||(s.poll.img.n=h.find("img").length,s.poll.img.n===s.poll.img.o)?void((c.advanced.updateOnSelectorChange||c.advanced.updateOnContentResize||c.advanced.updateOnImageLoad)&&o()):(s.poll.img.o=s.poll.img.n,void h.find("img").each(function(){a(this)}))},c.advanced.autoUpdateTimeout))}function a(t){function o(e,t){return function(){return t.apply(e,arguments)}}function n(){this.onload=null,e(t).addClass(d[2]),r(2)}if(e(t).hasClass(d[2]))return void r();var a=new Image;a.onload=o(a,n),a.src=t.src}function i(){c.advanced.updateOnSelectorChange===!0&&(c.advanced.updateOnSelectorChange="*");var e=0,t=h.find(c.advanced.updateOnSelectorChange);return c.advanced.updateOnSelectorChange&&t.length>0&&t.each(function(){e+=this.offsetHeight+this.offsetWidth}),e}function r(e){clearTimeout(h[0].autoUpdate),u.update.call(null,l[0],e)}var l=e(this),s=l.data(n),c=s.opt,h=e("#mCSB_"+s.idx+"_container");return t?(clearTimeout(h[0].autoUpdate),void $(h[0],"autoUpdate")):void o()},V=function(e,t,o){return Math.round(e/t)*t-o},Q=function(t){var o=t.data(n),a=e("#mCSB_"+o.idx+"_container,#mCSB_"+o.idx+"_container_wrapper,#mCSB_"+o.idx+"_dragger_vertical,#mCSB_"+o.idx+"_dragger_horizontal");a.each(function(){K.call(this)})},Z=function(t,o,a){function i(e){return s&&c.callbacks[e]&&"function"==typeof c.callbacks[e]}function r(){return[c.callbacks.alwaysTriggerOffsets||_>=S[0]+C,c.callbacks.alwaysTriggerOffsets||-B>=_]}function l(){var e=[f[0].offsetTop,f[0].offsetLeft],o=[x[0].offsetTop,x[0].offsetLeft],n=[f.outerHeight(!1),f.outerWidth(!1)],i=[h.height(),h.width()];t[0].mcs={content:f,top:e[0],left:e[1],draggerTop:o[0],draggerLeft:o[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(n[0])-i[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(n[1])-i[1])),direction:a.dir}}var s=t.data(n),c=s.opt,d={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:c.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},a=e.extend(d,a),u=[a.dur,a.drag?0:a.dur],h=e("#mCSB_"+s.idx),f=e("#mCSB_"+s.idx+"_container"),m=f.parent(),p=c.callbacks.onTotalScrollOffset?F.call(t,c.callbacks.onTotalScrollOffset):[0,0],g=c.callbacks.onTotalScrollBackOffset?F.call(t,c.callbacks.onTotalScrollBackOffset):[0,0];if(s.trigger=a.trigger,0===m.scrollTop()&&0===m.scrollLeft()||(e(".mCSB_"+s.idx+"_scrollbar").css("visibility","visible"),m.scrollTop(0).scrollLeft(0)),"_resetY"!==o||s.contentReset.y||(i("onOverflowYNone")&&c.callbacks.onOverflowYNone.call(t[0]),s.contentReset.y=1),"_resetX"!==o||s.contentReset.x||(i("onOverflowXNone")&&c.callbacks.onOverflowXNone.call(t[0]),s.contentReset.x=1),"_resetY"!==o&&"_resetX"!==o){if(!s.contentReset.y&&t[0].mcs||!s.overflowed[0]||(i("onOverflowY")&&c.callbacks.onOverflowY.call(t[0]),s.contentReset.x=null),!s.contentReset.x&&t[0].mcs||!s.overflowed[1]||(i("onOverflowX")&&c.callbacks.onOverflowX.call(t[0]),s.contentReset.x=null),c.snapAmount){var v=c.snapAmount instanceof Array?"x"===a.dir?c.snapAmount[1]:c.snapAmount[0]:c.snapAmount;o=V(o,v,c.snapOffset)}switch(a.dir){case"x":var x=e("#mCSB_"+s.idx+"_dragger_horizontal"),w="left",_=f[0].offsetLeft,S=[h.width()-f.outerWidth(!1),x.parent().width()-x.width()],b=[o,0===o?0:o/s.scrollRatio.x],C=p[1],B=g[1],T=C>0?C/s.scrollRatio.x:0,M=B>0?B/s.scrollRatio.x:0;break;case"y":var x=e("#mCSB_"+s.idx+"_dragger_vertical"),w="top",_=f[0].offsetTop,S=[h.height()-f.outerHeight(!1),x.parent().height()-x.height()],b=[o,0===o?0:o/s.scrollRatio.y],C=p[0],B=g[0],T=C>0?C/s.scrollRatio.y:0,M=B>0?B/s.scrollRatio.y:0}b[1]<0||0===b[0]&&0===b[1]?b=[0,0]:b[1]>=S[1]?b=[S[0],S[1]]:b[0]=-b[0],t[0].mcs||(l(),i("onInit")&&c.callbacks.onInit.call(t[0])),clearTimeout(f[0].onCompleteTimeout),G(x[0],w,Math.round(b[1]),u[1],a.scrollEasing),!s.tweenRunning&&(0===_&&b[0]>=0||_===S[0]&&b[0]<=S[0])||G(f[0],w,Math.round(b[0]),u[0],a.scrollEasing,a.overwrite,{onStart:function(){a.callbacks&&a.onStart&&!s.tweenRunning&&(i("onScrollStart")&&(l(),c.callbacks.onScrollStart.call(t[0])),s.tweenRunning=!0,y(x),s.cbOffsets=r())},onUpdate:function(){a.callbacks&&a.onUpdate&&i("whileScrolling")&&(l(),c.callbacks.whileScrolling.call(t[0]))},onComplete:function(){if(a.callbacks&&a.onComplete){"yx"===c.axis&&clearTimeout(f[0].onCompleteTimeout);var e=f[0].idleTimer||0;f[0].onCompleteTimeout=setTimeout(function(){i("onScroll")&&(l(),c.callbacks.onScroll.call(t[0])),i("onTotalScroll")&&b[1]>=S[1]-T&&s.cbOffsets[0]&&(l(),c.callbacks.onTotalScroll.call(t[0])),i("onTotalScrollBack")&&b[1]<=M&&s.cbOffsets[1]&&(l(),c.callbacks.onTotalScrollBack.call(t[0])),s.tweenRunning=!1,f[0].idleTimer=0,y(x,"hide")},e)}}})}},G=function(e,t,o,n,a,i,r){function l(){S.stop||(x||m.call(),x=J()-v,s(),x>=S.time&&(S.time=x>S.time?x+h-(x-S.time):x+h-1,S.time<x+1&&(S.time=x+1)),S.time<n?S.id=f(l):g.call())}function s(){n>0?(S.currVal=u(S.time,w,b,n,a),_[t]=Math.round(S.currVal)+"px"):_[t]=o+"px",p.call()}function c(){h=1e3/60,S.time=x+h,f=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return s(),setTimeout(e,.01)},S.id=f(l)}function d(){null!=S.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(S.id):clearTimeout(S.id),S.id=null)}function u(e,t,o,n,a){switch(a){case"linear":case"mcsLinear":return o*e/n+t;case"mcsLinearOut":return e/=n,e--,o*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return e/=n/2,1>e?o/2*e*e+t:(e--,-o/2*(e*(e-2)-1)+t);case"easeInOutStrong":return e/=n/2,1>e?o/2*Math.pow(2,10*(e-1))+t:(e--,o/2*(-Math.pow(2,-10*e)+2)+t);case"easeInOut":case"mcsEaseInOut":return e/=n/2,1>e?o/2*e*e*e+t:(e-=2,o/2*(e*e*e+2)+t);case"easeOutSmooth":return e/=n,e--,-o*(e*e*e*e-1)+t;case"easeOutStrong":return o*(-Math.pow(2,-10*e/n)+1)+t;case"easeOut":case"mcsEaseOut":default:var i=(e/=n)*e,r=i*e;return t+o*(.499999999999997*r*i+-2.5*i*i+5.5*r+-6.5*i+4*e)}}e._mTween||(e._mTween={top:{},left:{}});var h,f,r=r||{},m=r.onStart||function(){},p=r.onUpdate||function(){},g=r.onComplete||function(){},v=J(),x=0,w=e.offsetTop,_=e.style,S=e._mTween[t];"left"===t&&(w=e.offsetLeft);var b=o-w;S.stop=0,"none"!==i&&d(),c()},J=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},K=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],o=0;o<t.length;o++){var n=t[o];e._mTween[n].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[n].id):clearTimeout(e._mTween[n].id),e._mTween[n].id=null,e._mTween[n].stop=1)}},$=function(e,t){try{delete e[t]}catch(o){e[t]=null}},ee=function(e){return!(e.which&&1!==e.which)},te=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},oe=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ne=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]},ae=function(){function e(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}var t=e();return t?document[t]:!1};e.fn[o]=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):u.init.apply(this,arguments)},e[o]=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):u.init.apply(this,arguments)},e[o].defaults=i,window[o]=!0,e(window).bind("load",function(){e(a)[o](),e.extend(e.expr[":"],{mcsInView:e.expr[":"].mcsInView||function(t){var o,n,a=e(t),i=a.parents(".mCSB_container");return i.length?(o=i.parent(),n=[i[0].offsetTop,i[0].offsetLeft],n[0]+ne(a)[0]>=0&&n[0]+ne(a)[0]<o.height()-a.outerHeight(!1)&&n[1]+ne(a)[1]>=0&&n[1]+ne(a)[1]<o.width()-a.outerWidth(!1)):void 0},mcsInSight:e.expr[":"].mcsInSight||function(t,o,n){var a,i,r,l,s=e(t),c=s.parents(".mCSB_container"),d="exact"===n[3]?[[1,0],[1,0]]:[[.9,.1],[.6,.4]];return c.length?(a=[s.outerHeight(!1),s.outerWidth(!1)],r=[c[0].offsetTop+ne(s)[0],c[0].offsetLeft+ne(s)[1]],i=[c.parent()[0].offsetHeight,c.parent()[0].offsetWidth],l=[a[0]<i[0]?d[0]:d[1],a[1]<i[1]?d[0]:d[1]],r[0]-i[0]*l[0][0]<0&&r[0]+a[0]-i[0]*l[0][1]>=0&&r[1]-i[1]*l[1][0]<0&&r[1]+a[1]-i[1]*l[1][1]>=0):void 0},mcsOverflow:e.expr[":"].mcsOverflow||function(t){var o=e(t).data(n);return o?o.overflowed[0]||o.overflowed[1]:void 0}})})})});
!function(t,n,e){function o(t){return t=t||location.href,"#"+t.replace(/^[^#]*#?(.*)$/,"$1")}var r,i="hashchange",c=document,a=t.event.special,u=c.documentMode,f="on"+i in n&&(u===e||u>7);t.fn[i]=function(t){return t?this.bind(i,t):this.trigger(i)},t.fn[i].delay=50,a[i]=t.extend(a[i],{setup:function(){return f?!1:void t(r.start)},teardown:function(){return f?!1:void t(r.stop)}}),r=function(){function r(){var e=o(),c=h(s);e!==s?(d(s=e,c),t(n).trigger(i)):c!==s&&(location.href=location.href.replace(/#.*/,"")+c),a=setTimeout(r,t.fn[i].delay)}var a,u={},s=o(),l=function(t){return t},d=l,h=l;return u.start=function(){a||r()},u.stop=function(){a&&clearTimeout(a),a=e},null!=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/)&&!f&&function(){var n,e;u.start=function(){n||(e=t.fn[i].src,e=e&&e+o(),n=t('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){e||d(o()),r()}).attr("src",e||"javascript:0").insertAfter("body")[0].contentWindow,c.onpropertychange=function(){try{"title"===event.propertyName&&(n.document.title=c.title)}catch(t){}})},u.stop=l,h=function(){return o(n.location.href)},d=function(e,o){var r=n.document,a=t.fn[i].domain;e!==o&&(r.title=c.title,r.open(),a&&r.write('<script>document.domain="'+a+'"</script>'),r.close(),n.location.hash=e)}}(),u}()}(jQuery,this);
!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if("undefined"==typeof self)throw new Error("This environment was not anticiapted by Q. Please file a bug.");self.Q=t()}}(function(){"use strict";function t(t){return function(){return L.apply(t,arguments)}}function n(t){return t===Object(t)}function e(t){return"[object StopIteration]"===rt(t)||t instanceof $}function r(t,n){var e,r,i;if(_&&n.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(V)){for(e=[],r=n;r;r=r.source)r.stack&&e.unshift(r.stack);e.unshift(t.stack),i=e.join("\n"+V+"\n"),t.stack=o(i)}}function o(t){for(var n,e=t.split("\n"),r=[],o=0;o<e.length;++o)n=e[o],c(n)||i(n)||!n||r.push(n);return r.join("\n")}function i(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function u(t){var n,e,r=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);return r?[r[1],Number(r[2])]:(n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t))?[n[1],Number(n[2])]:(e=/.*@(.+):(\d+)$/.exec(t),e?[e[1],Number(e[2])]:void 0)}function c(t){var n,e,r=u(t);return r?(n=r[0],e=r[1],n===z&&e>=H&&G>=e):!1}function s(){if(_)try{throw new Error}catch(t){var n=t.stack.split("\n"),e=n[0].indexOf("@")>0?n[1]:n[2],r=u(e);return r?(z=r[0],r[1]):void 0}}function f(t,n,e){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(n+" is deprecated, use "+e+" instead.",new Error("").stack),t.apply(t,arguments)}}function p(t){return t instanceof h?t:g(t)?S(t):O(t)}function a(){function t(t){n=t,i.source=t,X(e,function(n,e){p.nextTick(function(){t.promiseDispatch.apply(t,e)})},void 0),e=void 0,r=void 0}var n,e=[],r=[],o=tt(a.prototype),i=tt(h.prototype);if(i.promiseDispatch=function(t,o,i){var u=W(arguments);e?(e.push(u),"when"===o&&i[1]&&r.push(i[1])):p.nextTick(function(){n.promiseDispatch.apply(n,u)})},i.valueOf=function(){if(e)return i;var t=v(n);return m(t)&&(n=t),t},i.inspect=function(){return n?n.inspect():{state:"pending"}},p.longStackSupport&&_)try{throw new Error}catch(u){i.stack=u.stack.substring(u.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(e){n||t(p(e))},o.fulfill=function(e){n||t(O(e))},o.reject=function(e){n||t(R(e))},o.notify=function(t){n||X(r,function(n,e){p.nextTick(function(){e(t)})},void 0)},o}function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var n=a();try{t(n.resolve,n.reject,n.notify)}catch(e){n.reject(e)}return n.promise}function d(t){return l(function(n,e){for(var r=0,o=t.length;o>r;r++)p(t[r]).then(n,e)})}function h(t,n,e){var r,o;return void 0===n&&(n=function(t){return R(new Error("Promise does not support operation: "+t))}),void 0===e&&(e=function(){return{state:"unknown"}}),r=tt(h.prototype),r.promiseDispatch=function(e,o,i){var u;try{u=t[o]?t[o].apply(r,i):n.call(r,o,i)}catch(c){u=R(c)}e&&e(u)},r.inspect=e,e&&(o=e(),"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var t=e();return"pending"===t.state||"rejected"===t.state?r:t.value}),r}function y(t,n,e,r){return p(t).then(n,e,r)}function v(t){if(m(t)){var n=t.inspect();if("fulfilled"===n.state)return n.value}return t}function m(t){return t instanceof h}function g(t){return n(t)&&"function"==typeof t.then}function k(t){return m(t)&&"pending"===t.inspect().state}function j(t){return!m(t)||"fulfilled"===t.inspect().state}function w(t){return m(t)&&"rejected"===t.inspect().state}function b(){ot.length=0,it.length=0,ut||(ut=!0)}function x(t,n){ut&&(it.push(t),n&&"undefined"!=typeof n.stack?ot.push(n.stack):ot.push("(no stack) "+n))}function T(t){if(ut){var n=Y(it,t);-1!==n&&(it.splice(n,1),ot.splice(n,1))}}function R(t){var n=h({when:function(n){return n&&T(this),n?n(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return x(n,t),n}function O(t){return h({when:function(){return t},get:function(n){return t[n]},set:function(n,e){t[n]=e},"delete":function(n){delete t[n]},post:function(n,e){return null===n||void 0===n?t.apply(void 0,e):t[n].apply(t,e)},apply:function(n,e){return t.apply(n,e)},keys:function(){return et(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function S(t){var n=a();return p.nextTick(function(){try{t.then(n.resolve,n.reject,n.notify)}catch(e){n.reject(e)}}),n.promise}function E(t){return h({isDef:function(){}},function(n,e){return C(t,n,e)},function(){return p(t).inspect()})}function N(t,n,e){return p(t).spread(n,e)}function D(t){return function(){function n(t,n){var u;if("undefined"==typeof StopIteration){try{u=r[t](n)}catch(c){return R(c)}return u.done?p(u.value):y(u.value,o,i)}try{u=r[t](n)}catch(c){return e(c)?p(c.value):R(c)}return y(u,o,i)}var r=t.apply(this,arguments),o=n.bind(n,"next"),i=n.bind(n,"throw");return o()}}function P(t){p.done(p.async(t)())}function I(t){throw new $(t)}function A(t){return function(){return N([this,U(arguments)],function(n,e){return t.apply(n,e)})}}function C(t,n,e){return p(t).dispatch(n,e)}function U(t){return y(t,function(t){var n=0,e=a();return X(t,function(r,o,i){var u;m(o)&&"fulfilled"===(u=o.inspect()).state?t[i]=u.value:(++n,y(o,function(r){t[i]=r,0==--n&&e.resolve(t)},e.reject,function(t){e.notify({index:i,value:t})}))},void 0),0===n&&e.resolve(t),e.promise})}function F(t){return y(t,function(t){return t=Z(t,p),y(U(Z(t,function(t){return y(t,J,J)})),function(){return t})})}function M(t){return p(t).allSettled()}function Q(t,n){return p(t).then(void 0,void 0,n)}function B(t,n){return p(t).nodeify(n)}var $,V,G,_=!1;try{throw new Error}catch(q){_=!!q.stack}var z,H=s(),J=function(){},K=function(){function t(){for(var n,e;r.next;){r=r.next,n=r.task,r.task=void 0,e=r.domain,e&&(r.domain=void 0,e.enter());try{n()}catch(o){if(c)throw e&&e.exit(),setTimeout(t,0),e&&e.enter(),o;setTimeout(function(){throw o},0)}e&&e.exit()}i=!1}var n,e,r={task:void 0,next:null},o=r,i=!1,u=void 0,c=!1;return K=function(t){o=o.next={task:t,domain:c&&process.domain,next:null},i||(i=!0,u())},"undefined"!=typeof process&&process.nextTick?(c=!0,u=function(){process.nextTick(t)}):"function"==typeof setImmediate?u="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)}:"undefined"!=typeof MessageChannel?(n=new MessageChannel,n.port1.onmessage=function(){u=e,n.port1.onmessage=t,t()},e=function(){n.port2.postMessage(0)},u=function(){setTimeout(t,0),e()}):u=function(){setTimeout(t,0)},K}(),L=Function.call,W=t(Array.prototype.slice),X=t(Array.prototype.reduce||function(t,n){var e=0,r=this.length;if(1===arguments.length)for(;;){if(e in this){n=this[e++];break}if(++e>=r)throw new TypeError}for(;r>e;e++)e in this&&(n=t(n,this[e],e));return n}),Y=t(Array.prototype.indexOf||function(t){for(var n=0;n<this.length;n++)if(this[n]===t)return n;return-1}),Z=t(Array.prototype.map||function(t,n){var e=this,r=[];return X(e,function(o,i,u){r.push(t.call(n,i,u,e))},void 0),r}),tt=Object.create||function(t){function n(){}return n.prototype=t,new n},nt=t(Object.prototype.hasOwnProperty),et=Object.keys||function(t){var n=[];for(var e in t)nt(t,e)&&n.push(e);return n},rt=t(Object.prototype.toString);$="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t},V="From previous event:",p.resolve=p,p.nextTick=K,p.longStackSupport=!1,"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(p.longStackSupport=!0),p.defer=a,a.prototype.makeNodeResolver=function(){var t=this;return function(n,e){n?t.reject(n):arguments.length>2?t.resolve(W(arguments,1)):t.resolve(e)}},p.Promise=l,p.promise=l,l.race=d,l.all=U,l.reject=R,l.resolve=p,p.passByCopy=function(t){return t},h.prototype.passByCopy=function(){return this},p.join=function(t,n){return p(t).join(n)},h.prototype.join=function(t){return p([this,t]).spread(function(t,n){if(t===n)return t;throw new Error("Can't join: not the same: "+t+" "+n)})},p.race=d,h.prototype.race=function(){return this.then(p.race)},p.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(t,n,e){function o(n){try{return"function"==typeof t?t(n):n}catch(e){return R(e)}}function i(t){if("function"==typeof n){r(t,c);try{return n(t)}catch(e){return R(e)}}return R(t)}function u(t){return"function"==typeof e?e(t):t}var c=this,s=a(),f=!1;return p.nextTick(function(){c.promiseDispatch(function(t){f||(f=!0,s.resolve(o(t)))},"when",[function(t){f||(f=!0,s.resolve(i(t)))}])}),c.promiseDispatch(void 0,"when",[void 0,function(t){var n,e=!1;try{n=u(t)}catch(r){if(e=!0,!p.onerror)throw r;p.onerror(r)}e||s.notify(n)}]),s.promise},p.tap=function(t,n){return p(t).tap(n)},h.prototype.tap=function(t){return t=p(t),this.then(function(n){return t.fcall(n).thenResolve(n)})},p.when=y,h.prototype.thenResolve=function(t){return this.then(function(){return t})},p.thenResolve=function(t,n){return p(t).thenResolve(n)},h.prototype.thenReject=function(t){return this.then(function(){throw t})},p.thenReject=function(t,n){return p(t).thenReject(n)},p.nearer=v,p.isPromise=m,p.isPromiseAlike=g,p.isPending=k,h.prototype.isPending=function(){return"pending"===this.inspect().state},p.isFulfilled=j,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},p.isRejected=w,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ot=[],it=[],ut=!0;return p.resetUnhandledRejections=b,p.getUnhandledReasons=function(){return ot.slice()},p.stopUnhandledRejectionTracking=function(){b(),ut=!1},b(),p.reject=R,p.fulfill=O,p.master=E,p.spread=N,h.prototype.spread=function(t,n){return this.all().then(function(n){return t.apply(void 0,n)},n)},p.async=D,p.spawn=P,p["return"]=I,p.promised=A,p.dispatch=C,h.prototype.dispatch=function(t,n){var e=this,r=a();return p.nextTick(function(){e.promiseDispatch(r.resolve,t,n)}),r.promise},p.get=function(t,n){return p(t).dispatch("get",[n])},h.prototype.get=function(t){return this.dispatch("get",[t])},p.set=function(t,n,e){return p(t).dispatch("set",[n,e])},h.prototype.set=function(t,n){return this.dispatch("set",[t,n])},p.del=p["delete"]=function(t,n){return p(t).dispatch("delete",[n])},h.prototype.del=h.prototype["delete"]=function(t){return this.dispatch("delete",[t])},p.mapply=p.post=function(t,n,e){return p(t).dispatch("post",[n,e])},h.prototype.mapply=h.prototype.post=function(t,n){return this.dispatch("post",[t,n])},p.send=p.mcall=p.invoke=function(t,n){return p(t).dispatch("post",[n,W(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(t){return this.dispatch("post",[t,W(arguments,1)])},p.fapply=function(t,n){return p(t).dispatch("apply",[void 0,n])},h.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},p["try"]=p.fcall=function(t){return p(t).dispatch("apply",[void 0,W(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,W(arguments)])},p.fbind=function(t){var n=p(t),e=W(arguments,1);return function(){return n.dispatch("apply",[this,e.concat(W(arguments))])}},h.prototype.fbind=function(){var t=this,n=W(arguments);return function(){return t.dispatch("apply",[this,n.concat(W(arguments))])}},p.keys=function(t){return p(t).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},p.all=U,h.prototype.all=function(){return U(this)},p.allResolved=f(F,"allResolved","allSettled"),h.prototype.allResolved=function(){return F(this)},p.allSettled=M,h.prototype.allSettled=function(){return this.then(function(t){return U(Z(t,function(t){function n(){return t.inspect()}return t=p(t),t.then(n,n)}))})},p.fail=p["catch"]=function(t,n){return p(t).then(void 0,n)},h.prototype.fail=h.prototype["catch"]=function(t){return this.then(void 0,t)},p.progress=Q,h.prototype.progress=function(t){return this.then(void 0,void 0,t)},p.fin=p["finally"]=function(t,n){return p(t)["finally"](n)},h.prototype.fin=h.prototype["finally"]=function(t){return t=p(t),this.then(function(n){return t.fcall().then(function(){return n})},function(n){return t.fcall().then(function(){throw n})})},p.done=function(t,n,e,r){return p(t).done(n,e,r)},h.prototype.done=function(t,n,e){var o=function(t){p.nextTick(function(){if(r(t,i),!p.onerror)throw t;p.onerror(t)})},i=t||n||e?this.then(t,n,e):this;"object"==typeof process&&process&&process.domain&&(o=process.domain.bind(o)),i.then(void 0,o)},p.timeout=function(t,n,e){return p(t).timeout(n,e)},h.prototype.timeout=function(t,n){var e=a(),r=setTimeout(function(){n&&"string"!=typeof n||(n=new Error(n||"Timed out after "+t+" ms"),n.code="ETIMEDOUT"),e.reject(n)},t);return this.then(function(t){clearTimeout(r),e.resolve(t)},function(t){clearTimeout(r),e.reject(t)},e.notify),e.promise},p.delay=function(t,n){return void 0===n&&(n=t,t=void 0),p(t).delay(n)},h.prototype.delay=function(t){return this.then(function(n){var e=a();return setTimeout(function(){e.resolve(n)},t),e.promise})},p.nfapply=function(t,n){return p(t).nfapply(n)},h.prototype.nfapply=function(t){var n=a(),e=W(t);return e.push(n.makeNodeResolver()),this.fapply(e).fail(n.reject),n.promise},p.nfcall=function(t){var n=W(arguments,1);return p(t).nfapply(n)},h.prototype.nfcall=function(){var t=W(arguments),n=a();return t.push(n.makeNodeResolver()),this.fapply(t).fail(n.reject),n.promise},p.nfbind=p.denodeify=function(t){var n=W(arguments,1);return function(){var e=n.concat(W(arguments)),r=a();return e.push(r.makeNodeResolver()),p(t).fapply(e).fail(r.reject),r.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var t=W(arguments);return t.unshift(this),p.denodeify.apply(void 0,t)},p.nbind=function(t,n){var e=W(arguments,2);return function(){function r(){return t.apply(n,arguments)}var o=e.concat(W(arguments)),i=a();return o.push(i.makeNodeResolver()),p(r).fapply(o).fail(i.reject),i.promise}},h.prototype.nbind=function(){var t=W(arguments,0);return t.unshift(this),p.nbind.apply(void 0,t)},p.nmapply=p.npost=function(t,n,e){return p(t).npost(n,e)},h.prototype.nmapply=h.prototype.npost=function(t,n){var e=W(n||[]),r=a();return e.push(r.makeNodeResolver()),this.dispatch("post",[t,e]).fail(r.reject),r.promise},p.nsend=p.nmcall=p.ninvoke=function(t,n){var e=W(arguments,2),r=a();return e.push(r.makeNodeResolver()),p(t).dispatch("post",[n,e]).fail(r.reject),r.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(t){var n=W(arguments,1),e=a();return n.push(e.makeNodeResolver()),this.dispatch("post",[t,n]).fail(e.reject),e.promise},p.nodeify=B,h.prototype.nodeify=function(t){return t?void this.then(function(n){p.nextTick(function(){t(null,n)})},function(n){p.nextTick(function(){t(n)})}):this},G=s(),p});
!function(e,t){var n=e.datajs||{},r=e.OData||{};"function"==typeof define&&define.amd?(define("datajs",n),define("OData",r)):(e.datajs=n,e.OData=r),n.version={major:1,minor:1,build:4};var i=function(t){return e.ActiveXObject?new e.ActiveXObject(t):null},a=function(e){return null!==e&&e!==t},o=function(e,t){var n,r;for(n=0,r=e.length;r>n;n++)if(e[n]===t)return!0;return!1},u=function(e,n){return e!==t?e:n},s=function(t){if(1===arguments.length)return void e.setTimeout(t,0);var n=Array.prototype.slice.call(arguments,1);e.setTimeout(function(){t.apply(this,n)},0)},c=function(e,t){for(var n in t)e[n]=t[n];return e},l=function(e,t){if(e){var n,r;for(n=0,r=e.length;r>n;n++)if(t(e[n]))return e[n]}return null},f=function(e){return"[object Array]"===Object.prototype.toString.call(e)},d=function(e){return"[object Date]"===Object.prototype.toString.call(e)},p=function(e){return"object"==typeof e},m=function(e){return parseInt(e,10)},v=function(e,t,n){e.hasOwnProperty(t)&&(e[n]=e[t],delete e[t])},h=function(e){throw e},y=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},g=function(e,n){return e!==t?e:n},b=/^([^:\/?#]+:)?(\/\/[^\/?#]*)?([^?#:]+)?(\?[^#]*)?(#.*)?/,_=["scheme","authority","path","query","fragment"],T=function(e){var t={isAbsolute:!1};if(e){var n=b.exec(e);if(n){var r,i;for(r=0,i=_.length;i>r;r++)n[r+1]&&(t[_[r]]=n[r+1])}t.scheme&&(t.isAbsolute=!0)}return t},S=function(e){return"".concat(e.scheme||"",e.authority||"",e.path||"",e.query||"",e.fragment||"")},x=/^\/{0,2}(?:([^@]*)@)?([^:]+)(?::{1}(\d+))?/,C=/%[0-9A-F]{2}/gi,w=function(e){var t=T(e),n=t.scheme,r=t.authority;if(n&&(t.scheme=n.toLowerCase(),r)){var i=x.exec(r);i&&(t.authority="//"+(i[1]?i[1]+"@":"")+i[2].toLowerCase()+(i[3]?":"+i[3]:""))}return e=S(t),e.replace(C,function(e){return e.toLowerCase()})},D=function(e,t){if(!t)return e;var n=T(e);if(n.isAbsolute)return e;var r,i=T(t),a={};return n.authority?(a.authority=n.authority,r=n.path,a.query=n.query):(n.path?(r="/"===n.path.charAt(0)?n.path:k(n.path,i.path),a.query=n.query):(r=i.path,a.query=n.query||i.query),a.authority=i.authority),a.path=O(r),a.scheme=i.scheme,a.fragment=n.fragment,S(a)},k=function(e,t){var n,r="/";return t&&(n=t.lastIndexOf("/"),r=t.substring(0,n),"/"!==r.charAt(r.length-1)&&(r+="/")),r+e},O=function(e){for(var t,n="",r="";e;)0===e.indexOf("..")||0===e.indexOf(".")?e=e.replace(/^\.\.?\/?/g,""):0===e.indexOf("/..")?(e=e.replace(/^\/\..\/?/g,"/"),t=n.lastIndexOf("/"),n=-1===t?"":n.substring(0,t)):0===e.indexOf("/.")?e=e.replace(/^\/\.\/?/g,"/"):(r=e,t=e.indexOf("/",1),-1!==t&&(r=e.substring(0,t)),n+=r,e=e.replace(r,""));return n},E=function(n){var r=[];if(e.atob===t)r=N(n);else for(var i=e.atob(n),a=0;a<i.length;a++)r.push(i.charCodeAt(a));for(var o="",u="0123456789ABCDEF",s=0;s<r.length;s++){var c=r[s];o+=u[c>>4],o+=u[15&c]}return o},N=function(e){for(var t="",n=0;n<e.length;n++){var r=A(e[n]),i="";null!==r&&(i=r.toString(2),t+=P(i))}var a=[],o=parseInt(t.length/8,10);for(n=0;o>n;n++){var u=parseInt(t.substring(8*n,8*(n+1)),2);a.push(u)}return a},A=function(e){var t=e.charCodeAt(0),n=65,r=6;return t>=65&&90>=t?t-n:t>=97&&122>=t?t-n-r:t>=48&&57>=t?t+4:"+"==e?62:"/"==e?63:null},P=function(e){for(;e.length<6;)e="0"+e;return e},R="http://",I=R+"www.w3.org/",M=I+"1999/xhtml",L=I+"2000/xmlns/",U=I+"XML/1998/namespace",j=R+"www.mozilla.org/newlayout/xml/parsererror.xml",F=function(e){var t=/(^\s)|(\s$)/;return t.test(e)},V=function(e){var t=/^\s*$/;return null===e||t.test(e)},q=function(e){for(;null!==e&&1===e.nodeType;){var t=Y(e,"space",U);if("preserve"===t)return!0;if("default"===t)break;e=e.parentNode}return!1},B=function(e){var t=e.nodeName;return"xmlns"==t||0===t.indexOf("xmlns:")},H=function(e,t,n){try{e.setProperty(t,n)}catch(r){}},J=function(){var e=i("Msxml2.DOMDocument.3.0");return e&&(H(e,"ProhibitDTD",!0),H(e,"MaxElementDepth",256),H(e,"AllowDocumentFunction",!1),H(e,"AllowXsltScript",!1)),e},z=function(){try{var e=i("Msxml2.DOMDocument.6.0");return e&&(e.async=!0),e}catch(t){return J()}},G=function(e){var t=z();if(!t)return null;t.loadXML(e);var n=t.parseError;return 0!==n.errorCode&&Q(n.reason,n.srcText,e),t},Q=function(e,t,n){throw"string"==typeof e&&(e={message:e}),c(e,{srcText:t||"",errorXmlText:n||""})},X=function(t){var n,r=e.DOMParser&&new e.DOMParser;if(!r)return n=G(t),n||Q("XML DOM parser not supported"),n;try{n=r.parseFromString(t,"text/xml")}catch(i){Q(i,"",t)}var a=n.documentElement,o=a.namespaceURI,u=se(a);if("parsererror"===u&&o===j){var s=ie(a,j,"sourcetext"),c=s?le(s):"";Q(ue(a)||"",c,t)}if("h3"===u&&o===M||ae(a,M,"h3")){for(var l="",f=[],d=a.firstChild;d;)1===d.nodeType&&(l+=ue(d)||""),f.push(d.nextSibling),d=d.firstChild||f.shift();l+=ue(a)||"",Q(l,"",t)}return n},$=function(e,t){return e?e+":"+t:t},K=function(e,t){if(F(t.data)){var n=Z(e,U,"space");n||(n=he(e.ownerDocument,U,$("xml","space")),ve(e,n)),n.value="preserve"}return e.appendChild(t),e},W=function(e,t){var n,r,i=e.attributes;for(n=0,r=i.length;r>n;n++)t(i.item(n))},Y=function(e,t,n){var r=Z(e,t,n);return r?le(r):null},Z=function(e,t,n){var r=e.attributes;return r.getNamedItemNS?r.getNamedItemNS(n||null,t):r.getQualifiedItem(t,n)||null},ee=function(e,t){var n=Z(e,"base",U);return(n?D(n.value,t):t)||null},te=function(e,t){fe(e,!1,function(e){return 1===e.nodeType&&t(e),!0})},ne=function(e,t,n){var r,i,a=n.split("/");for(r=0,i=a.length;i>r;r++)e=e&&ie(e,t,a[r]);return e||null},re=function(e,t,n){var r=n.lastIndexOf("/"),i=n.substring(r+1),a=n.substring(0,r),o=a?ne(e,t,a):e;return o?"@"===i.charAt(0)?Z(o,i.substring(1),t):ie(o,t,i):null},ie=function(e,t,n){return oe(e,t,n,!1)},ae=function(e,t,n){if(e.getElementsByTagNameNS){var r=e.getElementsByTagNameNS(t,n);return r.length>0?r[0]:null}return oe(e,t,n,!0)},oe=function(e,t,n,r){var i=null;return fe(e,r,function(e){if(1===e.nodeType){var r=!t||ce(e)===t,a=!n||se(e)===n;r&&a&&(i=e)}return null===i}),i},ue=function(e){var n,r=null,i=9===e.nodeType&&e.documentElement?e.documentElement:e,a=i.ownerDocument.preserveWhiteSpace===!1;return fe(i,!1,function(e){if(3===e.nodeType||4===e.nodeType){var o=le(e),u=a||!V(o);u||(n===t&&(n=q(i)),u=n),u&&(r?r+=o:r=o)}return!0}),r},se=function(e){return e.localName||e.baseName},ce=function(e){return e.namespaceURI||null},le=function(e){return 1===e.nodeType?ue(e):e.nodeValue},fe=function(e,t,n){for(var r=[],i=e.firstChild,a=!0;i&&a;)a=n(i),a&&(t&&i.firstChild&&r.push(i.firstChild),i=i.nextSibling||r.shift())},de=function(e,t,n){for(var r=e.nextSibling;r;){if(1===r.nodeType){var i=!t||ce(r)===t,a=!n||se(r)===n;if(i&&a)return r}r=r.nextSibling}return null},pe=function(){var t=e.document.implementation;return t&&t.createDocument?t.createDocument(null,null,null):z()},me=function(e,t){if(!f(t))return ve(e,t);var n,r;for(n=0,r=t.length;r>n;n++)t[n]&&ve(e,t[n]);return e},ve=function(e,t){if(t){if("string"==typeof t)return K(e,_e(e.ownerDocument,t));2===t.nodeType?e.setAttributeNodeNS?e.setAttributeNodeNS(t):e.setAttributeNode(t):e.appendChild(t)}return e},he=function(e,n,r,i){var a=e.createAttributeNS&&e.createAttributeNS(n,r)||e.createNode(2,r,n||t);return a.value=i||"",a},ye=function(e,n,r,i){var a=e.createElementNS&&e.createElementNS(n,r)||e.createNode(1,r,n||t);return me(a,i||[])},ge=function(e,t,n){return he(e,L,$("xmlns",n),t)},be=function(e,t){for(var n="<c>"+t+"</c>",r=X(n),i=r.documentElement,a=("importNode"in e?e.importNode(i,!0):i),o=e.createDocumentFragment(),u=a.firstChild;u;)o.appendChild(u),u=u.nextSibling;return o},_e=function(e,t){return e.createTextNode(t)},Te=function(e,t,n,r,i){var a,o,u="",s=i.split("/"),c=ie,l=ye,f=t;for(a=0,o=s.length;o>a;a++){u=s[a],"@"===u.charAt(0)&&(u=u.substring(1),c=Z,l=he);var d=c(f,n,u);d||(d=l(e,n,$(r,u)),ve(f,d)),f=d}return f},Se=function(t){var n=e.XMLSerializer;if(n){var r=new n;return r.serializeToString(t)}if(t.xml)return t.xml;throw{message:"XML serialization unsupported"}},xe=function(e){var t,n=e.childNodes,r=n.length;if(0===r)return"";var i=e.ownerDocument,a=i.createDocumentFragment(),o=i.createElement("c");for(a.appendChild(o),t=0;r>t;t++)o.appendChild(n[t]);var u=Se(a);for(u=u.substr(3,u.length-7),t=0;r>t;t++)e.appendChild(o.childNodes[t]);return u},Ce=function(e,t,n){return function(){return e[t].apply(e,arguments),n}},we=function(){this._arguments=t,this._done=t,this._fail=t,this._resolved=!1,this._rejected=!1};we.prototype={then:function(e,t){return e&&(this._done?this._done.push(e):this._done=[e]),t&&(this._fail?this._fail.push(t):this._fail=[t]),this._resolved?this.resolve.apply(this,this._arguments):this._rejected&&this.reject.apply(this,this._arguments),this},resolve:function(){if(this._done){var e,n;for(e=0,n=this._done.length;n>e;e++)this._done[e].apply(null,arguments);this._done=t,this._resolved=!1,this._arguments=t}else this._resolved=!0,this._arguments=arguments},reject:function(){if(this._fail){var e,n;for(e=0,n=this._fail.length;n>e;e++)this._fail[e].apply(null,arguments);this._fail=t,this._rejected=!1,this._arguments=t}else this._rejected=!0,this._arguments=arguments},promise:function(){var e={};return e.then=Ce(this,"then",e),e}};var De=function(){return e.jQuery&&e.jQuery.Deferred?new e.jQuery.Deferred:new we},ke=function(e,t){var n=(e&&e.__metadata||{}).type;return n||(t?t.type:null)},Oe="Edm.",Ee=Oe+"Binary",Ne=Oe+"Boolean",Ae=Oe+"Byte",Pe=Oe+"DateTime",Re=Oe+"DateTimeOffset",Ie=Oe+"Decimal",Me=Oe+"Double",Le=Oe+"Guid",Ue=Oe+"Int16",je=Oe+"Int32",Fe=Oe+"Int64",Ve=Oe+"SByte",qe=Oe+"Single",Be=Oe+"String",He=Oe+"Time",Je=Oe+"Geography",ze=Je+"Point",Ge=Je+"LineString",Qe=Je+"Polygon",Xe=Je+"Collection",$e=Je+"MultiPolygon",Ke=Je+"MultiLineString",We=Je+"MultiPoint",Ye=Oe+"Geometry",Ze=Ye+"Point",et=Ye+"LineString",tt=Ye+"Polygon",nt=Ye+"Collection",rt=Ye+"MultiPolygon",it=Ye+"MultiLineString",at=Ye+"MultiPoint",ot="Point",ut="LineString",st="Polygon",ct="MultiPoint",lt="MultiLineString",ft="MultiPolygon",dt="GeometryCollection",pt=[Be,je,Fe,Ne,Me,qe,Pe,Re,He,Ie,Le,Ae,Ue,Ve,Ee],mt=[Ye,Ze,et,tt,nt,rt,it,at],vt=[Je,ze,Ge,Qe,Xe,$e,Ke,We],ht=function(e,t){if(!e)return null;if(f(e)){var n,r,i;for(n=0,r=e.length;r>n;n++)if(i=ht(e[n],t))return i;return null}return e.dataServices?ht(e.dataServices.schema,t):t(e)},yt=function(e,t){return e=0===e?"":"."+_t(e.toString(),3),t>0&&(""===e&&(e=".000"),e+=_t(t.toString(),4)),e},gt=function(e){if("string"==typeof e)return e;var t=Et(e),n=Tt(e.__offset);if(t&&"Z"!==n){e=new Date(e.valueOf());var r=cn(n),i=e.getUTCHours()+r.d*r.h,a=e.getUTCMinutes()+r.d*r.m;e.setUTCHours(i,a)}else t||(n="");var o=e.getUTCFullYear(),u=e.getUTCMonth()+1,s="";0>=o&&(o=-(o-1),s="-");var c=yt(e.getUTCMilliseconds(),e.__ns);return s+_t(o,4)+"-"+_t(u,2)+"-"+_t(e.getUTCDate(),2)+"T"+_t(e.getUTCHours(),2)+":"+_t(e.getUTCMinutes(),2)+":"+_t(e.getUTCSeconds(),2)+c+n},bt=function(e){var t=e.ms,n="";0>t&&(n="-",t=-t);var r=Math.floor(t/864e5);t-=864e5*r;var i=Math.floor(t/36e5);t-=36e5*i;var a=Math.floor(t/6e4);t-=6e4*a;var o=Math.floor(t/1e3);return t-=1e3*o,n+"P"+_t(r,2)+"DT"+_t(i,2)+"H"+_t(a,2)+"M"+_t(o,2)+yt(t,e.ns)+"S"},_t=function(e,t,n){for(var r=e.toString(10);r.length<t;)n?r+="0":r="0"+r;return r},Tt=function(e){return e&&"Z"!==e&&"+00:00"!==e&&"-00:00"!==e?e:"Z"},St=function(e){if("string"==typeof e){var t=e.indexOf(")",10);if(0===e.indexOf("Collection(")&&t>0)return e.substring(11,t)}return null},xt=function(e,n,r,i,a,o){return a.request(e,function(a){try{a.headers&&en(a.headers),a.data===t&&204!==a.statusCode&&i.read(a,o)}catch(u){return u.request===t&&(u.request=e),u.response===t&&(u.response=a),void r(u)}n(a.data,a)},r)},Ct=function(e){return Ot(e)&&f(e.__batchRequests)},wt=/Collection\((.*)\)/,Dt=function(e,t){var n=e&&e.results||e;return!!n&&kt(t)||!t&&f(n)&&!Ot(n[0])},kt=function(e){return wt.test(e)},Ot=function(e){return!!e&&p(e)&&!f(e)&&!d(e)},Et=function(e){return"Edm.DateTimeOffset"===e.__edmType||!e.__edmType&&e.__offset},Nt=function(e){if(!e&&!Ot(e))return!1;var t=e.__metadata||{},n=e.__deferred||{};return!t.type&&!!n.uri},At=function(e){return Ot(e)&&e.__metadata&&"uri"in e.__metadata},Pt=function(e,t){var n=e&&e.results||e;return f(n)&&!kt(t)&&Ot(n[0])},Rt=function(e){return o(vt,e)},It=function(e){return o(mt,e)},Mt=function(e){if(!e&&!Ot(e))return!1;var t=e.__metadata,n=e.__mediaresource;return!t&&!!n&&!!n.media_src},Lt=function(e){return d(e)||"string"==typeof e||"number"==typeof e||"boolean"==typeof e},Ut=function(e){return o(pt,e)},jt=function(e,n){return Nt(e)?"deferred":At(e)?"entry":Pt(e)?"feed":n&&n.relationship?null!==e&&e!==t&&Pt(e)?"feed":"entry":null},Ft=function(e,t){return l(e,function(e){return e.name===t})},Vt=function(e,t,n){return e?ht(t,function(t){return Wt(e,t,n)}):null},qt=function(e,t){return l(e,function(e){return e.name===t})},Bt=function(e,t){return Vt(e,t,"complexType")},Ht=function(e,t){return Vt(e,t,"entityType")},Jt=function(e){return ht(e,function(e){return l(e.entityContainer,function(e){return tn(e.isDefaultEntityContainer)})})},zt=function(e,t){return Vt(e,t,"entityContainer")},Gt=function(e,t){return l(e,function(e){return e.name===t})},Qt=function(e,t){var n=null;if(e){var r=e.relationship,i=ht(t,function(e){var t=Kt(e.namespace,r),n=e.association;if(t&&n){var i,a;for(i=0,a=n.length;a>i;i++)if(n[i].name===t)return n[i]}return null});if(i){var a=i.end[0];a.role!==e.toRole&&(a=i.end[1]),n=a.type}}return n},Xt=function(e,t,n){if(e){var r=e.relationship,i=ht(n,function(e){for(var t=e.entityContainer,n=0;n<t.length;n++){var i=t[n].associationSet;if(i)for(var a=0;a<i.length;a++)if(i[a].association==r)return i[a]}return null});if(i&&i.end[0]&&i.end[1])return i.end[0].entitySet==t?i.end[1].entitySet:i.end[0].entitySet}return null},$t=function(e,t){var n=ht(t,function(t){for(var n=t.entityContainer,r=0;r<n.length;r++){var i=n[r].entitySet;if(i)for(var a=0;a<i.length;a++)if(i[a].name==e)return{entitySet:i[a],containerName:n[r].name,functionImport:n[r].functionImport}}return null});return n},Kt=function(e,t){return 0===t.indexOf(e)&&"."===t.charAt(e.length)?t.substr(e.length+1):null},Wt=function(e,t,n){if(e&&t){var r=Kt(t.namespace,e);if(r)return l(t[n],function(e){return e.name===r})}return null},Yt=function(e,t){if(e===t)return e;for(var n=e.split("."),r=t.split("."),i=n.length>=r.length?n.length:r.length,a=0;i>a;a++){var o=n[a]&&m(n[a]),u=r[a]&&m(r[a]);if(o>u)return e;if(u>o)return t}},Zt={accept:"Accept","content-type":"Content-Type",dataserviceversion:"DataServiceVersion",maxdataserviceversion:"MaxDataServiceVersion"},en=function(e){for(var t in e){var n=t.toLowerCase(),r=Zt[n];if(r&&t!==r){var i=e[t];delete e[t],e[r]=i}}},tn=function(e){return"boolean"==typeof e?e:"string"==typeof e&&"true"===e.toLowerCase()},nn=/^(-?\d{4,})-(\d{2})-(\d{2})T(\d{2}):(\d{2})(?::(\d{2}))?(?:\.(\d+))?(.*)$/,rn=function(e,t,n){var r=nn.exec(e),i=r?Tt(r[8]):null;if(!r||!t&&"Z"!==i){if(n)return null;throw{message:"Invalid date/time value"}}var a=m(r[1]);0>=a&&a++;var o=r[7],u=0;if(o){if(o.length>7){if(n)return null;throw{message:"Cannot parse date/time value to given precision."}}u=_t(o.substring(3),4,!0),o=_t(o.substring(0,3),3,!0),o=m(o),u=m(u)}else o=0;var s=m(r[4]),c=m(r[5]),l=m(r[6])||0;if("Z"!==i){var f=cn(i),d=-f.d;s+=f.h*d,c+=f.m*d}var p=new Date;if(p.setUTCFullYear(a,m(r[2])-1,m(r[3])),p.setUTCHours(s,c,l,o),isNaN(p.valueOf())){if(n)return null;throw{message:"Invalid date/time value"}}return t&&(p.__edmType="Edm.DateTimeOffset",p.__offset=i),u&&(p.__ns=u),p},an=function(e,t){return rn(e,!1,t)},on=function(e,t){return rn(e,!0,t)},un=/^([+-])?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)(?:\.(\d+))?S)?)?/,sn=function(e){var t=un.exec(e);if(null===t)throw{message:"Invalid duration value."};var n=t[2]||"0",r=t[3]||"0",i=m(t[4]||0),a=m(t[5]||0),o=m(t[6]||0),u=parseFloat(t[7]||0);if("0"!==n||"0"!==r)throw{message:"Unsupported duration value."};var s=t[8],c=0;if(s){if(s.length>7)throw{message:"Cannot parse duration value to given precision."};c=_t(s.substring(3),4,!0),s=_t(s.substring(0,3),3,!0),s=m(s),c=m(c)}else s=0;s+=1e3*u+6e4*o+36e5*a+864e5*i,"-"===t[1]&&(s=-s);var l={ms:s,__edmType:"Edm.Time"};return c&&(l.ns=c),l},cn=function(e){var t=e.substring(0,1);t="+"===t?1:-1;var n=m(e.substring(1)),r=m(e.substring(e.indexOf(":")+1));return{d:t,h:n,m:r}},ln=function(e,n,r){e.method||(e.method="GET"),e.headers?en(e.headers):e.headers={},e.headers.Accept===t&&(e.headers.Accept=n.accept),a(e.data)&&e.body===t&&n.write(e,r),a(e.headers.MaxDataServiceVersion)||(e.headers.MaxDataServiceVersion=n.maxDataServiceVersion||"1.0")},fn=function(e,n,r){if(e&&"object"==typeof e)for(var i in e){var a=e[i],o=fn(a,i,r);o=r(i,o,n),o!==a&&(a===t?delete e[i]:e[i]=o)}return e},dn=function(e,t){return t("",fn(e,"",t))},pn=0,mn=function(e){return e.method&&"GET"!==e.method?!1:!0},vn=function(t){var n=e.document.createElement("IFRAME");n.style.display="none";var r=t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/\</g,"&lt;"),i='<html><head><script type="text/javascript" src="'+r+'"></script></head><body></body></html>',a=e.document.getElementsByTagName("BODY")[0];return a.appendChild(n),Sn(n,i),n},hn=function(){if(e.XMLHttpRequest)return new e.XMLHttpRequest;var t;if(e.ActiveXObject)try{return new e.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(n){try{return new e.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(r){t=r}}else t={message:"XMLHttpRequest not supported"};throw t},yn=function(e){return 0===e.indexOf("http://")||0===e.indexOf("https://")||0===e.indexOf("file://")},gn=function(t){if(!yn(t))return!0;var n=e.location,r=n.protocol+"//"+n.host+"/";return 0===t.indexOf(r)},bn=function(n,r){try{delete e[n]}catch(i){e[n]=t,r===pn-1&&(pn-=1)}},_n=function(e){return null},Tn=function(e,t){var n,r,i=e.getAllResponseHeaders().split(/\r?\n/);for(n=0,r=i.length;r>n;n++)if(i[n]){var a=i[n].split(": ");t[a[0]]=a[1]}},Sn=function(e,t){var n=e.contentWindow?e.contentWindow.document:e.contentDocument.document;n.open(),n.write(t),n.close()};r.defaultHttpClient={callbackParameterName:"$callback",formatQueryString:"$format=json",enableJsonpCallback:!1,request:function(n,r,i){var a,o={},c=null,l=!1;o.abort=function(){a=_n(a),l||(l=!0,c&&(c.abort(),c=null),i({message:"Request aborted"}))};var f,d=function(){a=_n(a),l||(l=!0,c=null,i({message:"Request timed out"}))},p=n.requestUri,m=u(n.enableJsonpCallback,this.enableJsonpCallback),v=u(n.callbackParameterName,this.callbackParameterName),h=u(n.formatQueryString,this.formatQueryString);if(!m||gn(p)){if(c=hn(),c.onreadystatechange=function(){if(!l&&null!==c&&4===c.readyState){var e=c.statusText,t=c.status;1223===t&&(t=204,e="No Content");var a=[];Tn(c,a);var o={requestUri:p,statusCode:t,statusText:e,headers:a,body:c.responseText};l=!0,c=null,t>=200&&299>=t?r(o):i({message:"HTTP request failed",request:n,response:o})}},c.open(n.method||"GET",p,!0,n.user,n.password),n.headers)for(f in n.headers)c.setRequestHeader(f,n.headers[f]);n.timeoutMS&&(c.timeout=n.timeoutMS,c.ontimeout=d),c.send(n.body)}else{if(!mn(n))throw{message:"Request is not local and cannot be done through JSONP."};var y=pn;pn+=1;var g,b=y.toString(),_=!1;f="handleJSONP_"+b,e[f]=function(n){if(a=_n(a),!l){_=!0,e.clearTimeout(g),bn(f,y),e.ActiveXObject&&(n=e.JSON.parse(e.JSON.stringify(n)));var i;i=n.d===t?{"Content-Type":"application/json;odata=minimalmetadata",dataServiceVersion:"3.0"}:{"Content-Type":"application/json"},s(function(){_n(a),r({body:n,statusCode:200,headers:i})})}};var T=n.timeoutMS?n.timeoutMS:12e4;g=e.setTimeout(d,T);var S=v+"=parent."+f;this.formatQueryString&&(S+="&"+h);var x=p.indexOf("?");-1===x?p=p+"?"+S:x===p.length-1?p+=S:p=p+"&"+S,a=vn(p)}return o}};var xn="3.0",Cn=function(e){if(!e)return null;var t,n,r=e.split(";"),i={};for(t=1,n=r.length;n>t;t++){var a=r[t].split("=");i[y(a[0])]=a[1]}return{mediaType:y(r[0]),properties:i}},wn=function(e){if(!e)return t;var n,r=e.mediaType;for(n in e.properties)r+=";"+n+"="+e.properties[n];return r},Dn=function(e,t,n,r){var i={};return c(i,n),c(i,{contentType:e,dataServiceVersion:t,handler:r}),i},kn=function(e,t,n){if(e){var r=e.headers;r[t]||(r[t]=n)}},On=function(e,t){if(e){var n=e.headers,r=n.DataServiceVersion;n.DataServiceVersion=r?Yt(r,t):t}},En=function(e,n){var r=e.headers;return r&&r[n]||t},Nn=function(e){return Cn(En(e,"Content-Type"))},An=/^\s?(\d+\.\d+);?.*$/,Pn=function(e){var t=En(e,"DataServiceVersion");if(t){var n=An.exec(t);if(n&&n.length)return n[1]}},Rn=function(e,t){return e.accept.indexOf(t.mediaType)>=0},In=function(e,n,r,i){if(!r||!r.headers)return!1;var o=Nn(r),u=Pn(r)||"",s=r.body;if(!a(s))return!1;if(Rn(e,o)){var c=Dn(o,u,i,e);return c.response=r,r.data=n(e,s,c),r.data!==t}return!1},Mn=function(e,n,r,i){if(!r||!r.headers)return!1;var a=Nn(r),o=Pn(r);if(!a||Rn(e,a)){var u=Dn(a,o,i,e);if(u.request=r,r.body=n(e,r.data,u),r.body!==t)return On(r,u.dataServiceVersion||"1.0"),kn(r,"Content-Type",wn(u.contentType)),kn(r,"MaxDataServiceVersion",e.maxDataServiceVersion),!0}return!1},Ln=function(e,t,n,r){return{accept:n,maxDataServiceVersion:r,read:function(t,n){return In(this,e,t,n)},write:function(e,n){return Mn(this,t,e,n)}}},Un=function(e,t){return t},jn=function(e,n){return a(n)?n.toString():t};r.textHandler=Ln(Un,jn,"text/plain",xn);var Fn=R+"www.opengis.net",Vn=Fn+"/gml",qn=Fn+"/def/crs/EPSG/0/",Bn="gml",Hn=function(e,t,n){var r={type:e};return r[t]=n,r},Jn=function(e){if(f(e)&&e.length>=2){var t=e[0];e[0]=e[1],e[1]=t}return e},zn=function(e,t,n,r,i,a){var o=Gn(e,n,r,i,a);return Hn(t,"coordinates",o)},Gn=function(e,t,n,r,i){var a=[];return te(e,function(e){if(ce(e)===Vn){var o=se(e);if(o!==t)o===n&&te(e,function(e){if(ce(e)===Vn){var t=r(e,i);t&&a.push(t)}});else{var u=ie(e,Vn);if(u){var s=r(u,i);s&&a.push(s)}}}}),a},Qn=function(e,t){var n=Gn(e,"geometryMember","geometryMembers",ur,t);return Hn(dt,"geometries",n)},Xn=function(e,t){return Hn(ut,"coordinates",er(e,t))},$n=function(e,t){return zn(e,lt,"curveMember","curveMembers",er,t)},Kn=function(e,t){return zn(e,ct,"pointMember","pointMembers",tr,t)},Wn=function(e,t){return zn(e,ft,"surfaceMember","surfaceMembers",rr,t)},Yn=function(e,t){return Hn(ot,"coordinates",tr(e,t))},Zn=function(e,t){return Hn(st,"coordinates",rr(e,t))},er=function(e,t){var n=[];return te(e,function(e){var r=ce(e);if(r===Vn){var i=se(e);return"posList"===i?void(n=ar(e,t)):"pointProperty"===i?void n.push(nr(e,t)):"pos"===i?void n.push(or(e,t)):void 0}}),n},tr=function(e,t){var n=ie(e,Vn,"pos");return n?or(n,t):[]},nr=function(e,t){var n=ie(e,Vn,"Point");return n?tr(n,t):[]},rr=function(e,t){var n=[],r=!1;return te(e,function(e){if(ce(e)===Vn){var i=se(e);return"exterior"===i?(r=!0,void n.unshift(ir(e,t))):"interior"===i?void n.push(ir(e,t)):void 0}}),!r&&n.length>0&&n.unshift([[]]),n},ir=function(e,t){var n=[];return te(e,function(e){ce(e)===Vn&&"LinearRing"===se(e)&&(n=er(e,t))}),n},ar=function(e,t){var n=or(e,!1),r=n.length;if(r%2!==0)throw{message:"GML posList element has an uneven number of numeric values"};for(var i=[],a=0;r>a;a+=2){var o=n.slice(a,a+2);i.push(t?Jn(o):o)}return i},or=function(e,t){var n=[],r=" 	\r\n",i=ue(e);if(i)for(var a=i.length,o=0,u=0;a>=u;){if(-1!==r.indexOf(i.charAt(u))){var s=i.substring(o,u);s&&n.push(parseFloat(s)),o=u+1}u++}return t?Jn(n):n},ur=function(e,t){var n,r=se(e);switch(r){case"Point":n=Yn;break;case"Polygon":n=Zn;break;case"LineString":n=Xn;break;case"MultiPoint":n=Kn;break;case"MultiCurve":n=$n;break;case"MultiSurface":n=Wn;break;case"MultiGeometry":n=Qn;break;default:throw{message:"Unsupported element: "+r,element:e}}var i=n(e,t),a=Y(e,"srsName",Vn)||Y(e,"srsName");if(a){if(0!==a.indexOf(qn))throw{message:"Unsupported srs name: "+a,element:e};var o=a.substring(qn.length);o&&(i.crs={type:"name",properties:{name:"EPSG:"+o}})}return i},sr=function(e,t,n,r){var i;switch(n){case ot:i=hr;break;case ut:i=yr;break;case st:i=gr;break;case ct:i=_r;break;case lt:i=Tr;break;case ft:i=Sr;break;case dt:i=Cr;break;default:return null}var a=i(e,t,r),o=t.crs;if(o&&"name"===o.type){var u=o.properties,s=u&&u.name;if(s&&0===s.indexOf("ESPG:")&&s.length>5){var c=s.substring(5),l=he(e,null,"srsName",Bn+c);ve(a,l)}}return a},cr=function(e,t,n){return ye(e,Vn,$(Bn,t),n)},lr=function(e,t,n){var r=f(t)?t:[];return r=n?Jn(r):r,cr(e,"pos",r.join(" "))},fr=function(e,t,n,r){var i=cr(e,t);if(f(n)){var a,o;for(a=0,o=n.length;o>a;a++)ve(i,lr(e,n[a],r));0===o&&ve(i,cr(e,"posList"))}return i},dr=function(e,t,n){return cr(e,"Point",lr(e,t,n))},pr=function(e,t,n){return fr(e,"LineString",t,n)},mr=function(e,t,n,r){var i=cr(e,t);if(f(n)&&n.length>0){var a=fr(e,"LinearRing",n,r);ve(i,a)}return i},vr=function(e,t,n){var r=t&&t.length,i=cr(e,"Polygon");if(f(t)&&r>0){ve(i,mr(e,"exterior",t[0],n));var a;for(a=1;r>a;a++)ve(i,mr(e,"interior",t[a],n))}return i},hr=function(e,t,n){return dr(e,t.coordinates,n)},yr=function(e,t,n){return pr(e,t.coordinates,n)},gr=function(e,t,n){return vr(e,t.coordinates,n)},br=function(e,t,n,r,i,a){var o=r&&r.length,u=cr(e,t);if(f(r)&&o>0){var s,c=cr(e,n);for(s=0;o>s;s++)ve(c,i(e,r[s],a));ve(u,c)}return u},_r=function(e,t,n){return br(e,"MultiPoint","pointMembers",t.coordinates,dr,n)},Tr=function(e,t,n){return br(e,"MultiCurve","curveMembers",t.coordinates,pr,n)},Sr=function(e,t,n){return br(e,"MultiSurface","surfaceMembers",t.coordinates,vr,n)},xr=function(e,t,n){return sr(e,t,t.type,n)},Cr=function(e,t,n){return br(e,"MultiGeometry","geometryMembers",t.geometries,xr,n)},wr="application/xml",Dr=R+"schemas.microsoft.com/ado/",kr=Dr+"2007/08/dataservices",Or=Dr+"2007/06/edmx",Er=Dr+"2006/04/edm",Nr=Dr+"2007/05/edm",Ar=Dr+"2008/01/edm",Pr=Dr+"2008/09/edm",Rr=Dr+"2009/08/edm",Ir=Dr+"2009/11/edm",Mr=kr,Lr=kr+"/metadata",Ur=kr+"/related/",jr=kr+"/scheme",Fr="d",Vr="m",qr=function(e,t){var n={name:se(e),value:e.value};return n[t?"namespaceURI":"namespace"]=ce(e),n},Br=function(e,t){var n,r,i=[],a=[],o=e.attributes;for(n=0,r=o.length;r>n;n++){var u=o[n];ce(u)!==L&&i.push(qr(u,t))}for(var s=e.firstChild;null!=s;)1===s.nodeType&&a.push(Br(s,t)),s=s.nextSibling;var c={name:se(e),value:ue(e),attributes:i,children:a};return c[t?"namespaceURI":"namespace"]=ce(e),c},Hr=function(e){return ce(e)===Mr&&"element"===se(e)},Jr=function(e,t){return{type:e,extensions:t}},zr=function(e){if(ie(e,Vn))return Ye;var t=ie(e,Mr);if(!t)return Be;if(Hr(t)){var n=de(t,Mr);if(n&&Hr(n))return"Collection()"}return null},Gr=function(e){var t=null,n=!1,r=[];return W(e,function(e){var i=ce(e),a=se(e),o=le(e);if(i===Lr){if("null"===a)return void(n="true"===o.toLowerCase());if("type"===a)return void(t=o)}return i!==U&&i!==L?void r.push(qr(e,!0)):void 0}),{type:!t&&n?Be:t,isNull:n,extensions:r}},Qr=function(e){if(ce(e)!==Mr)return null;var t=se(e),n=Gr(e),r=n.isNull,i=n.type,a=Jr(i,n.extensions),o=r?null:Xr(e,i,a);return{name:t,value:o,metadata:a}},Xr=function(e,t,n){t||(t=zr(e),n.type=t);var r=Rt(t);return r||It(t)?$r(e,t,r):Ut(t)?Kr(e,t):kt(t)?Yr(e,t,n):Wr(e,t,n)},$r=function(e,t,n){var r=ie(e,Vn),i=ur(r,n);return i.__metadata={type:t},i},Kr=function(e,t){var n=le(e)||"";switch(t){case Ne:return tn(n);case Ee:case Ie:case Le:case Fe:case Be:return n;case Ae:case Ue:case je:case Ve:return m(n);case Me:case qe:return parseFloat(n);case He:return sn(n);case Pe:return an(n);case Re:return on(n)}return n},Wr=function(e,t,n){var r={__metadata:{type:t}};return te(e,function(e){var t=Qr(e),i=t.name;n.properties=n.properties||{},n.properties[i]=t.metadata,r[i]=t.value}),r},Yr=function(e,t,n){var r=[],i=n.elements=[],a=St(t);return te(e,function(e){if(Hr(e)){var t=Gr(e),n=t.extensions,o=t.type||a,u=Jr(o,n),s=Xr(e,o,u);r.push(s),i.push(u)}}),{__metadata:{type:"Collection()"===t?null:t},results:r}},Zr=function(e,n){if(ce(e)===Mr){n=ee(e,n);var r=se(e);if("links"===r)return ei(e,n);if("uri"===r)return ti(e,n)}return t},ei=function(e,t){var n=[];return te(e,function(e){"uri"===se(e)&&ce(e)===Mr&&n.push(ti(e,t))}),{results:n}},ti=function(e,t){var n=ue(e)||"";return{uri:D(n,t)}},ni=function(e,t){return t===Ye||t===Je?e&&e.type:t===Ze||t===ze?ot:t===et||t===Ge?ut:t===tt||t===Qe?st:t===nt||t===Xe?dt:t===rt||t===$e?ft:t===it||t===Ke?lt:t===at||t===We?ct:null},ri=function(e,t,n){return ye(e,Lr,$(Vr,t),n)},ii=function(e,t,n){return he(e,Lr,$(Vr,t),n)},ai=function(e,t,n){return ye(e,Mr,$(Fr,t),n)},oi=function(e,t){return t===Pe||t===Re||d(e)?gt(e):t===He?bt(e):e.toString()},ui=function(e,t){return{element:e,dsv:t}},si=function(e,t,n,r){var i=n?ii(e,"type",n):null,a=ai(e,t,i);return me(a,r)},ci=function(e,t,n,r){var i=oi(n,r),a=si(e,t,r,i);return ui(a,"1.0")},li=function(e,t,n,r){var i=ii(e,"null","true"),a=si(e,t,n,i),o=Bt(n,r)?"2.0":"1.0";return ui(a,o)},fi=function(e,t,n,r,i,a,o){var u=St(r),s=f(n)?n:n.results,c=r?{type:u}:{};c.properties=i.properties;var l,d,p=si(e,t,u?r:null);for(l=0,d=s.length;d>l;l++){var m=s[l],v=mi(e,"element",m,c,a,o);ve(p,v.element)}return ui(p,"3.0")},di=function(e,t,n,r,i,a,o){var u=si(e,t,r),s=i.properties||{},c=Bt(r,o)||{},l="1.0";for(var f in n)if("__metadata"!==f){var d=n[f],p=Ft(c.property,f),m=s[f]||{},v=mi(e,f,d,m,p,o);l=Yt(l,v.dsv),ve(u,v.element)}return ui(u,l)},pi=function(e,t,n,r,i){var a=ni(n,r),o=sr(e,n,a,i),u=si(e,t,r,o);return ui(u,"3.0")},mi=function(e,t,n,r,i,a){var o=ke(n,r,i);if(Lt(n))return ci(e,t,n,o||Be);var u=Rt(o);if(u||It(o))return pi(e,t,n,o,u);if(Dt(n,o))return fi(e,t,n,o,r,i,a);if(Mt(n))return null;var s=jt(n,i);return null!==s?null:null===n?li(e,t,o):di(e,t,n,o,r,i,a)},vi=function(e){if(e&&p(e)){var t=pe();return ve(t,ai(t,"uri",e.uri))}},hi=function(e,t){if(t){var n=X(t),r=ie(n);if(r)return Zr(r)}},yi=function(e,n,r){var i=r.contentType=r.contentType||Cn(wr);return i&&i.mediaType===wr?Se(vi(n)):t};r.xmlHandler=Ln(hi,yi,wr,xn);var gi="a",bi=I+"2005/Atom",_i=I+"2007/app",Ti=kr+"/edit-media/",Si=kr+"/mediaresource/",xi=kr+"/relatedlinks/",Ci=["application/atom+xml","application/atomsvc+xml","application/xml"],wi=Ci[0],Di=[bi,_i,U,L],ki={SyndicationAuthorEmail:"author/email",SyndicationAuthorName:"author/name",SyndicationAuthorUri:"author/uri",SyndicationContributorEmail:"contributor/email",SyndicationContributorName:"contributor/name",SyndicationContributorUri:"contributor/uri",SyndicationPublished:"published",SyndicationRights:"rights",SyndicationSummary:"summary",SyndicationTitle:"title",SyndicationUpdated:"updated"},Oi=function(e){return ki[e]||e},Ei=function(e){return!o(Di,e)},Ni=function(e,t,n,r,i){i=i||"";var a=e["FC_TargetPath"+i];if(!a)return null;var o=e["FC_SourcePath"+i],u=Oi(a),s=r?r+(o?"/"+o:""):o,c=s&&Ji(n,t,s),l=e["FC_NsUri"+i]||null,f=e["FC_NsPrefix"+i]||null,d=e["FC_KeepInContent"+i]||"";return a!==u&&(l=bi,f=gi),{contentKind:e["FC_ContentKind"+i],keepInContent:"true"===d.toLowerCase(),nsPrefix:f,nsURI:l,propertyPath:s,propertyType:c,entryPath:u}},Ai=function(e,t,n){for(var r=[];e;){var i=(e.FC_SourcePath,Ni(e,e,t));i&&n(i);var a,o,u=e.property||[];for(a=0,o=u.length;o>a;a++)for(var s=u[a],c=0,l="";i=Ni(s,e,t,s.name,l);)n(i),c++,l="_"+c;e=Ht(e.baseType,t)}return r},Pi=function(e){var t=[];return W(e,function(e){var n=ce(e);Ei(n)&&t.push(qr(e,!0))}),t},Ri=function(e){return Br(e,!0)},Ii=function(e,t,n){var r=ce(e),i=se(e);if(r===_i&&"service"===i)return ra(e,t);if(r===bi){if("feed"===i)return ji(e,t,n);if("entry"===i)return zi(e,t,n)}},Mi=function(e,t){var n=[],r={extensions:n};return W(e,function(i){var a=se(i),o=ce(i),u=le(i);if(null===o){if("title"===a||"metadata"===a)return void(r[a]=u);if("target"===a)return void(r.target=D(u,ee(e,t)))}Ei(o)&&n.push(qr(i,!0))}),r},Li=function(e,t,n){var r=n.actions=n.actions||[];r.push(Mi(e,t))},Ui=function(e,t,n){var r=n.functions=n.functions||[];r.push(Mi(e,t))},ji=function(e,t,n){var r=Pi(e),i={feed_extensions:r},a=[],o={__metadata:i,results:a};return t=ee(e,t),te(e,function(e){var u=ce(e),s=se(e);if(u===Lr){if("count"===s)return void(o.__count=parseInt(ue(e),10));if("action"===s)return void Li(e,t,i);if("function"===s)return void Ui(e,t,i)}return Ei(u)?void r.push(Br(e)):"entry"===s?void a.push(zi(e,t,n)):"link"===s?void Fi(e,o,t):"id"===s?(i.uri=D(ue(e),t),void(i.uri_extensions=Pi(e))):"title"===s?(i.title=ue(e)||"",void(i.title_extensions=Pi(e))):void 0}),o},Fi=function(e,t,n){var r=Vi(e,n),i=r.href,a=r.rel,o=r.extensions,u=t.__metadata;
return"next"===a?(t.__next=i,void(u.next_extensions=o)):"self"===a?(u.self=i,void(u.self_extensions=o)):void 0},Vi=function(e,t){t=ee(e,t);var n=[],r={extensions:n,baseURI:t};if(W(e,function(e){var i=ce(e),a=se(e),o=e.value;return"href"===a?void(r.href=D(o,t)):"type"===a||"rel"===a?void(r[a]=o):void(Ei(i)&&n.push(qr(e,!0)))}),!r.href)throw{error:"href attribute missing on link element",element:e};return r},qi=function(e,n){if(-1===e.indexOf("/"))return n[e];var r,i,a=e.split("/");for(r=0,i=a.length;i>r;r++){if(null===n)return t;if(n=n[a[r]],n===t)return n}return n},Bi=function(e,n,r,i){var a;if(-1===e.indexOf("/"))n[e]=r,a=e;else{var o,u,s=e.split("/");for(o=0,u=s.length-1;u>o;o++){var c=n[s[o]];if(c===t)c={},n[s[o]]=c;else if(null===c)return;n=c}a=s[o],n[a]=r}if(i){var l=n.__metadata=n.__metadata||{},f=l.properties=l.properties||{},d=f[a]=f[a]||{};d.type=i}},Hi=function(e,t,n){var r=e.propertyPath;if(!e.keepInContent&&null!==qi(r,n)){var i=re(t,e.nsURI,e.entryPath);if(i){var a,o=e.propertyType;a="xhtml"===e.contentKind?xe(i):Kr(i,o||"Edm.String"),Bi(r,n,a,o)}}},Ji=function(e,t,n){for(var r,i,a=n.split("/");t;){var o=t;for(r=0,i=a.length;i>r;r++){var u=o.property;if(!u)break;var s=Ft(u,a[r]);if(!s)break;var c=s.type;if(!c||Ut(c))return c||null;if(o=Bt(c,e),!o)return null}t=Ht(t.baseType,e)}return null},zi=function(e,t,n){var r={},i={__metadata:r},a=Y(e,"etag",Lr);a&&(r.etag=a),t=ee(e,t),te(e,function(e){var a=ce(e),o=se(e);if(a!==bi){if(a===Lr){if("properties"===o)return void na(e,i,r);if("action"===o)return void Li(e,t,r);if("function"===o)return void Ui(e,t,r)}}else{if("id"===o)return void Gi(e,r,t);if("category"===o)return void Qi(e,r);if("content"===o)return void Xi(e,i,r,t);if("link"===o)return void $i(e,i,r,t,n)}});var o=Ht(r.type,n);return Ai(o,n,function(t){Hi(t,e,i)}),i},Gi=function(e,t,n){t.uri=D(ue(e),ee(e,n)),t.uri_extensions=Pi(e)},Qi=function(e,t){if(Y(e,"scheme")===jr){if(t.type)throw{message:"Invalid AtomPub document: multiple category elements defining the entry type were encounterd withing an entry",element:e};var n=[];W(e,function(e){var t=ce(e),r=se(e);return t?void(Ei(t)&&n.push(qr(e,!0))):void("scheme"!==r&&"term"!==r&&n.push(qr(e,!0)))}),t.type=Y(e,"term"),t.type_extensions=n}},Xi=function(e,t,n,r){var i=Y(e,"src"),a=Y(e,"type");if(i){if(!a)throw{message:"Invalid AtomPub document: content element must specify the type attribute if the src attribute is also specified",element:e};n.media_src=D(i,ee(e,r)),n.content_type=a}te(e,function(r){if(i)throw{message:"Invalid AtomPub document: content element must not have child elements if the src attribute is specified",element:e};ce(r)===Lr&&"properties"===se(r)&&na(r,t,n)})},$i=function(e,t,n,r,i){var a=Vi(e,r),o=a.rel,u=a.href,s=a.extensions;return"self"===o?(n.self=u,void(n.self_link_extensions=s)):"edit"===o?(n.edit=u,void(n.edit_link_extensions=s)):"edit-media"===o?(n.edit_media=a.href,n.edit_media_extensions=s,void ta(a,n)):0===o.indexOf(Ti)?void Yi(a,t,n):0===o.indexOf(Si)?void Zi(a,t,n):0===o.indexOf(Ur)?void Wi(e,a,t,n,i):0===o.indexOf(xi)?void Ki(a,n):void 0},Ki=function(e,t){var n=e.rel.substring(xi.length);t.properties=t.properties||{};var r=t.properties[n]=t.properties[n]||{};r.associationuri=e.href,r.associationuri_extensions=e.extensions},Wi=function(e,t,n,r,i){var a,o=ie(e,Lr,"inline");if(o){var u=ie(o),s=ee(o,t.baseURI);a=u?Ii(u,s,i):null}else a={__deferred:{uri:t.href}};var c=t.rel.substring(Ur.length);n[c]=a,r.properties=r.properties||{};var l=r.properties[c]=r.properties[c]||{};l.extensions=t.extensions},Yi=function(e,t,n){var r=e.rel.substring(Ti.length),i=ea(r,t,n),a=i.value,o=i.metadata,u=e.href;a.edit_media=u,a.content_type=e.type,o.edit_media_extensions=e.extensions,a.media_src=a.media_src||u,o.media_src_extensions=o.media_src_extensions||[],ta(e,a)},Zi=function(e,t,n){var r=e.rel.substring(Si.length),i=ea(r,t,n),a=i.value,o=i.metadata;a.media_src=e.href,o.media_src_extensions=e.extensions,a.content_type=e.type},ea=function(e,t,n){n.properties=n.properties||{};var r=n.properties[e],i=t[e]&&t[e].__mediaresource;return i||(i={},t[e]={__mediaresource:i},n.properties[e]=r={}),{value:i,metadata:r}},ta=function(e,t){var n,r,i=e.extensions;for(n=0,r=i.length;r>n;n++)if(i[n].namespaceURI===Lr&&"etag"===i[n].name)return t.media_etag=i[n].value,void i.splice(n,1)},na=function(e,t,n){te(e,function(e){var r=Qr(e);if(r){var i=r.name,a=n.properties=n.properties||{};a[i]=r.metadata,t[i]=r.value}})},ra=function(e,t){var n=[],r=[];if(t=ee(e,t),te(e,function(e){return ce(e)===_i&&"workspace"===se(e)?void n.push(ia(e,t)):void r.push(Br(e))}),0===n.length)throw{message:"Invalid AtomPub service document: No workspace element found.",element:e};return{workspaces:n,extensions:r}},ia=function(e,n){var r,i=[],a=[];return n=ee(e,n),te(e,function(e){var o=ce(e),u=se(e);if(o===bi&&"title"===u){if(r!==t)throw{message:"Invalid AtomPub service document: workspace has more than one child title element",element:e};return void(r=ue(e))}return o===_i?void("collection"===u&&i.push(aa(e,n))):void a.push(Ri(e))}),{title:r||"",collections:i,extensions:a}},aa=function(e,n){var r=Y(e,"href");if(!r)throw{message:"Invalid AtomPub service document: collection has no href attribute",element:e};n=ee(e,n),r=D(r,ee(e,n));var i,a=[];if(te(e,function(n){var r=ce(n),o=se(n);if(r!==bi)r!==_i&&a.push(Ri(e));else if("title"===o){if(i!==t)throw{message:"Invalid AtomPub service document: collection has more than one child title element",element:n};i=ue(n)}}),!i)throw{message:"Invalid AtomPub service document: collection has no title element",element:e};return{title:i,href:r,extensions:a}},oa=function(e,t,n){return ye(e,bi,$(gi,t),n)},ua=function(e,t,n){return he(e,null,t,n)},sa=function(e){if(e.childNodes.length>0)return!1;var t,n,r=!0,i=e.attributes;for(t=0,n=i.length;n>t&&r;t++){var a=i[t];r=r&&B(a)||ce(a)==Lr&&"type"===se(a)}return r},ca=function(e,t,n,r,i){var a=null,o=null,u=null,s="";"deferred"!==n?(a=ua(e,"type","application/atom+xml;type="+n),o=ri(e,"inline"),r&&(s=r.__metadata&&r.__metadata.uri||"",u=pa(e,r,i)||da(e,r,i),ve(o,u.element))):s=r.__deferred.uri;var c=oa(e,"link",[ua(e,"href",s),ua(e,"rel",D(t,Ur)),a,o]);return ui(c,u?u.dsv:"1.0")},la=function(e,t,n,r,i,a){if(Mt(n))return null;var o=mi(e,t,n,r,i,a);if(!o){var u=jt(n,i);o=ca(e,t,u,n,a)}return o},fa=function(e,t,n,r){var i,a=ne(n,Mr,r.propertyPath),o=a&&Z(a,"null",Lr),u="1.0";if(o&&"true"===o.value)return u;if(a&&(i=ue(a)||"",!r.keepInContent)){u="2.0";var s=a.parentNode,c=s;for(s.removeChild(a);c!==n&&sa(c);)s=c.parentNode,s.removeChild(c),c=s}var l=Te(e,t,r.nsURI,r.nsPrefix,r.entryPath);if(2===l.nodeType)return l.value=i,u;var f=r.contentKind;return me(l,[f&&he(e,null,"type",f),"xhtml"===f?be(e,i):i]),u},da=function(e,t,n){var r=t.__metadata||{},i=r.properties||{},a=r.etag,o=r.uri,u=r.type,s=Ht(u,n),c=ri(e,"properties"),l=oa(e,"entry",[oa(e,"author",oa(e,"name")),a&&ii(e,"etag",a),o&&oa(e,"id",o),u&&oa(e,"category",[ua(e,"term",u),ua(e,"scheme",jr)]),oa(e,"content",[ua(e,"type","application/xml"),c])]),f="1.0";for(var d in t)if("__metadata"!==d){var p=i[d]||{},m=s&&(Ft(s.property,d)||Ft(s.navigationProperty,d)),v=la(e,d,t[d],p,m,n);if(v){var h=v.element,y=ce(h)===bi?l:c;ve(y,h),f=Yt(f,v.dsv)}}return Ai(s,n,function(t){var n=fa(e,l,c,t);f=Yt(f,n)}),ui(l,f)},pa=function(e,t,n){var r=f(t)?t:t.results;if(!r)return null;var i,a,o="1.0",u=oa(e,"feed");for(i=0,a=r.length;a>i;i++){var s=da(e,r[i],n);ve(u,s.element),o=Yt(o,s.dsv)}return ui(u,o)},ma=function(e,t){if(e){var n=Pt(e)&&pa||p(e)&&da;if(n){var r=pe(),i=n(r,e,t);if(i){var a=i.element;return me(a,[ge(r,Lr,Vr),ge(r,Mr,Fr)]),ui(ve(r,a),i.dsv)}}}return null},va=function(e,t,n){if(t){var r=X(t),i=ie(r);if(i)return Ii(i,null,n.metadata)}},ha=function(e,t,n){var r=n.contentType=n.contentType||Cn(wi);if(r&&r.mediaType===wi){var i=ma(t,n.metadata);if(i)return n.dataServiceVersion=Yt(n.dataServiceVersion||"1.0",i.dsv),Se(i.element)}};r.atomHandler=Ln(va,ha,Ci.join(","),xn);var ya=function(e,t,n,r){return{attributes:e,elements:t,text:n||!1,ns:r}},ga={elements:{Annotations:ya(["Target","Qualifier"],["TypeAnnotation*","ValueAnnotation*"]),Association:ya(["Name"],["End*","ReferentialConstraint","TypeAnnotation*","ValueAnnotation*"]),AssociationSet:ya(["Name","Association"],["End*","TypeAnnotation*","ValueAnnotation*"]),Binary:ya(null,null,!0),Bool:ya(null,null,!0),Collection:ya(null,["String*","Int*","Float*","Decimal*","Bool*","DateTime*","DateTimeOffset*","Guid*","Binary*","Time*","Collection*","Record*"]),CollectionType:ya(["ElementType","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","SRID"],["CollectionType","ReferenceType","RowType","TypeRef"]),ComplexType:ya(["Name","BaseType","Abstract"],["Property*","TypeAnnotation*","ValueAnnotation*"]),DateTime:ya(null,null,!0),DateTimeOffset:ya(null,null,!0),Decimal:ya(null,null,!0),DefiningExpression:ya(null,null,!0),Dependent:ya(["Role"],["PropertyRef*"]),Documentation:ya(null,null,!0),End:ya(["Type","Role","Multiplicity","EntitySet"],["OnDelete"]),EntityContainer:ya(["Name","Extends"],["EntitySet*","AssociationSet*","FunctionImport*","TypeAnnotation*","ValueAnnotation*"]),EntitySet:ya(["Name","EntityType"],["TypeAnnotation*","ValueAnnotation*"]),EntityType:ya(["Name","BaseType","Abstract","OpenType"],["Key","Property*","NavigationProperty*","TypeAnnotation*","ValueAnnotation*"]),EnumType:ya(["Name","UnderlyingType","IsFlags"],["Member*"]),Float:ya(null,null,!0),Function:ya(["Name","ReturnType"],["Parameter*","DefiningExpression","ReturnType","TypeAnnotation*","ValueAnnotation*"]),FunctionImport:ya(["Name","ReturnType","EntitySet","IsSideEffecting","IsComposable","IsBindable","EntitySetPath"],["Parameter*","ReturnType","TypeAnnotation*","ValueAnnotation*"]),Guid:ya(null,null,!0),Int:ya(null,null,!0),Key:ya(null,["PropertyRef*"]),LabeledElement:ya(["Name"],["Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time","Collection","Record","LabeledElement","Null"]),Member:ya(["Name","Value"]),NavigationProperty:ya(["Name","Relationship","ToRole","FromRole","ContainsTarget"],["TypeAnnotation*","ValueAnnotation*"]),Null:ya(null,null),OnDelete:ya(["Action"]),Path:ya(null,null,!0),Parameter:ya(["Name","Type","Mode","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","ConcurrencyMode","SRID"],["CollectionType","ReferenceType","RowType","TypeRef","TypeAnnotation*","ValueAnnotation*"]),Principal:ya(["Role"],["PropertyRef*"]),Property:ya(["Name","Type","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","ConcurrencyMode","CollectionKind","SRID"],["CollectionType","ReferenceType","RowType","TypeAnnotation*","ValueAnnotation*"]),PropertyRef:ya(["Name"]),PropertyValue:ya(["Property","Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time"],["Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time","Collection","Record","LabeledElement","Null"]),ReferenceType:ya(["Type"]),ReferentialConstraint:ya(null,["Principal","Dependent"]),ReturnType:ya(["ReturnType","Type","EntitySet"],["CollectionType","ReferenceType","RowType"]),RowType:ya(["Property*"]),String:ya(null,null,!0),Schema:ya(["Namespace","Alias"],["Using*","EntityContainer*","EntityType*","Association*","ComplexType*","Function*","ValueTerm*","Annotations*"]),Time:ya(null,null,!0),TypeAnnotation:ya(["Term","Qualifier"],["PropertyValue*"]),TypeRef:ya(["Type","Nullable","DefaultValue","MaxLength","FixedLength","Precision","Scale","Unicode","Collation","SRID"]),Using:ya(["Namespace","Alias"]),ValueAnnotation:ya(["Term","Qualifier","Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time"],["Path","String","Int","Float","Decimal","Bool","DateTime","DateTimeOffset","Guid","Binary","Time","Collection","Record","LabeledElement","Null"]),ValueTerm:ya(["Name","Type"],["TypeAnnotation*","ValueAnnotation*"]),Edmx:ya(["Version"],["DataServices","Reference*","AnnotationsReference*"],!1,Or),DataServices:ya(null,["Schema*"],!1,Or)}},ba=["m:FC_ContentKind","m:FC_KeepInContent","m:FC_NsPrefix","m:FC_NsUri","m:FC_SourcePath","m:FC_TargetPath"];ga.elements.Property.attributes=ga.elements.Property.attributes.concat(ba),ga.elements.EntityType.attributes=ga.elements.EntityType.attributes.concat(ba),ga.elements.Edmx={attributes:["Version"],elements:["DataServices"],ns:Or},ga.elements.DataServices={elements:["Schema*"],ns:Or},ga.elements.EntityContainer.attributes.push("m:IsDefaultEntityContainer"),ga.elements.Property.attributes.push("m:MimeType"),ga.elements.FunctionImport.attributes.push("m:HttpMethod"),ga.elements.FunctionImport.attributes.push("m:IsAlwaysBindable"),ga.elements.EntityType.attributes.push("m:HasStream"),ga.elements.DataServices.attributes=["m:DataServiceVersion","m:MaxDataServiceVersion"];var _a=function(e){if(!e)return e;if(e.length>1){var t=e.substr(0,2);return t===t.toUpperCase()?e:e.charAt(0).toLowerCase()+e.substr(1)}return e.charAt(0).toLowerCase()},Ta=function(e,t){if("Documentation"===t)return{isArray:!0,propertyName:"documentation"};var n=e.elements;if(!n)return null;var r,i;for(r=0,i=n.length;i>r;r++){var a=n[r],o=!1;if("*"===a.charAt(a.length-1)&&(o=!0,a=a.substr(0,a.length-1)),t===a){var u=_a(a);return{isArray:o,propertyName:u}}}return null},Sa=/^(m:FC_.*)_[0-9]+$/,xa=function(e){return e===Er||e===Nr||e===Ar||e===Pr||e===Rr||e===Ir},Ca=function(e){var t=se(e),n=ce(e),r=ga.elements[t];if(!r)return null;if(r.ns){if(n!==r.ns)return null}else if(!xa(n))return null;var i={},a=[],u=r.attributes||[];return W(e,function(e){var t=se(e),n=ce(e),r=e.value;if(n!==L){var s=null,c=!1;if(xa(n)||null===n?s="":n===Lr&&(s="m:"),null!==s){s+=t;var l=Sa.exec(s);l&&(s=l[1]),o(u,s)&&(c=!0,i[_a(t)]=r)}c||a.push(qr(e))}}),te(e,function(e){var t=se(e),n=Ta(r,t);if(n)if(n.isArray){var o=i[n.propertyName];o||(o=[],i[n.propertyName]=o),o.push(Ca(e))}else i[n.propertyName]=Ca(e);else a.push(Br(e))}),r.text&&(i.text=ue(e)),a.length&&(i.extensions=a),i},wa=function(e,n){var r=X(n),i=ie(r);return Ca(i)||t};r.metadataHandler=Ln(wa,null,wr,xn);var Da="o",ka="f",Oa="p",Ea="c",Na="s",Aa="l",Pa="odata",Ra=Pa+".",Ia="@"+Ra+"bind",Ma=Ra+"metadata",La=Ra+"navigationLinkUrl",Ua=Ra+"type",ja={readLink:"self",editLink:"edit",nextLink:"__next",mediaReadLink:"media_src",mediaEditLink:"edit_media",mediaContentType:"content_type",mediaETag:"media_etag",count:"__count",media_src:"mediaReadLink",edit_media:"mediaEditLink",content_type:"mediaContentType",media_etag:"mediaETag",url:"uri"},Fa={metadata:"odata.metadata",count:"odata.count",next:"odata.nextLink",id:"odata.id",etag:"odata.etag",read:"odata.readLink",edit:"odata.editLink",mediaRead:"odata.mediaReadLink",mediaEdit:"odata.mediaEditLink",mediaEtag:"odata.mediaETag",mediaContentType:"odata.mediaContentType",actions:"odata.actions",functions:"odata.functions",navigationUrl:"odata.navigationLinkUrl",associationUrl:"odata.associationLinkUrl",type:"odata.type"},Va=function(e){if(e.indexOf(".")>0){var t=e.indexOf("@"),n=t>-1?e.substring(0,t):null,r=e.substring(t+1);return{target:n,name:r,isOData:0===r.indexOf(Ra)}}return null},qa=function(e,t,n,r,i){return Ot(t)&&t[Ua]||n&&n[e+"@"+Ua]||r&&r.type||Qt(r,i)||null},Ba=function(e,t){return t?Ft(t.property,e)||Ft(t.navigationProperty,e):null},Ha=function(e){return Ot(e)&&Ra+"id"in e},Ja=function(e,t,n){if(t[e+"@"+La]||n&&n.relationship)return!0;var r=f(t[e])?t[e][0]:t[e];return Ha(r)},za=function(e){return Ut(e)||Rt(e)||It(e)},Ga=function(e,t,n,r,i){for(var a in e)if(a.indexOf(".")>0&&"#"!==a.charAt(0)){var o=Va(a);if(o){var u=o.name,s=o.target,c=null,l=null;s&&(c=Ba(s,r),l=qa(s,e[s],e,c,i)),o.isOData?Qa(u,s,l,e[a],e,t,n):t[a]=e[a]}}return t},Qa=function(e,t,n,r,i,a,o){var u=e.substring(Ra.length);switch(u){case"navigationLinkUrl":return void Wa(u,t,n,r,i,a,o);case"nextLink":case"count":return void $a(u,t,r,a,o);case"mediaReadLink":case"mediaEditLink":case"mediaContentType":case"mediaETag":return void Ka(u,t,n,r,a,o);default:return void Xa(u,t,r,a,o)}},Xa=function(e,t,n,r,i){var a=r.__metadata=r.__metadata||{},o=ja[e]||e;if("editLink"===e)return a.uri=D(n,i),void(a[o]=a.uri);if(("readLink"===e||"associationLinkUrl"===e)&&(n=D(n,i)),t){var u=a.properties=a.properties||{},s=u[t]=u[t]||{};return"type"===e?void(s[o]=s[o]||n):void(s[o]=n)}a[o]=n},$a=function(e,t,n,r,i){var a=ja[e],o=t?r[t]:r;o[a]="nextLink"===e?D(n,i):n},Ka=function(e,t,n,r,i,a){var o=i.__metadata=i.__metadata||{},u=ja[e];if(("mediaReadLink"===e||"mediaEditLink"===e)&&(r=D(r,a)),t){var s=o.properties=o.properties||{},c=s[t]=s[t]||{};return c.type=c.type||n,i.__metadata=o,i[t]=i[t]||{__mediaresource:{}},void(i[t].__mediaresource[u]=r)}o[u]=r},Wa=function(e,t,n,r,i,a,o){var u=a.__metadata=a.__metadata||{},s=u.properties=u.properties||{},c=s[t]=s[t]||{},l=D(r,o);return i.hasOwnProperty(t)?void(c.navigationLinkUrl=l):(a[t]={__deferred:{uri:l}},void(c.type=c.type||n))},Ya=function(e,t,n,r,i,a,o){if("string"==typeof e)return Za(e,t,o);if(!za(t)){if(f(e))return eo(e,t,n,r,a,o);if(Ot(e))return to(e,t,n,r,a,o)}return e},Za=function(e,t,n){switch(t){case He:return sn(e);case Pe:return an(e,!1);case Re:return on(e,!1)}return n?an(e,!0)||on(e,!0)||e:e},eo=function(e,t,n,r,i,a){var o,u,s=St(t),c=[],l=[];for(o=0,u=e.length;u>o;o++){var f=qa(null,e[o])||s,d={type:f},p=Ya(e[o],f,d,r,null,i,a);za(f)||Lt(e[o])||c.push(d),l.push(p)}return c.length>0&&(n.elements=c),{__metadata:{type:t},results:l}},to=function(e,t,n,r,i,a){var o=ro(e,{type:t},r,i,a),u=o.__metadata,s=u.properties;return s&&(n.properties=s,delete u.properties),o},no=function(e,t,n,r,i){return f(e)?ao(e,t,n,r,i):Ot(e)?ro(e,t,n,r,i):null},ro=function(e,n,r,i,a){n=n||{};var o=e[Ua]||n.type||null,u=Ht(o,i),s=!0;u||(s=!1,u=Bt(o,i));var c,l={type:o},f={__metadata:l},d={};if(s&&u&&n.entitySet&&"minimalmetadata"==n.contentTypeOdata){var p=r.substring(0,r.lastIndexOf("$metadata"));for(c=null,u.key||(c=u);c&&!c.key&&c.baseType;)c=Ht(c.baseType,i);if(u.key||c&&c.key){var m;if(m=u.key?oo(e,u):oo(e,c)){var v={key:m,entitySet:n.entitySet,functionImport:n.functionImport,containerName:n.containerName};uo(e,v,o,p,u,c)}}}for(var h in e)if(0===h.indexOf("#"))io(h.substring(1),e[h],f,r,i);else if(-1===h.indexOf(".")){l.properties||(l.properties=d);var y=e[h],g=g=Ba(h,u);for(c=u;u&&null===g&&c.baseType;)c=Ht(c.baseType,i),g=g=Ba(h,c);var b=Ja(h,e,g),_=qa(h,y,e,g,i),T=d[h]=d[h]||{type:_};if(b){var S={};if(n.entitySet!==t){var x=Xt(g,n.entitySet.name,i);S=$t(x,i)}S.contentTypeOdata=n.contentTypeOdata,S.kind=n.kind,S.type=_,f[h]=no(y,S,r,i,a)}else f[h]=Ya(y,_,T,r,g,i,a)}return Ga(e,f,r,u,i)},io=function(e,t,n,r,i){if(e&&(f(t)||Ot(t))){var a=!1,o=e.lastIndexOf("."),u=e.substring(o+1),s=o>-1?e.substring(0,o):"",c=u===e||-1===s.indexOf(".")?Jt(i):zt(s,i);if(c){var l=Gt(c.functionImport,u);l&&l.isSideEffecting&&(a=!tn(l.isSideEffecting))}var d,p,m=n.__metadata,v=a?"functions":"actions",h=D(e,r),y=f(t)?t:[t];for(d=0,p=y.length;p>d;d++){var g=y[d];if(g){var b=m[v]=m[v]||[],_={metadata:h,title:g.title,target:D(g.target,r)};b.push(_)}}}},ao=function(e,t,n,r,i){var a,o,u,s=f(e)?e:e.value,c=[];for(a=0,o=s.length;o>a;a++)u=ro(s[a],t,n,r,i),c.push(u);var l={results:c};if(Ot(e)){for(var d in e)0===d.indexOf("#")&&(l.__metadata=l.__metadata||{},io(d.substring(1),e[d],l,n,r));l=Ga(e,l,n)}return l},oo=function(e,t){var n,r,i=t.key.propertyRef;if(n="(",1==i.length)r=Ft(t.property,i[0].name).type,n+=fo(e[i[0].name],r);else for(var a=!0,o=0;o<i.length;o++)a?a=!1:n+=",",r=Ft(t.property,i[o].name).type,n+=i[o].name+"="+fo(e[i[o].name],r);return n+=")"},uo=function(e,t,n,r,i,a){var o=e[Fa.id]||e[Fa.read]||e[Fa.edit]||t.entitySet.name+t.key;if(e[Fa.id]=r+o,e[Fa.edit]||(e[Fa.edit]=t.entitySet.name+t.key,t.entitySet.entityType!=n&&(e[Fa.edit]+="/"+n)),e[Fa.read]=e[Fa.read]||e[Fa.edit],!e[Fa.etag]){var u=so(e,i,a);u&&(e[Fa.etag]=u)}vo(e,i,a),lo(e,i,a),mo(e,t)},so=function(e,t,n){for(var r,i="",a=0;t.property&&a<t.property.length;a++)r=t.property[a],i=co(e,i,r);if(n)for(a=0;n.property&&a<n.property.length;a++)r=n.property[a],i=co(e,i,r);return i.length>0?i+'"':null},co=function(e,t,n){return"Fixed"==n.concurrencyMode&&(t+=t.length>0?",":'W/"',t+=null!==e[n.name]?fo(e[n.name],n.type):"null"),t},lo=function(e,n,r){for(var i,a,o,u="@odata.navigationLinkUrl",s="@odata.associationLinkUrl",c=0;n.navigationProperty&&c<n.navigationProperty.length;c++)i=n.navigationProperty[c].name,a=i+u,e[a]===t&&(e[a]=e[Fa.edit]+"/"+encodeURIComponent(i)),o=i+s,e[o]===t&&(e[o]=e[Fa.edit]+"/$links/"+encodeURIComponent(i));if(r&&r.navigationProperty)for(c=0;c<r.navigationProperty.length;c++)i=r.navigationProperty[c].name,a=i+u,e[a]===t&&(e[a]=e[Fa.edit]+"/"+encodeURIComponent(i)),o=i+s,e[o]===t&&(e[o]=e[Fa.edit]+"/$links/"+encodeURIComponent(i))},fo=function(e,t){switch(e=""+po(e,t),e=encodeURIComponent(e.replace(/'/g,"''")),t){case"Edm.Binary":return"X'"+e+"'";case"Edm.DateTime":return"datetime'"+e+"'";case"Edm.DateTimeOffset":return"datetimeoffset'"+e+"'";case"Edm.Decimal":return e+"M";case"Edm.Guid":return"guid'"+e+"'";case"Edm.Int64":return e+"L";case"Edm.Float":return e+"f";case"Edm.Double":return e+"D";case"Edm.Geography":return"geography'"+e+"'";case"Edm.Geometry":return"geometry'"+e+"'";case"Edm.Time":return"time'"+e+"'";case"Edm.String":return"'"+e+"'";default:return e}},po=function(e,t){switch(t){case"Edm.Binary":return E(e);default:return e}},mo=function(e,n){for(var r=n.functionImport||[],i=0;i<r.length;i++)if(r[i].isBindable&&r[i].parameter[0]&&r[i].parameter[0].type==n.entitySet.entityType){var a="#"+n.containerName+"."+r[i].name;e[a]==t&&(e[a]={title:r[i].name,target:e[Fa.edit]+"/"+r[i].name})}},vo=function(e,t,n){(t.hasStream||n&&n.hasStream)&&(e[Fa.mediaEdit]=e[Fa.mediaEdit]||e[Fa.mediaEdit]+"/$value",e[Fa.mediaRead]=e[Fa.mediaRead]||e[Fa.mediaEdit])},ho=function(e,t,n,r){var i={type:t},a=Ya(e.value,t,i,n,null,null,r);return Ga(e,{__metadata:i,value:a},n)},yo=function(e,t,n,r,i){var a={},o=eo(e.value,t,a,n,r,i);return c(o.__metadata,a),Ga(e,o,n)},go=function(e,t){var n=e.value;if(!f(n))return bo(e,t);var r,i,a=[];for(r=0,i=n.length;i>r;r++)a.push(bo(n[r],t));var o={results:a};return Ga(e,o,t)},bo=function(e,t){var n={uri:D(e.url,t)};n=Ga(e,n,t);var r=n.__metadata||{},i=r.properties||{};return _o(i.url),v(i,"url","uri"),n},_o=function(e){e&&delete e.type},To=function(e,t){var n=e.value,r=[],i=Ga(e,{collections:r},t),a=i.__metadata||{},o=a.properties||{};_o(o.value),v(o,"value","collections");var u,s;for(u=0,s=n.length;s>u;u++){var c=n[u],l={title:c.name,href:D(c.url,t)};l=Ga(c,l,t),a=l.__metadata||{},o=a.properties||{},_o(o.name),_o(o.url),v(o,"name","title"),v(o,"url","href"),r.push(l)}return{workspaces:[i]}},So=function(e,t){return{kind:e,type:t||null}},xo=function(e,t,n){var r=e[Ma];if(!r||"string"!=typeof r)return null;var i=r.lastIndexOf("#");if(-1===i)return So(Na);var a=r.indexOf("@Element",i),o=a-1;0>o&&(o=r.indexOf("?",i),-1===o&&(o=r.length));var u=decodeURIComponent(r.substring(i+1,o));if(u.indexOf("/$links/")>0)return So(Aa);var s=u.split("/");if(s.length>=0){var c=s[0],l=s[1];if(za(c))return So(Oa,c);if(kt(c))return So(Ea,c);var d,p,m,v=l;if(!l){var h=c.lastIndexOf("."),y=c.substring(h+1),g=y===c?Jt(t):zt(c.substring(0,h),t);g&&(d=qt(g.entitySet,y),p=g.functionImport,m=g.name,v=d?d.entityType:null)}var b;if(a>0)return b=So(Da,v),b.entitySet=d,b.functionImport=p,b.containerName=m,b;if(v)return b=So(ka,v),b.entitySet=d,b.functionImport=p,b.containerName=m,b;if(f(e.value)&&!Bt(c,t)){var _=e.value[0];if(!Lt(_)&&(Ha(_)||!n))return So(ka,null)}return So(Da,c)}return null},Co=function(e,t,n,r,i){if(!Ot(e))return e;i=i||"minimalmetadata";var o=e[Ma],u=xo(e,t,r);a(u)&&(u.contentTypeOdata=i);var s=null;if(u)switch(delete e[Ma],s=u.type,u.kind){case ka:return ao(e,u,o,t,n);case Ea:return yo(e,s,o,t,n);case Oa:return ho(e,s,o,n);case Na:return To(e,o);case Aa:return go(e,o)}return ro(e,u,o,t,n)},wo=["type","etag","media_src","edit_media","content_type","media_etag"],Do=function(e,t){var n=/\/\$links\//,r={},i=e.__metadata,a=t&&n.test(t.request.requestUri);return Oo(e,i&&i.properties,r,a),r},ko=function(e,t){if(e){var n,r;for(n=0,r=wo.length;r>n;n++){var i=wo[n],a=Ra+(ja[i]||i);Lo(a,null,e[i],t)}}},Oo=function(e,t,n,r){for(var i in e){var a=e[i];"__metadata"===i?ko(a,n):-1===i.indexOf(".")?r&&"uri"===i?No(a,n):Eo(i,a,t,n,r):n[i]=a}},Eo=function(e,n,r,i){var a=r&&r[e]||{properties:t,type:t},o=ke(n,a);return Lt(n)||!n?(Lo(Ua,e,o,i),void(i[e]=n)):Pt(n,o)||At(n)?void Ro(e,n,i):!o&&Nt(n)?void Ao(e,n,i):Dt(n,o)?(St(o)&&Lo(Ua,e,o,i),void Po(e,n,i)):(i[e]={},Lo(Ua,null,o,i[e]),void Oo(n,a.properties,i[e]))},No=function(e,t){t.url=e},Ao=function(e,t,n){Lo(La,e,t.__deferred.uri,n)},Po=function(e,t,n){n[e]=[];var r=f(t)?t:t.results;Oo(r,null,n[e])},Ro=function(e,t,n){if(Pt(t)){n[e]=[];var r,i,a=f(t)?t:t.results;for(r=0,i=a.length;i>r;r++)Io(e,a[r],!0,n)}else Io(e,t,!1,n)},Io=function(e,t,n,r){var i=t.__metadata&&t.__metadata.uri;if(i)return void Mo(e,i,n,r);var a=Do(t);return n?void r[e].push(a):void(r[e]=a)},Mo=function(e,t,n,r){var i=e+Ia;return n?(r[i]=r[i]||[],void r[i].push(t)):void(r[i]=t)},Lo=function(e,n,r,i){r!==t&&(n?i[n+"@"+e]=r:i[e]=r)},Uo="application/json",jo=Cn(Uo),Fo=function(e){var t=[];for(var n in e){var r,i;for(r=0,i=e[n].length;i>r;r++)t.push(c({metadata:n},e[n][r]))}return t},Vo=function(e,t,n,r){if(e&&"object"==typeof e){var i,a=e.__metadata;a&&(a.actions&&(a.actions=Fo(a.actions)),a.functions&&(a.functions=Fo(a.functions)),i=a&&a.type);var o,u=Ht(i,t)||Bt(i,t);if(u){var s=u.property;if(s){var c,l;for(c=0,l=s.length;l>c;c++){var f=s[c],d=f.name;if(o=e[d],"Edm.DateTime"===f.type||"Edm.DateTimeOffset"===f.type){if(o){if(o=n(o),!o)throw{message:"Invalid date/time value"};e[d]=o}}else"Edm.Time"===f.type&&(e[d]=sn(o))}}}else if(r)for(var p in e)o=e[p],"string"==typeof o&&(e[p]=n(o)||o)}return e},qo=function(e){if(e){var t=e.properties.odata;return"nometadata"===t||"minimalmetadata"===t||"fullmetadata"===t}return!1},Bo=function(e,t){var n,r,i={collections:[]};for(n=0,r=e.EntitySets.length;r>n;n++){var a=e.EntitySets[n],o={title:a,href:D(a,t)};i.collections.push(o)}return{workspaces:[i]}},Ho=/^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/,Jo=function(e){var t;0>e?(t="-",e=-e):t="+";var n=Math.floor(e/60);return e-=60*n,t+_t(n,2)+":"+_t(e,2)},zo=function(e){var t=e&&Ho.exec(e);if(t){var n=new Date(m(t[1]));if(t[2]){var r=m(t[3]);"-"===t[2]&&(r=-r);var i=n.getUTCMinutes();n.setUTCMinutes(i-r),n.__edmType="Edm.DateTimeOffset",n.__offset=Jo(r)}if(!isNaN(n.valueOf()))return n}},Go=function(t,n,r){var i=u(r.recognizeDates,t.recognizeDates),a=u(r.inferJsonLightFeedAsObject,t.inferJsonLightFeedAsObject),o=r.metadata,s=r.dataServiceVersion,c=zo,l="string"==typeof n?e.JSON.parse(n):n;if(Yt("3.0",s)===s){if(qo(r.contentType))return Co(l,o,i,a,r.contentType.properties.odata);c=an}return l=dn(l.d,function(e,t){return Vo(t,o,c,i)}),l=Wo(l,r.dataServiceVersion),Ko(l,r.response.requestUri)},Qo=function(t){var n,r=Date.prototype.toJSON;try{Date.prototype.toJSON=function(){return gt(this)},n=e.JSON.stringify(t,$o)}finally{Date.prototype.toJSON=r}return n},Xo=function(e,n,r){var i=r.dataServiceVersion||"1.0",a=u(r.useJsonLight,e.useJsonLight),o=r.contentType=r.contentType||jo;if(o&&o.mediaType===jo.mediaType){var s=n;return a||qo(o)?(r.dataServiceVersion=Yt(i,"3.0"),s=Do(n,r),Qo(s)):(Yt("3.0",i)===i&&(o.properties.odata="verbose",r.contentType=o),Qo(s))}return t},$o=function(e,t){return t&&"Edm.Time"===t.__edmType?bt(t):t},Ko=function(e,t){var n=Ot(e)&&!e.__metadata&&f(e.EntitySets);return n?Bo(e,t):e},Wo=function(e,t){return t&&t.lastIndexOf(";")===t.length-1&&(t=t.substr(0,t.length-1)),t&&"1.0"!==t||f(e)&&(e={results:e}),e},Yo=Ln(Go,Xo,Uo,xn);Yo.recognizeDates=!1,Yo.useJsonLight=!1,Yo.inferJsonLightFeedAsObject=!1,r.jsonHandler=Yo;var Zo="multipart/mixed",eu=/^HTTP\/1\.\d (\d{3}) (.*)$/i,tu=/^([^()<>@,;:\\"\/[\]?={} \t]+)\s?:\s?(.*)/,nu=function(){return Math.floor(65536*(1+Math.random())).toString(16).substr(1)},ru=function(e){return e+nu()+"-"+nu()+"-"+nu()},iu=function(e){return e.handler.partHandler},au=function(e){var t=e.boundaries;return t[t.length-1]},ou=function(e,t,n){var r=n.contentType.properties.boundary;return{__batchResponses:su(t,{boundaries:[r],handlerContext:n})}},uu=function(e,t,n){var r=n.contentType=n.contentType||Cn(Zo);return r.mediaType===Zo?pu(t,n):void 0},su=function(e,t){var n="--"+au(t);du(e,t,n),fu(e,t);for(var r,i=[];"--"!==r&&t.position<e.length;){var a,o=cu(e,t),u=Cn(o["Content-Type"]);if(u&&u.mediaType===Zo){t.boundaries.push(u.properties.boundary);try{a=su(e,t)}catch(s){s.response=lu(e,t,n),a=[s]}i.push({__changeResponses:a}),t.boundaries.pop(),du(e,t,"--"+au(t))}else{if(!u||"application/http"!==u.mediaType)throw{message:"invalid MIME part type "};fu(e,t);var c=lu(e,t,n);try{c.statusCode>=200&&c.statusCode<=299?iu(t.handlerContext).read(c,t.handlerContext):c={message:"HTTP request failed",response:c}}catch(s){c=s}i.push(c)}r=e.substr(t.position,2),fu(e,t)}return i},cu=function(e,t){var n,r,i,a={};do i=t.position,r=fu(e,t),n=tu.exec(r),null!==n?a[n[1]]=n[2]:t.position=i;while(r&&n);return en(a),a},lu=function(e,t,n){var r,i,a,o=t.position,u=eu.exec(fu(e,t));return u?(r=u[1],i=u[2],a=cu(e,t),fu(e,t)):t.position=o,{statusCode:r,statusText:i,headers:a,body:du(e,t,"\r\n"+n)}},fu=function(e,t){return du(e,t,"\r\n")},du=function(e,t,n){var r=t.position||0,i=e.length;if(n){if(i=e.indexOf(n,r),-1===i)return null;t.position=i+n.length}else t.position=i;return e.substring(r,i)},pu=function(e,t){if(!Ct(e))throw{message:"Data is not a batch object."};var n,r,i=ru("batch_"),a=e.__batchRequests,o="";for(n=0,r=a.length;r>n;n++)o+=mu(i,!1)+vu(a[n],t);o+=mu(i,!0);var u=t.contentType.properties;return u.boundary=i,o},mu=function(e,t){var n="\r\n--"+e;return t&&(n+="--"),n+"\r\n"},vu=function(e,t,n){var r,i=e.__changeRequests;if(f(i)){if(n)throw{message:"Not Supported: change set nested in other change set"};var a=ru("changeset_");r="Content-Type: "+Zo+"; boundary="+a+"\r\n";var o,u;for(o=0,u=i.length;u>o;o++)r+=mu(a,!1)+vu(i[o],t,!0);r+=mu(a,!0)}else{r="Content-Type: application/http\r\nContent-Transfer-Encoding: binary\r\n\r\n";var s=c({},t);s.handler=Ln,s.request=e,s.contentType=null,ln(e,iu(t),s),r+=hu(e)}return r},hu=function(e){var t=(e.method?e.method:"GET")+" "+e.requestUri+" HTTP/1.1\r\n";for(var n in e.headers)e.headers[n]&&(t=t+n+": "+e.headers[n]+"\r\n");return t+="\r\n",e.body&&(t+=e.body),t};r.batchHandler=Ln(ou,uu,Zo,xn);var yu=[r.jsonHandler,r.atomHandler,r.xmlHandler,r.textHandler],gu=function(e,t,n){var r,i;for(r=0,i=yu.length;i>r&&!yu[r][e](t,n);r++);if(r===i)throw{message:"no handler for data"}};r.defaultSuccess=function(t){e.alert(e.JSON.stringify(t))},r.defaultError=h,r.defaultHandler={read:function(e,t){e&&a(e.body)&&e.headers["Content-Type"]&&gu("read",e,t)},write:function(e,t){gu("write",e,t)},maxDataServiceVersion:xn,accept:"application/atomsvc+xml;q=0.8, application/json;odata=fullmetadata;q=0.7, application/json;q=0.5, */*;q=0.1"},r.defaultMetadata=[],r.read=function(e,t,n,i,a,o){var u;return u=e instanceof String||"string"==typeof e?{requestUri:e}:e,r.request(u,t,n,i,a,o)},r.request=function(e,t,n,i,a,o){t=t||r.defaultSuccess,n=n||r.defaultError,i=i||r.defaultHandler,a=a||r.defaultHttpClient,o=o||r.defaultMetadata,e.recognizeDates=u(e.recognizeDates,r.jsonHandler.recognizeDates),e.callbackParameterName=u(e.callbackParameterName,r.defaultHttpClient.callbackParameterName),e.formatQueryString=u(e.formatQueryString,r.defaultHttpClient.formatQueryString),e.enableJsonpCallback=u(e.enableJsonpCallback,r.defaultHttpClient.enableJsonpCallback),e.useJsonLight=u(e.useJsonLight,r.jsonHandler.enableJsonpCallback),e.inferJsonLightFeedAsObject=u(e.inferJsonLightFeedAsObject,r.jsonHandler.inferJsonLightFeedAsObject);var s={metadata:o,recognizeDates:e.recognizeDates,callbackParameterName:e.callbackParameterName,formatQueryString:e.formatQueryString,enableJsonpCallback:e.enableJsonpCallback,
useJsonLight:e.useJsonLight,inferJsonLightFeedAsObject:e.inferJsonLightFeedAsObject};try{return ln(e,i,s),xt(e,t,n,i,a,s)}catch(c){n(c)}},r.parseMetadata=function(e){return wa(null,e)},r.batchHandler.partHandler=r.defaultHandler;var bu=null,_u=function(){var e={v:this.valueOf(),t:"[object Date]"};for(var t in this)e[t]=this[t];return e},Tu=function(e,t){if(t&&"[object Date]"===t.t){var n=new Date(t.v);for(var r in t)"t"!==r&&"v"!==r&&(n[r]=t[r]);t=n}return t},Su=function(e,t){return e.name+"#!#"+t},xu=function(e,t){return t.replace(e.name+"#!#","")},Cu=function(e){this.name=e};Cu.create=function(t){if(Cu.isSupported())return bu=bu||e.localStorage,new Cu(t);throw{message:"Web Storage not supported by the browser"}},Cu.isSupported=function(){return!!e.localStorage},Cu.prototype.add=function(e,t,n,r){r=r||this.defaultError;var i=this;this.contains(e,function(a){a?s(r,{message:"key already exists",key:e}):i.addOrUpdate(e,t,n,r)},r)},Cu.prototype.addOrUpdate=function(n,r,i,a){if(a=a||this.defaultError,n instanceof Array)a({message:"Array of keys not supported"});else{var o=Su(this,n),u=Date.prototype.toJSON;try{var c=r;c!==t&&(Date.prototype.toJSON=_u,c=e.JSON.stringify(r)),bu.setItem(o,c),s(i,n,r)}catch(l){22===l.code||2147942414===l.number?s(a,{name:"QUOTA_EXCEEDED_ERR",error:l}):s(a,l)}finally{Date.prototype.toJSON=u}}},Cu.prototype.clear=function(e,t){t=t||this.defaultError;try{for(var n=0,r=bu.length;r>0&&r>n;){var i=bu.key(n),a=xu(this,i);i!==a?(bu.removeItem(i),r=bu.length):n++}s(e)}catch(o){s(t,o)}},Cu.prototype.close=function(){},Cu.prototype.contains=function(e,t,n){n=n||this.defaultError;try{var r=Su(this,e),i=bu.getItem(r);s(t,null!==i)}catch(a){s(n,a)}},Cu.prototype.defaultError=h,Cu.prototype.getAllKeys=function(e,t){t=t||this.defaultError;var n,r,i=[];try{for(n=0,r=bu.length;r>n;n++){var a=bu.key(n),o=xu(this,a);a!==o&&i.push(o)}s(e,i)}catch(u){s(t,u)}},Cu.prototype.mechanism="dom",Cu.prototype.read=function(n,r,i){if(i=i||this.defaultError,n instanceof Array)i({message:"Array of keys not supported"});else try{var a=Su(this,n),o=bu.getItem(a);o=null!==o&&"undefined"!==o?e.JSON.parse(o,Tu):t,s(r,n,o)}catch(u){s(i,u)}},Cu.prototype.remove=function(e,t,n){if(n=n||this.defaultError,e instanceof Array)n({message:"Batches not supported"});else try{var r=Su(this,e);bu.removeItem(r),s(t)}catch(i){s(n,i)}},Cu.prototype.update=function(e,t,n,r){r=r||this.defaultError;var i=this;this.contains(e,function(a){a?i.addOrUpdate(e,t,n,r):s(r,{message:"key not found",key:e})},r)};var wu=e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.indexedDB,Du=e.IDBKeyRange||e.webkitIDBKeyRange,ku=e.IDBTransaction||e.webkitIDBTransaction||{},Ou=ku.READ_ONLY||"readonly",Eu=ku.READ_WRITE||"readwrite",Nu=function(e,t){return function(n){var r=e||t;if(r){if("[object IDBDatabaseException]"===Object.prototype.toString.call(n))return 11===n.code?void r({name:"QuotaExceededError",error:n}):void r(n);var i;try{var a=n.target.error||n;i=a.name}catch(o){i="blocked"===n.type?"IndexedDBBlocked":"UnknownError"}r({name:i,error:n})}}},Au=function(e,t,n){var r=e.name,i="_datajs_"+r,a=wu.open(i);a.onblocked=n,a.onerror=n,a.onupgradeneeded=function(){var e=a.result;e.objectStoreNames.contains(r)||e.createObjectStore(r)},a.onsuccess=function(e){var i=a.result;if(!i.objectStoreNames.contains(r)){if("setVersion"in i){var o=i.setVersion("1.0");return o.onsuccess=function(){var e=o.transaction;e.oncomplete=function(){t(i)},i.createObjectStore(r,null,!1)},o.onerror=n,void(o.onblocked=n)}return e.target.error={name:"DBSchemaMismatch"},void n(e)}i.onversionchange=function(e){e.target.close()},t(i)}},Pu=function(e,t,n,r){var i=e.name,a=e.db,o=Nu(r,e.defaultError);return a?void n(a.transaction(i,t)):void Au(e,function(r){e.db=r,n(r.transaction(i,t))},o)},Ru=function(e){this.name=e};Ru.create=function(e){if(Ru.isSupported())return new Ru(e);throw{message:"IndexedDB is not supported on this browser"}},Ru.isSupported=function(){return!!wu},Ru.prototype.add=function(e,t,n,r){var i=this.name,a=this.defaultError,o=[],u=[];e instanceof Array?(o=e,u=t):(o=[e],u=[t]),Pu(this,Eu,function(s){s.onabort=Nu(r,a,e,"add"),s.oncomplete=function(){e instanceof Array?n(o,u):n(e,t)};for(var c=0;c<o.length&&c<u.length;c++)s.objectStore(i).add({v:u[c]},o[c])},r)},Ru.prototype.addOrUpdate=function(e,t,n,r){var i=this.name,a=this.defaultError,o=[],u=[];e instanceof Array?(o=e,u=t):(o=[e],u=[t]),Pu(this,Eu,function(s){s.onabort=Nu(r,a),s.oncomplete=function(){e instanceof Array?n(o,u):n(e,t)};for(var c=0;c<o.length&&c<u.length;c++){var l={v:u[c]};s.objectStore(i).put(l,o[c])}},r)},Ru.prototype.clear=function(e,t){var n=this.name,r=this.defaultError;Pu(this,Eu,function(i){i.onerror=Nu(t,r),i.oncomplete=function(){e()},i.objectStore(n).clear()},t)},Ru.prototype.close=function(){this.db&&(this.db.close(),this.db=null)},Ru.prototype.contains=function(e,t,n){var r=this.name,i=this.defaultError;Pu(this,Ou,function(a){var o=a.objectStore(r),u=o.get(e);a.oncomplete=function(){t(!!u.result)},a.onerror=Nu(n,i)},n)},Ru.prototype.defaultError=h,Ru.prototype.getAllKeys=function(e,t){var n=this.name,r=this.defaultError;Pu(this,Eu,function(i){var a=[];i.oncomplete=function(){e(a)};var o=i.objectStore(n).openCursor();o.onerror=Nu(t,r),o.onsuccess=function(e){var t=e.target.result;t&&(a.push(t.key),t["continue"].call(t))}},t)},Ru.prototype.mechanism="indexeddb",Ru.prototype.read=function(e,n,r){var i=this.name,a=this.defaultError,o=e instanceof Array?e:[e];Pu(this,Ou,function(u){var s=[];u.onerror=Nu(r,a,e,"read"),u.oncomplete=function(){e instanceof Array?n(o,s):n(o[0],s[0])};for(var c=0;c<o.length;c++){var l=u.objectStore(i),f=l.get.call(l,o[c]);f.onsuccess=function(e){var n=e.target.result;s.push(n?n.v:t)}}},r)},Ru.prototype.remove=function(e,t,n){var r=this.name,i=this.defaultError,a=e instanceof Array?e:[e];Pu(this,Eu,function(e){e.onerror=Nu(n,i),e.oncomplete=function(){t()};for(var o=0;o<a.length;o++){var u=e.objectStore(r);u["delete"].call(u,a[o])}},n)},Ru.prototype.update=function(e,t,n,r){var i=this.name,a=this.defaultError,o=[],u=[];e instanceof Array?(o=e,u=t):(o=[e],u=[t]),Pu(this,Eu,function(s){s.onabort=Nu(r,a),s.oncomplete=function(){e instanceof Array?n(o,u):n(e,t)};for(var c=0;c<o.length&&c<u.length;c++){var l=s.objectStore(i).openCursor(Du.only(o[c])),f={v:u[c]};l.pair={key:o[c],value:f},l.onsuccess=function(e){var t=e.target.result;t?t.update(e.target.pair.value):s.abort()}}},r)};var Iu=function(e){var n=[],r=[],i={};this.name=e;var a=function(e){return e||this.defaultError},o=function(e,n){var r;return e instanceof Array&&(r="Array of keys not supported"),(e===t||null===e)&&(r="Invalid key"),r?(s(n,{message:r}),!1):!0};this.add=function(e,t,n,r){r=a(r),o(e,r)&&(i.hasOwnProperty(e)?r({message:"key already exists",key:e}):this.addOrUpdate(e,t,n,r))},this.addOrUpdate=function(e,u,c,l){if(l=a(l),o(e,l)){var f=i[e];f===t&&(f=n.length>0?n.splice(0,1):r.length),r[f]=u,i[e]=f,s(c,e,u)}},this.clear=function(e){r=[],i={},n=[],s(e)},this.contains=function(e,t){var n=i.hasOwnProperty(e);s(t,n)},this.getAllKeys=function(e){var t=[];for(var n in i)t.push(n);s(e,t)},this.read=function(e,t,n){if(n=a(n),o(e,n)){var u=i[e];s(t,e,r[u])}},this.remove=function(e,u,c){if(c=a(c),o(e,c)){var l=i[e];l!==t&&(l===r.length-1?r.pop():(r[l]=t,n.push(l)),delete i[e],0===r.length&&(n=[])),s(u)}},this.update=function(e,t,n,r){r=a(r),o(e,r)&&(i.hasOwnProperty(e)?this.addOrUpdate(e,t,n,r):r({message:"key not found",key:e}))}};Iu.create=function(e){return new Iu(e)},Iu.isSupported=function(){return!0},Iu.prototype.close=function(){},Iu.prototype.defaultError=h,Iu.prototype.mechanism="memory";var Mu={indexeddb:Ru,dom:Cu,memory:Iu};n.defaultStoreMechanism="best",n.createStore=function(e,t){t||(t=n.defaultStoreMechanism),"best"===t&&(t=Cu.isSupported()?"dom":"memory");var r=Mu[t];if(r)return r.create(e);throw{message:"Failed to create store",name:e,mechanism:t}};var Lu=function(e,t){var n=e.indexOf("?")>=0?"&":"?";return e+n+t},Uu=function(e,t){var n=e.indexOf("?"),r="";return n>=0&&(r=e.substr(n),e=e.substr(0,n)),"/"!==e[e.length-1]&&(e+="/"),e+t+r},ju=function(e,t){return{method:"GET",requestUri:e,user:t.user,password:t.password,enableJsonpCallback:t.enableJsonpCallback,callbackParameterName:t.callbackParameterName,formatQueryString:t.formatQueryString}},Fu=function(e,t,n,r){var i=Vu(e,t,[],n,r);return i},Vu=function(e,n,i,a,o){var u=ju(e,n),s=r.request(u,function(e){var t=e.__next,r=e.results;i=i.concat(r),t?s=Vu(t,n,i,a,o):a(i)},o,t,n.httpClient,n.metadata);return{abort:function(){s.abort()}}},qu=function(e){var n=this,i=e.source;return n.identifier=w(encodeURI(decodeURI(i))),n.options=e,n.count=function(e,a){var o=n.options;return r.request(ju(Uu(i,"$count"),o),function(t){var n=m(t.toString());isNaN(n)?a({message:"Count is NaN",count:n}):e(n)},a,t,o.httpClient,o.metadata)},n.read=function(e,t,r,a){var o="$skip="+e+"&$top="+t;return Fu(Lu(i,o),n.options,r,a)},n},Bu=function(e,t){var n=Hu(e,t);if(n){var r=n.i-t.i,i=r+(e.c-e.d.length);e.d=e.d.concat(t.d.slice(r,i))}},Hu=function(e,t){var n,r=e.i+e.c,i=t.i+t.c,a=e.i>t.i?e.i:t.i,o=i>r?r:i;return o>=a&&(n={i:a,c:o-a}),n},Ju=function(e,n){if(e===t||"number"!=typeof e)throw{message:"'"+n+"' must be a number."};if(isNaN(e)||0>e||!isFinite(e))throw{message:"'"+n+"' must be greater than or equal to zero."}},zu=function(e,n){if(e!==t){if("number"!=typeof e)throw{message:"'"+n+"' must be a number."};if(isNaN(e)||0>=e||!isFinite(e))throw{message:"'"+n+"' must be greater than zero."}}},Gu=function(e,n){if(e!==t&&("number"!=typeof e||isNaN(e)||!isFinite(e)))throw{message:"'"+n+"' must be a number."}},Qu=function(e,t){var n,r;for(n=0,r=e.length;r>n;n++)if(e[n]===t)return e.splice(n,1),!0;return!1},Xu=function(e){var t=0,n=typeof e;if("object"===n&&e)for(var r in e)t+=2*r.length+Xu(e[r]);else t="string"===n?2*e.length:8;return t},$u=function(e,t,n){return e=Math.floor(e/n)*n,t=Math.ceil((t+1)/n)*n,{i:e,c:t-e}},Ku="destroy",Wu="idle",Yu="init",Zu="read",es="prefetch",ts="write",ns="cancel",rs="end",is="error",as="start",os="wait",us="clear",ss="done",cs="local",ls="save",fs="source",ds=function(e,t,n,r,i,a,o){var u,s,c=this;c.p=t,c.i=r,c.c=i,c.d=a,c.s=as,c.canceled=!1,c.pending=o,c.oncomplete=null,c.cancel=function(){if(n){var e=c.s;e!==is&&e!==rs&&e!==ns&&(c.canceled=!0,f(ns,u))}},c.complete=function(){f(rs,u)},c.error=function(e){c.canceled||f(is,e)},c.run=function(e){s=e,c.transition(c.s,u)},c.wait=function(e){f(os,e)};var l=function(t,n,r){switch(t){case as:n!==Yu&&e(c,t,n,r);break;case os:e(c,t,n,r);break;case ns:e(c,t,n,r),c.fireCanceled(),f(rs);break;case is:e(c,t,n,r),c.canceled=!0,c.fireRejected(r),f(rs);break;case rs:c.oncomplete&&c.oncomplete(c),c.canceled||c.fireResolved(),e(c,t,n,r);break;default:e(c,t,n,r)}},f=function(e,t){c.s=e,u=t,l(e,s,t)};return c.transition=f,c};ds.prototype.fireResolved=function(){var e=this.p;e&&(this.p=null,e.resolve(this.d))},ds.prototype.fireRejected=function(e){var t=this.p;t&&(this.p=null,t.reject(e))},ds.prototype.fireCanceled=function(){this.fireRejected({canceled:!0,message:"Operation canceled"})};var ps=function(r){var i,o=Yu,u={counts:0,netReads:0,prefetches:0,cacheReads:0},l=[],f=[],d=[],p=0,v=!1,h=g(r.cacheSize,1048576),y=0,b=0,_=0,T=0===h,S=g(r.pageSize,50),x=g(r.prefetchSize,S),C="1.0",w=0,D=r.source;"string"==typeof D&&(D=new qu(r)),D.options=r;var k=n.createStore(r.name,r.mechanism),O=this;O.onidle=r.idle,O.stats=u,O.count=function(){if(i)throw i;var e=De(),t=!1;if(v)return s(function(){e.resolve(y)}),e.promise();var n=D.count(function(t){n=null,u.counts++,e.resolve(t)},function(r){n=null,e.reject(c(r,{canceled:t}))});return c(e.promise(),{cancel:function(){n&&(t=!0,n.abort(),n=null)}})},O.clear=function(){if(i)throw i;if(0===l.length){var e=De(),t=new ds(J,e,!1);return U(t,l),e.promise()}return l[0].p},O.filterForward=function(e,t,n){return I(e,t,n,!1)},O.filterBack=function(e,t,n){return I(e,t,n,!0)},O.readRange=function(e,t){if(Ju(e,"index"),Ju(t,"count"),i)throw i;var n=De(),r=new ds(G,n,!0,e,t,[],0);return U(r,f),c(n.promise(),{cancel:function(){r.cancel()}})},O.ToObservable=O.toObservable=function(){if(!e.Rx||!e.Rx.Observable)throw{message:"Rx library not available - include rx.js"};if(i)throw i;return e.Rx.Observable.CreateWithDisposable(function(e){var t=!1,n=0,r=function(n){t||e.OnError(n)},i=function(a){if(!t){var o,u;for(o=0,u=a.length;u>o;o++)e.OnNext(a[o]);a.length<S?e.OnCompleted():(n+=S,O.readRange(n,S).then(i,r))}};return O.readRange(n,S).then(i,r),{Dispose:function(){t=!0}}})};var E=function(e){return function(t){i={message:e,error:t};var n,r;for(n=0,r=f.length;r>n;n++)f[n].fireRejected(i);for(n=0,r=l.length;r>n;n++)l[n].fireRejected(i);f=l=null}},N=function(e){if(e!==o){o=e;var t,n,r=l.concat(f,d);for(t=0,n=r.length;n>t;t++)r[t].run(o)}},A=function(){var e=new we;return k.clear(function(){p=0,v=!1,y=0,b=0,_=0,T=0===h,u={counts:0,netReads:0,prefetches:0,cacheReads:0},O.stats=u,k.close(),e.resolve()},function(t){e.reject(t)}),e},P=function(e){var t=Qu(l,e);t||(t=Qu(f,e),t||Qu(d,e)),w--,N(Wu)},R=function(e){var t=new we,n=!1,r=D.read(e,S,function(n){var r={i:e,c:n.length,d:n};t.resolve(r)},function(e){t.reject(e)});return c(t,{cancel:function(){r&&(r.abort(),n=!0,r=null)}})},I=function(e,t,n,r){if(e=m(e),t=m(t),isNaN(e))throw{message:"'index' must be a valid number.",index:e};if(isNaN(t))throw{message:"'count' must be a valid number.",count:t};if(i)throw i;e=Math.max(e,0);var a=De(),o=[],u=!1,s=null,l=function(e,i){u||(t>=0&&o.length>=t?a.resolve(o):s=O.readRange(e,i).then(function(u){for(var s=0,c=u.length;c>s&&(0>t||o.length<t);s++){var f=r?c-s-1:s,d=u[f];if(n(d)){var p={index:e+f,item:d};r?o.unshift(p):o.push(p)}}if(!r&&u.length<i||r&&0>=e)a.resolve(o);else{var m=r?Math.max(e-S,0):e+i;l(m,S)}},function(e){a.reject(e)}))},f=$u(e,e,S),d=r?f.i:e,p=r?e-f.i+1:f.i+f.c-e;return l(d,p),c(a.promise(),{cancel:function(){s&&s.cancel(),u=!0}})},M=function(){O.onidle&&0===w&&O.onidle()},L=function(e){if(!v&&0!==x&&!T&&(0===d.length||d[0]&&-1!==d[0].c)){var t=new ds(z,null,!0,e,x,null,x);U(t,d)}},U=function(e,t){e.oncomplete=P,t.push(e),w++,e.run(o)},j=function(e){var n=!1,r=c(new we,{cancel:function(){n=!0}}),i=q(r,"Read page from store failure");return k.contains(e,function(a){return n?void 0:a?void k.read(e,function(e,i){n||r.resolve(i!==t,i)},i):void r.resolve(!1)},i),r},F=function(e,t){var n=!1,r=c(new we,{cancel:function(){n=!0}}),i=q(r,"Save page to store failure"),a=function(){r.resolve(!0)};if(t.c>0){var o=Xu(t);T=h>=0&&p+o>h,T?a():k.addOrUpdate(e,t,function(){B(t,o),V(a,i)},i)}else B(t,0),V(a,i);return r},V=function(e,t){var n={actualCacheSize:p,allDataLocal:v,cacheSize:h,collectionCount:y,highestSavedPage:b,highestSavedPageSize:_,pageSize:S,sourceId:D.identifier,version:C};k.addOrUpdate("__settings",n,e,t)},q=function(e){return function(){e.resolve(!1)}},B=function(e,t){var n=e.c,r=e.i;0===n?b===r-S&&(y=b+_):(b=Math.max(b,r),b===r&&(_=n),p+=t,S>n&&!y&&(y=r+n)),v||y!==b+_||(v=!0)},H=function(e,t,n,r){var i=e.canceled&&t!==rs;return i&&t===ns&&r&&r.cancel&&r.cancel(),i},J=function(e,t,n){var r=e.transition;if(n!==Ku)return N(Ku),!0;switch(t){case as:r(us);break;case rs:M();break;case us:A().then(function(){e.complete()}),e.wait();break;default:return!1}return!0},z=function(e,t,n,r){if(!H(e,t,n,r)){var i=e.transition;if(n!==es)return n===Ku?t!==ns&&e.cancel():n===Wu&&N(es),!0;switch(t){case as:d[0]===e&&i(cs,e.i);break;case ss:var a=e.pending;a>0&&(a-=Math.min(a,r.c)),v||0===a||r.c<S||T?e.complete():(e.pending=a,i(cs,r.i+S));break;default:return Q(e,t,n,r,!0)}}return!0},G=function(e,t,n,r){if(!H(e,t,n,r)){var i=e.transition;if(n!==Zu&&t!==as)return n===Ku?t!==as&&e.cancel():n!==ts&&N(Zu),!0;switch(t){case as:if(n===Wu||n===es)if(N(Zu),e.c>0){var a=$u(e.i,e.c,S);i(cs,a.i)}else i(ss,e);break;case ss:Bu(e,r);var o=e.d.length;e.c===o||r.c<S?(u.cacheReads++,L(r.i+r.c),e.complete()):i(cs,r.i+S);break;default:return Q(e,t,n,r,!1)}}return!0},Q=function(e,t,n,r,i){var a,o=e.error,s=e.transition,c=e.wait;switch(t){case rs:M();break;case cs:a=j(r).then(function(t,n){e.canceled||(t?s(ss,n):s(fs,r))});break;case fs:a=R(r).then(function(t){e.canceled||(i?u.prefetches++:u.netReads++,s(ls,t))},o);break;case ls:n!==ts&&(N(ts),a=F(r.i,r).then(function(t){e.canceled||(!t&&i&&(e.pending=0),s(ss,r)),N(Wu)}));break;default:return!1}return a&&(e.canceled?a.cancel():e.s===t&&c(a)),!0};return k.read("__settings",function(e,t){if(a(t)){var n=t.version;if(!n||0!==n.indexOf("1."))return void E("Unsupported cache store version "+n)();S!==t.pageSize||D.identifier!==t.sourceId?A().then(function(){N(Wu)},E("Unable to clear store during initialization")):(p=t.actualCacheSize,v=t.allDataLocal,h=t.cacheSize,y=t.collectionCount,b=t.highestSavedPage,_=t.highestSavedPageSize,C=n,N(Wu))}else V(function(){N(Wu)},E("Unable to write settings during initialization."))},E("Unable to read settings from store.")),O};n.createDataCache=function(e){if(zu(e.pageSize,"pageSize"),Gu(e.cacheSize,"cacheSize"),Gu(e.prefetchSize,"prefetchSize"),!a(e.name))throw{message:"Undefined or null name",options:e};if(!a(e.source))throw{message:"Undefined source",options:e};return new ps(e)}}(this);
!function(e,t){var r=function(){return t(e)};"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):breeze=r()}(this,function(e){"use strict";function t(e,t){for(var r in e)ae(e,r)&&t(r,e[r])}function r(e,t){var r=[];for(var n in e)if(ae(e,n)){var a=t?t(n,e[n]):e[n];void 0!==a&&r.push(a)}return r}function n(e,t){for(var r in e)if(ae(e,r)){var n=e[r];if(t(r,n))return{key:r,value:n}}return null}function a(e,t){var r=i(e,t);return null==r?!0:!(!r.writable&&!r.set)}function i(e,t){if(!oe)return null;if(e.hasOwnProperty(t))return Object.getOwnPropertyDescriptor(e,t);var r=Object.getPrototypeOf(e);return null==r?null:i(r,t)}function o(e,t){return function(r){return r[e]===t}}function s(e){return function(t){return t[e]}}function u(e){var t=[];for(var r in e)ae(e,r)&&t.push(e[r]);return t}function p(e,t,r){if(!t)return e;if(r)r.forEach(function(r){e[r]=t[r]});else for(var n in t)ae(t,n)&&(e[n]=t[n]);return e}function c(e,t){for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e}function l(e,t){return t.defaultInstance=c(new t(e),t.defaultInstance),e}function y(e,t,r){r=r||{};for(var n in t){var a=n.split(","),i=t[n];a.some(function(t){if(!(t in e))return!1;var n=e[t];return"function"==typeof n?!1:n==i?!0:Array.isArray(n)&&0===n.length?!0:("function"==typeof i?n=i(n):"object"==typeof n&&n&&n.parentEnum&&(n=n.name),void 0===n?!0:(r[a[0]]=n,!0))})}return r}function f(e,t){if(e!==Object(e))return e;if(!e._$visited){if(e.toJSON){var r=e.toJSON();if(r!==Object(r))return r;if(r!==e)return f(r);e=r}e._$visited=!0;var n;if(e instanceof Array)n=e.map(function(e){return f(e,t)});else if("function"==typeof e)n=void 0;else{n={};for(var a in e)if("_$visited"!==a){var i=e[a];t&&(i=t(a,i),void 0===i)||(i=f(i),void 0!==i&&(n[a]=i))}}return delete e._$visited,n}}function h(e,t){var r={},n=e.length;return t.forEach(function(t){for(var a=0;n>a;a++){var i=e[a];if(i){var o=i[t];if(void 0!==o){r[t]=o;break}}}}),r}function d(e){return null==e?[]:Array.isArray(e)?e:[e]}function m(e,t,r){if(r=null==r?!0:r,null==e)return e;var n;return Array.isArray(e)?(n=[],e.forEach(function(e,a){var i=t(e,a);(null!=i||r)&&(n[a]=i)})):n=t(e),n}function v(e,t){for(var r=0,n=e.length;n>r;r++)if(t(e[r]))return e[r];return null}function g(e,t){for(var r=0,n=e.length;n>r;r++)if(t(e[r]))return r;return-1}function E(e,t){var r=e.indexOf(t);-1===r&&e.push(t)}function w(e,t,r){for(var n=V(t)?t:void 0,a=e.length-1,i=!1,o=a;o>=0;o--)if((n?n(e[o]):e[o]===t)&&(e.splice(o,1),i=!0,!r))return!0;return i}function S(e,t,r){for(var n=[],a=Math.min(e.length,t.length),i=0;a>i;++i)n.push(r(e[i],t[i]));return n}function T(e,t,r){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(Array.isArray(e[n])){if(!T(e[n],t[n]))return!1}else if(r){if(!r(e[n],t[n]))return!1}else if(e[n]!==t[n])return!1;return!0}function P(e,t){var r=e[t];return r||(r=[],e[t]=r),r}function b(e,t){for(var r=e.split(";"),n=0,a=r.length;a>n;n++){var i=_(r[n]);if(i)return i}if(t)throw new Error("Unable to initialize "+e+".  "+t)}function _(t){var r=e.window;if(r){var n=r[t];if(n)return n;var a=r.require;if(a){if(a.defined)return a.defined(t)?a(t):void 0;try{return a(t)}catch(i){return}}}}function N(e,t,r,n){var a=e[t];if(r===a)return n();e[t]=r;try{return n()}finally{void 0===a?delete e[t]:e[t]=a}}function O(e,t,r){var n;try{return n=e(),r()}catch(a){throw"object"==typeof n&&(n.error=a),a}finally{t(n)}}function A(e){return function(){for(var t=ie(arguments),r="",n=t.length,a=null;n--;)a=t[n],r+=a===Object(a)?JSON.stringify(a):a,e.memoize||(e.memoize={});return r in e.memoize?e.memoize[r]:e.memoize[r]=e.apply(this,t)}}function C(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)})}function x(e){if("string"!=typeof e)throw new Error("Invalid ISO8601 duration '"+e+"'");var t=/^P((\d+Y)?(\d+M)?(\d+D)?)?(T(\d+H)?(\d+M)?(\d+S)?)?$/.exec(e);if(!t)throw new Error("Invalid ISO8601 duration '"+e+"'");for(var r=[2,3,4,6,7,8],n=[31104e3,2592e3,86400,3600,60,1],a=0,i=0;6>i;i++){var o=t[r[i]];o=o?+o.replace(/[A-Za-z]+/g,""):0,a+=o*n[i]}return a}function F(){}function M(e){return e}function D(e){return null===e?"null":void 0===e?"undefined":Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function k(e){return"date"===D(e)&&!isNaN(e.getTime())}function I(e){var t=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/;return"string"==typeof e&&t.test(e)}function V(e){return"function"===D(e)}function j(e){return"string"==typeof e}function R(e){return"object"==typeof e}function K(e){return"string"==typeof e&&/[a-fA-F\d]{8}-(?:[a-fA-F\d]{4}-){3}[a-fA-F\d]{12}/.test(e)}function q(e){return"string"==typeof e&&/^(-|)?P[T]?[\d\.,\-]+[YMDTHS]/.test(e)}function z(e){if(null===e||void 0===e)return!0;for(var t in e)if(ae(e,t))return!1;return!0}function B(e){return!isNaN(parseFloat(e))&&isFinite(e)}function U(e,t){return e?""==t||null==t?!0:0===e.indexOf(t,0):!1}function L(e,t){return e?""==t||null==t?!0:-1!==e.indexOf(t,e.length-t.length):!1}function $(e){var t=arguments,r=RegExp("%([1-"+(arguments.length-1)+"])","g");return e.replace(r,function(e,r){return t[r]})}function G(e){var t=Function.call;return function(){return t.apply(e,arguments)}}function J(e,t,r){void 0===t&&(t=null);var n=r(),a=e.dataType;if(a&&a.parse&&(t=Array.isArray(t)&&!e.isScalar?t.map(function(e){return a.parse(e,typeof e)}):a.parse(t,typeof t)),!(t===n||a&&a.isDate&&t&&n&&t.valueOf()===n.valueOf())){var i,o=this.entityAspect;if(o)i=e.name;else{var s=this.complexAspect;if(!s)return void r(t);o=s.getEntityAspect(),i=s.getPropertyPath(e.name)}var u=o._inProcess=o._inProcess||[];if(!(u.indexOf(e)>=0)){u.push(e);try{var p={parent:this,property:e,newValue:t,oldValue:n,propertyName:i,entityAspect:o};e.isComplexProperty?H(p,r):e.isDataProperty?Q(p,r):Z(p,r),W(p)}finally{u.pop()}}}}function Q(e,t){var r=e.parent,n=e.property,a=e.entityAspect,i=e.oldValue,o=e.newValue,s=a.entityManager,u=r.entityType;if(!n.isScalar)throw new Error("Nonscalar data properties are readonly - items may be added or removed but the collection may not be changed.");if(a.entityState.isUnchangedOrModified()){var p=n.name,c=r.entityAspect||r.complexAspect;void 0===c.originalValues[p]&&(c.originalValues[p]=void 0!==i?i:n.defaultValue)}if(n.isPartOfKey&&s&&!s.isLoading){var l=u.keyProperties,y=l.map(function(e){return e===n?o:r.getProperty(e.name)}),f=new Pe(u,y);if(s.findEntityByKey(f))throw new Error("An entity with this key is already in the cache: "+f.toString());var h=r.entityAspect.getKey(),d=s._findEntityGroup(u);d._replaceKey(h,f)}var m=n.relatedNavigationProperty;if(m&&s)if(null!=o){var v=new Pe(m.entityType,[o]),g=s.findEntityByKey(v);g?r.setProperty(m.name,g):(s._unattachedChildrenMap.addChild(v,m,r),r.setProperty(m.name,null))}else r.setProperty(m.name,null);else if(n.inverseNavigationProperty&&s&&!s._inKeyFixup){var E=n.inverseNavigationProperty;if(null!=i&&(v=new Pe(E.parentType,[i]),g=s.findEntityByKey(v)))if(E.isScalar)g.setProperty(E.name,null);else{var w=g.getProperty(E.name);w.splice(w.indexOf(r),1)}null!=o&&(v=new Pe(E.parentType,[o]),g=s.findEntityByKey(v),g?E.isScalar?g.setProperty(E.name,r):g.getProperty(E.name).push(r):s._unattachedChildrenMap.addChild(v,E,r))}if(t(o),Y(e),n.isPartOfKey){var S=u.keyProperties.indexOf(n);u.navigationProperties.forEach(function(e){var t=e.inverse,n=t?t.foreignKeyNames:e.invForeignKeyNames;if(0!==n.length){var a=r.getProperty(e.name),i=n[S];if(e.isScalar){if(!a)return;a.setProperty(i,o)}else a.forEach(function(e){e.setProperty(i,o)})}}),s&&u.inverseForeignKeyProperties.forEach(function(e){null==e.relatedNavigationProperty.inverse&&s._updateFkVal(e,i,o)}),a.getKey(!0)}}function H(e,t){var r=e.property,n=e.oldValue,a=e.newValue,i=r.dataType;if(!r.isScalar)throw new Error($("You cannot set the non-scalar complex property: '%1' on the type: '%2'.Instead get the property and use array functions like 'push' or 'splice' to change its contents.",r.name,r.parentType.name));if(!a)throw new Error($("You cannot set the '%1' property to null because it's datatype is the ComplexType: '%2'",r.name,r.dataType.name));if(!n){var o=i.getCtor();n=new o,t(n)}i.dataProperties.forEach(function(e){var t=e.name,r=a.getProperty(t);n.setProperty(t,r)})}function Z(e,t){var r=e.parent,n=e.property,a=e.entityAspect,i=e.oldValue,o=e.newValue;if(!n.isScalar)throw new Error("Nonscalar navigation properties are readonly - entities can be added or removed but the collection may not be changed.");var s=a.entityManager,u=n.inverse;if(null!=o){var p=o.entityAspect;if(s){if(p.entityState.isDetached())s.isLoading||s.attachEntity(o,be.Added);else if(p.entityManager!==s)throw new Error("An Entity cannot be attached to an entity in another EntityManager. One of the two entities must be detached first.")}else p&&p.entityManager&&(s=p.entityManager,s.isLoading||s.attachEntity(a.entity,be.Added))}if(u)if(u.isScalar)null!=i&&i.setProperty(u.name,null),null!=o&&o.setProperty(u.name,r);else{if(null!=i){var c=i.getProperty(u.name),l=c.indexOf(r);-1!==l&&c.splice(l,1)}if(null!=o){var y=o.getProperty(u.name);y.push(r)}}else if(n.invForeignKeyNames&&s&&!s._inKeyFixup){var f=n.invForeignKeyNames;if(null!=o){var h=r.entityAspect.getKey().values;f.forEach(function(e,t){o.setProperty(e,h[t])})}else null!=i&&f.forEach(function(e){var t=i.entityType.getProperty(e);t.isPartOfKey||i.setProperty(e,null)})}if(t(o),Y(e),n.relatedDataProperties){var d=a.entityState;if(null==o&&(d.isDetached()||i.entityAspect.entityState.isDetached()))return;if(d.isDeleted())return;var m=n.entityType.keyProperties;m.forEach(function(e,t){var a=n.relatedDataProperties[t];if(o||!a.isPartOfKey){var i=o?o.getProperty(e.name):a.defaultValue;r.setProperty(a.name,i)}})}}function W(e){var t=e.entityAspect,r=t.entityManager,n=t.entity,a={entity:n,parent:e.parent,property:e.property,propertyName:e.propertyName,oldValue:e.oldValue,newValue:e.newValue};r?r.isLoading||r.isRejectingChanges||(t.propertyChanged.publish(a),r.entityChanged.publish({entityAction:we.PropertyChange,entity:n,args:a})):t.propertyChanged.publish(a)}function Y(e){var t=e.entityAspect,r=t.entityManager;if(null!=r&&!r.isLoading){var n=e.property;t.entityState.isUnchanged()&&!n.isUnmapped&&t.setModified(),r.validationOptions.validateOnPropertyChange&&t._validateProperty(e.newValue,{entity:t.entity,property:n,propertyName:e.propertyName,oldValue:e.oldValue})}}function X(e){return e.indexOf(":#")>=0}function ee(e,t){return e+":#"+t}function te(e,t,r){if(t)if(Array.isArray(t))t.forEach(e._addPropertyCore.bind(e));else{if("object"!=typeof t)throw new Error("The 'dataProperties' or 'navigationProperties' values must be either an array of data/nav properties or an object where each property defines a data/nav property");for(var n in t)if(ae(t,n)){var a=t[n];a.name=n;var i=new r(a);e._addPropertyCore(i)}}}function re(e,t){var r=Array.isArray(t)?t:t.split(".");if(1===r.length)return e.getProperty(t);var n=e;return r.some(function(e){return n=n.getProperty(e),null==n}),n}var ne={version:"1.5.3",metadataVersion:"1.0.5"},ae=G(Object.prototype.hasOwnProperty),ie=G(Array.prototype.slice),oe=function(){try{return!(!Object.getPrototypeOf||!Object.defineProperty({},"x",{}))}catch(e){return!1}}();Object.create||(Object.create=function(e){var t=function(){};return t.prototype=e,new t});var se={};se.__isES5Supported=oe,se.objectForEach=t,se.extend=p,se.propEq=o,se.pluck=s,se.arrayEquals=T,se.arrayFirst=v,se.arrayIndexOf=g,se.arrayRemoveItem=w,se.arrayZip=S,se.requireLib=b,se.using=N,se.memoize=A,se.getUuid=C,se.durationToSeconds=x,se.isDate=k,se.isGuid=K,se.isDuration=q,se.isFunction=V,se.isEmpty=z,se.isNumeric=B,se.stringStartsWith=U,se.stringEndsWith=L,se.formatString=$,se.getPropertyDescriptor=i,se.toJSONSafe=f,se.parent=ne,ne.core=se;var ue=function(){function e(e,t){return null==t?!1:"string"==typeof t&&t.length>0}function t(e,t){return null==t?!1:typeof t===e.typeName?!0:!1}function r(e,t){return null==t?!1:t instanceof e.type}function n(e,t){return null==t?!1:void 0!==t[e.propertyName]}function a(e,t){return null==t?!1:e.enumType.contains(t)}function i(e,t){return e.allowNull?void 0!==t:null!=t}function o(e,t){if(null==t)return!0;var r=e.prevContext;return r?r.fn(r,t):!0}function s(e,t){var r=e.prevContext,n=r?" or it "+l(r,t):"";return"is optional"+n}function u(e,t){if(!Array.isArray(t))return!1;if(e.mustNotBeEmpty&&0===t.length)return!1;var r=e.prevContext;return r?t.every(function(e){return r.fn(r,e)}):!0}function c(e,t){var r=e.mustNotBeEmpty?"a nonEmpty array":"an array",n=e.prevContext,a=n?" where each element "+l(n,t):"";return" must be "+r+a}function l(e,t){var r=e.msg;return"function"==typeof r&&(r=r(e,t)),r}function y(e,t){if(e._context){for(var r=e._context;null!=r.prevContext;)r=r.prevContext;if(null===r.prevContext)return r.prevContext=t,e;if(null!=t.prevContext)throw new Error("Illegal construction - use 'or' to combine checks");t.prevContext=e._context}return f(e,t)}function f(e,t){return e._contexts[e._contexts.length-1]=t,e._context=t,e}function h(e){var t=e._contexts;return null==t[t.length-1]&&t.pop(),0===t.length?void 0:t.some(function(t){return t.fn(t,e.v)})}function d(e,t){throw new Error($("Error configuring an instance of '%1'. %2",e&&e._$typeName||"object",t))}var m=function(e,t){this.v=e,this.name=t,this._contexts=[null]},v=m.prototype;return v.isObject=function(){return this.isTypeOf("object")},v.isBoolean=function(){return this.isTypeOf("boolean")},v.isString=function(){return this.isTypeOf("string")},v.isNonEmptyString=function(){return y(this,{fn:e,msg:"must be a nonEmpty string"})},v.isNumber=function(){return this.isTypeOf("number")},v.isFunction=function(){return this.isTypeOf("function")},v.isTypeOf=function(e){return y(this,{fn:t,typeName:e,msg:$("must be a '%1'",e)})},v.isInstanceOf=function(e,t){return t=t||e.prototype._$typeName,y(this,{fn:r,type:e,typeName:t,msg:$("must be an instance of '%1'",t)})},v.hasProperty=function(e){return y(this,{fn:n,propertyName:e,msg:$("must have a '%1' property ",e)})},v.isEnumOf=function(e){return y(this,{fn:a,enumType:e,msg:$("must be an instance of the '%1' enumeration",e.name)})},v.isRequired=function(e){return y(this,{fn:i,allowNull:e,msg:"is required"})},v.isOptional=function(){var e={fn:o,prevContext:null,msg:s};return y(this,e)},v.isNonEmptyArray=function(){return this.isArray(!0)},v.isArray=function(e){var t={fn:u,mustNotBeEmpty:e,prevContext:null,msg:c};return y(this,t)},v.or=function(){return this._contexts.push(null),this._context=null,this},v.check=function(e){var t=h(this);if(void 0!==t){if(!t)throw new Error(this.getMessage());return void 0!==this.v?this.v:e}},v._addContext=function(e){return y(this,e)},v.getMessage=function(){var e=this,t=this._contexts.map(function(t){return l(t,e.v)}).join(", or it ");return $(this.MESSAGE_PREFIX,this.name)+" "+t},v.withDefault=function(e){return this.defaultValue=e,this},v.whereParam=function(e){return this.parent.whereParam(e)},v.applyAll=function(e,t){var r=e._$typeName,n=r&&this.parent.config._$typeName===r,a=p({},this.parent.config);if(this.parent.params.forEach(function(r){n||delete a[r.name];try{r.check()}catch(i){d(e,i.message)}!t&&r._applyOne(e)}),!n)for(var i in a)void 0!==a[i]&&d(e,$("Unknown property: '%1'.",i))},v._applyOne=function(e){void 0!==this.v?e[this.name]=this.v:void 0!==this.defaultValue&&(e[this.name]=this.defaultValue)},v.MESSAGE_PREFIX="The '%1' parameter ",m}(),pe=function(e,t){return new ue(e,t)},ce=function(){var e=function(e){if("object"!=typeof e)throw new Error("Configuration parameter should be an object, instead it is a: "+typeof e);this.config=e,this.params=[]},t=e.prototype;return t.whereParam=function(e){var t=new ue(this.config[e],e);return t.parent=this,this.params.push(t),t},e}(),le=function(e){return new ce(e)};se.Param=ue,se.assertParam=pe,se.assertConfig=le;var ye=function(){function e(){}var t=function(t,r){this.name=t;var n=new e(r);n.parentEnum=this,this._symbolPrototype=n,r&&Object.keys(r).forEach(function(e){n[e]=r[e]})},r=t.prototype;return t.isSymbol=function(t){return t instanceof e},r.fromName=function(e){return this[e]},r.addSymbol=function(e){var t=Object.create(this._symbolPrototype);return e&&Object.keys(e).forEach(function(r){t[r]=e[r]}),setTimeout(function(){t.getName()},0),t},r.resolveSymbols=function(){this.getSymbols().forEach(function(e){return e.getName()})},r.getSymbols=function(){return this.getNames().map(function(e){return this[e]},this)},r.getNames=function(){var e=[];for(var t in this)this.hasOwnProperty(t)&&("name"===t||"_"===t.substr(0,1)||V(this[t])||e.push(t));return e},r.contains=function(t){return t instanceof e?this[t.getName()]===t:!1},e.prototype.getName=function(){if(!this.name){var e=this;this.name=v(this.parentEnum.getNames(),function(t){return e.parentEnum[t]===e})}return this.name},e.prototype.toString=function(){return this.getName()},e.prototype.toJSON=function(){return{_$typeName:this.parentEnum.name,name:this.name}},t}();se.Enum=ye;var fe=function(){function e(e,r,n){var a=e._subscribers;return a?void a.forEach(function(a){try{a.callback(r)}catch(i){i.context="unable to publish on topic: "+e.name,n?n(i):e._defaultErrorCallback?e._defaultErrorCallback(i):t(i)}}):!0}function t(){}var r={},n=1,a=function(e,t,n){pe(e,"eventName").isNonEmptyString().check(),pe(t,"publisher").isObject().check(),this.name=e,r[e]=!0,this.publisher=t,n&&(this._defaultErrorCallback=n)},i=a.prototype;return i.publish=function(t,r,n){return a._isEnabled(this.name,this.publisher)?(r===!0?setTimeout(e,0,this,t,n):e(this,t,n),!0):!1},i.publishAsync=function(e,t){this.publish(e,!0,t)},i.subscribe=function(e){this._subscribers||(this._subscribers=[]);var t=n;return this._subscribers.push({unsubKey:t,callback:e}),++n,t},i.unsubscribe=function(e){if(!this._subscribers)return!1;var t=this._subscribers,r=g(t,function(t){return t.unsubKey===e});return-1!==r?(t.splice(r,1),0===t.length&&(this._subscribers=null),!0):!1},i.clear=function(){this._subscribers=null},a.bubbleEvent=function(e,t){e._getEventParent=t},a.enable=function(e,t,r){pe(e,"eventName").isNonEmptyString().check(),pe(t,"obj").isObject().check(),pe(r,"isEnabled").isBoolean().isOptional().or().isFunction().check(),t._$eventMap||(t._$eventMap={}),t._$eventMap[e]=r},a.isEnabled=function(e,t){if(pe(e,"eventName").isNonEmptyString().check(),pe(t,"obj").isObject().check(),void 0===t._getEventParent)throw new Error("This object does not support event enabling/disabling");return a._isEnabled(t,e)},a._isEnabled=function(e,t){var r=null,n=t._$eventMap;if(n&&(r=n[e]),null!=r)return"function"==typeof r?r(t):!!r;var i=t._getEventParent&&t._getEventParent();return i?a._isEnabled(e,i):!0},a}();se.Event=fe;var he=function(){function e(e,t,r){var n=t.defaultInstance;return n||(n=new t.ctor,t.defaultInstance=n,n._$impl=t),n.initialize(),r&&(e.defaultInstance=n),a.interfaceInitialized.publish({interfaceName:e.name,instance:n,isDefault:!0}),n.checkForRecomposition&&a.interfaceInitialized.subscribe(function(e){n.checkForRecomposition(e)}),n}function t(e){var t=e.toLowerCase(),r=n(a.interfaceRegistry||{},function(e){return e.toLowerCase()===t});if(!r)throw new Error("Unknown interface name: "+e);return r.value}var a={};a.functionRegistry={},a.typeRegistry={},a.objectRegistry={},a.interfaceInitialized=new fe("interfaceInitialized",a);var i=function(e){this.name=e,this.defaultInstance=null,this._implMap={}};return i.prototype.registerCtor=function(e,t){this._implMap[e.toLowerCase()]={ctor:t,defaultInstance:null}},i.prototype.getImpl=function(e){return this._implMap[e.toLowerCase()]},i.prototype.getFirstImpl=function(){var e=n(this._implMap,function(){return!0});return e?e.value:null},a.interfaceRegistry={ajax:new i("ajax"),modelLibrary:new i("modelLibrary"),dataService:new i("dataService"),uriBuilder:new i("uriBuilder")},a.interfaceRegistry.modelLibrary.getDefaultInstance=function(){if(!this.defaultInstance)throw new Error("Unable to locate the default implementation of the '"+this.name+"' interface.  Possible options are 'ko', 'backingStore' or 'backbone'. See the breeze.config.initializeAdapterInstances method.");return this.defaultInstance},a.setProperties=function(e){le(e).whereParam("remoteAccessImplementation").isOptional().whereParam("trackingImplementation").isOptional().whereParam("ajaxImplementation").isOptional().applyAll(e),e.remoteAccessImplementation&&a.initializeAdapterInstance("dataService",e.remoteAccessImplementation),e.trackingImplementation&&a.initializeAdapterInstance("modelLibrary",e.trackingImplementation),e.ajaxImplementation&&a.initializeAdapterInstance("ajax",e.ajaxImplementation)},a.registerAdapter=function(e,r){pe(e,"interfaceName").isNonEmptyString().check(),pe(r,"adapterCtor").isFunction().check();var n=new r,a=n.name;if(!a)throw new Error("Unable to locate a 'name' property on the constructor passed into the 'registerAdapter' call.");var i=t(e);i.registerCtor(a,r)},a.getAdapter=function(e,r){var n=t(e);if(r){var a=n.getImpl(r);return a?a.ctor:null}return n.defaultInstance?n.defaultInstance._$impl.ctor:null},a.initializeAdapterInstances=function(e){return le(e).whereParam("dataService").isOptional().whereParam("modelLibrary").isOptional().whereParam("ajax").isOptional().whereParam("uriBuilder").isOptional().applyAll(this,!1),r(e,a.initializeAdapterInstance)},a.initializeAdapterInstance=function(r,n,a){a=void 0===a?!0:a,pe(r,"interfaceName").isNonEmptyString().check(),pe(n,"adapterName").isNonEmptyString().check(),pe(a,"isDefault").isBoolean().check();var i=t(r),o=i.getImpl(n);if(!o)throw new Error("Unregistered adapter.  Interface: "+r+" AdapterName: "+n);return e(i,o,a)},a.getAdapterInstance=function(r,n){var a,i=t(r),o=null==n||""==n;if(o){if(i.defaultInstance)return i.defaultInstance;a=i.getFirstImpl()}else a=i.getImpl(n);return a?a.defaultInstance?a.defaultInstance:e(i,a,o):null},a.registerFunction=function(e,t){pe(e,"fn").isFunction().check(),pe(t,"fnName").isString().check(),e.prototype._$fnName=t,a.functionRegistry[t]=e},a.getRegisteredFunction=function(e){return a.functionRegistry[e]},a._storeObject=function(e,t,r){var n=("string"==typeof t?t:t.prototype._$typeName)+"."+r;a.objectRegistry[n]=e},a._fetchObject=function(e,t){if(t){var r=("string"==typeof e?e:e.prototype._$typeName)+"."+t,n=a.objectRegistry[r];if(!n)throw new Error("Unable to locate a registered object by the name: "+r);return n}},a.registerType=function(e,t){pe(e,"ctor").isFunction().check(),pe(t,"typeName").isString().check(),e.prototype._$typeName=t,a.typeRegistry[t]=e},a.stringifyPad="",a}(),de=he.interfaceRegistry.modelLibrary;se.config=he,ne.config=he;var me=function(){function e(e){var t=e.getEntityAspect();t.entityState.isUnchanged()&&t.setModified(),t.entityState.isModified()&&!e._origValues&&(e._origValues=e.slice(0))}function t(e,t){e._processAdds(t),n(e,"arrayChanged",{array:e,added:t})}function r(e,t){e._processRemoves(t),n(e,"arrayChanged",{array:e,removed:t})}function n(e,t,r){var n=e._getPendingPubs();n?e._pendingArgs?a(e._pendingArgs,r):(e._pendingArgs=r,n.push(function(){e[t].publish(e._pendingArgs),e._pendingArgs=null})):e[t].publish(r)}function a(e,t){for(var r in t)if("array"!==r&&e.hasOwnProperty(r)){var n=t[r],a=e[r];if(a){if(!Array.isArray(a))throw new Error("Cannot combine non array args");Array.prototype.push.apply(a,n)}else e[r]=n}}function i(e,t,r){e.parent=t,e.parentProperty=r}var o={};return o.push=function(){if(this._inProgress)return-1;var e=this._getGoodAdds(ie(arguments));if(!e.length)return this.length;this._beforeChange();var r=Array.prototype.push.apply(this,e);return t(this,e),r},o._push=function(){if(this._inProgress)return-1;var e=ie(arguments);this._beforeChange();var r=Array.prototype.push.apply(this,e);return t(this,e),r},o.unshift=function(){var e=this._getGoodAdds(ie(arguments));if(!e.length)return this.length;this._beforeChange();var r=Array.prototype.unshift.apply(this,e);return t(this,ie(e)),r},o.pop=function(){this._beforeChange();var e=Array.prototype.pop.apply(this);return r(this,[e]),e},o.shift=function(){this._beforeChange();var e=Array.prototype.shift.apply(this);return r(this,[e]),e},o.splice=function(){var e=this._getGoodAdds(ie(arguments,2)),n=ie(arguments,0,2).concat(e);this._beforeChange();var a=Array.prototype.splice.apply(this,n);return r(this,a),e.length&&t(this,e),a},o.getEntityAspect=function(){return this.parent.entityAspect||this.parent.complexAspect.getEntityAspect()},o._getEventParent=function(){return this.getEntityAspect()},o._getPendingPubs=function(){var e=this.getEntityAspect().entityManager;return e&&e._pendingPubs},o._beforeChange=function(){},{mixin:o,publish:n,updateEntityState:e,initializeParent:i}}(),ve=function(){function e(e,t,r,n,a){for(n=+e[t=e.length-1],a=0;t--;)r=+e[t],n+=++a%2?2*r%10+(r>4):r;return!(n%10)}function r(e,t,r,n){r&&(f.messageTemplates[e]=r);var a="string"==typeof t?new RegExp(t):t,i=function(e){return null==e||""===e?!0:"string"!=typeof e?!1:a.test(e)};return new f(e,i,n)}function n(e,t,r){return t?e.replace(/%([^%]+)%/g,function(e,n){var a;return a=r?t.hasOwnProperty(n)?t[n]:"":t[n],null!=a?V(a)?a(t):a:""}):e}function a(e,t,r,n){var a=n&&n.messageTemplate||f.messageTemplates[e];return a||(f.messageTemplates[e]=$("'%displayName%' must be an integer between the values of %1 and %2",t,r)),function(){var a=function(e,n){return null==e?!0:("string"==typeof e&&n&&n.allowString&&(e=parseInt(e,0)),"number"!=typeof e||isNaN(e)||Math.floor(e)!==e?!1:null!=t&&t>e?!1:null!=r&&e>r?!1:!0)};return new f(e,a,n)}}var i=-32768,o=32767,s=-2147483648,u=2147483647,c=0,l=255,y={displayName:function(e){return e.property?e.property.resolveProperty("displayName")||e.propertyName||e.property.name:"Value"}},f=function(e,t,r){this._baseContext=r||{},this._baseContext.name=e,r=p(Object.create(y),this._baseContext),r.messageTemplate=r.messageTemplate||f.messageTemplates[e],this.name=e,this.valFn=t,this.context=r},h=f.prototype;return h._$typeName="Validator",h.validate=function(e,t){var r;r=t?p(Object.create(this.context),t):this.context,this.currentContext=r;try{return this.valFn(e,r)?null:(r.value=e,new ge(this,r,this.getMessage()))}catch(n){return new ge(this,r,"Exception occured while executing this validator: "+this.name)}},h.getMessage=function(){try{var e=this.currentContext,t=e.message;return t?"function"==typeof t?t(e):t:e.messageTemplate?n(e.messageTemplate,e):"invalid value: "+(this.name||"{unnamed validator}")}catch(r){return"Unable to format error message"+r.toString()}},h.toJSON=function(){return this._baseContext},f.fromJSON=function(e){if(Array.isArray(e))return e.map(function(e){return f.fromJSON(e)});var t="Validator."+e.name,r=he.getRegisteredFunction(t);if(!r)throw new Error("Unable to locate a validator named:"+e.name);return r(e)},f.register=function(e){he.registerFunction(function(){return e},"Validator."+e.name)},f.registerFactory=function(e,t){he.registerFunction(e,"Validator."+t)},f.messageTemplates={bool:"'%displayName%' must be a 'true' or 'false' value",creditCard:"The %displayName% is not a valid credit card number",date:"'%displayName%' must be a date",duration:"'%displayName%' must be a ISO8601 duration string, such as 'P3H24M60S'",emailAddress:"The %displayName% '%value%' is not a valid email address",guid:"'%displayName%' must be a GUID",integer:"'%displayName%' must be an integer",integerRange:"'%displayName%' must be an integer between the values of %minValue% and %maxValue%",maxLength:"'%displayName%' must be a string with %maxLength% characters or less",number:"'%displayName%' must be a number",phone:"The %displayName% '%value%' is not a valid phone number",regularExpression:"The %displayName% '%value%' does not match '%expression%'",required:"'%displayName%' is required",string:"'%displayName%' must be a string",stringLength:"'%displayName%' must be a string with between %minLength% and %maxLength% characters",url:"The %displayName% '%value%' is not a valid url"},f.required=function(e){var t=function(e,t){return"string"==typeof e?t&&t.allowEmptyStrings?!0:e.length>0:null!=e};return new f("required",t,e)},f.maxLength=function(e){var t=function(e,t){return null==e?!0:"string"!=typeof e?!1:e.length<=t.maxLength};return new f("maxLength",t,e)},f.stringLength=function(e){var t=function(e,t){return null==e?!0:"string"!=typeof e?!1:null!=t.minLength&&e.length<t.minLength?!1:null!=t.maxLength&&e.length>t.maxLength?!1:!0};return new f("stringLength",t,e)},f.string=function(){var e=function(e){return null==e?!0:"string"==typeof e};return new f("string",e)},f.guid=function(){var e=function(e){return null==e?!0:K(e)};return new f("guid",e)},f.duration=function(){var e=function(e){return null==e?!0:q(e)};return new f("duration",e)},f.number=f["double"]=f.single=function(e){var t=function(e,t){return null==e?!0:("string"==typeof e&&t&&t.allowString&&(e=parseFloat(e,10)),"number"==typeof e&&!isNaN(e))};return new f("number",t,e)},f.integer=f.int64=function(e){var t=function(e,t){return null==e?!0:("string"==typeof e&&t&&t.allowString&&(e=parseInt(e,10)),"number"==typeof e&&!isNaN(e)&&Math.floor(e)===e)};return new f("integer",t,e)},f.int32=function(e){return a("int32",s,u,e)()},f.int16=function(e){return a("int16",i,o,e)()},f["byte"]=function(e){return a("byte",c,l,e)()},f.bool=function(){var e=function(e){return null==e?!0:e===!0||e===!1};return new f("bool",e)},f.none=function(){var e=function(){return!0};return new f("none",e)},f.date=function(){var e=function(e){if(null==e)return!0;if("string"!=typeof e)return k(e);try{return!isNaN(Date.parse(e))}catch(t){return!1}};return new f("date",e)},f.creditCard=function(t){function r(t){return null==t||""===t?!0:"string"!=typeof t?!1:(t=t.replace(/(\-|\s)/g,""),!t||/\D/.test(t)?!1:e(t))}return new f("creditCard",r,t)},f.regularExpression=function(e){function t(e,t){if(null==e||""===e)return!0;if("string"!=typeof e)return!1;try{var r=new RegExp(t.expression)}catch(n){throw new Error("Missing or invalid expression parameter to regExp validator")}return r.test(e)}return new f("regularExpression",t,e)},f.emailAddress=function(e){var t=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;return r("emailAddress",t,null,e)},f.phone=function(e){var t=/^((\+|(0(\d+)?[-\/.\s]?))[1-9]\d{0,2}[-\/.\s]?)?((\(\d{1,6}\)|\d{1,6})[-\/.\s]?)?(\d+[-\/.\s]?)+\d+$/;return r("phone",t,null,e)},f.url=function(e){var t=/^(https?|ftp):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|([a-zA-Z][\-a-zA-Z0-9]*)|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-fA-F]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/;
return r("url",t,null,e)},f.makeRegExpValidator=r,t(f,function(e,t){"function"==typeof t&&"fromJSON"!==e&&"register"!==e&&"registerFactory"!==e&&"makeRegExpValidator"!==e&&he.registerFunction(t,"Validator."+e)}),f}(),ge=function(){var e=function t(e,r,n,a){pe(e,"validator").isOptional().isInstanceOf(ve).check(),pe(n,"errorMessage").isNonEmptyString().check(),pe(a,"key").isOptional().isNonEmptyString().check(),this.validator=e,r=r||{},this.context=r,this.errorMessage=n,this.property=r.property,this.propertyName=r.propertyName||r.property&&r.property.name,this.key=a?a:t.getKey(e||n,this.propertyName),this.isServerError=!1};return e.getKey=function(e,t){return(e.name||e)+(t?":"+t:"")},e}();ne.Validator=ve,ne.ValidationError=ge;var Ee=function(){function e(e,t){return t&&le(t).whereParam("validateOnAttach").isBoolean().isOptional().whereParam("validateOnSave").isBoolean().isOptional().whereParam("validateOnQuery").isBoolean().isOptional().whereParam("validateOnPropertyChange").isBoolean().isOptional().applyAll(e),e}var t=function(t){e(this,t)},r=t.prototype;return r._$typeName="ValidationOptions",r.using=function(t){if(!t)return this;var r=new Ee(this);return e(r,t),r},r.setAsDefault=function(){return l(this,t)},t.defaultInstance=new t({validateOnAttach:!0,validateOnSave:!0,validateOnQuery:!1,validateOnPropertyChange:!0}),t}();ne.ValidationOptions=Ee,ne.makeComplexArray=function(){function e(e,t){return t.filter(function(t){return t.parent!==e.parent})}function t(e,t){t.forEach(function(t){if(null!=t.parent)throw new Error("The complexObject is already attached. Either clone it or remove it from its current owner");a(t,e)})}function r(e,t){t.forEach(function(t){n(t,e)})}function n(e,t){var r=e.complexAspect;return r.parent!==t.parent?null:(r.parent=null,r.parentProperty=null,r)}function a(e,t){var r=e.complexAspect;return r.parent===t.parent?null:(r.parent=t.parent,r.parentProperty=t.parentProperty,r)}function i(e,t,r){return me.initializeParent(e,t,r),e.arrayChanged=new fe("arrayChanged",e),p(e,me.mixin),p(e,o)}var o={};return o._getGoodAdds=function(t){return e(this,t)},o._beforeChange=function(){me.updateEntityState(this)},o._processAdds=function(e){t(this,e)},o._processRemoves=function(e){r(this,e)},o._rejectChanges=function(){if(this._origValues){var e=this;this.forEach(function(t){n(t,e)}),this.length=0,this._origValues.forEach(function(t){e.push(t)})}},o._acceptChanges=function(){this._origValues=null},i}();var we=function(){var e={isAttach:function(){return!!this.isAttach},isDetach:function(){return!!this.isDetach},isModification:function(){return!!this.isModification}},t=new ye("EntityAction",e);return t.Attach=t.addSymbol({isAttach:!0}),t.AttachOnQuery=t.addSymbol({isAttach:!0}),t.AttachOnImport=t.addSymbol({isAttach:!0}),t.Detach=t.addSymbol({isDetach:!0}),t.MergeOnQuery=t.addSymbol({isModification:!0}),t.MergeOnImport=t.addSymbol({isModification:!0}),t.MergeOnSave=t.addSymbol({isModification:!0}),t.PropertyChange=t.addSymbol({isModification:!0}),t.EntityStateChange=t.addSymbol(),t.AcceptChanges=t.addSymbol(),t.RejectChanges=t.addSymbol({isModification:!0}),t.Clear=t.addSymbol({isDetach:!0}),t.resolveSymbols(),t}();ne.EntityAction=we;var Se=function(){function e(t){var r=t.entityAspect||t.complexAspect,n=t.entityType||t.complexType,a=r.originalValues;for(var i in a)t.setProperty(i,a[i]);n.complexProperties.forEach(function(r){var n=t.getProperty(r.name);r.isScalar?e(n):(n._rejectChanges(),n.forEach(e))})}function r(e){var t=e.entityAspect||e.complexAspect;t.originalValues={};var n=e.entityType||e.complexType;n.complexProperties.forEach(function(t){var n=e.getProperty(t.name);t.isScalar?r(n):(n._acceptChanges(),n.forEach(r))})}function n(e,t){var r=!0,a=e.entityType||e.complexType,i=e.entityAspect||e.complexAspect,s=e.entityAspect||e.complexAspect.getEntityAspect(),u={entity:s.entity};return void 0!==t&&(u.index=t),a.getProperties().forEach(function(t){var a=e.getProperty(t.name),o=t.getAllValidators();o.length>0&&(u.property=t,u.propertyName=i.getPropertyPath(t.name),r=s._validateProperty(a,u)&&r),t.isComplexProperty&&(r=t.isScalar?n(a)&&r:a.reduce(function(e,t,r){return n(t,r)&&e},r))}),a.getAllValidators().forEach(function(t){r=o(s,t,e)&&r}),r}function a(e,t){var r=t.isDeleted();r?i(e):N(e.entityAspect.entityManager,"isLoading",!0,function(){i(e)})}function i(e){e.entityType.navigationProperties.forEach(function(t){var r=t.inverse,n=e.getProperty(t.name);if(t.isScalar){if(n){if(r)if(r.isScalar)n.setProperty(r.name,null);else{var a=n.getProperty(r.name);a.length&&w(a,e)}e.setProperty(t.name,null)}}else r&&n.slice(0).forEach(function(e){r.isScalar&&e.setProperty(r.name,null)}),n.length=0})}function o(e,t,r,n){var a=t.validate(r,n);if(a)return e._addValidationError(a),!1;var i=ge.getKey(t,n?n.propertyName:null);return e._removeValidationError(i),!0}var s=function c(e){if(null===e){var t=c._nullInstance;if(t)return t;c._nullInstance=this}else{if(void 0===e)throw new Error("The EntityAspect ctor requires an entity as its only argument.");if(e.entityAspect)return e.entityAspect}if(!(this instanceof c))return new c(e);if(this.entity=e,this.entityGroup=null,this.entityManager=null,this.entityState=be.Detached,this.isBeingSaved=!1,this.originalValues={},this.hasValidationErrors=!1,this._validationErrors={},this.validationErrorsChanged=new fe("validationErrorsChanged",this),this.propertyChanged=new fe("propertyChanged",this),null!=e){e.entityAspect=this;var r=e.entityType||e._$entityType;if(!r){var n=e.prototype._$typeName;throw new Error(n?"Metadata for this entityType has not yet been resolved: "+n:"This entity is not registered as a valid EntityType")}var a=r.getEntityCtor();de.getDefaultInstance().startTracking(e,a.prototype)}},p=s.prototype;return fe.bubbleEvent(p,function(){return this.entityManager}),p.getKey=function(e){if(e=pe(e,"forceRefresh").isBoolean().isOptional().check(!1),e||!this._entityKey){var t=this.entity.entityType,r=t.keyProperties,n=r.map(function(e){return this.entity.getProperty(e.name)},this);this._entityKey=new Pe(t,n)}return this._entityKey},p.acceptChanges=function(){this._checkOperation("acceptChanges");var e=this.entityManager;this.entityState.isDeleted()?e.detachEntity(this.entity):this.setUnchanged(),e.entityChanged.publish({entityAction:we.AcceptChanges,entity:this.entity})},p.rejectChanges=function(){this._checkOperation("rejectChanges");var t=this.entity,r=this.entityManager;N(r,"isRejectingChanges",!0,function(){e(t)}),this.entityState.isAdded()?(r.detachEntity(t),r._notifyStateChange(t,!1)):(this.entityState.isDeleted()&&this.entityManager._linkRelatedEntities(t),this.setUnchanged(),this.propertyChanged.publish({entity:t,propertyName:null}),this.entityManager.entityChanged.publish({entityAction:we.RejectChanges,entity:t}))},p.getPropertyPath=function(e){return e},p.setAdded=function(){return this.setEntityState(be.Added)},p.setUnchanged=function(){return this.setEntityState(be.Unchanged)},p.setModified=function(){return this.setEntityState(be.Modified)},p.setDeleted=function(){return this.setEntityState(be.Deleted)},p.setDetached=function(){return this.setEntityState(be.Detached)},p.setEntityState=function(e){if(this.entityState===e)return!1;if(this._checkOperation("setEntityState"),this.entityState.isDetached())throw new Error("You cannot set the 'entityState' of an entity when it is detached - except by first attaching it to an EntityManager");var t=this.entity,n=this.entityManager,i=!0;if(e===be.Unchanged)r(t),delete this.hasTempKey,i=!1;else if(e===be.Added)r(t);else if(e===be.Deleted){if(this.entityState.isAdded())return this.setEntityState(be.Detached),!0;this.entityState=be.Deleted,a(t,be.Deleted)}else if(e===be.Modified);else if(e===be.Detached){var o=this.entityGroup;if(!o)return!1;o.detachEntity(t),this.entityState=e,a(t,be.Detached),this._detach(),n.entityChanged.publish({entityAction:we.Detach,entity:t}),i=!1}return this.entityState=e,n._notifyStateChange(t,i),!0},p.loadNavigationProperty=function(e,t,r){var n=this.entity,a=n.entityType._checkNavProperty(e),i=qe.fromEntityNavigation(n,a),o=n.entityAspect.entityManager.executeQuery(i),s=this;return o.then(function(e){return s._markAsLoaded(a.name),t&&t(e),Ae.resolve(e)},function(e){return r&&r(e),Ae.reject(e)})},p.markNavigationPropertyAsLoaded=function(e){var t=this.entity.entityType._checkNavProperty(e);this._markAsLoaded(t.name)},p.isNavigationPropertyLoaded=function(e){var t=this.entity.entityType._checkNavProperty(e);return t.isScalar&&null!=this.entity.getProperty(t.name)?!0:this._loadedNps&&this._loadedNps.indexOf(t.name)>=0},p._markAsLoaded=function(e){this._loadedNps=this._loadedNps||[],E(this._loadedNps,e)},p.validateEntity=function(){var e=!0;return this._processValidationOpAndPublish(function(t){e=n(t.entity)}),e},p.validateProperty=function(e,t){var r=this.getPropertyValue(e);return r&&r.complexAspect?n(r):(t=t||{},t.entity=this.entity,"string"==typeof e?(t.property=this.entity.entityType.getProperty(e,!0),t.propertyName=e):(t.property=e,t.propertyName=e.name),this._validateProperty(r,t))},p.getValidationErrors=function(e){pe(e,"property").isOptional().isEntityProperty().or().isString().check();var t=u(this._validationErrors);if(e){var r="string"==typeof e?e:e.name;t=t.filter(function(e){return e.property&&(e.property.name===r||-1!=r.indexOf(".")&&e.propertyName==r)})}return t},p.addValidationError=function(e){pe(e,"validationError").isInstanceOf(ge).check(),this._processValidationOpAndPublish(function(t){t._addValidationError(e)})},p.removeValidationError=function(e){pe(e,"validationErrorOrKey").isString().or().isInstanceOf(ge).or().isInstanceOf(ve).check();var t="string"==typeof e?e:e.key;this._processValidationOpAndPublish(function(e){e._removeValidationError(t)})},p.clearValidationErrors=function(){this._processValidationOpAndPublish(function(e){t(e._validationErrors,function(t,r){r&&(delete e._validationErrors[t],e._pendingValidationResult.removed.push(r))}),e.hasValidationErrors=!z(e._validationErrors)})},p.getParentKey=function(e){var t=e.foreignKeyNames;if(0===t.length)return null;var r=this,n=t.map(function(e){return r.entity.getProperty(e)});return new Pe(e.entityType,n)},p.getPropertyValue=function(e){pe(e,"property").isString().or().isEntityProperty().check();var t;if("string"==typeof e){var r=e.trim().split("."),n=r.shift();for(t=this.entity,t=t.getProperty(n);r.length>0;)n=r.shift(),t=t.getProperty(n)}else{if(!(e.parentType instanceof Fe))throw new Error("The validateProperty method does not accept a 'property' parameter whose parentType is a ComplexType; Pass a 'property path' string as the 'property' parameter instead ");t=this.entity.getProperty(e.name)}return t},p._checkOperation=function(e){if(this.isBeingSaved)throw new Error("Cannot perform a '"+e+"' on an entity that is in the process of being saved");return this},p._detach=function(){this.entityGroup=null,this.entityManager=null,this.entityState=be.Detached,this.originalValues={},this._validationErrors={},this.hasValidationErrors=!1,this.validationErrorsChanged.clear(),this.propertyChanged.clear()},p._validateProperty=function(e,t){var r=!0;return this._processValidationOpAndPublish(function(n){t.property.getAllValidators().forEach(function(a){r=o(n,a,e,t)&&r})}),r},p._processValidationOpAndPublish=function(e){if(this._pendingValidationResult)e(this);else try{this._pendingValidationResult={entity:this.entity,added:[],removed:[]},e(this),(this._pendingValidationResult.added.length>0||this._pendingValidationResult.removed.length>0)&&(this.validationErrorsChanged.publish(this._pendingValidationResult),this.entityManager&&this.entityManager.validationErrorsChanged.publish(this._pendingValidationResult))}finally{this._pendingValidationResult=void 0}},p._addValidationError=function(e){this._validationErrors[e.key]=e,this.hasValidationErrors=!0,this._pendingValidationResult.added.push(e)},p._removeValidationError=function(e){var t=this._validationErrors[e];t&&(delete this._validationErrors[e],this.hasValidationErrors=!z(this._validationErrors),this._pendingValidationResult.removed.push(t))},s}(),Te=function(){var e=function r(e,t,n){if(!e)throw new Error("The  ComplexAspect ctor requires an entity as its only argument.");if(e.complexAspect)return e.complexAspect;if(!(this instanceof r))return new r(e,t,n);this.complexObject=e,e.complexAspect=this,this.originalValues={},null!=t&&(this.parent=t,this.parentProperty=n);var a=e.complexType;if(!a){var i=e.prototype._$typeName;throw new Error(i?"Metadata for this complexType has not yet been resolved: "+i:"This entity is not registered as a valid ComplexType")}var o=a.getCtor();de.getDefaultInstance().startTracking(e,o.prototype)},t=e.prototype;return t.getEntityAspect=function(){var e=this.parent;if(!e)return new Se(null);for(var t=e.entityAspect;e&&!t;)e=e.complexAspect&&e.complexAspect.parent,t=e&&e.entityAspect;return t||new Se(null)},t.getPropertyPath=function(e){var t=this.parent;if(!t)return null;var r=t.complexAspect||t.entityAspect;return r.getPropertyPath(this.parentProperty.name+"."+e)},e}();ne.EntityAspect=Se,ne.ComplexAspect=Te;var Pe=function(){function e(e){return e.join(t)}var t=":::",r=function(t,r){pe(t,"entityType").isInstanceOf(Fe).check();var n=t.getSelfAndSubtypes();n.length>1&&(this._subtypes=n.filter(function(e){return e.isAbstract===!1})),Array.isArray(r)||(r=ie(arguments,1)),this.entityType=t,t.keyProperties.forEach(function(e,t){e.dataType===_e.Guid&&(r[t]=r[t]&&r[t].toLowerCase())}),this.values=r,this._keyInGroup=e(r)};r._$typeName="EntityKey";var n=r.prototype;return n.toJSON=function(){return{entityType:this.entityType.name,values:this.values}},r.fromJSON=function(e,t){var r=t._getEntityType(e.entityType,!0);return new Pe(r,e.values)},n.equals=function(e){return e instanceof Pe?this.entityType===e.entityType&&T(this.values,e.values):!1},n.toString=function(e){return(e||this.entityType).name+"-"+this._keyInGroup},r.equals=function(e,t){return e instanceof Pe?e.equals(t):!1},n._isEmpty=function(){return 0===this.values.join("").length},r.createKeyString=e,r}();ne.EntityKey=Pe;var be=function(){var e={isUnchanged:function(){return this===t.Unchanged},isAdded:function(){return this===t.Added},isModified:function(){return this===t.Modified},isDeleted:function(){return this===t.Deleted},isDetached:function(){return this===t.Detached},isUnchangedOrModified:function(){return this===t.Unchanged||this===t.Modified},isAddedModifiedOrDeleted:function(){return this===t.Added||this===t.Modified||this===t.Deleted}},t=new ye("EntityState",e);return t.Unchanged=t.addSymbol(),t.Added=t.addSymbol(),t.Modified=t.addSymbol(),t.Deleted=t.addSymbol(),t.Detached=t.addSymbol(),t.resolveSymbols(),t}();ne.EntityState=be,ne.makePrimitiveArray=function(){function e(e,r,n){return me.initializeParent(e,r,n),e.arrayChanged=new fe("arrayChanged",e),p(e,me.mixin),p(e,t)}var t={};return t._getGoodAdds=function(e){return e},t._beforeChange=function(){var e=this.getEntityAspect();e.entityState.isUnchanged()&&e.setModified(),e.entityState.isModified()&&!this._origValues&&(this._origValues=this.slice(0))},t._processAdds=function(){},t._processRemoves=function(){},t._rejectChanges=function(){this._origValues&&(this.length=0,Array.prototype.push.apply(this,this._origValues))},t._acceptChanges=function(){this._origValues=null},e}(),ne.makeRelationArray=function(){function e(e,t){var r=n(e,t);if(!r.length)return r;var a=e.parentEntity,i=a.entityAspect.entityManager;return i&&!i.isLoading&&r.forEach(function(t){if(t.entityAspect.entityState.isDetached()){e._inProgress=!0;try{i.attachEntity(t,be.Added)}finally{e._inProgress=!1}}}),r}function t(e,t){var r=e.parentEntity,n=e.navigationProperty,a=e._addsInProcess,i=n.inverse,o=a.length;try{t.forEach(function(e){if(a.push(e),i)e.setProperty(i.name,r);else{var t=r.entityType.keyProperties;n.invForeignKeyNames.forEach(function(n,a){e.setProperty(n,r.getProperty(t[a].name))})}})}finally{a.splice(o,t.length)}}function r(e,t){var r=e.navigationProperty.inverse;r&&t.forEach(function(e){e.setProperty(r.name,null)})}function n(e,t){var r,n=e.parentEntity,a=e.navigationProperty,i=a.inverse;if(i)r=t.filter(function(t){if(e._addsInProcess.indexOf(t)>=0)return!1;var r=t.getProperty(i.name);return r!==n});else{var o=a.invForeignKeyNames,s=n.entityType.keyProperties;r=t.filter(function(t){return e._addsInProcess.indexOf(t)>=0?!1:o.some(function(e,r){var a=s[r].name,i=n.getProperty(a),o=t.getProperty(e);return i!==o})})}return r}function a(e,t,r){return e.parentEntity=t,e.navigationProperty=r,e.arrayChanged=new fe("arrayChanged",e),e._addsInProcess=[],p(e,me.mixin),p(e,i)}var i={};return i.load=function(e,t){var r=this.parentEntity,n=qe.fromEntityNavigation(this.parentEntity,this.navigationProperty),a=r.entityAspect.entityManager;return a.executeQuery(n,e,t)},i._getEventParent=function(){return this.parentEntity.entityAspect},i._getPendingPubs=function(){var e=this.parentEntity.entityAspect.entityManager;return e&&e._pendingPubs},i._getGoodAdds=function(t){return e(this,t)},i._processAdds=function(e){t(this,e)},i._processRemoves=function(e){r(this,e)},a}();var _e=function(){function e(e,t){throw e=$(e,t),new Error(e)}function t(e){switch(e){case b.String:return ve.string;case b.Int64:return ve.int64;case b.Int32:return ve.int32;case b.Int16:return ve.int16;case b.Decimal:return ve.number;case b.Double:return ve.number;case b.Single:return ve.number;case b.DateTime:return ve.date;case b.DateTimeOffset:return ve.date;case b.Boolean:return ve.bool;case b.Guid:return ve.guid;case b.Byte:return ve["byte"];case b.Binary:return ve.none;case b.Time:return ve.duration;case b.Undefined:return ve.none}}var r,n={},a=function(){r={stringPrefix:"K_",nextNumber:-1,nextNumberIncrement:-1}};a();var i=function(){return r.stringPrefix+o().toString()},o=function(){var e=r.nextNumber;return r.nextNumber+=r.nextNumberIncrement,e},s=function(){return C()},u=function(){return new Date},p=function(e){return null==e?e:e.toString()},c=function(e,t){if("string"===t){var r=e.trim();if(""===r)return null;var n=parseInt(r,10);return isNaN(n)?e:n}return"number"===t?Math.round(e):e},l=function(e,t){if("string"===t){var r=e.trim();if(""===r)return null;var n=parseFloat(r);return isNaN(n)?e:n}return e},y=function(e,t){var r;if("string"===t){var n=e.trim();return""===n?null:(r=new Date(Date.parse(n)),k(r)?r:e)}return"number"===t?(r=new Date(e),k(r)?r:e):e},f=function(e,t){if("string"===t){var r=e.trim().toLowerCase();return"false"===r||""===r?!1:"true"===r?!0:e}return e},h=function(e){return null==e?null:"'"+e.replace(/'/g,"''")+"'"},d=function(e){return null==e?null:"string"==typeof e?parseInt(e,10):e},m=function(e){return function(t){return null==t?null:("string"==typeof t&&(t=parseFloat(t)),t+e)}},v=function(t){if(null==t)return null;try{return"datetime'"+t.toISOString()+"'"}catch(r){e("'%1' is not a valid dateTime",t)}},g=function(t){if(null==t)return null;try{return"datetimeoffset'"+t.toISOString()+"'"}catch(r){e("'%1' is not a valid dateTime",t)}},E=function(t){return null==t?null:(q(t)||e("'%1' is not a valid ISO 8601 duration",t),"time'"+t+"'")},w=function(t){return null==t?null:(K(t)||e("'%1' is not a valid guid",t),"guid'"+t+"'")},S=function(e){return null==e?null:"string"==typeof e?"true"===e.trim().toLowerCase():!!e},T=function(e){return null==e?e:"binary'"+e+"'"},P=function(e){return e},b=new ye("DataType",n);b.String=b.addSymbol({defaultValue:"",parse:p,fmtOData:h,getNext:i}),b.Int64=b.addSymbol({defaultValue:0,isNumeric:!0,isInteger:!0,quoteJsonOData:!0,parse:c,fmtOData:m("L"),getNext:o}),b.Int32=b.addSymbol({defaultValue:0,isNumeric:!0,isInteger:!0,parse:c,fmtOData:d,getNext:o}),b.Int16=b.addSymbol({defaultValue:0,isNumeric:!0,isInteger:!0,parse:c,fmtOData:d,getNext:o}),b.Byte=b.addSymbol({defaultValue:0,isNumeric:!0,isInteger:!0,parse:c,fmtOData:d}),b.Decimal=b.addSymbol({defaultValue:0,isNumeric:!0,quoteJsonOData:!0,isFloat:!0,parse:l,fmtOData:m("m"),getNext:o}),b.Double=b.addSymbol({defaultValue:0,isNumeric:!0,isFloat:!0,parse:l,fmtOData:m("d"),getNext:o}),b.Single=b.addSymbol({defaultValue:0,isNumeric:!0,isFloat:!0,parse:l,fmtOData:m("f"),getNext:o}),b.DateTime=b.addSymbol({defaultValue:new Date(1900,0,1),isDate:!0,parse:y,fmtOData:v,getNext:u}),b.DateTimeOffset=b.addSymbol({defaultValue:new Date(1900,0,1),isDate:!0,parse:y,fmtOData:g,getNext:u}),b.Time=b.addSymbol({defaultValue:"PT0S",fmtOData:E}),b.Boolean=b.addSymbol({defaultValue:!1,parse:f,fmtOData:S}),b.Guid=b.addSymbol({defaultValue:"00000000-0000-0000-0000-000000000000",fmtOData:w,getNext:s}),b.Binary=b.addSymbol({defaultValue:null,fmtOData:T}),b.Undefined=b.addSymbol({defaultValue:void 0,fmtOData:P}),b.resolveSymbols(),b.getComparableFn=function(e){return e&&e.isDate?function(e){return e&&e.getTime()}:e===b.Time?function(e){return e&&x(e)}:function(e){return e}},b.fromEdmDataType=function(e){var t=null,r=e.split(".");if(r.length>1){var n=r[1];t="image"===n?b.Byte:2===r.length?b.fromName(n)||b.Undefined:b.String}return t},b.fromValue=function(e){if(k(e))return b.DateTime;switch(typeof e){case"string":return K(e)?b.Guid:q(e)&&e.length>3?b.Time:I(e)?b.DateTime:b.String;case"boolean":return b.Boolean;case"number":return b.Double}return b.Undefined};var _=/.\d{3}$/;return b.parseTimeFromServer=function(e){if("string"==typeof e)return e;if(e&&"Edm.Time"===e.__edmType){var t=Math.floor(e.ms/1e3);return"PT"+t+"S"}return e},b.parseDateAsUTC=function(e){if("string"==typeof e){var t=_.test(e);e=t?e+"Z":e}return e=new Date(Date.parse(e))},b.parseDateFromServer=b.parseDateAsUTC,b.parseRawValue=function(e,t){return void 0===e?void 0:(t.isDate&&e?k(e)||(e=b.parseDateFromServer(e)):t===b.Binary?e&&void 0!==e.$value&&(e=e.$value):t===b.Time&&(e=b.parseTimeFromServer(e)),e)},b.constants=r,b._resetConstants=a,b.getSymbols().forEach(function(e){e.validatorCtor=t(e)}),b}();ne.DataType=_e;var Ne=function(){function e(e,t){return t&&(le(t).whereParam("serviceName").isOptional().whereParam("adapterName").isString().isOptional().whereParam("uriBuilderName").isString().isOptional().whereParam("hasServerMetadata").isBoolean().isOptional().whereParam("jsonResultsAdapter").isInstanceOf(Oe).isOptional().whereParam("useJsonp").isBoolean().isOptional().applyAll(e),e.serviceName=e.serviceName&&Ne._normalizeServiceName(e.serviceName),e.adapterInstance=e.adapterName&&he.getAdapterInstance("dataService",e.adapterName),e.uriBuilder=e.uriBuilderName&&he.getAdapterInstance("uriBuilder",e.uriBuilderName)),e}var t=function(t){e(this,t)},r=t.prototype;return r._$typeName="DataService",r.using=function(t){if(!t)return this;var r=new Ne(this);return e(r,t)},t.resolve=function(e){e.push({hasServerMetadata:!0,useJsonp:!1});var t=new Ne(h(e,["serviceName","adapterName","uriBuilderName","hasServerMetadata","jsonResultsAdapter","useJsonp"]));if(!t.serviceName)throw new Error("Unable to resolve a 'serviceName' for this dataService");return t.adapterInstance=t.adapterInstance||he.getAdapterInstance("dataService",t.adapterName),t.jsonResultsAdapter=t.jsonResultsAdapter||t.adapterInstance.jsonResultsAdapter,t.uriBuilder=t.uriBuilder||he.getAdapterInstance("uriBuilder",t.uriBuilderName),t},t._normalizeServiceName=function(e){return e=e.trim(),"/"!==e.substr(-1)?e+"/":e},r.toJSON=function(){return y(this,{serviceName:null,adapterName:null,uriBuilderName:null,hasServerMetadata:null,jsonResultsAdapter:function(e){return e&&e.name},useJsonp:null})},t.fromJSON=function(e){return e.jsonResultsAdapter=he._fetchObject(Oe,e.jsonResultsAdapter),new Ne(e)},r.qualifyUrl=function(e){var t=this.serviceName;return se.stringEndsWith(t,"/")&&(t=t.substr(0,t.length-1)),e="/"+e,se.stringEndsWith(t,e)||(t+=e),t},t}(),Oe=function(){function e(e){return e.results}var t=function(t){if(1!==arguments.length)throw new Error("The JsonResultsAdapter ctor should be called with a single argument that is a configuration object.");le(t).whereParam("name").isNonEmptyString().whereParam("extractResults").isFunction().isOptional().withDefault(e).whereParam("visitNode").isFunction().applyAll(this),he._storeObject(this,r._$typeName,this.name)},r=t.prototype;return r._$typeName="JsonResultsAdapter",t}();ne.DataService=Ne,ne.JsonResultsAdapter=Oe;var Ae=_("Q");Ae||(Ae=function(){var e="Q is undefined. Are you missing Q.js? See https://github.com/kriskowal/q";throw new Error(e)},Ae.defer=Ae.resolve=Ae.reject=Ae),ne.config.setQ=function(e){ne.Q=Ae=e},ne.Q=Ae;var Ce=function(){function e(e){var t=[];for(var r in e){var n=e[r];r===n.name&&t.push(e[r])}return t}function t(e,t,r){var a=ee(t.shortName,t.namespace),o=e._getEntityType(a,!0);if(o)return r?n(o,t):o;var s={shortName:t.shortName,namespace:t.namespace,isAbstract:t.isAbstract,autoGeneratedKeyType:Ie.fromName(t.autoGeneratedKeyType),defaultResourceName:t.defaultResourceName,custom:t.custom};if(o=t.isComplexType?new Me(s):new Fe(s),t.baseTypeName){o.baseTypeName=t.baseTypeName;var u=e._getEntityType(t.baseTypeName,!0);u?i(e,t,o,u):P(e._deferredTypes,t.baseTypeName).push({json:t,stype:o})}else i(e,t,o);return o}function n(e,t){return t.custom&&(e.custom=t.custom),a(e,t.dataProperties),a(e,t.navigationProperties),e}function a(e,t){t&&t.forEach(function(t){var r=t.name;if(!r){if(!t.nameOnServer)throw new Error("Unable to complete 'importMetadata' - cannot locate a 'name' or 'nameOnServer' for one of the imported property nodes");r=e.metadataStore.namingConvention.serverPropertyNameToClient(t.nameOnServer,{})}if(t.custom){var n=e.getProperty(r,!0);n.custom=t.custom}})}function i(e,t,r){t.validators&&(r.validators=t.validators.map(ve.fromJSON)),t.dataProperties.forEach(function(e){r._addPropertyCore(De.fromJSON(e))});var n=!t.isComplexType;n&&t.navigationProperties&&t.navigationProperties.forEach(function(e){r._addPropertyCore(ke.fromJSON(e))}),e.addEntityType(r);var a=e._deferredTypes,o=a[r.name];o&&(o.forEach(function(t){i(e,t.json,t.stype)}),delete a[r.name])}function o(e,t,r){if(X(t))return t;var n=e._shortNameMap[t];if(!n&&r)throw new Error("Unable to locate 'entityTypeName' of: "+t);return n}var s=0,u=function(e){e=e||{},le(e).whereParam("namingConvention").isOptional().isInstanceOf(Re).withDefault(Re.defaultInstance).whereParam("localQueryComparisonOptions").isOptional().isInstanceOf(je).withDefault(je.defaultInstance).whereParam("serializerFn").isOptional().isFunction().applyAll(this),this.dataServices=[],this._resourceEntityTypeMap={},this._structuralTypeMap={},this._shortNameMap={},this._ctorRegistry={},this._incompleteTypeMap={},this._incompleteComplexTypeMap={},this._id=s++,this.metadataFetched=new fe("metadataFetched",this)},c=u.prototype;return c._$typeName="MetadataStore",fe.bubbleEvent(c,null),u.ANONTYPE_PREFIX="_IB_",c.setProperties=function(e){le(e).whereParam("name").isString().isOptional().whereParam("serializerFn").isFunction().isOptional().applyAll(this)},c.addDataService=function(e,t){pe(e,"dataService").isInstanceOf(Ne).check(),pe(t,"shouldOverwrite").isBoolean().isOptional().check();var r=this._getDataServiceIndex(e.serviceName);if(r>=0){if(!t)throw new Error("A dataService with this name '"+e.serviceName+"' already exists in this MetadataStore");this.dataServices[r]=e}else this.dataServices.push(e)},c._getDataServiceIndex=function(e){return g(this.dataServices,function(t){return t.serviceName===e})},c.addEntityType=function(e){if(e instanceof Fe||e instanceof Me||(e=e.isComplexType?new Me(e):new Fe(e)),!e.isComplexType){if(e.baseTypeName&&!e.baseEntityType){var t=this._getEntityType(e.baseTypeName,!0);e._updateFromBase(t)}if(0===e.keyProperties.length&&!e.isAbstract)throw new Error("Unable to add "+e.name+" to this MetadataStore.  An EntityType must have at least one property designated as a key property - See the 'DataProperty.isPartOfKey' property.")}if(e.metadataStore=this,!e.isAnonymous){if(this._structuralTypeMap[e.name])throw new Error("Type "+e.name+" already exists in this MetadataStore.");this._structuralTypeMap[e.name]=e,this._shortNameMap[e.shortName]=e.name}if(e.getProperties().forEach(function(t){e._updateNames(t),t.isUnmapped||e._mappedPropertiesCount++}),e._updateCps(),!e.isComplexType){e._updateNps();var r=e.defaultResourceName||e.baseEntityType&&e.baseEntityType.defaultResourceName;r&&!this.getEntityTypeNameForResourceName(r)&&this.setEntityTypeForResourceName(r,e.name),e.defaultResourceName=r,e.getEntityCtor()}},c.exportMetadata=function(){var e=JSON.stringify({metadataVersion:ne.metadataVersion,name:this.name,namingConvention:this.namingConvention.name,localQueryComparisonOptions:this.localQueryComparisonOptions.name,dataServices:this.dataServices,structuralTypes:r(this._structuralTypeMap),resourceEntityTypeMap:this._resourceEntityTypeMap},null,he.stringifyPad);return e},c.importMetadata=function(e,r){pe(r,"allowMerge").isOptional().isBoolean().check(),this._deferredTypes={};var n="string"==typeof e?JSON.parse(e):e;if(n.schema)return xe.parse(this,n.schema,n.altMetadata);if(n.metadataVersion&&n.metadataVersion!==ne.metadataVersion){var a=$("Cannot import metadata with a different 'metadataVersion' (%1) than the current 'breeze.metadataVersion' (%2) ",n.metadataVersion,ne.metadataVersion);throw new Error(a)}var i=n.namingConvention,o=n.localQueryComparisonOptions;if(this.isEmpty())this.namingConvention=he._fetchObject(Re,i)||this.namingConvention,this.localQueryComparisonOptions=he._fetchObject(je,o)||this.localQueryComparisonOptions;else{if(i&&this.namingConvention.name!==i)throw new Error("Cannot import metadata with a different 'namingConvention' from the current MetadataStore");if(o&&this.localQueryComparisonOptions.name!==o)throw new Error("Cannot import metadata with different 'localQueryComparisonOptions' from the current MetadataStore")}var s=this;return n.dataServices&&n.dataServices.forEach(function(e){e=Ne.fromJSON(e),s.addDataService(e,!0)}),this._structuralTypeMap,n.structuralTypes&&n.structuralTypes.forEach(function(e){t(s,e,r)}),p(this._resourceEntityTypeMap,n.resourceEntityTypeMap),p(this._incompleteTypeMap,n.incompleteTypeMap),this},u.importMetadata=function(e){var t=new Ce;return t.importMetadata(e),t},c.hasMetadataFor=function(e){return!!this.getDataService(e)},c.getDataService=function(e){return pe(e,"serviceName").isString().check(),e=Ne._normalizeServiceName(e),v(this.dataServices,function(t){return t.serviceName===e})},c.fetchMetadata=function(e,t,r){try{if(pe(e,"dataService").isString().or().isInstanceOf(Ne).check(),pe(t,"callback").isFunction().isOptional().check(),pe(r,"errorCallback").isFunction().isOptional().check(),"string"==typeof e&&(e=this.getDataService(e)||new Ne({serviceName:e})),e=Ne.resolve([e]),this.hasMetadataFor(e.serviceName))throw new Error("Metadata for a specific serviceName may only be fetched once per MetadataStore. ServiceName: "+e.serviceName);var n=this;return e.adapterInstance.fetchMetadata(this,e).then(function(r){return n.metadataFetched.publish({metadataStore:n,dataService:e,rawMetadata:r}),t&&t(r),Ae.resolve(r)},function(e){return r&&r(e),Ae.reject(e)})}catch(a){return Ae.reject(a)}},c.trackUnmappedType=function(e,t){pe(e,"entityCtor").isFunction().check(),pe(t,"interceptor").isFunction().isOptional().check();var r=new Fe(this);r._setCtor(e,t)},c.registerEntityTypeCtor=function(e,t,r,n){pe(e,"structuralTypeName").isString().check(),pe(t,"aCtor").isFunction().isOptional().check(),pe(r,"initFn").isOptional().isFunction().or().isString().check(),pe(n,"noTrackingFn").isOptional().isFunction().check();var a=o(this,e,!1),i=a||e;if(this._ctorRegistry[i]={ctor:t,initFn:r,noTrackingFn:n},a){var s=this._structuralTypeMap[a];s&&s.getCtor(!0)}},c.isEmpty=function(){return z(this._structuralTypeMap)},c.getEntityType=function(e,t){return pe(e,"structuralTypeName").isString().check(),pe(t,"okIfNotFound").isBoolean().isOptional().check(!1),this._getEntityType(e,t)},c._getEntityType=function(e,t){var r=o(this,e,!1),n=this._structuralTypeMap[r];if(!n){if(t)return null;var a=$("Unable to locate a 'Type' by the name: '%1'. Be sure to execute a query or call fetchMetadata first.",e);
throw new Error(a)}if(n.length){var i=n.join(",");throw new Error("There are multiple types with this 'shortName': "+i)}return n},c.getEntityTypes=function(){return e(this._structuralTypeMap)},c.getIncompleteNavigationProperties=function(){return r(this._incompleteTypeMap,function(e,t){return t})},c.getEntityTypeNameForResourceName=function(e){return pe(e,"resourceName").isString().check(),this._resourceEntityTypeMap[e]},c.setEntityTypeForResourceName=function(e,t){pe(e,"resourceName").isString().check(),pe(t,"entityTypeOrName").isInstanceOf(Fe).or().isString().check();var r;r=t instanceof Fe?t.name:o(this,t,!0),this._resourceEntityTypeMap[e]=r;var n=this._getEntityType(r,!0);n&&!n.defaultResourceName&&(n.defaultResourceName=e)},c._checkEntityType=function(e){if(!e.entityType){var t=e.prototype._$typeName;if(!t)throw new Error("This entity has not been registered. See the MetadataStore.registerEntityTypeCtor method");var r=this._getEntityType(t);r&&(e.entityType=r)}},u}(),xe=function(){function e(e,r,a){e._entityTypeResourceMap={},d(r).forEach(function(r){if(r.cSpaceOSpaceMapping){var a=JSON.parse(r.cSpaceOSpaceMapping),i={};a.forEach(function(e){i[e[0]]=e[1]}),r.cSpaceOSpaceMapping=i}r.entityContainer&&d(r.entityContainer).forEach(function(t){d(t.entitySet).forEach(function(t){var n=m(t.entityType,r).typeName;e.setEntityTypeForResourceName(t.name,n),e._entityTypeResourceMap[n]=t.name})}),r.complexType&&d(r.complexType).forEach(function(t){n(t,r,e)}),r.entityType&&d(r.entityType).forEach(function(n){t(n,r,e)})});var i=e.getIncompleteNavigationProperties();if(i.length>0){var o=i.map(function(e){return e.parentType.name+":"+e.name}).join(", ");throw new Error("Incomplete navigation properties: "+o)}return a&&e.importMetadata(a,!0),e}function t(e,t,n){var a=e.name,i=g(a,t),o=new Fe({shortName:a,namespace:i,isAbstract:e["abstract"]&&"true"===e["abstract"]});if(e.baseType){var s=m(e.baseType,t).typeName;o.baseTypeName=s;var u=n._getEntityType(s,!0);if(u)r(o,e,t,n);else{var p=n._deferredTypes[s];p||(p=[],n._deferredTypes[s]=p),p.push({entityType:o,csdlEntityType:e})}}else r(o,e,t,n);return o}function r(e,t,n,i){var o=t.key?d(t.key.propertyRef).map(s("name")):[];d(t.property).forEach(function(t){a(e,t,n,o)}),d(t.navigationProperty).forEach(function(t){u(e,t,n)}),i.addEntityType(e),e.defaultResourceName=i._entityTypeResourceMap[e.name];var p=i._deferredTypes,c=p[e.name];c&&(c.forEach(function(e){r(e.entityType,e.csdlEntityType,n,i)}),delete p[e.name])}function n(e,t,r){var n=e.name,i=g(n,t),o=new Me({shortName:n,namespace:i});return d(e.property).forEach(function(e){a(o,e,t)}),r.addEntityType(o),o}function a(e,t,r,n){var a,s=t.type.split(".");return"Edm"===s[0]&&2===s.length?a=i(e,t,n):p(t,r)?(a=i(e,t,n),a&&(a.enumType=t.type)):a=o(e,t,r),a&&(e._addPropertyCore(a),y(a)),a}function i(e,t,r){var n=_e.fromEdmDataType(t.type);if(null==n)return e.warnings.push("Unable to recognize DataType for property: "+t.name+" DateType: "+t.type),null;var a="true"===t.nullable||null==t.nullable,i=null!=r&&r.indexOf(t.name)>=0;i&&e.autoGeneratedKeyType===Ie.None&&f(t)&&(e.autoGeneratedKeyType=Ie.Identity);var o=t.maxLength;o=null==o||"Max"===o?null:parseInt(o,10);var s=new De({nameOnServer:t.name,dataType:n,isNullable:a,isPartOfKey:i,maxLength:o,defaultValue:t.defaultValue,concurrencyMode:t.concurrencyMode});return n===_e.Undefined&&(s.rawTypeName=t.type),s}function o(e,t,r){var n=m(t.type,r).typeName,a=new De({nameOnServer:t.name,complexTypeName:n,isNullable:!1});return a}function u(e,t,r){var n=h(t,r),a=v(n.end,function(e){return e.role===t.toRole}),i="*"!==a.multiplicity,o=m(a.type,r).typeName,u=n.referentialConstraint;if(u||"*"!=n.end[0].multiplicity||"*"!=n.end[1].multiplicity){var p={nameOnServer:t.name,entityTypeName:o,isScalar:i,associationName:n.name};if(u){var c=u.principal,l=u.dependent,y=d(l.propertyRef),f=y.map(s("name"));t.fromRole===c.role?p.invForeignKeyNamesOnServer=f:p.foreignKeyNamesOnServer=f}var g=new ke(p);return e._addPropertyCore(g),g}}function p(e,t){return t.enumType?c(e,t):t.extensions?l(e,t):!1}function c(e,t){var r=d(t.enumType),n=e.type.split("."),a=n[n.length-1];return r.some(function(e){return e.name===a})}function l(e,t){var r=t.extensions.filter(function(e){return"EnumType"===e.name}),n=e.type.split("."),a=n[n.length-1];return r.some(function(e){return e.attributes.some(function(e){return"Name"===e.name&&e.value===a})})}function y(e){var t;if(e.isNullable||e.validators.push(ve.required()),!e.isComplexProperty){if(e.dataType===_e.String)if(e.maxLength){var r={maxLength:e.maxLength};t=ve.maxLength(r)}else t=ve.string();else t=e.dataType.validatorCtor();e.validators.push(t)}}function f(e){var t=v(Object.keys(e),function(e){return e.indexOf("StoreGeneratedPattern")>=0});if(t)return"Identity"===e[t];var r=e.extensions;if(!r)return!1;var n=v(r,function(e){return"StoreGeneratedPattern"===e.name&&"Identity"===e.value});return!!n}function h(e,t){var r=m(e.relationship,t).shortTypeName,n=t.association;if(!n)return null;Array.isArray(n)||(n=[n]);var a=v(n,function(e){return e.name===r});return a}function m(e,t){if(!e)return null;if(U(e,Ce.ANONTYPE_PREFIX))return{shortTypeName:e,namespace:"",typeName:e,isAnonymous:!0};var r=e.split(",")[0],n=r.split(".");if(n.length>1){var a=n[n.length-1],i=null;if(t&&(i=g(a,t)),!i){var o=n.slice(0,n.length-1);i=o.join(".")}return{shortTypeName:a,namespace:i,typeName:ee(a,i)}}return{shortTypeName:e,namespace:"",typeName:e}}function g(e,t){var r,n=t.cSpaceOSpaceMapping;if(n){var a=n[t.namespace+"."+e];if(r=a&&a.substr(0,a.length-(e.length+1)))return r}return t.entityType||"Default"!=t.namespace?t.namespace:null}var E=A(function(e){return e&&m(e).typeName});return{parse:e,normalizeTypeName:E}}(),Fe=function(){function e(e,t){return e.entityAspect||e.complexAspect?e.getProperty(t.name):e[t.name]}function t(e){var t=e.name.replace(/\W/g,"_");return Function("return function "+t+"(){}")()}function r(e){return e.filter(function(e){return null==e.baseProperty})}function n(e,t,r){var n=r+"OnServer",a=t[r];if(a&&a.length){var i=d(a).map(function(r){var n=e.clientPropertyNameToServer(r,t),a=e.serverPropertyNameToClient(n,t);if(r!==a)throw new Error("NamingConvention for this client property name does not roundtrip properly:"+r+"-->"+a);return n});t[n]=Array.isArray(a)?i:i[0]}else{var o=t[n];if(!o||0===o.length)return;var s=d(o).map(function(r){var n=e.serverPropertyNameToClient(r,t),a=e.clientPropertyNameToServer(n,t);if(r!==a)throw new Error("NamingConvention for this server property name does not roundtrip properly:"+r+"-->"+a);return n});t[r]=Array.isArray(o)?s:s[0]}}function i(e,t){var r=t._getEntityType(e.complexTypeName,!0);if(!r)return!1;if(!(r instanceof Me))throw new Error("Unable to resolve ComplexType with the name: "+e.complexTypeName+" for the property: "+property.name);return e.dataType=r,e.defaultValue=null,!0}function u(e,t){if(e.entityType)return!0;var r=t._getEntityType(e.entityTypeName,!0);if(r)e.entityType=r,e._resolveNp();else{var n=P(t._incompleteTypeMap,e.entityTypeName);E(n,e)}return!!r}function p(e,t){var r=e.getPropertyNames(),n=de.getDefaultInstance(),i=n.getTrackablePropertyNames(t);i.forEach(function(n){if(-1===r.indexOf(n)){var i=t[n];try{"function"==typeof i&&(i=i())}catch(o){}var s=_e.fromValue(i),u=new De({name:n,dataType:s,isNullable:!0,isUnmapped:!0});u.isSettable=a(t,n),e.subtypes?e.getSelfAndSubtypes().forEach(function(e){e._addPropertyCore(new De(u))}):e._addPropertyCore(u)}})}var c=0,l=function(e){if(arguments.length>1)throw new Error("The EntityType ctor has a single argument that is either a 'MetadataStore' or a configuration object.");"MetadataStore"===e._$typeName?(this.metadataStore=e,this.shortName="Anon_"+ ++c,this.namespace="",this.isAnonymous=!0):le(e).whereParam("shortName").isNonEmptyString().whereParam("namespace").isString().isOptional().withDefault("").whereParam("baseTypeName").isString().isOptional().whereParam("isAbstract").isBoolean().isOptional().withDefault(!1).whereParam("autoGeneratedKeyType").isEnumOf(Ie).isOptional().withDefault(Ie.None).whereParam("defaultResourceName").isNonEmptyString().isOptional().withDefault(null).whereParam("dataProperties").isOptional().whereParam("navigationProperties").isOptional().whereParam("serializerFn").isOptional().isFunction().whereParam("custom").isOptional().applyAll(this),this.name=ee(this.shortName,this.namespace),this.dataProperties=[],this.navigationProperties=[],this.complexProperties=[],this.keyProperties=[],this.foreignKeyProperties=[],this.inverseForeignKeyProperties=[],this.concurrencyProperties=[],this.unmappedProperties=[],this.validators=[],this.warnings=[],this._mappedPropertiesCount=0,this.subtypes=[],te(this,e.dataProperties,De),te(this,e.navigationProperties,ke)},f=l.prototype,h=_e.parseRawValue;return f._$typeName="EntityType",l.qualifyTypeName=ee,f.setProperties=function(e){le(e).whereParam("autoGeneratedKeyType").isEnumOf(Ie).isOptional().whereParam("defaultResourceName").isString().isOptional().whereParam("serializerFn").isFunction().isOptional().whereParam("custom").isOptional().applyAll(this),e.defaultResourceName&&(this.defaultResourceName=e.defaultResourceName)},f.isSubtypeOf=function(e){pe(e,"entityType").isInstanceOf(Fe).check();var t=this;do{if(t===e)return!0;t=t.baseEntityType}while(t);return!1},f.getSelfAndSubtypes=function(){var e=[this];return this.subtypes.forEach(function(t){var r=t.getSelfAndSubtypes();e.push.apply(e,r)}),e},f.getAllValidators=function(){for(var e=this.validators.slice(0),t=this.baseEntityType;t;)e.push.apply(e,t.validators),t=t.baseEntityType;return e},f.addProperty=function(e){return pe(e,"property").isInstanceOf(De).or().isInstanceOf(ke).check(),this._addPropertyCore(e,!0)},f._updateFromBase=function(e){this.baseEntityType=e,this.autoGeneratedKeyType===Ie.None&&(this.autoGeneratedKeyType=e.autoGeneratedKeyType),e.dataProperties.forEach(function(e){var t=new De(e);t.validators=[],t.baseProperty=e,this._addPropertyCore(t)},this),e.navigationProperties.forEach(function(e){var t=new ke(e);t.validators=[],t.baseProperty=e,this._addPropertyCore(t)},this),e.subtypes.push(this)},f._addPropertyCore=function(e,t){if(this.isFrozen)throw new Error("The '"+this.name+"' EntityType/ComplexType has been frozen. You can only add properties to an EntityType/ComplexType before any instances of that type have been created and attached to an entityManager.");var r=e.parentType;if(r){if(r!==this)throw new Error("This property: "+e.name+" has already been added to "+e.parentType.name);return this}e.parentType=this;var a=this.metadataStore;return e.isDataProperty?this._addDataProperty(e):(this._addNavigationProperty(e),t&&a&&u(e,a)),!a||e.name&&e.nameOnServer||n(a.namingConvention,e,"name"),this},f.createEntity=function(t){if(t&&t._$eref&&!t._$eref.entityAspect.entityManager)return t._$eref;var r=this._createInstanceCore();return t&&(this.keyProperties.every(function(e){return null!=t[e.name]})&&(t._$eref=r),this._updateTargetFromRaw(r,t,e),this.navigationProperties.forEach(function(e){var n,a=t[e.name];if(void 0!=a){var i=e.entityType;if(e.isScalar)n=a.entityAspect?a:i.createEntity(a),r.setProperty(e.name,n);else{var o=r.getProperty(e.name);a.forEach(function(e){n=e.entityAspect?e:i.createEntity(e),o.push(n)})}}})),this._initializeInstance(r),r},f._createInstanceCore=function(){var e=this.getEntityCtor(),t=new e;return new Se(t),t},f._initializeInstance=function(e){this.baseEntityType&&this.baseEntityType._initializeInstance(e);var t=this.initFn;t&&("string"==typeof t&&(t=e[t]),t(e)),this.complexProperties&&this.complexProperties.forEach(function(t){var r=e.getProperty(t.name);Array.isArray(r)?r.forEach(function(e){t.dataType._initializeInstance(e)}):t.dataType._initializeInstance(r)}),e.entityAspect&&(e.entityAspect._initialized=!0)},f.getCtor=f.getEntityCtor=function(e){if(this._ctor&&!e)return this._ctor;var r=this.metadataStore._ctorRegistry,n=r[this.name]||r[this.shortName]||{},a=n.ctor||this._ctor,i=a&&a.prototype&&(a.prototype.entityType||a.prototype.complexType);if(i&&i.metadataStore!==this.metadataStore)throw new Error("Cannot register the same constructor for "+this.name+" in different metadata stores.  Please define a separate constructor for each metadata store.");if(n.ctor&&e&&(this._extra=void 0),!a){var o=de.getDefaultInstance().createCtor;a=o?o(this):t(this)}return this.initFn=n.initFn,this.noTrackingFn=n.noTrackingFn,a.prototype._$typeName=this.name,this._setCtor(a),a},f._setCtor=function(e,t){var r=e.prototype;this._extra=this._extra||{};var n=new e;p(this,n),"EntityType"===this._$typeName?r.entityType=this:r.complexType=this,r._$interceptor=t||J,de.getDefaultInstance().initializeEntityPrototype(r),this._ctor=e},f.addValidator=function(e,t){pe(e,"validator").isInstanceOf(ve).check(),pe(t,"property").isOptional().isString().or().isEntityProperty().check(),t?("string"==typeof t&&(t=this.getProperty(t,!0)),t.validators.push(e)):this.validators.push(e)},f.getProperties=function(){return this.dataProperties.concat(this.navigationProperties)},f.getPropertyNames=function(){return this.getProperties().map(s("name"))},f.getDataProperty=function(e){return v(this.dataProperties,o("name",e))},f.getNavigationProperty=function(e){return v(this.navigationProperties,o("name",e))},f.getProperty=function(e,t){var r=this.getPropertiesOnPath(e,!1,t);return r?r[r.length-1]:null},f.getPropertiesOnPath=function(e,t,r){r=r||!1;var n=Array.isArray(e)?e:e.trim().split("."),a=!0,i=this,s=t?"nameOnServer":"name",u=n.map(function(e){var t=v(i.getProperties(),o(s,e));if(t)i=t.isNavigationProperty?t.entityType:t.dataType;else{if(r)throw new Error("unable to locate property: "+e+" on entityType: "+i.name);a=!1}return t});return a?u:null},f.clientPropertyPathToServer=function(e,t){var r,t=t||".";if(this.isAnonymous){var n=this.metadataStore.namingConvention.clientPropertyNameToServer;r=e.split(".").map(function(e){return n(e)})}else r=this.getPropertiesOnPath(e,!1,!0).map(function(e){return e.nameOnServer});return r.join(t)},f.getEntityKeyFromRawEntity=function(e,t){var r=this.keyProperties.map(function(r){var n=t(e,r);return h(n,r.dataType)});return new Pe(this,r)},f._updateTargetFromRaw=function(e,t,r){this.dataProperties.forEach(function(n){if(n.isSettable){var a=r(t,n);if(void 0!==a){var i,o=n.dataType;if(n.isComplexProperty){if(null===a)return;i=e.getProperty(n.name),n.isScalar?o._updateTargetFromRaw(i,a,r):(i.length=0,Array.isArray(a)&&a.forEach(function(t){var a=o._createInstanceCore(e,n);o._updateTargetFromRaw(a,t,r),o._initializeInstance(a),i.push(a)}))}else{var s;n.isScalar?(s=h(a,o),e.setProperty(n.name,s)):(i=e.getProperty(n.name),i.length=0,Array.isArray(a)&&a.forEach(function(e){s=h(e,o),i.push(s)}))}}}});var n=t.entityAspect||t.complexAspect;if(n){var a=e.entityAspect||e.complexAspect;n.originalValuesMap&&(a.originalValues=n.originalValuesMap),n.extraMetadata&&(a.extraMetadata=n.extraMetadata)}},f.toString=function(){return this.name},f.toJSON=function(){return y(this,{shortName:null,namespace:null,baseTypeName:null,isAbstract:!1,autoGeneratedKeyType:null,defaultResourceName:null,dataProperties:r,navigationProperties:r,validators:null,custom:null})},f._updateNames=function(e){var t=this.metadataStore.namingConvention;n(t,e,"name"),e.isNavigationProperty&&(n(t,e,"foreignKeyNames"),n(t,e,"invForeignKeyNames"))},f._checkNavProperty=function(e){if(e.isNavigationProperty){if(e.parentType!==this)throw new Error($("The navigationProperty '%1' is not a property of entity type '%2'",e.name,this.name));return e}if("string"==typeof e){var t=this.getProperty(e);if(t&&t.isNavigationProperty)return t}throw new Error("The 'navigationProperty' parameter must either be a NavigationProperty or the name of a NavigationProperty")},f._addDataProperty=function(e){this.dataProperties.push(e),e.isPartOfKey&&this.keyProperties.push(e),e.isComplexProperty&&this.complexProperties.push(e),e.concurrencyMode&&"None"!==e.concurrencyMode&&this.concurrencyProperties.push(e),e.isUnmapped&&this.unmappedProperties.push(e)},f._addNavigationProperty=function(e){this.navigationProperties.push(e),X(e.entityTypeName)||(e.entityTypeName=ee(e.entityTypeName,this.namespace))},f._updateCps=function(){var e=this.metadataStore,t=e._incompleteComplexTypeMap;this.complexProperties.forEach(function(r){r.complexType||i(r,e)||P(t,r.complexTypeName).push(r)}),this.isComplexType&&((t[this.name]||[]).forEach(function(t){i(t,e)}),delete t[this.name])},f._updateNps=function(){var e=this.metadataStore;this.navigationProperties.forEach(function(t){u(t,e)});var t=e._incompleteTypeMap;(t[this.name]||[]).forEach(function(t){u(t,e)}),delete t[this.name]},l}(),Me=function(){var e=function(e){if(arguments.length>1)throw new Error("The ComplexType ctor has a single argument that is a configuration object.");le(e).whereParam("shortName").isNonEmptyString().whereParam("namespace").isString().isOptional().withDefault("").whereParam("dataProperties").isOptional().whereParam("isComplexType").isOptional().isBoolean().whereParam("custom").isOptional().applyAll(this),this.name=ee(this.shortName,this.namespace),this.isComplexType=!0,this.dataProperties=[],this.complexProperties=[],this.validators=[],this.concurrencyProperties=[],this.unmappedProperties=[],this.navigationProperties=[],this.keyProperties=[],te(this,e.dataProperties,De)},t=e.prototype;return t.setProperties=function(e){le(e).whereParam("custom").isOptional().applyAll(this)},t.getAllValidators=function(){return this.validators},t._createInstanceCore=function(e,t){var r=this.getCtor(),n=new r;return new Te(n,e,t),n},t.addProperty=function(e){return pe(e,"dataProperty").isInstanceOf(De).check(),this._addPropertyCore(e)},t.getProperties=function(){return this.dataProperties},t=p(t,Fe.prototype,["addValidator","getProperty","getPropertiesOnPath","getPropertyNames","_addPropertyCore","_addDataProperty","_updateNames","_updateCps","_initializeInstance","_updateTargetFromRaw","_setCtor"]),t.createInstance=Fe.prototype.createEntity,t.getCtor=Fe.prototype.getEntityCtor,t.toJSON=function(){return y(this,{shortName:null,namespace:null,isComplexType:null,dataProperties:null,validators:null,custom:null})},t._$typeName="ComplexType",e}(),De=function(){var e=function(e){le(e).whereParam("name").isString().isOptional().whereParam("nameOnServer").isString().isOptional().whereParam("dataType").isEnumOf(_e).isOptional().or().isString().or().isInstanceOf(Me).whereParam("complexTypeName").isOptional().whereParam("isNullable").isBoolean().isOptional().withDefault(!0).whereParam("isScalar").isOptional().withDefault(!0).whereParam("defaultValue").isOptional().whereParam("isPartOfKey").isBoolean().isOptional().whereParam("isUnmapped").isBoolean().isOptional().whereParam("isSettable").isBoolean().isOptional().withDefault(!0).whereParam("concurrencyMode").isString().isOptional().whereParam("maxLength").isNumber().isOptional().whereParam("validators").isInstanceOf(ve).isArray().isOptional().withDefault([]).whereParam("displayName").isOptional().whereParam("enumType").isOptional().whereParam("rawTypeName").isOptional().whereParam("custom").isOptional().applyAll(this);var t=!(!this.name&&!this.nameOnServer);if(!t)throw new Error("A DataProperty must be instantiated with either a 'name' or a 'nameOnServer' property");if(this.complexTypeName)this.isComplexProperty=!0,this.dataType=null;else if("string"==typeof this.dataType){var r=_e.fromName(this.dataType);if(!r)throw new Error("Unable to find a DataType enumeration by the name of: "+this.dataType);this.dataType=r}else this.dataType||(this.dataType=_e.String);if(null==this.defaultValue){if(this.isNullable)this.defaultValue=null;else if(this.isComplexProperty);else if(this.dataType===_e.Binary)this.defaultValue="AAAAAAAAJ3U=";else if(this.defaultValue=this.dataType.defaultValue,null==this.defaultValue)throw new Error("A nonnullable DataProperty cannot have a null defaultValue. Name: "+(this.name||this.nameOnServer))}else this.dataType.isNumeric&&"string"==typeof this.defaultValue&&(this.defaultValue=parseFloat(this.defaultValue));this.isComplexProperty&&(this.isScalar=null==this.isScalar||this.isScalar===!0)},t=e.prototype;return t._$typeName="DataProperty",e.getRawValueFromServer=function(e,t){if(t.isUnmapped)return e[t.nameOnServer||t.name];var r=e[t.nameOnServer];return void 0!==r?r:t.defaultValue},e.getRawValueFromClient=function(e,t){var r=e[t.name];return void 0!==r?r:t.defaultValue},t.isDataProperty=!0,t.isNavigationProperty=!1,t.resolveProperty=function(e){for(var t=this[e],r=this.baseProperty;void 0==t&&null!=r;)t=r[e],r=r.baseProperty;return t},t.formatName=function(){return this.parentType.name+"--"+this.name},t.setProperties=function(e){le(e).whereParam("displayName").isOptional().whereParam("custom").isOptional().applyAll(this)},t.getAllValidators=function(){for(var e=this.validators.slice(0),t=this.baseProperty;t;)e.push.apply(e,t.validators),t=t.baseProperty;return e},t.toJSON=function(){return y(this,{name:null,dataType:function(e){return e&&e.parentEnum?e.name:void 0},complexTypeName:null,isNullable:!0,defaultValue:null,isPartOfKey:!1,isUnmapped:!1,isSettable:!0,concurrencyMode:null,maxLength:null,validators:null,displayName:null,enumType:null,rawTypeName:null,isScalar:!0,custom:null})},e.fromJSON=function(e){return e.dataType=_e.fromName(e.dataType),e.defaultValue&&e.dataType&&e.dataType.isDate&&(e.defaultValue=new Date(Date.parse(e.defaultValue))),e.validators&&(e.validators=e.validators.map(ve.fromJSON)),new De(e)},e}(),ke=function(){function e(e,t){throw new Error("Cannot set the inverse property for: "+e.formatName()+". "+t)}function t(e,t){throw new Error("Cannot create inverse for: "+e.formatName()+". The entityType for this navigation property "+t)}function r(e){var t=e.foreignKeyNames;if(0!==t.length){var r=e.parentType,n=t.map(function(e){return r.getDataProperty(e)}),a=r.foreignKeyProperties;n.forEach(function(t){E(a,t),t.relatedNavigationProperty=e,E(e.entityType.inverseForeignKeyProperties,t),e.relatedDataProperties?E(e.relatedDataProperties,t):e.relatedDataProperties=[t]})}}var n=function(e){le(e).whereParam("name").isString().isOptional().whereParam("nameOnServer").isString().isOptional().whereParam("entityTypeName").isString().whereParam("isScalar").isBoolean().isOptional().withDefault(!0).whereParam("associationName").isString().isOptional().whereParam("foreignKeyNames").isArray().isString().isOptional().withDefault([]).whereParam("foreignKeyNamesOnServer").isArray().isString().isOptional().withDefault([]).whereParam("invForeignKeyNames").isArray().isString().isOptional().withDefault([]).whereParam("invForeignKeyNamesOnServer").isArray().isString().isOptional().withDefault([]).whereParam("validators").isInstanceOf(ve).isArray().isOptional().withDefault([]).whereParam("displayName").isOptional().whereParam("custom").isOptional().applyAll(this);var t=!(!this.name&&!this.nameOnServer);if(!t)throw new Error("A Navigation property must be instantiated with either a 'name' or a 'nameOnServer' property")},a=n.prototype;return a._$typeName="NavigationProperty",a.isDataProperty=!1,a.isNavigationProperty=!0,p(a,De.prototype,["formatName","getAllValidators","resolveProperty"]),a.setProperties=function(e){if(!this.parentType)throw new Error("Cannot call NavigationProperty.setProperties until the parent EntityType of the NavigationProperty has been set.");var t=e.inverse;t&&delete e.inverse,le(e).whereParam("displayName").isOptional().whereParam("foreignKeyNames").isArray().isString().isOptional().withDefault([]).whereParam("invForeignKeyNames").isArray().isString().isOptional().withDefault([]).whereParam("custom").isOptional().applyAll(this),this.parentType._updateNames(this),this._resolveNp(),t&&this.setInverse(t)},a.setInverse=function(t){var r;if(r="string"==typeof t?this.entityType.getNavigationProperty(t):t,!r)throw e(this,"Unable to find inverse property: "+invNpName);(this.inverse||r.inverse)&&e(this,"It has already been set on one side or the other."),r.entityType!=this.parentType&&e(this,r.formatName+" is not a valid inverse property for this."),this.associationName?r.associationName=this.associationName:(r.associationName||(r.associationName=this.formatName()+"_"+r.formatName()),this.associationName=r.associationName),this._resolveNp(),r._resolveNp()},a.createInverse=function(e){this.entityType||t(this,"has not yet been defined."),this.entityType.isFrozen&&t(this,"is frozen.");var r=this.entityType.metadataStore;null==r&&t(this,"has not yet been added to the metadataStore."),e.entityTypeName=this.parentEntityType.name,e.associationName=this.associationName;var n=new ke(e);return this.parentEntityType.addNavigationProperty(n),n},a.toJSON=function(){return y(this,{name:null,entityTypeName:null,isScalar:null,associationName:null,validators:null,displayName:null,foreignKeyNames:null,invForeignKeyNames:null,custom:null})},n.fromJSON=function(e){return e.validators&&(e.validators=e.validators.map(ve.fromJSON)),new ke(e)},a._resolveNp=function(){var e=this,t=e.entityType,n=v(t.navigationProperties,function(t){return t.associationName===e.associationName&&(t.name!==e.name||t.entityTypeName!==e.entityTypeName)});e.inverse=n,n||e.invForeignKeyNames.forEach(function(r){var n=t.getDataProperty(r);if(!n)throw new Error("EntityType '"+e.entityTypeName+"' has no foreign key matching '"+r+"'");var a=e.parentType;n.inverseNavigationProperty=v(a.navigationProperties,function(e){return e.invForeignKeyNames&&e.invForeignKeyNames.indexOf(n.name)>=0&&e.entityType===n.parentType}),E(t.foreignKeyProperties,n)}),r(e)},n}(),Ie=function(){var e=new ye("AutoGeneratedKeyType");return e.None=e.addSymbol(),e.Identity=e.addSymbol(),e.KeyGenerator=e.addSymbol(),e.resolveSymbols(),e}();!function(){function e(e,t){return null==t?!1:void 0!==t.entityType}function t(e,t){return null==t?!1:t.isDataProperty||t.isNavigationProperty}var r=ue.prototype;r.isEntity=function(){return this._addContext({fn:e,msg:" must be an entity"})},r.isEntityProperty=function(){return this._addContext({fn:t,msg:" must be either a DataProperty or a NavigationProperty"})}}(),ne.MetadataStore=Ce,ne.EntityType=Fe,ne.ComplexType=Me,ne.DataProperty=De,ne.NavigationProperty=ke,ne.AutoGeneratedKeyType=Ie,Ce.normalizeTypeName=xe.normalizeTypeName;var Ve=function(){function e(e,t,r){var n=t.name+".."+t.parentType.name,a=e._tempIdMap[n];return a||r&&(a={entityType:t.parentType,propertyName:t.name,keyMap:{}},e._tempIdMap[n]=a),a}var t=function(){this._tempIdMap={}},r=t.prototype;return r.generateTempKeyValue=function(t,r){var n=t.keyProperties;if(n.length>1)throw new Error("Ids can not be autogenerated for entities with multipart keys");var a,i=n[0],o=e(this,i,!0);if(null!=r&&(o.keyMap[r.toString()]||(a=r)),void 0===a){var s=i.dataType;if(!s.getNext)throw new Error("Cannot use a property with a dataType of: "+s.toString()+" for id generation");for(a=s.getNext(this);null!=o.keyMap[a.toString()];)a=s.getNext(this)}return o.keyMap[a.toString()]=!0,a},r.getTempKeys=function(){var e=[];for(var t in this._tempIdMap){var r=this._tempIdMap[t],n=r.entityType;for(var a in r.keyMap)e.push(new Pe(n,[a]))}return e},r.isTempKey=function(t){var r=t.entityType.keyProperties;if(r.length>1)return!1;var n=r[0],a=e(this,n);return a?void 0!==a.keyMap[t.values[0].toString()]:!1},he.registerType(t,"KeyGenerator"),t}();ne.KeyGenerator=Ve;var je=function(){var e=function(e){le(e||{}).whereParam("name").isOptional().isString().whereParam("isCaseSensitive").isOptional().isBoolean().whereParam("usesSql92CompliantStringComparison").isBoolean().applyAll(this),this.name||(this.name=C()),he._storeObject(this,t._$typeName,this.name)},t=e.prototype;return t._$typeName="LocalQueryComparisonOptions",e.caseInsensitiveSQL=new e({name:"caseInsensitiveSQL",isCaseSensitive:!1,usesSql92CompliantStringComparison:!0}),e.defaultInstance=new e(e.caseInsensitiveSQL),t.setAsDefault=function(){return l(this,e)},e}();ne.LocalQueryComparisonOptions=je;var Re=function(){var e=function(e){le(e||{}).whereParam("name").isOptional().isString().whereParam("serverPropertyNameToClient").isFunction().whereParam("clientPropertyNameToServer").isFunction().applyAll(this),this.name||(this.name=C()),he._storeObject(this,t._$typeName,this.name)},t=e.prototype;return t._$typeName="NamingConvention",e.none=new e({name:"noChange",serverPropertyNameToClient:function(e){return e},clientPropertyNameToServer:function(e){return e}}),e.camelCase=new e({name:"camelCase",serverPropertyNameToClient:function(e){return e.substr(0,1).toLowerCase()+e.substr(1)},clientPropertyNameToServer:function(e){return e.substr(0,1).toUpperCase()+e.substr(1)}}),e.defaultInstance=new e(e.none),t.setAsDefault=function(){return l(this,e)},e}();ne.NamingConvention=Re;var Ke=function(){function e(e,n){var a=n.entityType;if(Array.isArray(e)){if(!n.isRHS)throw new Error("Array expressions are only permitted on the right hand side of a BinaryPredicate");return new y(e,n.dataType)}if(!j(e)){if(null!=e&&R(e)&&!e.toISOString){if(void 0===e.value)throw new Error("Unable to resolve an expression for: "+e+" on entityType: "+a.name);return e.isProperty?new f(e.value):new y(e.value,e.dataType||n.dataType,!0)}return new y(e,n.dataType)}if(n.isRHS)return null==a||a.isAnonymous?new y(e,n.dataType):r(e,n);for(var i,o=/\([^()]*\)/,s=[],u=0;i=o.exec(e);){var p=i[0];s.push(p);var c=g+u++;e=e.replace(p,c)}var l=t(e,s,n);return l._validate(a,n.usesNameOnServer),l}function t(e,t,a){var i=e.split(g);return 1===i.length?r(i[0],a):n(e,i,t,a)}function r(e,t){e=e.trim();var r=e.substr(0,1),n=("'"===r||'"'===r)&&e.length>1&&e.substr(e.length-1)===r;if(n){var a=e.substr(1,e.length-2);return new y(a,t.dataType||_e.String)}var i=t.entityType;if(null==i||i.isAnonymous)return new f(e);var o=d.test(e);return o&&null!=i.getPropertiesOnPath(e,t.usesNameOnServer,!1)?new f(e):new y(e,t.dataType)}function n(e,r,n,a){try{var i=r[0].trim().toLowerCase(),o=n[r[1]].trim();"("===o.substr(0,1)&&(o=o.substr(1,o.length-2));var s=e.indexOf("'")>=0?m:v,u=o.match(s),c=p({},a);c.dataType=_e.Undefined,c.isFnArg=!0;var l=u.map(function(e){return t(e,n,c)});return new h(i,l)}catch(y){return null}}var a=function(){function e(e,t,r){var n=t.toLowerCase();r.key=n,e[n]=r,r.aliases&&r.aliases.forEach(function(t){e[t.toLowerCase()]=r})}function t(e){var n={},a={};n[e[0]]=a;var i=e[1];return i=i.operator||i,a[i]=3==e.length?e[2]:t(e.splice(2)),r(n)}function r(e){if(e instanceof a)return e;if("object"!=typeof e)throw new Error("Unable to convert to a Predicate: "+e);var t=Object.keys(e),r=t.map(function(t){return n(t,e[t])});return 1===r.length?r[0]:new u("and",r)}function n(e,t){if(u.prototype._resolveOp(e,!0))return new u(e,t);if(o.prototype._resolveOp(e,!0))return new o(e,t);if("object"!=typeof t||null==t||k(t))return new s("eq",e,t);if(ae(t,"value"))return new s("eq",e,t);if(Array.isArray(t))throw new Error("Unable to resolve predicate after the phrase: "+e);var r=e,n=Object.keys(t),a=n.map(function(e){if(c.prototype._resolveOp(e,!0))return new c(e,r,t[e]);if(s.prototype._resolveOp(e,!0))return new s(e,r,t[e]);if(ae(t[e],"value"))return new s("eq",r,t[e]);var n=$("Unable to resolve predicate after the phrase: '%1' for operator: '%2'  and value: '%3'",r,e,t[e]);throw new Error(n)});return 1===a.length?a[0]:new u("and",a)}var p=function(){if(0!==arguments.length){if(1===arguments.length){var e=arguments[0];return Array.isArray(e)?1===e.length?a(e[0]):t(e):e instanceof a?e:"string"==typeof e?new i(e):r(e)}return t(Array.prototype.slice.call(arguments,0))}},l=p.prototype;return p.create=p,p.and=function(){var e=new u("and",ie(arguments));return e.op&&e},p.or=function(){var e=new u("or",ie(arguments));return e.op&&e},p.not=function(e){return e.not()},p.extendBinaryPredicateFn=function(t,r){var n=E.binaryPredicate;for(var a in t||{}){var i=t[a];i.visitorFn=r,e(s.prototype.aliasMap,a,t[a])}E.isExtended||(E.binaryPredicate=function(e,t,r){var a=this.aliasMap[this.op.key].visitorFn;return a?a(e,t,r):n(e,t,r)},E.isExtended=!0)},
l.and=function(){var e=a(ie(arguments));return new u("and",[this,e])},l.or=function(){var e=a(ie(arguments));return new u("or",[this,e])},l.not=function(){return new o("not",this)},l.toJSON=function(){return this.toJSONExt({entityType:this._entityType})},l.toJSONExt=function(e){return this.visit(e,w)},l.toFunction=function(e){return this.visit(e,E)},l.toString=function(){return JSON.stringify(this)},l.visit=function(e,t){if(z(e))e={entityType:null};else if(e instanceof Fe)e={entityType:e};else if(!ae(e,"entityType"))throw new Error("All visitor methods must be called with a context object containing at least an 'entityType' property");t?e.visitor=t:t=e.visitor;var r=t[this.visitorMethodName];if(null==r)throw new Error("Unable to locate method: "+this.visitorMethodName+" on visitor");var n=e.entityType;return(this._validate&&null==n||this._entityType!==n)&&(this._validate(n,e.usesNameOnServer),this._entityType=n),Array.prototype.slice.call(arguments,1),r.call(this,e)},l._initialize=function(t,r){this.visitorMethodName=t;var n=this.aliasMap={};for(var a in r||{})e(n,a,r[a])},l._resolveOp=function(e,t){e=e.operator||e;var r=this.aliasMap[e.toLowerCase()];if(!r&&!t)throw new Error("Unable to resolve operator: "+e);return r},p}(),i=function(){var e=function(e){this.value=e},t=e.prototype=new a;return t._initialize("passthruPredicate"),t._validate=F,e}(),o=function(){var e=function(e,t){this.op=this._resolveOp(e),this.pred=a(t)},t=e.prototype=new a;return t._initialize("unaryPredicate",{not:{aliases:["!","~"]}}),t._validate=function(e,t){this.pred._validate(e,t)},e}(),s=function(){var t=function(e,t,r){this.op=this._resolveOp(e),this.expr1Source=t,this.expr2Source=r},r=t.prototype=new a;return r._initialize("binaryPredicate",{eq:{aliases:["==","equals"]},ne:{aliases:["!=","~=","notequals"]},lt:{aliases:["<","lessthan"]},le:{aliases:["<=","lessthanorequal"]},gt:{aliases:[">","greaterthan"]},ge:{aliases:[">=","greaterthanorequal"]},startswith:{isFunction:!0},endswith:{isFunction:!0},contains:{aliases:["substringof"],isFunction:!0},"in":{}}),r._validate=function(t,r){var n={entityType:t,usesNameOnServer:r};if(this.expr1=e(this.expr1Source,n),null==this.expr1)throw new Error("Unable to validate 1st expression: "+this.expr1Source);if(this.expr1 instanceof y)throw new Error("The left hand side of a binary predicate cannot be a literal expression, it must be a valid property or functional predicate expression: "+this.expr1Source);if("in"==this.op.key&&!Array.isArray(this.expr2Source))throw new Error("The 'in' operator requires that its right hand argument be an array");var a=p(n,{isRHS:!0,dataType:this.expr1.dataType});if(this.expr2=e(this.expr2Source,a),null==this.expr2)throw new Error("Unable to validate 2nd expression: "+this.expr2Source);null==this.expr1.dataType&&(this.expr1.dataType=this.expr2.dataType)},t}(),u=function(){var e=function(e,t){return this.op=this._resolveOp(e),1==t.length&&Array.isArray(t[0])&&(t=t[0]),this.preds=t.filter(function(e){return null!=e}).map(function(e){return a(e)}),0==this.preds.length&&(this.op=null),1==this.preds.length?this.preds[0]:void 0},t=e.prototype=new a;return t._initialize("andOrPredicate",{and:{aliases:["&&"]},or:{aliases:["||"]}}),t._validate=function(e,t){this.preds.every(function(r){r._validate(e,t)})},e}(),c=function(){var t=function(e,t,r){this.op=this._resolveOp(e),this.exprSource=t,this.pred=a(r)},r=t.prototype=new a;return r._initialize("anyAllPredicate",{any:{aliases:["some"]},all:{aliases:["every"]}}),r._validate=function(t,r){this.expr=e(this.exprSource,{entityType:t,usesNameOnServer:r}),(null==t||t.isAnonymous)&&(this.expr.dataType=null),this.pred._validate(this.expr.dataType,r)},t}(),l=function(e){this.visitorMethodName=e,this.visit=a.prototype.visit,this._validate=F},y=function(){function e(e){if(null==e)return e;if(_e.contains(e))return e;if(j(e)){var t=_e.fromName(e);if(t)return t;throw new Error("Unable to resolve a dataType named: "+e)}throw new Error("The dataType parameter passed into this literal expression is not a 'DataType'"+e)}var t=function(t,r,n){r=e(r),r=r||_e.fromValue(t),this.value=r&&r.parse?Array.isArray(t)?t.map(function(e){return r.parse(e,typeof e)}):r.parse(t,typeof t):t,this.dataType=r,this.hasExplicitDataType=n},r=t.prototype=new l("litExpr");return r.toString=function(){return" LitExpr - value: "+this.value.toString()+" dataType: "+this.dataType.toString()},t}(),f=function(){var e=function(e){this.propertyPath=e},t=e.prototype=new l("propExpr");return t.toString=function(){return" PropExpr - "+this.propertyPath},t._validate=function(e,t){if(null!=e&&!e.isAnonymous){var r=e.getPropertiesOnPath(this.propertyPath,t,!1);if(!r){var n=$("Unable to resolve propertyPath.  EntityType: '%1'   PropertyPath: '%2'",e.name,this.propertyPath);throw new Error(n)}var a=r[r.length-1];this.dataType=a.isDataProperty?a.dataType:a.entityType}},e}(),h=function(){var e=function(e,t){this.fnName=e,this.exprs=t;var n=r[e];if(null==n)throw new Error("Unknown function: "+e);this.localFn=n.fn,this.dataType=n.dataType},t=e.prototype=new l("fnExpr");t.toString=function(){var e=this.exprs.map(function(e){e.toString()}).toString();return"FnExpr - "+this.fnName+"("+e+")"},t._validate=function(e,t){this.exprs.forEach(function(r){r._validate(e,t)})};var r=e.funcMap={toupper:{fn:function(e){return e.toUpperCase()},dataType:_e.String},tolower:{fn:function(e){return e.toLowerCase()},dataType:_e.String},substring:{fn:function(e,t,r){return e.substring(t,r)},dataType:_e.String},substringof:{fn:function(e,t){return t.indexOf(e)>=0},dataType:_e.Boolean},length:{fn:function(e){return e.length},dataType:_e.Int32},trim:{fn:function(e){return e.trim()},dataType:_e.String},concat:{fn:function(e,t){return e.concat(t)},dataType:_e.String},replace:{fn:function(e,t,r){return e.replace(t,r)},dataType:_e.String},startswith:{fn:function(e,t){return U(e,t)},dataType:_e.Boolean},endswith:{fn:function(e,t){return L(e,t)},dataType:_e.Boolean},indexof:{fn:function(e,t){return e.indexOf(t)},dataType:_e.Int32},round:{fn:function(e){return Math.round(e)},dataType:_e.Int32},ceiling:{fn:function(e){return Math.ceil(e)},dataType:_e.Int32},floor:{fn:function(e){return Math.floor(e)},dataType:_e.Int32},second:{fn:function(e){return e.getSeconds()},dataType:_e.Int32},minute:{fn:function(e){return e.getMinutes()},dataType:_e.Int32},day:{fn:function(e){return e.getDate()},dataType:_e.Int32},month:{fn:function(e){return e.getMonth()+1},dataType:_e.Int32},year:{fn:function(e){return e.getFullYear()},dataType:_e.Int32}};return e}(),d=/^[a-z_][\w.$]*$/i,m=/('[^']*'|[^,]+)/g,v=/("[^"]*"|[^,]+)/g,g=String.fromCharCode(191),E=function(){function e(e){switch(e.key){case"any":return function(e,t){return e.some(function(e){return t(e)})};case"all":return function(e,t){return e.every(function(e){return t(e)})};default:throw new Error("Unknown operator: "+e.key)}}function t(e,t,o){var s,u=e.op,p=_e.getComparableFn(t);switch(u.key){case"eq":s=function(e,t){return e&&"string"==typeof e?r(e,t,o):p(e)==p(t)};break;case"ne":s=function(e,t){return e&&"string"==typeof e?!r(e,t,o):p(e)!=p(t)};break;case"gt":s=function(e,t){return p(e)>p(t)};break;case"ge":s=function(e,t){return p(e)>=p(t)};break;case"lt":s=function(e,t){return p(e)<p(t)};break;case"le":s=function(e,t){return p(e)<=p(t)};break;case"startswith":s=function(e,t){return n(e,t,o)};break;case"endswith":s=function(e,t){return a(e,t,o)};break;case"contains":s=function(e,t){return i(e,t,o)};break;case"in":s=function(e,t){return e=p(e),t=t.map(function(e){return p(e)}),t.indexOf(e)>=0};break;default:return null}return s}function r(e,t,r){return null==t?!1:("string"!=typeof t&&(t=t.toString()),r.usesSql92CompliantStringComparison&&(e=(e||"").trim(),t=(t||"").trim()),r.isCaseSensitive||(e=(e||"").toLowerCase(),t=(t||"").toLowerCase()),e===t)}function n(e,t,r){return r.isCaseSensitive||(e=(e||"").toLowerCase(),t=(t||"").toLowerCase()),U(e,t)}function a(e,t,r){return r.isCaseSensitive||(e=(e||"").toLowerCase(),t=(t||"").toLowerCase()),L(e,t)}function i(e,t,r){return r.isCaseSensitive||(e=(e||"").toLowerCase(),t=(t||"").toLowerCase()),e.indexOf(t)>=0}var o={passthruPredicate:function(){throw new Error("Cannot execute an PassthruPredicate expression against the local cache: "+this.value)},unaryPredicate:function(e){var t=this.pred.visit(e);switch(this.op.key){case"not":return function(e){return!t(e)};default:throw new Error("Invalid unary operator:"+this.op.key)}},binaryPredicate:function(e){var r=this.expr1.visit(e),n=this.expr2.visit(e),a=this.expr1.dataType||this.expr2.dataType,i=e.entityType.metadataStore.localQueryComparisonOptions,o=t(this,a,i);if(null==o)throw new Error("Invalid binaryPredicate operator:"+this.op.key);return function(e){return o(r(e),n(e))}},andOrPredicate:function(e){var t=this.preds.map(function(t){return t.visit(e)});switch(this.op.key){case"and":return function(e){var r=t.reduce(function(t,r){return t&&r(e)},!0);return r};case"or":return function(e){var r=t.reduce(function(t,r){return t||r(e)},!1);return r};default:throw new Error("Invalid boolean operator:"+op.key)}},anyAllPredicate:function(t){var r=this.expr.visit(t),n=p({},t);n.entityType=this.expr.dataType;var a=this.pred.visit(n),i=e(this.op);return function(e){return i(r(e),a)}},litExpr:function(){var e=this.value;return function(){return e}},propExpr:function(){var e=this.propertyPath,t=e.split(".");return 1===t.length?function(t){return t.getProperty(e)}:function(e){return re(e,t)}},fnExpr:function(e){var t=this.exprs.map(function(t){return t.visit(e)}),r=this;return function(e){var n=t.map(function(t){var r=t(e);return r}),a=r.localFn.apply(null,n);return a}}};return o}(),w=function(){function e(t,r){var n=Object.keys(r).every(function(n){if(t.hasOwnProperty(n)){if("object"!=typeof r[n])return!1;if(null==e(t[n],r[n]))return!1}else t[n]=r[n];return!0});return n?t:null}var t={passthruPredicate:function(){return this.value},unaryPredicate:function(e){var t=this.pred.visit(e),r={};return r[this.op.key]=t,r},binaryPredicate:function(e){var t=this.expr1.visit(e),r=this.expr2.visit(e),n={};if(this.expr2 instanceof f&&(r={value:r,isProperty:!0}),"eq"===this.op.key)n[t]=r;else{var a={};n[t]=a,a[this.op.key]=r}return n},andOrPredicate:function(t){var r,n=this.preds.map(function(e){return e.visit(t)});return"and"!==this.op.key||2!==n.length||n.some(j)||(r=n.reduce(e)),null==r&&(r={},r[this.op.key]=n),r},anyAllPredicate:function(e){var t=this.expr.visit(e),r=p({},e);r.entityType=this.expr.dataType;var n=this.pred.visit(r),a={},i={};return i[this.op.key]=n,a[t]=i,a},litExpr:function(e){return this.hasExplicitDataType||e.useExplicitDataType?{value:this.value,dataType:this.dataType.name}:this.value},propExpr:function(e){return e.toNameOnServer?e.entityType.clientPropertyPathToServer(this.propertyPath):this.propertyPath},fnExpr:function(e){var t=this.exprs.map(function(t){return t.visit(e)});return this.fnName+"("+t.join(",")+")"}};return t}();return a}();ne.Predicate=Ke;var qe=function(){function e(e,t){return y(t,{"resourceName,from":null,"resultEntityType,toType":null,"wherePredicate,where":function(e){return e?new Ke(e):void 0},"orderByClause,orderBy":function(e){return e?new Be(e):void 0},"selectClause,select":function(e){return e?new Ue(e):void 0},"expandClause,expand":function(e){return e?new Le(e):void 0},"skipCount,skip":null,"takeCount,take":null,parameters:function(e){return z(e)?void 0:e},"inlineCountEnabled,inlineCount":!1,"noTrackingEnabled,noTracking":!1,queryOptions:function(e){return e?Je.fromJSON(e):void 0}},e),e}function r(e,t,r){if(t&&e[t]===r)return e;var n=p(new qe,e,["resourceName","fromEntityType","wherePredicate","orderByClause","selectClause","skipCount","takeCount","expandClause","inlineCountEnabled","noTrackingEnabled","usesNameOnServer","queryOptions","entityManager","dataService","resultEntityType"]);return n.parameters=p({},e.parameters),t&&(n[t]=r),n}function n(e,r,a,i){var o=a._$typeName||a.parentEnum&&a.parentEnum.name,s=o&&o.substr(0,1).toLowerCase()+o.substr(1);if(i&&s!=i)throw new Error("Invalid value for property: "+i);if(s){var u=r[s];if(void 0===u)throw new Error("Invalid config property: "+s);null===u?e[s]=a:u(e,a)}else t(a,function(t,a){n(e,r,a,t)})}function a(e){return pe(e,"propertyPaths").isOptional().isString().or().isArray().isString().check(),"string"==typeof e&&(e=e.split(",")),e=e.map(function(e){return e.trim()})}function i(e){var t=e.entityType,r=t.keyProperties.map(function(t){return Ke.create(t.name,ze.Equals,e.getProperty(t.name))}),n=Ke.and(r);return n}function o(e){var t=e.entityType.keyProperties,r=S(t,e.values,function(e,t){return Ke.create(e.name,ze.Equals,t)}),n=Ke.and(r);return n}function s(e,t){if(t.isScalar){if(0===t.foreignKeyNames.length)return null;var r=t.foreignKeyNames.map(function(t){return e.getProperty(t)}),n=new Pe(t.entityType,r);return o(n)}var a=t.inverse,i=a?a.foreignKeyNames:t.invForeignKeyNames;if(0===i.length)return null;var s=e.entityAspect.getKey().values,u=S(i,s,function(e,t){return Ke.create(e,ze.Equals,t)});return Ke.and(u)}var u=function(t){return null==t||j(t)?(this.resourceName=t,this.fromEntityType=null,this.wherePredicate=null,this.orderByClause=null,this.selectClause=null,this.skipCount=null,this.takeCount=null,this.expandClause=null,this.parameters={},this.inlineCountEnabled=!1,this.noTrackingEnabled=!1,void(this.entityManager=null)):e(this,t)},c=u.prototype;return c._$typeName="EntityQuery",c.from=function(e){return pe(e,"resourceName").isString().check(),r(this,"resourceName",e)},u.from=function(e){return pe(e,"resourceName").isString().check(),new qe(e)},c.toType=function(e){return pe(e,"entityType").isString().or().isInstanceOf(Fe).check(),r(this,"resultEntityType",e)},c.where=function(e){return null!=e&&(e=Ke.create(ie(arguments)),this.fromEntityType&&e._validate(this.fromEntityType),this.wherePredicate&&(e=this.wherePredicate.and(e))),r(this,"wherePredicate",e)},c.orderBy=function(e,t){var n=null==e?null:new Be(a(e),t);return this.orderByClause&&n&&(n=new Be([this.orderByClause,n])),r(this,"orderByClause",n)},c.orderByDesc=function(e){return this.orderBy(e,!0)},c.select=function(e){var t=null==e?null:new Ue(a(e));return r(this,"selectClause",t)},c.skip=function(e){return pe(e,"count").isOptional().isNumber().check(),r(this,"skipCount",null==e?null:e)},c.top=function(e){return this.take(e)},c.take=function(e){return pe(e,"count").isOptional().isNumber().check(),r(this,"takeCount",null==e?null:e)},c.expand=function(e){var t=null==e?null:new Le(a(e));return r(this,"expandClause",t)},c.withParameters=function(e){return pe(e,"parameters").isObject().check(),r(this,"parameters",e)},c.inlineCount=function(e){return pe(e,"enabled").isBoolean().isOptional().check(),e=void 0===e?!0:!!e,r(this,"inlineCountEnabled",e)},c.useNameOnServer=function(e){return pe(e,"usesNameOnServer").isBoolean().isOptional().check(),e=void 0===e?!0:!!e,r(this,"usesNameOnServer",e)},c.noTracking=function(e){return pe(e,"enabled").isBoolean().isOptional().check(),e=void 0===e?!0:!!e,r(this,"noTrackingEnabled",e)},c.using=function(e){if(!e)return this;var t=r(this);return n(t,{entityManager:null,dataService:null,queryOptions:null,fetchStrategy:function(e,t){e.queryOptions=(e.queryOptions||new Je).using(t)},mergeStrategy:function(e,t){e.queryOptions=(e.queryOptions||new Je).using(t)},jsonResultsAdapter:function(e,t){e.dataService=(e.dataService||new Ne).using({jsonResultsAdapter:t})}},e),t},c.execute=function(e,t){if(!this.entityManager)throw new Error("An EntityQuery must have its EntityManager property set before calling 'execute'");return this.entityManager.executeQuery(this,e,t)},c.executeLocally=function(){if(!this.entityManager)throw new Error("An EntityQuery must have its EntityManager property set before calling 'executeLocally'");return this.entityManager.executeQueryLocally(this)},c.toJSON=function(){return this.toJSONExt()},c.toJSONExt=function(e){e=e||{},e.entityType=e.entityType||this.fromEntityType,e.propertyPathFn=e.toNameOnServer?e.entityType.clientPropertyPathToServer.bind(e.entityType):M;var t=function(t){return t?t.toJSONExt(e):void 0};return y(this,{"from,resourceName":null,"toType,resultEntityType":function(e){return e?j(e)?e:e.name:void 0},"where,wherePredicate":t,"orderBy,orderByClause":t,"select,selectClause":t,"expand,expandClause":t,"skip,skipCount":null,"take,takeCount":null,parameters:function(e){return z(e)?void 0:e},"inlineCount,inlineCountEnabled":!1,"noTracking,noTrackingEnabled":!1,queryOptions:null})},u.fromEntities=function(e){pe(e,"entities").isEntity().or().isNonEmptyArray().isEntity().check(),Array.isArray(e)||(e=ie(arguments));var t=e[0],r=t.entityType;if(e.some(function(e){return e.entityType!==r}))throw new Error("All 'fromEntities' must be the same type; at least one is not of type "+r.name);var n=new qe(r.defaultResourceName),a=e.map(function(e){return i(e)}),o=Ke.or(a);n=n.where(o);var s=t.entityAspect.entityManager;return s&&(n=n.using(s)),n},u.fromEntityKey=function(e){pe(e,"entityKey").isInstanceOf(Pe).check();var t=new qe(e.entityType.defaultResourceName),r=o(e);return t=t.where(r).toType(e.entityType)},u.fromEntityNavigation=function(e,t){pe(e,"entity").isEntity().check();var r=e.entityType._checkNavProperty(t),n=new qe(r.entityType.defaultResourceName),a=s(e,r);n=n.where(a);var i=e.entityAspect.entityManager;return i?n.using(i):n},c._getFromEntityType=function(e,t){var r=this.fromEntityType;if(r)return r;var n=this.resourceName;if(!n)throw new Error("There is no resourceName for this query");if(e.isEmpty()){if(t)throw new Error("There is no metadata available for this query. Are you querying the local cache before you've fetched metadata?");return null}var a=e.getEntityTypeNameForResourceName(n);if(r=a?e._getEntityType(a):this._getToEntityType(e,!0),!r){if(t)throw new Error($("Cannot find an entityType for resourceName: '%1'.  Consider adding an 'EntityQuery.toType' call to your query or calling the MetadataStore.setEntityTypeForResourceName method to register an entityType for this resourceName.",n));return null}return this.fromEntityType=r,r},c._getToEntityType=function(e,t){return this.resultEntityType instanceof Fe?this.resultEntityType:this.resultEntityType?(this.resultEntityType=e._getEntityType(this.resultEntityType,!1),this.resultEntityType):t?null:!this.selectClause&&this._getFromEntityType(e,!1)},c._toUri=function(e){var t=Ne.resolve([e.dataService]);return t.uriBuilder.buildUri(this,e.metadataStore)},u}(),ze=function(){var e=new ye("FilterQueryOp");return e.Equals=e.addSymbol({operator:"eq"}),e.NotEquals=e.addSymbol({operator:"ne"}),e.GreaterThan=e.addSymbol({operator:"gt"}),e.LessThan=e.addSymbol({operator:"lt"}),e.GreaterThanOrEqual=e.addSymbol({operator:"ge"}),e.LessThanOrEqual=e.addSymbol({operator:"le"}),e.Contains=e.addSymbol({operator:"contains"}),e.StartsWith=e.addSymbol({operator:"startswith"}),e.EndsWith=e.addSymbol({operator:"endswith"}),e.Any=e.addSymbol({operator:"any"}),e.All=e.addSymbol({operator:"all"}),e.IsTypeOf=e.addSymbol({operator:"isof"}),e.resolveSymbols(),e}(),Be=(function(){var e=new ye("BooleanQueryOp");return e.And=e.addSymbol({operator:"and"}),e.Or=e.addSymbol({operator:"or"}),e.Not=e.addSymbol({operator:"not"}),e.resolveSymbols(),e}(),function(){var e=function(e,t){if(e.length>1){if(e[0]instanceof Be)return void(this.items=Array.prototype.concat.apply(e[0].items,e.slice(1).map(s("items"))));var n=e.map(function(e){return new r(e,t)})}else var n=[new r(e[0],t)];this.items=n},t=e.prototype;t.validate=function(e){null==e||e.isAnonymous||this.items.forEach(function(t){t.validate(e)})},t.getComparer=function(e){var t=this.items.map(function(t){return t.getComparer(e)});return function(e,r){for(var n=0;n<t.length;n++){var a=t[n](e,r);if(0!==a)return a}return 0}},t.toJSONExt=function(e){return this.items.map(function(t){return e.propertyPathFn(t.propertyPath)+(t.isDesc?" desc":"")})};var r=function(e,t){if("string"!=typeof e)throw new Error("propertyPath is not a string");e=e.trim();var r=e.split(" ");if(r.length>1&&t!==!0&&t!==!1&&(t=U(r[1].toLowerCase(),"desc"),!t)){var n=U(r[1].toLowerCase(),"asc");if(!n)throw new Error("the second word in the propertyPath must begin with 'desc' or 'asc'")}this.propertyPath=r[0],this.isDesc=t},n=r.prototype;return n.validate=function(e){null==e||e.isAnonymous||(this.lastProperty=e.getProperty(this.propertyPath,!0))},n.getComparer=function(e){if(this.lastProperty||this.validate(e),this.lastProperty)var t=this.lastProperty.dataType,r=this.lastProperty.parentType.metadataStore.localQueryComparisonOptions.isCaseSensitive;var n=this.propertyPath,a=this.isDesc;return function(e,i){var o=re(e,n),s=re(i,n),u=t||o&&_e.fromValue(o)||_e.fromValue(s);if(u===_e.String)r?(o=o||"",s=s||""):(o=(o||"").toLowerCase(),s=(s||"").toLowerCase());else{var p=_e.getComparableFn(u);o=p(o),s=p(s)}return o===s?0:o>s||void 0===s?a?-1:1:a?1:-1}},e}()),Ue=function(){var e=function(e){this.propertyPaths=e,this._pathNames=e.map(function(e){return e.replace(".","_")})},t=e.prototype;return t.validate=function(e){null==e||e.isAnonymous||this.propertyPaths.forEach(function(t){e.getProperty(t,!0)})},t.toFunction=function(){var e=this;return function(t){var r={};return e.propertyPaths.forEach(function(n,a){r[e._pathNames[a]]=re(t,n)}),r}},t.toJSONExt=function(e){return this.propertyPaths.map(function(t){return e.propertyPathFn(t)})},e}(),Le=function(){var e=function(e){this.propertyPaths=e},t=e.prototype;return t.toJSONExt=function(e){return this.propertyPaths.map(function(t){return e.propertyPathFn(t)})},e}();ne.FilterQueryOp=ze,ne.EntityQuery=qe,ne.OrderByClause=Be;var $e=function(){var e=new ye("MergeStrategy");return e.PreserveChanges=e.addSymbol(),e.OverwriteChanges=e.addSymbol(),e.SkipMerge=e.addSymbol(),e.Disallowed=e.addSymbol(),e.resolveSymbols(),e}(),Ge=function(){var e=new ye("FetchStrategy");return e.FromServer=e.addSymbol(),e.FromLocalCache=e.addSymbol(),e.resolveSymbols(),e}(),Je=function(){function e(e,t){return t&&le(t).whereParam("fetchStrategy").isEnumOf(Ge).isOptional().whereParam("mergeStrategy").isEnumOf($e).isOptional().whereParam("includeDeleted").isBoolean().isOptional().applyAll(e),e}var t=function(t){e(this,t)},r=t.prototype;return r._$typeName="QueryOptions",t.resolve=function(e){return new Je(h(e,["fetchStrategy","mergeStrategy","includeDeleted"]))},t.defaultInstance=new t({fetchStrategy:Ge.FromServer,mergeStrategy:$e.PreserveChanges,includeDeleted:!1}),r.using=function(t){if(!t)return this;var r=new Je(this);return $e.contains(t)?t={mergeStrategy:t}:Ge.contains(t)&&(t={fetchStrategy:t}),e(r,t)},r.setAsDefault=function(){return l(this,t)},r.toJSON=function(){return y(this,{fetchStrategy:null,mergeStrategy:null,includeDeleted:!1})},t.fromJSON=function(e){return new Je({fetchStrategy:Ge.fromName(e.fetchStrategy),mergeStrategy:$e.fromName(e.mergeStrategy),includeDeleted:e.includeDeleted===!0})},t}();ne.QueryOptions=Je,ne.FetchStrategy=Ge,ne.MergeStrategy=$e;var Qe=function(){function e(e){if(e){if(1===e.length){var t=e[0];return function(e){return e?e.entityAspect.entityState===t:!1}}return function(t){return t?e.some(function(e){return t.entityAspect.entityState===e}):!1}}return function(e){return!!e}}var t=e([be.Added,be.Modified,be.Deleted]),r=function(e,t){this.entityManager=e,this.entityType=t,this.entityType.isFrozen=!0,this._indexMap={},this._entities=[],this._emptyIndexes=[]},n=r.prototype;return n.attachEntity=function(e,t,r){var n=e.entityAspect;n._initialized||this.entityType._initializeInstance(e),delete n._initialized;var a=n.getKey()._keyInGroup,i=this._indexMap[a];if(i>=0){var o=this._entities[i],s=o.entityAspect.entityState,u=s.isUnchanged();if(o===e)n.entityState=t;else{if(r===$e.Disallowed)throw new Error("A MergeStrategy of 'Disallowed' does not allow you to attach an entity when an entity with the same key is already attached: "+n.getKey());if(r===$e.OverwriteChanges||r===$e.PreserveChanges&&u){var p=this.entityManager.helper.unwrapInstance(e);this.entityType._updateTargetFromRaw(o,p,De.getRawValueFromServer),o.entityAspect.setEntityState(t)}}return o}return 0===this._emptyIndexes.length?i=this._entities.push(e)-1:(i=this._emptyIndexes.pop(),this._entities[i]=e),this._indexMap[a]=i,n.entityState=t,n.entityGroup=this,n.entityManager=this.entityManager,e},n.detachEntity=function(e){var t=e.entityAspect,r=t.getKey()._keyInGroup,n=this._indexMap[r];if(void 0===n)throw new Error("internal error - entity cannot be found in group");return delete this._indexMap[r],this._emptyIndexes.push(n),this._entities[n]=null,e},n.findEntityByKey=function(e){var t;t=e instanceof Pe?e._keyInGroup:Pe.createKeyString(e);var r=this._indexMap[t];return void 0!==r?this._entities[r]:null},n.hasChanges=function(){return this._entities.some(t)},n.getEntities=function(t){var r=e(t);return this._entities.filter(r)},n._checkOperation=function(e){return this._entities.forEach(function(t){t&&t.entityAspect._checkOperation(e)}),this},n._clear=function(){this._entities.forEach(function(e){null!=e&&e.entityAspect._detach()}),this._entities=null,this._indexMap=null,this._emptyIndexes=null},n._updateFkVal=function(e,t,r){var n=e.name;this._entities.forEach(function(e){null!=e&&e.getProperty(n)==t&&e.setProperty(n,r)})},n._fixupKey=function(e,t){var r=this._indexMap[e];if(void 0===r)throw new Error("Internal Error in key fixup - unable to locate entity");var n=this._entities[r],a=n.entityType.keyProperties[0].name;n.setProperty(a,t),delete n.entityAspect.hasTempKey,delete this._indexMap[e],this._indexMap[t]=r},n._replaceKey=function(e,t){var r=this._indexMap[e._keyInGroup];delete this._indexMap[e._keyInGroup],this._indexMap[t._keyInGroup]=r},r}(),He=function(){function e(e,t,r){var n=r?Je.defaultInstance:e.queryOptions,a=r?We.defaultInstance:e.saveOptions,i=r?Ee.defaultInstance:e.validationOptions,o=le(t).whereParam("serviceName").isOptional().isString().whereParam("dataService").isOptional().isInstanceOf(Ne).whereParam("queryOptions").isInstanceOf(Je).isOptional().withDefault(n).whereParam("saveOptions").isInstanceOf(We).isOptional().withDefault(a).whereParam("validationOptions").isInstanceOf(Ee).isOptional().withDefault(i).whereParam("keyGeneratorCtor").isFunction().isOptional();r&&(o=o.whereParam("metadataStore").isInstanceOf(Ce).isOptional().withDefault(new Ce)),o.applyAll(e),c(e.queryOptions,n),c(e.saveOptions,a),c(e.validationOptions,i),t.serviceName&&(e.dataService=new Ne({serviceName:e.serviceName})),e.serviceName=e.dataService&&e.dataService.serviceName,e.keyGeneratorCtor=e.keyGeneratorCtor||Ve,(r||t.keyGeneratorCtor)&&(e.keyGenerator=new e.keyGeneratorCtor)}function n(e){e.forEach(function(e){var r=[],n=e.entityAspect;t(n._validationErrors,function(e,t){t.isServerError&&r.push(e)}),0!==r.length&&n._processValidationOpAndPublish(function(){r.forEach(function(e){n._removeValidationError(e)})})})}function a(e){var r=[];return e.forEach(function(e){t(e.entityAspect._validationErrors,function(t,n){var a=p({entity:e,errorName:n.validator.name},n,["errorMessage","propertyName","isServerError"]);r.push(a)})}),r}function i(e,t){var r=t.entityErrors;if(r){var n=e.entityManager,a=n.metadataStore;t.entityErrors=r.map(function(e){var t=null;if(e.keyValues){var r=a._getEntityType(e.entityTypeName),i=new Pe(r,e.keyValues);t=n.findEntityByKey(i)}if(t){var o=e.propertyName?{propertyName:e.propertyName,property:r.getProperty(e.propertyName)}:{},s=ge.getKey(e.errorName||e.errorMessage,e.propertyName),u=new ge(null,o,e.errorMessage,s);u.isServerError=!0,t.entityAspect.addValidationError(u)}var c=p({entity:t,isServerError:!0},e,["errorName","errorMessage","propertyName"]);return c})}}function o(e,t){var r,n=y(e,t),a=n.entityKey,i=0===n.remainingArgs.length?!1:!!n.remainingArgs[0],o=!1;return i&&(r=e.getEntityByKey(a),o=!!r,o&&!e.queryOptions.includeDeleted&&r.entityAspect.entityState.isDeleted()&&(r=null,o=e.queryOptions.mergeStrategy!==$e.OverwriteChanges)),o?Ae.resolve({entity:r,entityKey:a,fromCache:!0}):qe.fromEntityKey(a).using(e).execute().then(function(e){return r=0===e.results.length?null:e.results[0],Ae.resolve({entity:r,entityKey:a,fromCache:!1})})}function s(e,t){return pe(t,"entityTypes").isString().isOptional().or().isNonEmptyArray().isString().or().isInstanceOf(Fe).or().isNonEmptyArray().isInstanceOf(Fe).check(),"string"==typeof t?t=e.metadataStore._getEntityType(t,!1):Array.isArray(t)&&"string"==typeof t[0]&&(t=t.map(function(t){return e.metadataStore._getEntityType(t,!1)})),t}function l(e,t,r){var n,a=D(e,t);return a.forEach(function(e){if(e){var t=e.getEntities(r);n?n.push.apply(n,t):n=t}}),n||[]}function y(e,t){try{if(t[0]instanceof Pe)return{entityKey:t[0],remainingArgs:ie(t,1)};if(t.length>=2){var r="string"==typeof t[0]?e.metadataStore._getEntityType(t[0],!1):t[0];return{entityKey:new Pe(r,t[1]),remainingArgs:ie(t,2)}}}catch(n){}throw new Error("Must supply an EntityKey OR an EntityType name or EntityType followed by a key value or an array of key values.")}function h(e,t){e.forEach(function(e){e.entityAspect.isBeingSaved=t})}function g(e,r){var n,a=r&&r[0];if(a)if(n={},a.entityType)r.forEach(function(e){var t=n[e.entityType.name];t||(t={},t.entityType=e.entityType,t._entities=[],n[e.entityType.name]=t),t._entities.push(e)});else{var i=s(e,r);i.forEach(function(t){var r=e._entityGroupMap[t.name];r&&r._entities.length&&(n[t.name]=r)})}else n=e._entityGroupMap;var o=[],u={};return t(n,function(e,t){u[e]=E(t,o)}),{entityGroupMap:u,tempKeys:o}}function E(e,t){var r={},n=e.entityType,a=n.dataProperties,i=Z(n),o=[];return e._entities.forEach(function(e){if(e){var r=T(e,a,i,t);o.push(r)}}),r.entities=o,r}function T(e,t,r,n){var a={};t.forEach(function(t){var n=t.name,i=e.getProperty(n);if(null!=i||null!=t.defaultValue){if(i&&t.isComplexProperty){var o=t.dataType.dataProperties;i=m(i,function(e){return T(e,o,r)})}else i=r?r(t,i):i,t.isUnmapped&&(i=f(i));void 0!==i&&(a[n]=i)}});var i,o;if(e.entityAspect){i=e.entityAspect;var s=i.entityState;o={tempNavPropNames:b(i,n),entityState:s.name},i.extraMetadata&&(o.extraMetadata=i.extraMetadata),(s.isModified()||s.isDeleted())&&(o.originalValuesMap=i.originalValues),a.entityAspect=o}else i=e.complexAspect,o={},i.originalValues&&!z(i.originalValues)&&(o.originalValuesMap=i.originalValues),a.complexAspect=o;return a}function b(e,t){var r=e.entity;e.hasTempKey&&t.push(e.getKey().toJSON());var n;return r.entityType.navigationProperties.forEach(function(e){if(e.relatedDataProperties){var t=r.getProperty(e.name);t&&t.entityAspect.hasTempKey&&(n=n||[],n.push(e.name))}}),n}function _(e,t,r){var n=r.tempKeyMap,a=e.entityType,i=r.mergeStrategy,o=null,s=e.entityManager,u=s.entityChanged,p=[],c=De.getRawValueFromClient;return t.entities.forEach(function(t){var r=t.entityAspect,l=a.getEntityKeyFromRawEntity(t,c),y=be.fromName(r.entityState),f=y.isAdded()&&A(n,l);if(o=f?null:e.findEntityByKey(l))if(i===$e.SkipMerge);else{if(i===$e.Disallowed)throw new Error("A MergeStrategy of 'Disallowed' prevents "+l.toString()+" from being merged");var h=o.entityAspect.entityState,d=h.isUnchanged();(i===$e.OverwriteChanges||d)&&(a._updateTargetFromRaw(o,t,c),o.entityAspect.setEntityState(y),u.publish({entityAction:we.MergeOnImport,entity:o}))}else o=a._createInstanceCore(),a._updateTargetFromRaw(o,t,c),f&&(o.entityAspect.hasTempKey=!0,o.setProperty(a.keyProperties[0].name,f.values[0]),r.tempNavPropNames&&r.tempNavPropNames.forEach(function(e){var t=a.getNavigationProperty(e),r=t.relatedDataProperties[0].name,i=o.getProperty(r),s=new Pe(t.entityType,[i]),u=A(n,s);o.setProperty(r,u.values[0])})),o=e.attachEntity(o,y),u.publish({entityAction:we.AttachOnImport,entity:o}),y.isUnchanged()||s._notifyStateChange(o,!0);p.push(o)}),p}function A(e,t){var r=e[t.toString()];if(r)return r;var n=t._subtypes;if(!n)return null;for(var a=0,i=n.length;i>a;a++)if(r=e[t.toString(n[a])])return r;return null}function x(e,t,r){return e=e.then(function(e){return t&&t(e),Ae.resolve(e)},function(e){return r&&r(e),Ae.reject(e)})}function F(e,t){
var r;return r=t?t.filter(function(t){if(t.entityAspect.entityManager!==e)throw new Error("Only entities in this entityManager may be saved");return!t.entityAspect.entityState.isDetached()}):e.getChanges()}function M(e,t){e._inKeyFixup=!0,t.forEach(function(t){var r=e._entityGroupMap[t.entityTypeName];if(!r)throw new Error("Unable to locate the following fully qualified EntityType name: "+t.entityTypeName);r._fixupKey(t.tempValue,t.realValue)}),e._inKeyFixup=!1}function D(e,t){var r=e._entityGroupMap;return t?d(t).map(function(e){if(e instanceof Fe)return r[e.name];throw new Error("The EntityManager.getChanges() 'entityTypes' parameter must be either an entityType or an array of entityTypes or null")}):u(r)}function k(e,t){var r=t.entityAspect.getKey(),n=S(t.entityType.keyProperties,r.values,function(e,t){return e.defaultValue===t?e:null}).filter(function(e){return null!==e});if(n.length)if(t.entityType.autoGeneratedKeyType!==Ie.None)e.generateTempKeyValue(t);else if(n.length===r.values.length)throw new Error("Cannot attach an object of type  ("+t.entityType.name+") to an EntityManager without first setting its key or setting its entityType 'AutoGeneratedKeyType' property to something other than 'None'")}function I(e,t){return t?(t=d(t),t.forEach(function(e){if(!be.contains(e))throw new Error("The EntityManager.getChanges() 'entityStates' parameter must either be null, an entityState or an array of entityStates")}),t):null}function V(e,t,r,n){var a=t.entityType.navigationProperties;a.forEach(function(a){var i=t.getProperty(a.name);if(a.isScalar){if(!i)return;e.attachEntity(i,r,n)}else i.forEach(function(t){e.attachEntity(t,r,n)})})}function j(e,t,n,a){try{var i,o=e.metadataStore;if(o.isEmpty()&&a.hasServerMetadata)throw new Error("cannot execute _executeQueryCore until metadataStore is populated.");if(n.fetchStrategy===Ge.FromLocalCache)try{return i=e.executeQueryLocally(t),Ae.resolve({results:i,query:t})}catch(s){return Ae.reject(s)}var u=new Ze({query:t,entityManager:e,dataService:a,mergeOptions:{mergeStrategy:n.mergeStrategy,noTracking:!!t.noTrackingEnabled,includeDeleted:n.includeDeleted}}),p=e.validationOptions.validateOnQuery;return a.adapterInstance.executeQuery(u).then(function(n){var o=O(function(){var t={isLoading:e.isLoading};return e.isLoading=!0,e._pendingPubs=[],t},function(r){e.isLoading=r.isLoading,e._pendingPubs.forEach(function(e){e()}),e._pendingPubs=null,e._hasChangesAction&&e._hasChangesAction(),t=null,u=null,r.error&&Ae.reject(r.error)},function(){var o=a.jsonResultsAdapter.extractResults(n);o=d(o),i=u.visitAndMerge(o,{nodeType:"root"}),p&&i.forEach(function(e){e.entityAspect&&e.entityAspect.validateEntity()}),u.processDeferred(),R(i,t);var s=r(u.refMap);return{results:i,query:t,entityManager:e,httpResponse:n.httpResponse,inlineCount:n.inlineCount,retrievedEntities:s}});return Ae.resolve(o)},function(r){return r&&(r.query=t,r.entityManager=e),Ae.reject(r)})}catch(s){return s&&(s.query=t),Ae.reject(s)}}function R(e,t){if(!t.noTrackingEnabled){var r=t.expandClause;null!=r&&r.propertyPaths.forEach(function(t){var r=t.split(".");K(e,r)})}}function K(e,t){var r=t[0];e.forEach(function(e){var n=e.entityAspect;if(n&&(n._markAsLoaded(r),1!==t.length)){var a=e.getProperty(r);a&&(a.arrayChanged||(a=[a]),K(a,t.slice(1)))}})}function q(e){var t=e.filter(function(e){return e.entityAspect.isBeingSaved=!0,e.entityAspect.entityState.isModified()&&e.entityType.concurrencyProperties.length>0});0!==t.length&&t.forEach(function(e){e.entityType.concurrencyProperties.forEach(function(t){B(e,t)})})}function B(e,t){if(!e.entityAspect.originalValues[t.name]){var r=e.getProperty(t.name);if(r||(r=t.dataType.defaultValue),t.dataType.isNumeric)e.setProperty(t.name,r+1);else if(t.dataType.isDate){for(var n=new Date,a=new Date;n.getTime()===a.getTime();)a=new Date;e.setProperty(t.name,a)}else{if(t.dataType!==_e.Guid){if(t.dataType===_e.Binary)return;throw new Error("Unable to update the value of concurrency property before saving: "+t.name)}e.setProperty(t.name,C())}}}function U(e,t){var r=e._entityGroupMap[t.name];return r||(r=new Qe(e,t),e._entityGroupMap[t.name]=r),r}function L(e,t){var r=t.getSelfAndSubtypes();return r.map(function(t){return U(e,t)})}function $(e,t){var r={},n=e.entityType||e.complexType,a=Z(n),i={};return n.dataProperties.forEach(function(n){if(n.isComplexProperty)r[n.nameOnServer]=m(e.getProperty(n.name),function(e){return $(e,t)});else{var o=e.getProperty(n.name);if(o=t?t(n,o):o,void 0===o)return;o=a?a(n,o):o,void 0!==o&&(n.isUnmapped?i[n.nameOnServer]=f(o):r[n.nameOnServer]=o)}}),z(i)||(r.__unmapped=i),r}function G(e,r,n){var a=e.entityType||e.complexType,i=e.entityAspect||e.complexAspect,o=r.namingConvention.clientPropertyNameToServer,s={};return t(i.originalValues,function(e,t){var r=a.getProperty(e);t=n?n(r,t):t,void 0!==t&&(s[o(e,r)]=t)}),a.complexProperties.forEach(function(t){var a=e.getProperty(t.name);if(t.isScalar){var i=G(a,r,n);z(i)||(s[o(t.name,t)]=i)}else{var u=a.map(function(e){return G(e,r,n)});s[o(t.name,t)]=u}}),s}function J(e,r,n){var a=e.entityType,i=Z(a),o=r.namingConvention.clientPropertyNameToServer,s={};return t(e.entityAspect.originalValues,function(t){var r=a.getProperty(t),u=e.getProperty(t);u=n?n(r,u):u,void 0!==u&&(u=i?i(r,u):u,void 0!==u&&(s[o(t,r)]=u))}),a.complexProperties.forEach(function(t){if(Q(e,t)){var r=e.getProperty(t.name);s[o(t.name,t)]=m(r,function(e){return $(e,n)})}}),s}function Q(e,t){var r=e.getProperty(t.name);return t.isScalar?H(r):r._origValues?!0:r.some(function(e){return H(e)})}function H(e){return z(e.complexAspect.originalValues)?e.complexType.complexProperties.some(function(t){return Q(e,t)}):!0}function Z(e){return e.serializerFn||e.metadataStore&&e.metadataStore.serializerFn}function W(){this.map={}}var Y=function(t){if(arguments.length>1)throw new Error("The EntityManager ctor has a single optional argument that is either a 'serviceName' or a configuration object.");0===arguments.length?t={serviceName:""}:"string"==typeof t&&(t={serviceName:t}),e(this,t,!0),this.entityChanged=new fe("entityChanged",this),this.validationErrorsChanged=new fe("validationErrorsChanged",this),this.hasChangesChanged=new fe("hasChangesChanged",this),this.clear()},X=Y.prototype;return X._$typeName="EntityManager",fe.bubbleEvent(X,null),X.setProperties=function(t){e(this,t,!1)},X.createEntity=function(e,t,r,n){pe(e,"entityType").isString().or().isInstanceOf(Fe).check(),pe(r,"entityState").isEnumOf(be).isOptional().check(),pe(n,"mergeStrategy").isEnumOf($e).isOptional().check(),"string"==typeof e&&(e=this.metadataStore._getEntityType(e)),r=r||be.Added;var a;return N(this,"isLoading",!0,function(){a=e.createEntity(t)}),r!==be.Detached&&(a=this.attachEntity(a,r,n)),a},Y.importEntities=function(e,t){var r=new He;return r.importEntities(e,t),r},X.acceptChanges=function(){this.getChanges().map(function(e){return e.entityAspect._checkOperation("acceptChanges")}).forEach(function(e){e.acceptChanges()})},X.exportEntities=function(e,t){pe(e,"entities").isArray().isEntity().or().isNonEmptyArray().isInstanceOf(Fe).or().isNonEmptyArray().isString().or().isOptional().check(),pe(t,"config").isObject().or().isBoolean().or().isOptional().check(),null==t?t={includeMetadata:!0,asString:!0}:"boolean"==typeof t&&(t={includeMetadata:t,asString:!0}),le(t).whereParam("asString").isBoolean().isOptional().withDefault(!0).whereParam("includeMetadata").isBoolean().isOptional().withDefault(!0).applyAll(t);var r=g(this,e),n=p({},r,["tempKeys","entityGroupMap"]);t.includeMetadata?(n=p(n,this,["dataService","saveOptions","queryOptions","validationOptions"]),n.metadataStore=this.metadataStore.exportMetadata()):(n.metadataVersion=ne.metadataVersion,n.metadataStoreName=this.metadataStore.name);var a=t.asString?JSON.stringify(n,null,he.stringifyPad):n;return a},X.importEntities=function(e,r){r=r||{},le(r).whereParam("mergeStrategy").isEnumOf($e).isOptional().withDefault(this.queryOptions.mergeStrategy).whereParam("metadataVersionFn").isFunction().isOptional().applyAll(r);var n=this,a="string"==typeof e?JSON.parse(e):e;a.metadataStore?(this.metadataStore.importMetadata(a.metadataStore),this.dataService=a.dataService&&Ne.fromJSON(a.dataService)||new Ne({serviceName:a.serviceName}),this.saveOptions=new We(a.saveOptions),this.queryOptions=Je.fromJSON(a.queryOptions),this.validationOptions=new Ee(a.validationOptions)):r.metadataVersionFn&&r.metadataVersionFn({metadataVersion:a.metadataVersion,metadataStoreName:a.metadataStoreName});var i={};a.tempKeys.forEach(function(e){var t=Pe.fromJSON(e,n.metadataStore);i[t.toString()]=new Pe(t.entityType,n.keyGenerator.generateTempKeyValue(t.entityType,t.values[0]))});var o=[];return r.tempKeyMap=i,O(function(){n._pendingPubs=[]},function(){n._pendingPubs.forEach(function(e){e()}),n._pendingPubs=null,n._hasChangesAction&&n._hasChangesAction()},function(){t(a.entityGroupMap,function(e,t){var a=n.metadataStore._getEntityType(e,!0),i=U(n,a),s=_(i,t,r);Array.prototype.push.apply(o,s)}),o.forEach(function(e){e.entityAspect.entityState.isDeleted()||n._linkRelatedEntities(e)})}),{entities:o,tempKeyMapping:i}},X.clear=function(){r(this._entityGroupMap,function(e,t){return t._checkOperation()}).forEach(function(e){e._clear()}),this._entityGroupMap={},this._unattachedChildrenMap=new W,this.keyGenerator=new this.keyGeneratorCtor,this.entityChanged.publish({entityAction:we.Clear}),this._setHasChanges(!1)},X.createEmptyCopy=function(){var e=new Y(p({},this,["dataService","metadataStore","queryOptions","saveOptions","validationOptions","keyGeneratorCtor"]));return e},X.addEntity=function(e){return this.attachEntity(e,be.Added)},X.attachEntity=function(e,t,r){if(pe(e,"entity").isRequired().check(),this.metadataStore._checkEntityType(e),t=pe(t,"entityState").isEnumOf(be).isOptional().check(be.Unchanged),r=pe(r,"mergeStrategy").isEnumOf($e).isOptional().check($e.Disallowed),e.entityType.metadataStore!==this.metadataStore)throw new Error("Cannot attach this entity because the EntityType ("+e.entityType.name+") and MetadataStore associated with this entity does not match this EntityManager's MetadataStore.");var n=e.entityAspect;if(n){if(n._inProcessEntity)return n._inProcessEntity}else n=new Se(e);var a=n.entityManager;if(a){if(a===this)return e;throw new Error("This entity already belongs to another EntityManager")}var i,o=this;return N(this,"isLoading",!0,function(){t.isAdded()&&k(o,e),i=o._attachEntityCore(e,t,r),n._inProcessEntity=i;try{V(o,e,t,r)}finally{n._inProcessEntity=null}}),this.validationOptions.validateOnAttach&&i.entityAspect.validateEntity(),t.isUnchanged()||this._notifyStateChange(i,!0),this.entityChanged.publish({entityAction:we.Attach,entity:i}),i},X.detachEntity=function(e){pe(e,"entity").isEntity().check();var t=e.entityAspect;if(!t)return!1;if(t.entityManager!==this)throw new Error("This entity does not belong to this EntityManager.");return t.setDetached()},X.fetchMetadata=function(e,t,r){"function"==typeof e?(r=t,t=e,e=null):(pe(e,"dataService").isInstanceOf(Ne).isOptional().check(),pe(t,"callback").isFunction().isOptional().check(),pe(r,"errorCallback").isFunction().isOptional().check());var n=this.metadataStore.fetchMetadata(e||this.dataService);return x(n,t,r)},X.executeQuery=function(e,t,r){pe(e,"query").isInstanceOf(qe).or().isString().check(),pe(t,"callback").isFunction().isOptional().check(),pe(r,"errorCallback").isFunction().isOptional().check();var n,a=Je.resolve([e.queryOptions,this.queryOptions,Je.defaultInstance]),i=Ne.resolve([e.dataService,this.dataService]);if(!i.hasServerMetadata||this.metadataStore.hasMetadataFor(i.serviceName))n=j(this,e,a,i);else{var o=this;n=this.fetchMetadata(i).then(function(){return j(o,e,a,i)})}return x(n,t,r)},X.executeQueryLocally=function(e){pe(e,"query").isInstanceOf(qe).check();var t=this.metadataStore,r=e._getFromEntityType(t,!0),n=L(this,r),a=e.wherePredicate&&e.wherePredicate.toFunction({entityType:r}),i=Je.resolve([e.queryOptions,this.queryOptions,Je.defaultInstance]),o=i.includeDeleted===!0,s=function(e){return e&&(o||!e.entityAspect.entityState.isDeleted())&&(a?a(e):!0)},u=[];n.forEach(function(e){u.push.apply(u,e._entities.filter(s))});var p=e.orderByClause&&e.orderByClause.getComparer(r);p&&u.sort(p);var c=e.skipCount;c&&(u=u.slice(c));var l=e.takeCount;l&&(u=u.slice(0,l));var y=e.selectClause;if(y){var f=y.toFunction();u=u.map(f)}return u},X.saveChanges=function(e,t,r,a){function o(e){var t=m.entityManager;return h(p,!1),e.entities=m.processSavedEntities(e),t._setHasChanges(null),r&&r(e),Ae.resolve(e)}function s(e){var t=e.entities;if(0===t.length)return[];var r=e.keyMappings,n=m.entityManager;return M(n,r),N(n,"isLoading",!0,function(){var e=new Ze({query:null,entityManager:n,mergeOptions:{mergeStrategy:$e.OverwriteChanges},dataService:d});t=e.visitAndMerge(t,{nodeType:"root"})}),t}function u(e){return h(p,!1),i(m,e),a&&a(e),Ae.reject(e)}pe(e,"entities").isOptional().isArray().isEntity().check(),pe(t,"saveOptions").isInstanceOf(We).isOptional().check(),pe(r,"callback").isFunction().isOptional().check(),pe(a,"errorCallback").isFunction().isOptional().check(),t=t||this.saveOptions||We.defaultInstance;var p=F(this,e);if(0===p.length){var c={entities:[],keyMappings:[]};return r&&r(c),Ae.resolve(c)}if(!t.allowConcurrentSaves){var l=p.some(function(e){return e.entityAspect.isBeingSaved});if(l){var y=new Error("Concurrent saves not allowed - SaveOptions.allowConcurrentSaves is false");return a&&a(y),Ae.reject(y)}}n(p);var f=this.saveChangesValidateOnClient(p);if(f)return a&&a(f),Ae.reject(f);var d=Ne.resolve([t.dataService,this.dataService]),m={entityManager:this,dataService:d,processSavedEntities:s,resourceName:t.resourceName||this.saveOptions.resourceName||"SaveChanges"},v={entities:p,saveOptions:t};try{return q(p),d.adapterInstance.saveChanges(m,v).then(o).then(null,u)}catch(y){return h(p,!1),a&&a(y),Ae.reject(y)}},X.saveChangesValidateOnClient=function(e){if(this.validationOptions.validateOnSave){var t=e.filter(function(e){var t=e.entityAspect,r=t.entityState.isDeleted()||t.validateEntity();return!r});if(t.length>0){var r=new Error("Client side validation errors encountered - see the entityErrors collection on this object for more detail");return r.entityErrors=a(t),r}}return null},X._findEntityGroup=function(e){return this._entityGroupMap[e.name]},X.getEntityByKey=function(){var e=y(this,arguments).entityKey,t=e._subtypes||[e.entityType],r=null;return t.some(function(t){var n=this._findEntityGroup(t);return r=n&&n.findEntityByKey(e)},this),r},X.fetchEntityByKey=function(){var e=Ne.resolve([this.dataService]);if(!e.hasServerMetadata||this.metadataStore.hasMetadataFor(e.serviceName))return o(this,arguments);var t=this,r=arguments;return this.fetchMetadata(e).then(function(){return o(t,r)})},X.findEntityByKey=function(e){return this.getEntityByKey(e)},X.generateTempKeyValue=function(e){pe(e,"entity").isEntity().check();var t=e.entityType,r=this.keyGenerator.generateTempKeyValue(t),n=t.keyProperties[0];return e.setProperty(n.name,r),e.entityAspect.hasTempKey=!0,r},X.hasChanges=function(e){return this._hasChanges?void 0===e?this._hasChanges:this._hasChangesCore(e):!1},X._hasChangesCore=function(e){e=s(this,e);var t=D(this,e);return t.some(function(e){return e&&e.hasChanges()})},X.getChanges=function(e){e=s(this,e);var t=[be.Added,be.Modified,be.Deleted];return l(this,e,t)},X.rejectChanges=function(){if(!this._hasChanges)return[];var e=[be.Added,be.Modified,be.Deleted],t=l(this,null,e),r=t.map(function(e){return e.entityAspect._checkOperation("rejectChanges")});return this._hasChanges=!1,r.forEach(function(e){e.rejectChanges()}),this.hasChangesChanged.publish({entityManager:this,hasChanges:!1}),t},X.getEntities=function(e,t){return e=s(this,e),pe(t,"entityStates").isOptional().isEnumOf(be).or().isNonEmptyArray().isEnumOf(be).check(),t=t&&I(this,t),l(this,e,t)},X._notifyStateChange=function(e,t){var r={entityAction:we.EntityStateChange,entity:e};if(t)this._hasChanges||this._setHasChanges(!0);else if(this._hasChanges){if(this.isLoading)return void(this._hasChangesAction=this._hasChangesAction||function(){this._setHasChanges(null),this.entityChanged.publish(r)}.bind(this));this._setHasChanges(null)}this.entityChanged.publish(r)},X._setHasChanges=function(e){null==e&&(e=this._hasChangesCore());var t=this._hasChanges;this._hasChanges=e,e!=t&&this.hasChangesChanged.publish({entityManager:this,hasChanges:e}),this._hasChangesAction=null},X._linkRelatedEntities=function(e){var t=this,r=e.entityAspect;N(t,"isLoading",!0,function(){var n=t._unattachedChildrenMap,a=r.getKey(),i=n.getTuples(a);i&&i.slice(0).forEach(function(t){var r,i,o=t.children.filter(function(e){return e.entityAspect.entityState!==be.Detached}),s=t.navigationProperty;if(s.inverse)if(r=s,i=s.inverse,i.isScalar){var u=o[0];e.setProperty(i.name,u),u.setProperty(r.name,e)}else{var p=e.getProperty(i.name);o.forEach(function(t){p.push(t),t.setProperty(r.name,e)})}else if(s.parentType===e.entityType)if(i=s,i.isScalar)e.setProperty(i.name,o[0]);else{var p=e.getProperty(i.name);o.forEach(function(e){p._push(e)})}else r=s,o.forEach(function(t){t.setProperty(r.name,e)});n.removeChildren(a,r)}),e.entityType.navigationProperties.forEach(function(a){if(a.isScalar){var i=e.getProperty(a.name);if(i)return}var o=r.getParentKey(a);if(o){if(o._isEmpty())return;var s=t.findEntityByKey(o);s?e.setProperty(a.name,s):n.addChild(o,a,e)}}),e.entityType.foreignKeyProperties.forEach(function(r){var a=r.inverseNavigationProperty;if(a){var i=e.getProperty(r.name),o=new Pe(a.parentType,[i]),s=t.findEntityByKey(o);s?a.isScalar?s.setProperty(a.name,e):t.isLoading?s.getProperty(a.name)._push(e):s.getProperty(a.name).push(e):n.addChild(o,a,e)}})})},X._attachEntityCore=function(e,t,r){var n=U(this,e.entityType),a=n.attachEntity(e,t,r);return this._linkRelatedEntities(a),a},X._updateFkVal=function(e,t,r){var n=this._entityGroupMap[e.parentType.name];n&&n._updateFkVal(e,t,r)},X.helper={unwrapInstance:$,unwrapOriginalValues:G,unwrapChangedValues:J},W.prototype.addChild=function(e,t,r){var n=this.getTuple(e,t);n||(n={navigationProperty:t,children:[]},P(this.map,e.toString()).push(n)),n.children.push(r)},W.prototype.removeChildren=function(e,t){var r=this.getTuples(e);r&&(w(r,function(e){return e.navigationProperty===t}),r.length||delete this.map[e.toString()])},W.prototype.getChildren=function(e,t){var r=this.getTuple(e,t);return r?r.children.filter(function(e){return!e.entityAspect.entityState.isDetached()}):null},W.prototype.getTuple=function(e,t){var r=this.getTuples(e);if(!r)return null;var n=v(r,function(e){return e.navigationProperty===t});return n},W.prototype.getTuples=function(e){for(var t=this.map[e.toString()],r=e.entityType;!t&&r.baseEntityType;){r=r.baseEntityType;var n=e.toString(r);t=this.map[n]}return t},Y}();ne.EntityManager=He;var Ze=function(){function e(e,t,a,o){if(a.ignore||null==t)return null;if(a.nodeRefId){var u=i(e,a.nodeRefId);return"function"==typeof u&&null!=o?void e.deferredFns.push(function(){o(u)}):u}if(a.entityType){var p=a.entityType;return e.mergeOptions.noTracking?(t=r(e,p,t),p.noTrackingFn&&(t=p.noTrackingFn(t,p)),a.nodeId&&(e.refMap[a.nodeId]=t),t):p.isComplexType?r(e,p,t):s(e,t,a)}return"object"!=typeof t||k(t)||(t=n(e,t)),a.nodeId&&(e.refMap[a.nodeId]=t),t}function r(e,t,n){var i={};return t.dataProperties.forEach(function(t){i[t.name]=t.isComplexProperty?m(n[t.nameOnServer],function(n){return r(e,t.dataType,n)}):w(n[t.nameOnServer],t.dataType)}),t.navigationProperties&&t.navigationProperties.forEach(function(t){var r={nodeType:"navProp",navigationProperty:t};a(n[t.nameOnServer],e,r,i,t.name)}),i}function n(e,r){var n=e.metadataStore.namingConvention.serverPropertyNameToClient,i={};return t(r,function(t,r){var o=n(t),s={nodeType:"anonProp",propertyName:o};a(r,e,s,i,o)}),i}function a(t,r,n,a,i){var o=r.jsonResultsAdapter,s=o.visitNode(t,r,n)||{};t=s.node||t,s.ignore||(Array.isArray(t)?(n.nodeType=n.nodeType+"Item",a[i]=t.map(function(t,u){return s=o.visitNode(t,r,n)||{},t=s.node||t,e(r,t,s,function(e){a[i][u]=e()})})):a[i]=e(r,t,s,function(e){a[i]=e()}))}function i(e,t){var r=e.refMap[t];return void 0===r?function(){return e.refMap[t]}:r}function o(e,t,r){var n=r._$meta.nodeId;null!=n&&(e.refMap[n]=t)}function s(e,t,r){t._$meta=r;var n=e.entityManager,a=r.entityType;"string"==typeof a&&(a=e.metadataStore._getEntityType(a,!1)),t.entityType=a;var i=e.mergeOptions.mergeStrategy,o=null==e.query,s=a.getEntityKeyFromRawEntity(t,e.rawValueFn),p=n.findEntityByKey(s);if(p){if(o&&p.entityAspect.entityState.isDeleted())return n.detachEntity(p),p;var l=p.entityAspect.entityState;if(i===$e.Disallowed)throw new Error("A MergeStrategy of 'Disallowed' prevents "+s.toString()+" from being merged");if(i===$e.SkipMerge)u(e,p,t);else if(i===$e.OverwriteChanges||l.isUnchanged()){c(e,p,t),p.entityAspect.wasLoaded=!0,r.extraMetadata&&(p.entityAspect.extraMetadata=r.extraMetadata),p.entityAspect.entityState=be.Unchanged,p.entityAspect.originalValues={},p.entityAspect.propertyChanged.publish({entity:p,propertyName:null});var y=o?we.MergeOnSave:we.MergeOnQuery;n.entityChanged.publish({entityAction:y,entity:p}),l.isUnchanged()||n._notifyStateChange(p,!1)}else{if(l==be.Deleted&&!e.mergeOptions.includeDeleted)return null;u(e,p,t)}}else p=a._createInstanceCore(),c(e,p,t),r.extraMetadata&&(p.entityAspect.extraMetadata=r.extraMetadata),n._attachEntityCore(p,be.Unchanged,i),p.entityAspect.wasLoaded=!0,n.entityChanged.publish({entityAction:we.AttachOnQuery,entity:p});return p}function u(e,t,r){o(e,t,r),r.entityType.navigationProperties.forEach(function(t){t.isScalar?f(e,r,t):h(e,r,t)})}function c(e,t,r){o(e,t,r);var n=t.entityType;n._updateTargetFromRaw(t,r,e.rawValueFn),n.navigationProperties.forEach(function(n){n.isScalar?l(e,n,t,r):y(e,n,t,r)})}function l(e,t,r,n){var a=f(e,n,t);null!=a&&("function"==typeof a?e.deferredFns.push(function(){a=a(),d(a,r,t)}):d(a,r,t))}function y(e,t,r,n){var a=h(e,n,t);if(null!=a){var i=t.inverse;if(i){var o=r.getProperty(t.name);o.wasLoaded=!0,a.forEach(function(t){"function"==typeof t?e.deferredFns.push(function(){t=t(),v(t,o,r,i)}):v(t,o,r,i)})}}}function f(e,t,r){var n=t[r.nameOnServer];if(!n)return null;var a=e.visitAndMerge(n,{nodeType:"navProp",navigationProperty:r});return a}function h(e,t,r){var n=t[r.nameOnServer];if(!n)return null;if(!Array.isArray(n)&&(n=n.results,!n))return null;var a=e.visitAndMerge(n,{nodeType:"navPropItem",navigationProperty:r});return a}function d(e,t,r){if(e){var n=r.name,a=t.getProperty(n);if(a!==e){t.setProperty(n,e);var i=r.inverse;if(!i)return;if(i.isScalar)e.setProperty(i.name,t);else{var o=e.getProperty(i.name);o.push(t)}}}}function v(e,t,r,n){if(e){var a=e.getProperty(n.name);a!==r&&(t.push(e),e.setProperty(n.name,r))}}var g=function(e){p(this,e,["query","entityManager","dataService","mergeOptions"]),this.refMap={},this.deferredFns=[],this.jsonResultsAdapter=this.dataService.jsonResultsAdapter,this.metadataStore=this.entityManager.metadataStore,this.rawValueFn=De.getRawValueFromServer},E=g.prototype,w=_e.parseRawValue;return E._$typeName="MappingContext",E.getUrl=function(){var e=this.query;if(!e)throw new Error("query cannot be empty");var t;if("string"==typeof e)t=e;else{if(!(e instanceof qe))throw new Error("unable to recognize query parameter as either a string or an EntityQuery");t=this.dataService.uriBuilder.buildUri(e,this.metadataStore)}return this.dataService.qualifyUrl(t)},E.visitAndMerge=function(t,r){var n=this.query,a=this.jsonResultsAdapter;r=r||{};var i=this;return m(t,function(t){if(null==n&&t.entityAspect)return t.entityAspect.entityState.isDeleted()?i.entityManager.detachEntity(t):t.entityAspect.acceptChanges(),t;var o=a.visitNode(t,i,r)||{};return t=o.node||t,n&&"root"===r.nodeType&&!o.entityType&&(o.entityType=n._getToEntityType&&n._getToEntityType(i.metadataStore)),e(i,t,o)},this.mergeOptions.includeDeleted)},E.processDeferred=function(){this.deferredFns.length>0&&this.deferredFns.forEach(function(e){e()})},g}(),We=function(){function e(e,t){return t&&le(t).whereParam("resourceName").isOptional().isString().whereParam("dataService").isOptional().isInstanceOf(Ne).whereParam("allowConcurrentSaves").isBoolean().isOptional().whereParam("tag").isOptional().applyAll(e),e}var t=function(t){e(this,t)},r=t.prototype;return r._$typeName="SaveOptions",r.setAsDefault=function(){return l(this,t)},r.using=function(t){return e(this,t)},t.defaultInstance=new t({allowConcurrentSaves:!1}),t}();ne.SaveOptions=We,ne.AbstractDataServiceAdapter=function(){function e(){this.getRequest=function(e){return e},this.done=function(){}}function t(e,t,n){var a=r(t);return i._catchNoConnectionError(a),n&&(a.message=n+"; "+a.message),e.reject(a)}function r(e){var t=new Error;t.httpResponse=e,t.status=e.status;var r=e.data;if(!r)return t.message=e.error&&e.error.toString(),t;if("string"==typeof r)try{r=JSON.parse(r)}catch(n){return t.message=r,t}var a,i,o=e.saveContext,s=r.Message||r.ExceptionMessage||r.EntityErrors||r.Errors,u=!!s;if(u){var s=r;do a=s.ExceptionMessage||s.Message,s=s.InnerException;while(s);i=r.Errors||r.EntityErrors,i=i&&i.map(function(e){return{errorName:e.ErrorName,entityTypeName:Ce.normalizeTypeName(e.EntityTypeName),keyValues:e.KeyValues,propertyName:e.PropertyName,errorMessage:e.ErrorMessage}})}else a=r.message,i=r.errors||r.entityErrors;if(o&&i){var p=o.entityManager.metadataStore.namingConvention.serverPropertyNameToClient;i.forEach(function(e){e.propertyName=e.propertyName&&p(e.propertyName)}),t.entityErrors=i}return t.message=a||"Server side errors encountered - see the entityErrors collection on this object for more detail",t}var n,a=function(){},i=a.prototype;return i.checkForRecomposition=function(e){"ajax"===e.interfaceName&&e.isDefault&&this.initialize()},i.initialize=function(){if(n=ne.config.getAdapterInstance("ajax"),!n||!n.ajax)throw new Error("Unable to find ajax adapter for dataservice adapter '"+(this.name||"")+"'.")},i.fetchMetadata=function(e,r){var a=r.serviceName,i=r.qualifyUrl("Metadata"),o=Ae.defer();return n.ajax({type:"GET",url:i,dataType:"json",success:function(n){if(e.hasMetadataFor(a))return o.resolve("already fetched");var s=n.data;try{var u="string"==typeof s?JSON.parse(s):s;e.importMetadata(u)}catch(p){var c="Unable to either parse or import metadata: "+p.message;return t(o,n,"Metadata query failed for: "+i+". "+c)}return e.hasMetadataFor(a)||e.addDataService(r),o.resolve(u)},error:function(e){t(o,e,"Metadata query failed for: "+i)}}),o.promise},i.executeQuery=function(e){var r=Ae.defer(),a=e.getUrl(),i={type:"GET",url:a,params:e.query.parameters,dataType:"json",success:function(e){var n=e.data;try{var a,i=n&&(n.results||n.Results);a=i?{results:i,inlineCount:n.inlineCount||n.InlineCount,httpResponse:e}:{results:n,httpResponse:e},r.resolve(a)}catch(o){o instanceof Error?r.reject(o):t(r,e)}},error:function(e){t(r,e)}};return e.dataService.useJsonp&&(i.dataType="jsonp",i.crossDomain=!0),n.ajax(i),r.promise},i.saveChanges=function(e,r){var a=e.adapter=this,i=Ae.defer();r=a._prepareSaveBundle(e,r);var o=JSON.stringify(r),s=e.dataService.qualifyUrl(e.resourceName);return n.ajax({type:"POST",url:s,dataType:"json",contentType:"application/json",data:o,success:function(r){r.saveContext=e;var n=r.data;if(n.Errors||n.errors)t(i,r);else{var o=a._prepareSaveResult(e,n);o.httpResponse=r,i.resolve(o)}},error:function(r){r.saveContext=e,t(i,r)}}),i.promise},i._prepareSaveBundle=function(){throw new Error("Need a concrete implementation of _prepareSaveBundle")},i.changeRequestInterceptor=e,i._createChangeRequestInterceptor=function(t,r){var n=t.adapter,a=V,i=n.changeRequestInterceptor,o=n.name+" DataServiceAdapter's ChangeRequestInterceptor",s=" is missing or not a function.";if(a(i)){var u=new i(t,r);if(!a(u.getRequest))throw new Error(o+".getRequest"+s);if(!a(u.done))throw new Error(o+".done"+s);return u}return new e(t,r)},i._prepareSaveResult=function(){throw new Error("Need a concrete implementation of _prepareSaveResult")},i.jsonResultsAdapter=new Oe({name:"noop",visitNode:function(){return{}}}),i._catchNoConnectionError=function(e){0==e.status&&null==e.message&&(e.message="HTTP response status 0 and no message.  Likely did not or could not reach server. Is the server running?")},a}(),function(e){"object"==typeof ne?e(ne):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("breeze")):"function"==typeof define&&define.amd&&define(["breeze"],e)}(function(e){function t(e){var r,n,a,i="";for(var o in e){var s=e[o];if(s instanceof Array)for(var u=0;u<s.length;++u)r=s[u],a=o+"["+u+"]",n={},n[a]=r,i+=t(n)+"&";else if(s&&s.toISOString)i+=encodeURIComponent(o)+"="+encodeURIComponent(s.toISOString())+"&";else if(s instanceof Object)for(var p in s)r=s[p],a=o+"["+p+"]",n={},n[a]=r,i+=t(n)+"&";else null===s?i+=encodeURIComponent(o)+"=&":void 0!==s&&(i+=encodeURIComponent(o)+"="+encodeURIComponent(s)+"&")}return i.length?i.substr(0,i.length-1):i}var r=e.core,n=function(){this.name="angular",this.defaultSettings={},this.requestInterceptor=null,this.$http,this.$rootScope},a=n.prototype;a.initialize=function(){var e=r.requireLib("angular");if(e){var t,n,a=e.injector(["ng"]);a.invoke(["$http","$rootScope",function(e,r){t=e,n=r}]),this.$http=t,this.$rootScope=n}},a.setHttp=function(e){this.$http=e,this.$rootScope=null},a.ajax=function(e){function n(t,r,n,a,i){"null"===t&&(t=null);var o={config:e,data:t,getHeaders:n,status:r,statusText:i};e.success(o)}function a(t,r,n,a,i){0===r&&null==t&&(t="timeout");var o={config:e,data:t,getHeaders:n,status:r,statusText:i};e.error(o)}if(!this.$http)throw new Error("Unable to locate angular for ajax adapter");var i={method:e.type,url:e.url,dataType:e.dataType,contentType:e.contentType,crossDomain:e.crossDomain,headers:e.headers||{}};if(e.params){var o=i.url.indexOf("?")>=0?"&":"?";i.url=i.url+o+t(e.params)}if(e.data&&(i.data=e.data),!r.isEmpty(this.defaultSettings)){var s=r.extend({},this.defaultSettings);i=r.extend(s,i);var u=r.extend({},this.defaultSettings.headers);i.headers=r.extend(u,i.headers)}var p={adapter:this,config:i,zConfig:e,success:n,error:a};r.isFunction(this.requestInterceptor)&&(this.requestInterceptor(p),this.requestInterceptor.oneTime&&(this.requestInterceptor=null)),p.config&&(this.$http(p.config).success(p.success).error(p.error),this.$rootScope&&this.$rootScope.$digest())},e.config.registerAdapter("ajax",n)}),function(e){"object"==typeof ne?e(ne):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("breeze")):"function"==typeof define&&define.amd&&define(["breeze"],e)}(function(e){function t(e){return 0===e.status?function(e){return e&&e.length>0?"":{}}:function(t){return t&&t.length>0?e.getResponseHeader(t):e.getAllResponseHeaders()}}var r,n=e.core,a=function(){this.name="jQuery",this.defaultSettings={},this.requestInterceptor=null},i=a.prototype;i.initialize=function(){r=n.requireLib("jQuery")},i.ajax=function(e){function a(r,n,a){var i={config:e,data:r,getHeaders:t(a),status:a.status,statusText:n};e.success(i),a.onreadystatechange=null,a.abort=null}function i(r,n,a){var i={config:e,data:r.responseText,error:a,getHeaders:t(r),status:r.status,statusText:n};e.error(i),r.onreadystatechange=null,r.abort=null}if(!r)throw new Error("Unable to locate jQuery");var o={type:e.type,url:e.url,data:e.params||e.data,dataType:e.dataType,contentType:e.contentType,crossDomain:e.crossDomain,headers:e.headers||{}};if(!n.isEmpty(this.defaultSettings)){var s=n.extend({},this.defaultSettings);o=n.extend(s,o);var u=n.extend({},this.defaultSettings.headers);o.headers=n.extend(u,o.headers)}var p={adapter:this,config:o,zConfig:e,success:a,error:i};n.isFunction(this.requestInterceptor)&&(this.requestInterceptor(p),this.requestInterceptor.oneTime&&(this.requestInterceptor=null)),p.config&&(p.jqXHR=r.ajax(p.config).done(p.success).fail(p.error))},e.config.registerAdapter("ajax",a)}),function(e){"object"==typeof ne?e(ne):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("breeze")):"function"==typeof define&&define.amd&&!ne&&define(["breeze"],e);
}(function(e){function t(e,t){return e.isUnmapped?void 0:(e.dataType===_e.DateTimeOffset?t=t&&new Date(t.getTime()-6e4*t.getTimezoneOffset()):e.dataType.quoteJsonOData&&(t=null!=t?t.toString():t),t)}function r(e,r){var a=e.adapter._createChangeRequestInterceptor(e,r),i=[],o=[],s=[],u=e.entityManager,p=u.helper,c=0,l=e.routePrefix;return r.entities.forEach(function(e,r){var y=e.entityAspect;c+=1;var f={headers:{"Content-ID":c,DataServiceVersion:"2.0"}};if(s[c]=e,y.entityState.isAdded())f.requestUri=l+e.entityType.defaultResourceName,f.method="POST",f.data=p.unwrapInstance(e,t),o[c]=y.getKey();else if(y.entityState.isModified())n(f,y,l),f.method="MERGE",f.data=p.unwrapChangedValues(e,u.metadataStore,t);else{if(!y.entityState.isDeleted())return;n(f,y,l),f.method="DELETE"}f=a.getRequest(f,e,r),i.push(f)}),e.contentKeys=s,e.tempKeys=o,a.done(i),{__batchRequests:[{__changeRequests:i}]}}function n(e,t,r){var n,i=t.extraMetadata;null==i?(n=a(t),t.extraMetadata={uriKey:n}):(n=i.uriKey,i.etag&&(e.headers["If-Match"]=i.etag)),e.requestUri=n.indexOf("//")>0?n:r+n}function a(e){var t=e.entity.entityType,r=t.defaultResourceName,n=t.keyProperties,a=r+"(";if(1===n.length)a=a+i(n[0],e)+")";else{var o="";n.forEach(function(t){a=a+o+t.nameOnServer+"="+i(t,e),o=","}),a+=")"}return a}function i(e,t){return e.dataType.fmtOData(t.getPropertyValue(e.name))}function o(e,t){var r=new Error,n=e&&e.response;if(!n)return r.message=e,r.statusText=e,r;if(r.message=n.statusText,r.statusText=n.statusText,r.status=n.statusCode,t&&(r.url=t),r.body=n.body,n.body){var a;try{var i=JSON.parse(n.body);r.body=i,i["odata.error"]&&(i=i["odata.error"]);var o="";do a=i.error||i.innererror,a||(o+=s(i)),a=a||i.internalexception,i=a||i;while(a);o.length>0&&(r.message=o)}catch(u){}}return h._catchNoConnectionError(r),r}function s(e){var t=e.message||"";return("string"==typeof t?t:t.value)+"; "}var u,p=e.core,c=e.MetadataStore,l=e.JsonResultsAdapter,y=e.DataProperty,f=function(){this.name="OData"},h=f.prototype;h.initialize=function(){u=p.requireLib("OData","Needed to support remote OData services"),u.jsonHandler.recognizeDates=!0};var d=e.AbstractDataServiceAdapter.prototype;h._catchNoConnectionError=d._catchNoConnectionError,h.changeRequestInterceptor=d.changeRequestInterceptor,h._createChangeRequestInterceptor=d._createChangeRequestInterceptor,h.headers={DataServiceVersion:"2.0"},h.executeQuery=function(e){var t=Ae.defer(),r=e.getUrl();return u.read({requestUri:r,headers:this.headers},function(e,r){var n;return e.__count&&(n=parseInt(e.__count,10)),t.resolve({results:e.results,inlineCount:n,httpResponse:r})},function(e){return t.reject(o(e,r))}),t.promise},h.fetchMetadata=function(e,t){var r=Ae.defer(),n=t.serviceName,a=t.qualifyUrl("$metadata");return u.read({requestUri:a,headers:{Accept:"application/json;odata.metadata=full"}},function(i){if(!i||!i.dataServices){var o=new Error("Metadata query failed for: "+a);return r.reject(o)}var s=i.dataServices;if(!e.hasMetadataFor(n)){try{e.importMetadata(s)}catch(u){return r.reject(new Error("Metadata query failed for "+a+"; Unable to process returned metadata: "+u.message))}e.addDataService(t)}return r.resolve(s)},function(e){var t=o(e,a);return t.message="Metadata query failed for: "+a+"; "+(t.message||""),r.reject(t)},u.metadataHandler),r.promise},h.getRoutePrefix=function(){return""},h.saveChanges=function(e,t){var n=e.adapter=this,a=Ae.defer();e.routePrefix=n.getRoutePrefix(e.dataService);var i=e.dataService.qualifyUrl("$batch"),s=r(e,t),p=e.tempKeys,c=e.contentKeys;return u.request({headers:{DataServiceVersion:"2.0"},requestUri:i,method:"POST",data:s},function(e){var t=[],r=[],n={entities:t,keyMappings:r};return e.__batchResponses.forEach(function(e){e.__changeResponses.forEach(function(e){var n=e.response||e,s=n.statusCode;if(!s||s>=400)return void a.reject(o(e,i));var u=e.headers["Content-ID"],l=e.data;if(l){var f=p[u];if(f){var h=f.entityType;if(h.autoGeneratedKeyType!==Ie.None){var d=f.values[0],m=h.getEntityKeyFromRawEntity(l,y.getRawValueFromServer),v={entityTypeName:h.name,tempValue:d,realValue:m.values[0]};r.push(v)}}t.push(l)}else{var g=c[u];t.push(g)}})}),a.resolve(n)},function(e){return a.reject(o(e,i))},u.batchHandler),a.promise},h.jsonResultsAdapter=new l({name:"OData_default",visitNode:function(e,t,r){var n={};if(null==e)return n;var a=e.__metadata;if(null!=a){var i=c.normalizeTypeName(a.type),o=i&&t.entityManager.metadataStore.getEntityType(i,!0);if(o&&o._mappedPropertiesCount<=Object.keys(e).length-1){n.entityType=o;var s=a.uri||a.id;if(s){var u=new RegExp("^"+t.dataService.serviceName,"i");s=s.replace(u,"")}n.extraMetadata={uriKey:s,etag:a.etag}}}e.results&&(n.node=e.results);var l=r.propertyName;return n.ignore=null!=e.__deferred||"__metadata"===l||"EntityKey"===l&&e.$type&&p.stringStartsWith(e.$type,"System.Data"),n}}),e.config.registerAdapter("dataService",f);var m=function(){this.name="webApiOData"};e.core.extend(m.prototype,h),m.prototype.getRoutePrefix=function(e){if("object"==typeof document){var t=document.createElement("a");t.href=e.serviceName}else t=url.parse(e.serviceName);var r=t.pathname;return"/"===r[0]&&(r=r.substr(1)),"/"!==r.substr(-1)&&(r+="/"),r},e.config.registerAdapter("dataService",m);var v=function(){this.name="webApiOData4"};e.core.extend(v.prototype,m.prototype),v.prototype.initialize=function(){var e=p.requireLib("datajs","Needed to support remote OData v4 services");u=e.V4.oData,u.json.jsonHandler.recognizeDates=!0},v.prototype.headers={"OData-Version":"4.0"},e.config.registerAdapter("dataService",v)}),function(e){"object"==typeof ne?e(ne):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("breeze")):"function"==typeof define&&define.amd&&!ne&&define(["breeze"],e)}(function(e){var t=e.MetadataStore,r=e.JsonResultsAdapter,n=e.AbstractDataServiceAdapter,a=function(){this.name="webApi"},i=a.prototype=new n;i._prepareSaveBundle=function(e,t){var r=this._createChangeRequestInterceptor(e,t),n=e.entityManager,a=n.metadataStore,i=n.helper;return t.entities=t.entities.map(function(e,t){var n=i.unwrapInstance(e),o=null;e.entityType.autoGeneratedKeyType!==Ie.None&&(o={propertyName:e.entityType.keyProperties[0].nameOnServer,autoGeneratedKeyType:e.entityType.autoGeneratedKeyType.name});var s=i.unwrapOriginalValues(e,a);return n.entityAspect={entityTypeName:e.entityType.name,defaultResourceName:e.entityType.defaultResourceName,entityState:e.entityAspect.entityState.name,originalValuesMap:s,autoGeneratedKey:o},n=r.getRequest(n,e,t)}),t.saveOptions={tag:t.saveOptions.tag},r.done(t.entities),t},i._prepareSaveResult=function(e,r){if(r.entities)return r;var n=r.KeyMappings.map(function(e){var r=t.normalizeTypeName(e.EntityTypeName);return{entityTypeName:r,tempValue:e.TempValue,realValue:e.RealValue}});return{entities:r.Entities,keyMappings:n}},i.jsonResultsAdapter=new r({name:"webApi_default",visitNode:function(e,r,n){if(null==e)return{};var a=t.normalizeTypeName(e.$type),i=a&&r.entityManager.metadataStore._getEntityType(a,!0),o=n.propertyName,s=o&&"$"===o.substr(0,1);return{entityType:i,nodeId:e.$id,nodeRefId:e.$ref,ignore:s}}}),e.config.registerAdapter("dataService",a)}),function(e){"object"==typeof ne?e(ne):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("breeze")):"function"==typeof define&&define.amd&&!ne&&define(["breeze"],e)}(function(e){function t(e){var t=e.entityType||e.complexType,r=t._extra,a=r.alreadyWrappedProps||{};t.getProperties().forEach(function(t){var r=t.name;if(!a[r]){var o;o=r in e?i(e,t):n(e,t),null!=o&&Object.defineProperty(e,r,o),a[r]=!0}}),r.alreadyWrappedProps=a}function r(e){var t=o(e),r=Object.getPrototypeOf(e),a=r.entityType||r.complexType;return a.getProperties().forEach(function(t){var a=t.name;if(t.isUnmapped&&!p.getPropertyDescriptor(r,a)){var i=n(r,t);Object.defineProperty(r,a,i)}if(e.hasOwnProperty(a)){var o=e[a];delete e[a],e[a]=o}}),t}function n(e,t){var r=t.name,n=e._pendingBackingStores;n||(n=[],e._pendingBackingStores=n);var i={get:function(){var e=this._backingStore||o(this);return e[r]},set:function(e){var n=this._backingStore||s(this),i=a(n,r);this._$interceptor(t,e,i)},enumerable:!0,configurable:!0};return i.set.rawSet=function(e){var t=this._backingStore||s(this),n=a(t,r);n(e)},i}function a(e,t){return function(){return 0==arguments.length?e[t]:void(e[t]=arguments[0])}}function i(e,t){if(!e.hasOwnProperty(t.name)){var r=Object.getPrototypeOf(e);return i(r,t)}var n=Object.getOwnPropertyDescriptor(e,t.name);if(n.configurable&&!n.value&&n.set){var a=function(e){return function(){if(0==arguments.length)return n.get.bind(e)();var t=n.set,r=t.rawSet||t;r.bind(e)(arguments[0])}},o={get:function(){return n.get.bind(this)()},set:function(e){this._$interceptor(t,e,a(this))},enumerable:n.enumerable,configurable:!0};return o.set.rawSet=n.set,o}}function o(e){var t=Object.getPrototypeOf(e);u(t);var r=e._backingStore;return r||(r={},e._backingStore=r),r}function s(e){var t=Object.getPrototypeOf(e),r=t._pendingBackingStores,n=p.arrayFirst(r,function(t){return t.entity===e});if(n)return n.backingStore;var a={};return r.push({entity:e,backingStore:a}),a}function u(e){var t=e._pendingBackingStores;t&&(t.forEach(function(e){e.entity._backingStore=e.backingStore}),t.length=0)}var p=e.core,c=function(){this.name="backingStore"},l=c.prototype;l.initialize=function(){},l.getTrackablePropertyNames=function(e){var t=[];for(var r in e)if("entityType"!==r&&"_$typeName"!==r&&"_pendingSets"!==r&&"_backingStore"!==r){var n=e[r];p.isFunction(n)||t.push(r)}return t},l.initializeEntityPrototype=function(e){e.getProperty=function(e){return this[e]},e.setProperty=function(e,t){return this[e]=t,this},t(e)},l.startTracking=function(t){var n=r(t),a=t.entityType||t.complexType;a.getProperties().forEach(function(r){var a=r.name,i=t[a];if(r.isDataProperty)r.isComplexProperty?i=r.isScalar?r.dataType._createInstanceCore(t,r):e.makeComplexArray([],t,r):r.isScalar?void 0===i&&(i=r.defaultValue):i=e.makePrimitiveArray([],t,r);else{if(!r.isNavigationProperty)throw new Error("unknown property: "+a);if(void 0!==i)throw new Error("Cannot assign a navigation property in an entity ctor.: "+r.Name);i=r.isScalar?null:e.makeRelationArray([],t,r)}(r.isSettable||r.isNavigationProperty)&&(n[a]=i)})},e.config.registerAdapter("modelLibrary",c)}),function(e){"object"==typeof ne?e(ne):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("breeze")):"function"==typeof define&&define.amd&&!ne&&define(["breeze"],e)}(function(e){function t(e){var t=e.entityType||e.complexType,n={};if(t.getProperties().forEach(function(t){var a=r(e,t.name);a&&(n[t.name]=a)}),!z(n)){var a=t._extra;a.es5Descriptors=n,t._koDummy=o.observable(null)}}function r(e,t){if(!u)return null;if(e.hasOwnProperty(t))return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(e,t);var n=Object.getPrototypeOf(e);return n?r(n,t):null}function n(t,r,n){if(r.isDataProperty)r.isComplexProperty?n=r.isScalar?r.dataType._createInstanceCore(t,r):e.makeComplexArray([],t,r):r.isScalar?void 0===n&&(n=r.defaultValue):n=e.makePrimitiveArray([],t,r);else{if(!r.isNavigationProperty)throw new Error("unknown property: "+r.name);if(void 0!==n)throw new Error("Cannot assign a navigation property in an entity ctor.: "+r.name);n=r.isScalar?null:e.makeRelationArray([],t,r)}return n}function a(e){e._koObj._suppressBreeze=!0}function i(e){var t=e.array._koObj;t._suppressBreeze?t._suppressBreeze=!1:t.valueHasMutated()}var o,s=e.core,u=s.__isES5Supported,p=function(){this.name="ko"},c=p.prototype;c.initialize=function(){o=s.requireLib("ko","The Knockout library"),o.extenders.intercept=function(e,t){var r,n=t.instance,a=t.property;return r=o.computed(e.splice?{read:e}:{read:e,write:function(t){return n._$interceptor(a,t,e),n}})}},c.getTrackablePropertyNames=function(e){var t=[];for(var n in e)if("entityType"!==n&&"_$typeName"!==n){var a=r(e,n);if(a&&a.get)t.push(n);else{var i=e[n];o.isObservable(i)?t.push(n):s.isFunction(i)||t.push(n)}}return t},c.initializeEntityPrototype=function(e){e.getProperty=function(e){return this[e]()},e.setProperty=function(e,t){return this[e](t),this},u&&t(e)},c.startTracking=function(e){var t=e.entityType||e.complexType,r=t._extra.es5Descriptors||{};t.getProperties().sort(function(e,t){var r=e.isUnmapped?1:0,n=t.isUnmapped?1:0;return r-n}).forEach(function(s){var u,p=s.name,c=e[p],l=r[p];if(l){var y=l.get.bind(e);if(l.set){var f=l.set.bind(e),h=function(e){return 0===arguments.length?y():void f(e)};u=o.computed({read:function(){return t._koDummy(),y()},write:function(r){return e._$interceptor(s,r,h),t._koDummy.valueHasMutated(),e}})}else u=o.computed({read:y,write:function(){}})}else if(o.isObservable(c)){if(s.isNavigationProperty)throw new Error("Cannot assign a navigation property in an entity ctor.: "+p);u=c}else c=n(e,s,c),u=s.isScalar?o.observable(c):o.observableArray(c);if(s.isScalar)if(l)Object.defineProperty(e,p,{enumerable:!0,configurable:!0,writable:!0,value:u});else{var d=u.extend({intercept:{instance:e,property:s}});e[p]=d}else c._koObj=u,u.subscribe(a,null,"beforeChange"),c.arrayChanged.subscribe(i),u.equalityComparer=function(){throw new Error("Collection navigation properties may NOT be set.")},e[p]=u})},e.config.registerAdapter("modelLibrary",p)}),function(e){"object"==typeof ne?e(ne):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("breeze")):"function"==typeof define&&define.amd&&!ne&&define(["breeze"],e)}(function(e){var t=function(){this.name="json"},r=t.prototype;r.initialize=function(){},r.buildUri=function(e,t){var r=e._getFromEntityType(t,!1);r||(r=new Fe(t));var n=e.toJSONExt({entityType:r,toNameOnServer:!0});n.from=void 0,n.queryOptions=void 0;var a=JSON.stringify(n),i=encodeURIComponent(a);return e.resourceName+"?"+i},e.config.registerAdapter("uriBuilder",t)}),function(e){"object"==typeof ne?e(ne):"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("breeze")):"function"==typeof define&&define.amd&&!ne&&define(["breeze"],e)}(function(e){var t=e.EntityType,r=function(){this.name="odata"},n=r.prototype;n.initialize=function(){},n.buildUri=function(e,r){function n(e){return e?e.visit({entityType:p},a):void 0}function i(e){if(e){e.validate(p);var t=e.items.map(function(e){return p.clientPropertyPathToServer(e.propertyPath,"/")+(e.isDesc?" desc":"")});return t.join(",")}}function o(e){if(e){e.validate(p);var t=e.propertyPaths.map(function(e){return p.clientPropertyPathToServer(e,"/")}).join(",");return t}}function s(e){if(e){var t=e.propertyPaths.map(function(e){return p.clientPropertyPathToServer(e,"/")}).join(",");return t}}function u(e){var t=[];for(var r in e){var n=e[r];void 0!==n&&(n instanceof Array?n.forEach(function(e){t.push(r+"="+encodeURIComponent(e))}):t.push(r+"="+encodeURIComponent(n)))}return t.length>0?"?"+t.join("&"):""}var p=e._getFromEntityType(r,!1);p||(p=new t(r));var c={};c.$filter=n(e.wherePredicate),c.$orderby=i(e.orderByClause),e.skipCount&&(c.$skip=e.skipCount),null!=e.takeCount&&(c.$top=e.takeCount),c.$expand=s(e.expandClause),c.$select=o(e.selectClause),e.inlineCountEnabled&&(c.$inlinecount="allpages");var l=u(c);return e.resourceName+l},e.Predicate.prototype.toODataFragment=function(e){return this.visit(e,a)};var a=function(){function t(e){var t=e.op.key,r=n[t];return r||t}var r={passthruPredicate:function(){return this.value},unaryPredicate:function(e){var r=this.pred.visit(e);return t(this)+" ("+r+")"},binaryPredicate:function(e){var r=this.expr1.visit(e),n=this.expr2.visit(e),a=e.prefix;a&&(r=a+"/"+r);var i=t(this);if("in"==this.op.key){var o=n.map(function(e){return"("+r+" eq "+e+")"}).join(" or ");return o}return this.op.isFunction?"substringof"==i?i+"("+n+","+r+") eq true":i+"("+r+","+n+") eq true":r+" "+i+" "+n},andOrPredicate:function(e){var r=this.preds.map(function(t){var r=t.visit(e);return"("+r+")"}).join(" "+t(this)+" ");return r},anyAllPredicate:function(r){var n=this.expr.visit(r),a=r.prefix;a?(n=a+"/"+n,a="x"+(parseInt(a.substring(1))+1)):a="x1";var i=e.core.extend({},r);i.entityType=this.expr.dataType,i.prefix=a;var o=this.pred.visit(i);return n+"/"+t(this)+"("+a+": "+o+")"},litExpr:function(){return Array.isArray(this.value)?this.value.map(function(e){return this.dataType.fmtOData(e)},this):this.dataType.fmtOData(this.value)},propExpr:function(e){var t=e.entityType;return t?t.clientPropertyPathToServer(this.propertyPath,"/"):this.propertyPath},fnExpr:function(e){var t=this.exprs.map(function(t){return t.visit(e)});return this.fnName+"("+t.join(",")+")"}},n={contains:"substringof"};return r}();e.config.registerAdapter("uriBuilder",r)}),ne.config.initializeAdapterInstances({dataService:"webApi",ajax:"jQuery",uriBuilder:"odata"});var Ye=_("ko");return Ye?ne.config.initializeAdapterInstance("modelLibrary","ko"):ne.config.initializeAdapterInstance("modelLibrary","backingStore"),ne});
!function(e){if("object"==typeof breeze)e(breeze);else if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var t=require("breeze");e(t)}else{if("function"!=typeof define||!define.amd)throw new Error("Can't find breeze");define(["breeze"],e)}}(function(e){"use strict";function t(){var t=this,r=t._ajaxImpl=e.config.getAdapterInstance("ajax");if(!r)throw new Error("Unable to initialize ajax for "+t.name);var a=r.ajax;if(!a)throw new Error("Breeze was unable to find an 'ajax' adapter for "+t.name);t.Q=e.Q,t.jsonResultsAdapter||(t.jsonResultsAdapter=t._createJsonResultsAdapter())}function r(e){"ajax"===e.interfaceName&&e.isDefault&&this.initialize()}function a(e){function t(e){try{var t={results:r._getResponseData(e).results,httpResponse:e};a.resolve(t)}catch(n){a.reject(new Error("Program error: failed while parsing successful query response"))}}var r=e.adapter=this,a=r.Q.defer(),n=e.getUrl(),s={Accept:"application/json"};return r._ajaxImpl.ajax({type:"GET",url:n,headers:s,params:e.query.parameters,success:t,error:function(t){a.reject(r._createErrorFromResponse(t,n,e))}}),a.promise}function n(){throw new Error("Cannot process server metadata; create your own and use that instead")}function s(e,t){function r(){var t=e.saveResult,r=t.entitiesWithErrors,a=r.length;if(!a)return t;e.processSavedEntities(t);var n;return n=1===o.length||o.length===a?r[0].error:new Error("\n The save failed although some entities were saved."),n.message=(n.message||"Save failed")+"  \n See 'error.saveResult' for more details.\n",n.saveResult=t,s.reject(n)}function a(e){return s.reject(e)}var n=e.adapter=this,s=n.Q;try{if(n.saveOnlyOne&&t.entities.length>1)return s.reject(new Error("Only one entity may be saved at a time."));n._addToSaveContext(e);var o=R(e,t),i=E(e,o),u=s.all(i);return u.then(r).then(null,a)}catch(c){return s.reject(c)}}function o(){}function i(e,t,r){var a=e.tempKeys[t];if(a){var n=a.entityType,s=a.values[0],o=T(n,r),i={entityTypeName:n.name,tempValue:s,realValue:o.values[0]};e.saveResult.keyMappings.push(i)}}function u(e){var t=this.jsonResultsAdapter;return t.clientTypeNameToServer?t.clientTypeNameToServer(e):e}function c(){throw new Error("Need a concrete implementation of _createChangeRequest")}function p(e,t,r,a){var n=new Error;return n.response=e,t&&(n.url=t),n.status=e.status||"???",n.statusText=e.statusText,n.message=e.message||e.error||e.statusText,this.catchNoConnectionError(n),n}function l(){return new e.JsonResultsAdapter({name:"noop",visitNode:function(){return{}}})}function f(e){var t=e.query;if(!t)return null;var r=t.entityType||t.resultEntityType;if(!r){var a=e.metadataStore,n=a.getEntityTypeNameForResourceName(t.resourceName);n&&(r=a.getEntityType(n))}return r}function d(e,t){if(t){var r=e.jsonResultsAdapter,a=r.typeMap;a||(a={"":{_mappedPropertiesCount:NaN}},r.typeMap=a);var n=a[t];return n||(n=e.metadataStore.getEntityType(t,!0),a[t]=n||a[""]),n}}function y(e){return e.data}function v(){}function m(e){return JSON.stringify(e)}function g(e,t){var r=e.jsonResultsAdapter;return r.serverTypeNameToClient?r.serverTypeNameToClient(t):t}function h(t,r){return t.isUnmapped?void 0:(t.dataType===e.DataType.DateTimeOffset?r=r&&new Date(r.getTime()-6e4*r.getTimezoneOffset()):t.dataType.quoteJsonOData&&(r=null!=r?r.toString():r),r)}function R(e,t){var r=e.adapter,a=e.originalEntities=t.entities;e.tempKeys=[];var n=r._createChangeRequestInterceptor(e,t),s=a.map(function(t,a){var s=r._createChangeRequest(e,t,a);return n.getRequest(s,t,a)});return n.done(s),s}function T(t,r){return t.getEntityKeyFromRawEntity(r,e.DataProperty.getRawValueFromServer)}function E(e,t){var r={entities:[],entitiesWithErrors:[],keyMappings:[]};return e.saveResult=r,t.map(function(t,r){return _(e,t,r)})}function _(e,t,r){function a(t){try{var a=+t.status;if(!a||a>=400)n(t);else{var i=s._changeRequestSucceeded(e,t,r);s._processSavedEntity(i,t,e,r),o.resolve(!0)}}catch(u){o.reject("Program error: failed while processing successful save response")}}function n(t){try{var n=+t.status;if(n&&404===n&&s.ignoreDeleteNotFound&&e.originalEntities[r].entityAspect.entityState.isDeleted())t.status=204,t.statusText="resource was already deleted; no content",t.data=void 0,a(t);else{var u=e.originalEntities[r];e.saveResult.entitiesWithErrors.push({entity:u,error:s._createErrorFromResponse(t,i,e,u)}),o.resolve(!1)}}catch(c){o.reject("Program error: failed while processing save error")}}var s=e.adapter,o=s.Q.defer(),i=t.requestUri;return s._ajaxImpl.ajax({url:i,type:t.method,headers:t.headers,data:t.data,success:a,error:n}),o.promise}function j(e,t,r){var a=e.adapter._getResponseData(t);return a&&"object"==typeof a?(a.$entityType=e.originalEntities[r].entityType,e.adapter._addKeyMapping(e,r,a)):a=e.originalEntities[r],e.saveResult.entities.push(a),a}var w=function(){};e.AbstractRestDataServiceAdapter=w;var N=e.AbstractDataServiceAdapter.prototype;w.prototype={executeQuery:a,fetchMetadata:n,initialize:t,saveChanges:s,changeRequestInterceptor:N.changeRequestInterceptor,checkForRecomposition:r,saveOnlyOne:!1,ignoreDeleteNotFound:!0,_addToSaveContext:o,_addKeyMapping:i,_ajaxImpl:void 0,_catchNoConnectionError:N._catchNoConnectionError,_createChangeRequestInterceptor:N._createChangeRequestInterceptor,_changeRequestSucceeded:j,_createErrorFromResponse:p,_createChangeRequest:c,_createJsonResultsAdapter:l,_clientTypeNameToServer:u,_getEntityTypeFromMappingContext:f,_getNodeEntityType:d,_getResponseData:y,_processSavedEntity:v,_serializeToJson:m,_serverTypeNameToClient:g,_transformSaveValue:h}});
!function(e){if("object"==typeof breeze)e(breeze);else if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var t=require("breeze");e(t)}else{if("function"!=typeof define||!define.amd)throw new Error("Can't find breeze");define(["breeze"],e)}}(function(e){"use strict";function t(e){e.requestDigest=this.getRequestDigest?this.getRequestDigest():null}function r(e){var t=e.query,r=e.entityType,a=!t.selectClause&&r&&r.custom&&r.custom.defaultSelect;a&&(e.query=t.select(a))}function a(e){return"SP.Data."+e+"ListItem"}function n(e){return"Microsoft.SharePoint.DataService."+e+"Item"}function o(t,r,a){function n(){var e=f.extraMetadata;if(!e)throw new Error("Missing the extra metadata for an update/delete entity");var t=e.uri||e.id;return s.requestUri=t,e.etag&&(m["If-Match"]=e.etag),s}var o,i,s,u=t.adapter,c=t.entityManager,p=c.helper,d=t.tempKeys,f=r.entityAspect,y=f.entityState,l=r.entityType,m={Accept:"application/json;odata=verbose","Content-Type":"application/json;odata=verbose",DataServiceVersion:u.dataServiceVersion};if(t.requestDigest&&(m["X-RequestDigest"]=t.requestDigest),y.isAdded()){var v=l.defaultResourceName;if(!v)throw new Error("Missing defaultResourceName for type "+l.name);l.autoGeneratedKeyType!==e.AutoGeneratedKeyType.None&&(d[a]=f.getKey()),i=p.unwrapInstance(r,u._transformSaveValue),i.__metadata={type:u._clientTypeNameToServer(l.shortName)},o=u._serializeToJson(i),s={requestUri:c.dataService.serviceName+v,method:"POST",data:o}}else if(y.isDeleted())s={method:"DELETE",data:null},n();else{if(!y.isModified())throw new Error("Cannot save an entity whose EntityState is "+y.name);s={method:"POST"},n(),m["X-HTTP-Method"]="MERGE",i=p.unwrapChangedValues(r,c.metadataStore,u._transformSaveValue),i.__metadata={type:f.extraMetadata.type},s.data=u._serializeToJson(i)}return s.headers=m,s}function i(e,t,r,a){var n=new Error;return n.response=e,t&&(n.url=t),n.message=e.message||e.error||e.statusText,n.statusText=e.statusText,n.status=e.status,s(n),this._catchNoConnectionError(n),n}function s(e){var t,r,a=e.data=e.response.data,n=[];if(a)try{"string"==typeof a&&(a=e.data=JSON.parse(a));do r=a.error||a.innererror,r||(t=a.message||"",n.push("string"==typeof t?t:t.value)),r=r||a.internalexception,a=r;while(r);n.length>0&&(e.message=n.join("; ")+".")}catch(o){}}function u(){function t(e,t,a){var n={ignore:!0};if(!e)return n;var o=a.propertyName,i=null!=e.__deferred||"__metadata"===o||"EntityKey"===o&&e.$type&&core.stringStartsWith(e.$type,"System.Data");return i||(n={},r(e,t,n),e.results&&(n.node=e.results)),n}function r(e,t,r){var n=e.__metadata;if(n){var o=e.$entityType;if(o)return r.entityType=o,void(r.extraMetadata=n);var i=a._serverTypeNameToClient(t,n.type);if(o=a._getNodeEntityType(t,i),o&&o._mappedPropertiesCount<=Object.keys(e).length-1){r.entityType=o,r.extraMetadata=n;var s=o.navigationProperties.map(function(e){return e.name});s.forEach(function(t){e[t]&&delete e[t]})}}}var a=this,n=new e.JsonResultsAdapter({name:a.name+"_default",visitNode:t});return n.clientTypeNameToServer=a._clientTypeNameToServerDefault,n.serverTypeNameToClient=a._serverTypeNameToClientDefault,n}function c(e){function t(e){try{var t=e.data,r=t.__count?parseInt(t.__count,10):void 0,o={results:a._getResponseData(e).results,inlineCount:r,httpResponse:e};n.resolve(o)}catch(i){n.reject(new Error("Program error: failed while parsing successful query response"))}}var a=e.adapter=this;e.entityType=a._getEntityTypeFromMappingContext(e),r(e);var n=a.Q.defer(),o=e.getUrl(),i={Accept:"application/json;odata=verbose",DataServiceVersion:a.dataServiceVersion};return a._ajaxImpl.ajax({type:"GET",url:o,headers:i,params:e.query.parameters,success:t,error:function(t){n.reject(a._createErrorFromResponse(t,o,e))}}),n.promise}function p(e){return e.data&&e.data.d}function d(e,t){var r=e&&e.entityAspect&&t.getHeaders("ETag");r&&(e.entityAspect.extraMetadata.etag=r)}function f(t){var r=/^(SP\.Data.)(.*)(ListItem)$/,a=t.replace(r,"$2");return e.MetadataStore.normalizeTypeName(a)}function y(t){var r=/^(Microsoft\.SharePoint\.DataService\.)(.*)(Item)$/,a=t.replace(r,"$2");return e.MetadataStore.normalizeTypeName(a)}var l=function(){this.name="SharePointOData",this.dataServiceVersion="3.0"},m=e.AbstractRestDataServiceAdapter.prototype;m=e.core.extend(l.prototype,m),m.executeQuery=c,m._addToSaveContext=t,m._clientTypeNameToServerDefault=a,m._createChangeRequest=o,m._createErrorFromResponse=i,m._createJsonResultsAdapter=u,m._getResponseData=p,m._processSavedEntity=d,m._serverTypeNameToClientDefault=f,e.config.registerAdapter("dataService",l);var v=function(){this.name="SharePointOData2010",this.dataServiceVersion="2.0"},T=e.core.extend(v.prototype,m);T._clientTypeNameToServerDefault=n,T._serverTypeNameToClientDefault=y,e.config.registerAdapter("dataService",v)});
!function(e,a){if(a.breeze)e(a.breeze);else if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var t=require("breeze");e(t)}else{if("function"!=typeof define||!define.amd||a.breeze)throw new Error("Can't find breeze");define(["breeze"],e)}}(function(e){"use strict";function a(a,t){a.addDataService(new e.DataService({serviceName:t}))}function t(a,t){this.patch(t);var r=t.isComplexType?new e.ComplexType(t):new e.EntityType(t);return a.addEntityType(r),this.inferValidators(r),this.addTypeNameAsResource(a,r),r}function r(e,a){a.isComplexType||e.setEntityTypeForResourceName(a.shortName,a)}function i(e,a,t){var r=t.validators;N(r)||(t.validators=r=[r]),r.forEach(function(t,i){if(!(t instanceof b))try{r[i]=b.fromJSON(t)}catch(n){throw"{0}.{1}.validators[{2}] = '{3}' can't be converted to a known Validator.".format(e,a,i,JSON.stringify(t))}})}function n(e){var a=e.dataProperties,t=e.shortName.toLowerCase()+"id";for(var r in a){var i=a[r];if(i.isPartOfKey)return r;if(null==i.isPartOfKey){var n=r.toLowerCase();if("id"===n||n===t)return i.isPartOfKey=!0,r}}return null}function o(e){void 0===e.defaultResourceName&&(e.defaultResourceName=this.pluralize(e.shortName))}function s(e){function a(e,a){if(a){var t=a.name,r=e.validators,i=r.filter(function(e){return e.name==t});i.length||r.push(a)}}function t(e){var a=e.dataType,t=a&&a!==T.String?a.validatorCtor:null;return t?t():null}return e.dataProperties.forEach(function(e){e.isNullable||a(e,b.required()),a(e,t(e)),null!=e.maxLength&&e.dataType===T.String&&a(e,b.maxLength({maxLength:e.maxLength}))}),e}function f(e,a){switch(typeof a){case"string":return{entityTypeName:a};case"object":return a;default:var t=e.substr(0,1).toUpperCase()+e.substr(1);return{entityTypeName:t}}}function l(e){var a,t;e.name&&y(e,"name","shortName");var r=e.shortName,i=e.namespace=e.namespace||this.defaultNamespace;e.isComplexType||(this.inferDefaultResourceName(e),this.findEntityKey(e),e.autoGeneratedKeyType=e.autoGeneratedKeyType||this.defaultAutoGeneratedKeyType);var n=e.dataProperties;for(a in n)t=n[a],this.replaceDataPropertyAliases(t,a),t.complexTypeName&&-1===t.complexTypeName.indexOf(":#")&&(t.complexTypeName+=":#"+i),t.isPartOfKey&&(t.isNullable=t.isNullable===!0),t.validators&&this.convertValidators(r,a,t);var o=e.navigationProperties;for(a in o){t=o[a]=f(a,o[a]),this.replaceNavPropertyAliases(t,a);var s=t.entityTypeName,l=s.indexOf(":#");if(-1===l?t.entityTypeName+=":#"+i:s=s.slice(0,l),void 0===t.foreignKeyNames&&t.isScalar!==!1&&void 0===t.invForeignKeyNames){var u=a.toLowerCase()+"id",c=s.toLowerCase()+"id",p=Object.keys(n).filter(function(e){return e=e.toLowerCase(),e===u||e===c})[0];p&&(t.foreignKeyNames=[p])}if(void 0===t.associationName){var d=t.isScalar===!1||t.invForeignKeyNames||void 0===t.foreignKeyNames;t.associationName=(d?s:r)+"_"+(d?r:s)}var m=t.foreignKeyNames;m&&!N(m)&&(t.foreignKeyNames=[m]),m=t.invForeignKeyNames,m&&!N(m)&&(t.invForeignKeyNames=[m])}}function u(e){var a=e.length;switch(e[a-1]){case"s":return e+"es";case"x":return e+"es";case"y":return e.substr(0,a-1)+"ies";default:return e+"s"}}function y(e,a,t){if(void 0!==e[t])throw"renameAttrib error; new name, '"+t+"' is already defined for the object.";e[t]=e[a],delete e[a]}function c(e,a){for(var t in e)if(v(e,t)){var r=t.toLowerCase();"type"===r?y(e,t,"dataType"):"complex"===r||"complextype"===r?y(e,t,"complexTypeName"):"max"!==r||void 0!==e.dataType&&e.dataType!==T.String?r.indexOf("null")>-1&&"isNullable"!==t&&"boolean"==typeof e[t]?y(e,t,"isNullable"):"required"===r?(e[t]=!e[t],y(e,t,"isNullable")):r.indexOf("key")>-1&&"isPartOfKey"!==t&&"boolean"==typeof e[t]?y(e,t,"isPartOfKey"):"default"===r?y(e,t,"defaultValue"):"isone"===r||"hasone"===r?y(e,t,"isScalar"):("ismany"===r||"hasmany"===r)&&(e[t]=!e[t],y(e,t,"isScalar")):y(e,t,"maxLength")}}function p(e,a){for(var t in e)if(v(e,t)){var r=t.toLowerCase();"type"===r?y(e,t,"entityTypeName"):"fk"===r||"fks"===r||"key"===r?y(e,t,"foreignKeyNames"):"isone"===r||"hasone"===r?y(e,t,"isScalar"):"ismany"===r||"hasmany"===r?(e[t]=!e[t],y(e,t,"isScalar")):"invfk"===r||"invfks"===r?y(e,t,"invForeignKeyNames"):r.indexOf("assoc")>-1&&"associationName"!==t&&y(e,t,"associationName")}}function d(a){this.defaultAutoGeneratedKeyType=a||e.AutoGeneratedKeyType.None}function m(e){this.defaultNamespace=e||""}function v(e,a){return Object.prototype.hasOwnProperty.call(e,a)}function N(e){return"[object Array]"===Object.prototype.toString.call(e)}var h=function(a,t){this.defaultNamespace=a||"",this.defaultAutoGeneratedKeyType=t||e.AutoGeneratedKeyType.None};h.prototype={constructor:h,addDataService:a,addTypeNameAsResource:r,addTypeToStore:t,convertValidators:i,findEntityKey:n,inferDefaultResourceName:o,inferValidators:s,patch:l,pluralize:u,replaceDataPropertyAliases:c,replaceNavPropertyAliases:p,setDefaultAutoGeneratedKeyType:d,setDefaultNamespace:m,_hasOwnProperty:v,_isArray:N},e.config.MetadataHelper=h;var T=e.DataType,b=e.Validator},this);
!function(t,e,n){"use strict";function r(t){return function(){var e,n=arguments[0];for(e="["+(t?t+":":"")+n+"] http://errors.angularjs.org/1.3.15/"+(t?t+"/":"")+n,n=1;n<arguments.length;n++){e=e+(1==n?"?":"&")+"p"+(n-1)+"=";var r,i=encodeURIComponent;r=arguments[n],r="function"==typeof r?r.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof r?"undefined":"string"!=typeof r?JSON.stringify(r):r,e+=i(r)}return Error(e)}}function i(t){if(null==t||C(t))return!1;var e=t.length;return t.nodeType===_n&&e?!0:y(t)||Pn(t)||0===e||"number"==typeof e&&e>0&&e-1 in t}function o(t,e,n){var r,a;if(t)if(x(t))for(r in t)"prototype"==r||"length"==r||"name"==r||t.hasOwnProperty&&!t.hasOwnProperty(r)||e.call(n,t[r],r,t);else if(Pn(t)||i(t)){var s="object"!=typeof t;for(r=0,a=t.length;a>r;r++)(s||r in t)&&e.call(n,t[r],r,t)}else if(t.forEach&&t.forEach!==o)t.forEach(e,n,t);else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t);return t}function a(t,e,n){for(var r=Object.keys(t).sort(),i=0;i<r.length;i++)e.call(n,t[r[i]],r[i]);return r}function s(t){return function(e,n){t(n,e)}}function u(){return++Dn}function c(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function l(t){for(var e=t.$$hashKey,n=1,r=arguments.length;r>n;n++){var i=arguments[n];if(i)for(var o=Object.keys(i),a=0,s=o.length;s>a;a++){var u=o[a];t[u]=i[u]}}return c(t,e),t}function f(t){return parseInt(t,10)}function h(t,e){return l(Object.create(t),e)}function $(){}function p(t){return t}function d(t){return function(){return t}}function m(t){return"undefined"==typeof t}function v(t){return"undefined"!=typeof t}function g(t){return null!==t&&"object"==typeof t}function y(t){return"string"==typeof t}function w(t){return"number"==typeof t}function b(t){return"[object Date]"===Mn.call(t)}function x(t){return"function"==typeof t}function S(t){return"[object RegExp]"===Mn.call(t)}function C(t){return t&&t.window===t}function A(t){return t&&t.$evalAsync&&t.$watch}function k(t){return"boolean"==typeof t}function E(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function O(t){var e={};t=t.split(",");var n;for(n=0;n<t.length;n++)e[t[n]]=!0;return e}function T(t){return Cn(t.nodeName||t[0]&&t[0].nodeName)}function M(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),e}function V(t,e,n,r){if(C(t)||A(t))throw Vn("cpws");if(e){if(t===e)throw Vn("cpi");if(n=n||[],r=r||[],g(t)){var i=n.indexOf(t);if(-1!==i)return r[i];n.push(t),r.push(e)}if(Pn(t))for(var a=e.length=0;a<t.length;a++)i=V(t[a],null,n,r),g(t[a])&&(n.push(t[a]),r.push(i)),e.push(i);else{var s=e.$$hashKey;Pn(e)?e.length=0:o(e,function(t,n){delete e[n]});for(a in t)t.hasOwnProperty(a)&&(i=V(t[a],null,n,r),g(t[a])&&(n.push(t[a]),r.push(i)),e[a]=i);c(e,s)}}else(e=t)&&(Pn(t)?e=V(t,[],n,r):b(t)?e=new Date(t.getTime()):S(t)?(e=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]),e.lastIndex=t.lastIndex):g(t)&&(i=Object.create(Object.getPrototypeOf(t)),e=V(t,i,n,r)));return e}function N(t,e){if(Pn(t)){e=e||[];for(var n=0,r=t.length;r>n;n++)e[n]=t[n]}else if(g(t))for(n in e=e||{},t)("$"!==n.charAt(0)||"$"!==n.charAt(1))&&(e[n]=t[n]);return e||t}function D(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var r,i=typeof t;if(i==typeof e&&"object"==i){if(!Pn(t)){if(b(t))return b(e)?D(t.getTime(),e.getTime()):!1;if(S(t))return S(e)?t.toString()==e.toString():!1;if(A(t)||A(e)||C(t)||C(e)||Pn(e)||b(e)||S(e))return!1;i={};for(r in t)if("$"!==r.charAt(0)&&!x(t[r])){if(!D(t[r],e[r]))return!1;i[r]=!0}for(r in e)if(!i.hasOwnProperty(r)&&"$"!==r.charAt(0)&&e[r]!==n&&!x(e[r]))return!1;return!0}if(!Pn(e))return!1;if((i=t.length)==e.length){for(r=0;i>r;r++)if(!D(t[r],e[r]))return!1;return!0}}return!1}function j(t,e,n){return t.concat(En.call(e,n))}function P(t,e){var n=2<arguments.length?En.call(arguments,2):[];return!x(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,j(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function R(t,r){var i=r;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?i=n:C(r)?i="$WINDOW":r&&e===r?i="$DOCUMENT":A(r)&&(i="$SCOPE"),i}function I(t,e){return"undefined"==typeof t?n:(w(e)||(e=e?2:null),JSON.stringify(t,R,e))}function q(t){return y(t)?JSON.parse(t):t}function U(t){t=wn(t).clone();try{t.empty()}catch(e){}var n=wn("<div>").append(t).html();try{return t[0].nodeType===Bn?Cn(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+Cn(e)})}catch(r){return Cn(n)}}function F(t){try{return decodeURIComponent(t)}catch(e){}}function H(t){var e,n,r={};return o((t||"").split("&"),function(t){t&&(e=t.replace(/\+/g,"%20").split("="),n=F(e[0]),v(n)&&(t=v(e[1])?F(e[1]):!0,An.call(r,n)?Pn(r[n])?r[n].push(t):r[n]=[r[n],t]:r[n]=t))}),r}function _(t){var e=[];return o(t,function(t,n){Pn(t)?o(t,function(t){e.push(L(n,!0)+(!0===t?"":"="+L(t,!0)))}):e.push(L(n,!0)+(!0===t?"":"="+L(t,!0)))}),e.length?e.join("&"):""}function B(t){return L(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function L(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}function z(t,e){var n,r,i=Un.length;for(t=wn(t),r=0;i>r;++r)if(n=Un[r]+e,y(n=t.attr(n)))return n;return null}function G(t,e){var n,r,i={};o(Un,function(e){e+="app",!n&&t.hasAttribute&&t.hasAttribute(e)&&(n=t,r=t.getAttribute(e))}),o(Un,function(e){e+="app";var i;!n&&(i=t.querySelector("["+e.replace(":","\\:")+"]"))&&(n=i,r=i.getAttribute(e))}),n&&(i.strictDi=null!==z(n,"strict-di"),e(n,r?[r]:[],i))}function W(n,r,i){g(i)||(i={}),i=l({strictDi:!1},i);var a=function(){if(n=wn(n),n.injector()){var t=n[0]===e?"document":U(n);throw Vn("btstrpd",t.replace(/</,"&lt;").replace(/>/,"&gt;"))}return r=r||[],r.unshift(["$provide",function(t){t.value("$rootElement",n)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),r.unshift("ng"),t=Nt(r,i.strictDi),t.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,r){t.$apply(function(){e.data("$injector",r),n(e)(t)})}]),t},s=/^NG_ENABLE_DEBUG_INFO!/,u=/^NG_DEFER_BOOTSTRAP!/;return t&&s.test(t.name)&&(i.debugInfoEnabled=!0,t.name=t.name.replace(s,"")),t&&!u.test(t.name)?a():(t.name=t.name.replace(u,""),Nn.resumeBootstrap=function(t){return o(t,function(t){r.push(t)}),a()},void(x(Nn.resumeDeferredBootstrap)&&Nn.resumeDeferredBootstrap()))}function J(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function Y(t){if(t=Nn.element(t).injector(),!t)throw Vn("test");return t.get("$$testability")}function Z(t,e){return e=e||"_",t.replace(Fn,function(t,n){return(n?e:"")+t.toLowerCase()})}function K(){var e;Hn||((bn=t.jQuery)&&bn.fn.on?(wn=bn,l(bn.fn,{scope:nr.scope,isolateScope:nr.isolateScope,controller:nr.controller,injector:nr.injector,inheritedData:nr.inheritedData}),e=bn.cleanData,bn.cleanData=function(t){var n;if(jn)jn=!1;else for(var r,i=0;null!=(r=t[i]);i++)(n=bn._data(r,"events"))&&n.$destroy&&bn(r).triggerHandler("$destroy");e(t)}):wn=ct,Nn.element=wn,Hn=!0)}function X(t,e,n){if(!t)throw Vn("areq",e||"?",n||"required");return t}function Q(t,e,n){return n&&Pn(t)&&(t=t[t.length-1]),X(x(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function tt(t,e){if("hasOwnProperty"===t)throw Vn("badname",e)}function et(t,e,n){if(!e)return t;e=e.split(".");for(var r,i=t,o=e.length,a=0;o>a;a++)r=e[a],t&&(t=(i=t)[r]);return!n&&x(t)?P(i,t):t}function nt(t){var e=t[0];t=t[t.length-1];var n=[e];do{if(e=e.nextSibling,!e)break;n.push(e)}while(e!==t);return wn(n)}function rt(){return Object.create(null)}function it(t){function e(t,e,n){return t[e]||(t[e]=n())}var n=r("$injector"),i=r("ng");return t=e(t,"angular",Object),t.$$minErr=t.$$minErr||r,e(t,"module",function(){var t={};return function(r,o,a){if("hasOwnProperty"===r)throw i("badname","module");return o&&t.hasOwnProperty(r)&&(t[r]=null),e(t,r,function(){function t(t,n,r,i){return i||(i=e),function(){return i[r||"push"]([t,n,arguments]),c}}if(!o)throw n("nomod",r);var e=[],i=[],s=[],u=t("$injector","invoke","push",i),c={_invokeQueue:e,_configBlocks:i,_runBlocks:s,requires:o,name:r,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),animation:t("$animateProvider","register"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),config:u,run:function(t){return s.push(t),this}};return a&&u(a),c})}})}function ot(e){l(e,{bootstrap:W,copy:V,extend:l,equals:D,element:wn,forEach:o,injector:Nt,noop:$,bind:P,toJson:I,fromJson:q,identity:p,isUndefined:m,isDefined:v,isString:y,isFunction:x,isObject:g,isNumber:w,isElement:E,isArray:Pn,version:Ln,isDate:b,lowercase:Cn,uppercase:kn,callbacks:{counter:0},getTestability:Y,$$minErr:r,$$csp:qn,reloadWithDebugInfo:J}),xn=it(t);try{xn("ngLocale")}catch(n){xn("ngLocale",[]).provider("$locale",ne)}xn("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Ne}),t.provider("$compile",Ut).directive({a:Jr,input:li,textarea:li,form:Xr,script:Yi,select:Xi,style:to,option:Qi,ngBind:$i,ngBindHtml:di,ngBindTemplate:pi,ngClass:vi,ngClassEven:yi,ngClassOdd:gi,ngCloak:wi,ngController:bi,ngForm:Qr,ngHide:Bi,ngIf:Ci,ngInclude:Ai,ngInit:Ei,ngNonBindable:Ui,ngPluralize:Fi,ngRepeat:Hi,ngShow:_i,ngStyle:Li,ngSwitch:zi,ngSwitchWhen:Gi,ngSwitchDefault:Wi,ngOptions:Ki,ngTransclude:Ji,ngModel:Ri,ngList:Oi,ngChange:mi,pattern:no,ngPattern:no,required:eo,ngRequired:eo,minlength:io,ngMinlength:io,maxlength:ro,ngMaxlength:ro,ngValue:hi,ngModelOptions:qi}).directive({ngInclude:ki}).directive(Yr).directive(xi),t.provider({$anchorScroll:Dt,$animate:hr,$browser:Rt,$cacheFactory:It,$controller:Bt,$document:Lt,$exceptionHandler:zt,$filter:Le,$interpolate:te,$interval:ee,$http:Zt,$httpBackend:Xt,$location:de,$log:me,$parse:ke,$rootScope:Ve,$q:Ee,$$q:Oe,$sce:Re,$sceDelegate:Pe,$sniffer:Ie,$templateCache:qt,$templateRequest:qe,$$testability:Ue,$timeout:Fe,$window:Be,$$rAF:Me,$$asyncCallback:jt,$$jqLite:Ot})}])}function at(t){return t.replace(Wn,function(t,e,n,r){return r?n.toUpperCase():n}).replace(Jn,"Moz$1")}function st(t){return t=t.nodeType,t===_n||!t||9===t}function ut(t,e){var n,r,i=e.createDocumentFragment(),a=[];if(Xn.test(t)){for(n=n||i.appendChild(e.createElement("div")),r=(Qn.exec(t)||["",""])[1].toLowerCase(),r=er[r]||er._default,n.innerHTML=r[1]+t.replace(tr,"<$1></$2>")+r[2],r=r[0];r--;)n=n.lastChild;a=j(a,n.childNodes),n=i.firstChild,n.textContent=""}else a.push(e.createTextNode(t));return i.textContent="",i.innerHTML="",o(a,function(t){i.appendChild(t)}),i}function ct(t){if(t instanceof ct)return t;var n;if(y(t)&&(t=Rn(t),n=!0),!(this instanceof ct)){if(n&&"<"!=t.charAt(0))throw Zn("nosel");return new ct(t)}if(n){n=e;var r;t=(r=Kn.exec(t))?[n.createElement(r[1])]:(r=ut(t,n))?r.childNodes:[]}yt(this,t)}function lt(t){return t.cloneNode(!0)}function ft(t,e){if(e||$t(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),r=0,i=n.length;i>r;r++)$t(n[r])}function ht(t,e,n,r){if(v(r))throw Zn("offargs");var i=(r=pt(t))&&r.events,a=r&&r.handle;if(a)if(e)o(e.split(" "),function(e){if(v(n)){var r=i[e];if(M(r||[],n),r&&0<r.length)return}t.removeEventListener(e,a,!1),delete i[e]});else for(e in i)"$destroy"!==e&&t.removeEventListener(e,a,!1),delete i[e]}function $t(t,e){var r=t.ng339,i=r&&zn[r];i&&(e?delete i.data[e]:(i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),ht(t)),delete zn[r],t.ng339=n))}function pt(t,e){var r=t.ng339,r=r&&zn[r];return e&&!r&&(t.ng339=r=++Gn,r=zn[r]={events:{},data:{},handle:n}),r}function dt(t,e,n){if(st(t)){var r=v(n),i=!r&&e&&!g(e),o=!e;if(t=(t=pt(t,!i))&&t.data,r)t[e]=n;else{if(o)return t;if(i)return t&&t[e];l(t,e)}}}function mt(t,e){return t.getAttribute?-1<(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" "):!1}function vt(t,e){e&&t.setAttribute&&o(e.split(" "),function(e){t.setAttribute("class",Rn((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Rn(e)+" "," ")))})}function gt(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(e.split(" "),function(t){t=Rn(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",Rn(n))}}function yt(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var r=0;n>r;r++)t[t.length++]=e[r]}else t[t.length++]=e}}function wt(t,e){return bt(t,"$"+(e||"ngController")+"Controller")}function bt(t,e,r){for(9==t.nodeType&&(t=t.documentElement),e=Pn(e)?e:[e];t;){for(var i=0,o=e.length;o>i;i++)if((r=wn.data(t,e[i]))!==n)return r;t=t.parentNode||11===t.nodeType&&t.host}}function xt(t){for(ft(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function St(t,e){e||ft(t);var n=t.parentNode;n&&n.removeChild(t)}function Ct(e,n){n=n||t,"complete"===n.document.readyState?n.setTimeout(e):wn(n).on("load",e)}function At(t,e){var n=rr[e.toLowerCase()];return n&&ir[T(t)]&&n}function kt(t,e){var n=t.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&or[e]}function Et(t,e){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=e[r||n.type],o=i?i.length:0;if(o){if(m(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped},o>1&&(i=N(i));for(var s=0;o>s;s++)n.isImmediatePropagationStopped()||i[s].call(t,n)}};return n.elem=t,n}function Ot(){this.$get=function(){return l(ct,{hasClass:function(t,e){return t.attr&&(t=t[0]),mt(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),gt(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),vt(t,e)}})}}function Tt(t,e){var n=t&&t.$$hashKey;return n?("function"==typeof n&&(n=t.$$hashKey()),n):(n=typeof t,n="function"==n||"object"==n&&null!==t?t.$$hashKey=n+":"+(e||u)():n+":"+t)}function Mt(t,e){if(e){var n=0;this.nextUid=function(){return++n}}o(t,this.put,this)}function Vt(t){return(t=t.toString().replace(cr,"").match(ar))?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Nt(t,e){function r(t){return function(e,n){return g(e)?void o(e,s(t)):t(e,n)}}function i(t,e){if(tt(t,"service"),(x(e)||Pn(e))&&(e=w.instantiate(e)),!e.$get)throw lr("pget",t);return v[t+"Provider"]=e}function a(t,e){return function(){var n=S.invoke(e,this);if(m(n))throw lr("undef",t);return n}}function u(t,e,n){return i(t,{$get:!1!==n?a(t,e):e})}function c(t){var e,n=[];return o(t,function(t){function r(t){var e,n;for(e=0,n=t.length;n>e;e++){var r=t[e],i=w.get(r[0]);i[r[1]].apply(i,r[2])}}if(!p.get(t)){p.put(t,!0);try{y(t)?(e=xn(t),n=n.concat(c(e.requires)).concat(e._runBlocks),r(e._invokeQueue),r(e._configBlocks)):x(t)?n.push(w.invoke(t)):Pn(t)?n.push(w.invoke(t)):Q(t,"module")}catch(i){throw Pn(t)&&(t=t[t.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),lr("modulerr",t,i.stack||i.message||i)}}}),n}function l(t,n){function r(e,r){if(t.hasOwnProperty(e)){if(t[e]===f)throw lr("cdep",e+" <- "+h.join(" <- "));return t[e]}try{return h.unshift(e),t[e]=f,t[e]=n(e,r)}catch(i){throw t[e]===f&&delete t[e],i}finally{h.shift()}}function i(t,n,i,o){"string"==typeof i&&(o=i,i=null);var a,s,u,c=[],l=Nt.$$annotate(t,e,o);for(s=0,a=l.length;a>s;s++){if(u=l[s],"string"!=typeof u)throw lr("itkn",u);c.push(i&&i.hasOwnProperty(u)?i[u]:r(u,o))}return Pn(t)&&(t=t[a]),t.apply(n,c)}return{invoke:i,instantiate:function(t,e,n){var r=Object.create((Pn(t)?t[t.length-1]:t).prototype||null);return t=i(t,r,e,n),g(t)||x(t)?t:r},get:r,annotate:Nt.$$annotate,has:function(e){return v.hasOwnProperty(e+"Provider")||t.hasOwnProperty(e)}}}e=!0===e;var f={},h=[],p=new Mt([],!0),v={$provide:{provider:r(i),factory:r(u),service:r(function(t,e){return u(t,["$injector",function(t){return t.instantiate(e)}])}),value:r(function(t,e){return u(t,d(e),!1)}),constant:r(function(t,e){tt(t,"constant"),v[t]=e,b[t]=e}),decorator:function(t,e){var n=w.get(t+"Provider"),r=n.$get;n.$get=function(){var t=S.invoke(r,n);return S.invoke(e,null,{$delegate:t})}}}},w=v.$injector=l(v,function(t,e){throw Nn.isString(e)&&h.push(e),lr("unpr",h.join(" <- "))}),b={},S=b.$injector=l(b,function(t,e){var r=w.get(t+"Provider",e);return S.invoke(r.$get,r,n,t)});return o(c(t),function(t){S.invoke(t||$)}),S}function Dt(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(e,n,r){function i(t){var e=null;return Array.prototype.some.call(t,function(t){return"a"===T(t)?(e=t,!0):void 0}),e}function o(t){if(t){t.scrollIntoView();var n;n=a.yOffset,x(n)?n=n():E(n)?(n=n[0],n="fixed"!==e.getComputedStyle(n).position?0:n.getBoundingClientRect().bottom):w(n)||(n=0),n&&(t=t.getBoundingClientRect().top,e.scrollBy(0,t-n))}else e.scrollTo(0,0)}function a(){var t,e=n.hash();e?(t=s.getElementById(e))?o(t):(t=i(s.getElementsByName(e)))?o(t):"top"===e&&o(null):o(null)}var s=e.document;return t&&r.$watch(function(){return n.hash()},function(t,e){t===e&&""===t||Ct(function(){r.$evalAsync(a)})}),a}]}function jt(){this.$get=["$$rAF","$timeout",function(t,e){return t.supported?function(e){return t(e)}:function(t){return e(t,0,!1)}}]}function Pt(t,e,r,i){function a(t){try{t.apply(null,En.call(arguments,1))}finally{if(x--,0===x)for(;S.length;)try{S.pop()()}catch(e){r.error(e)}}}function s(t,e){!function n(){o(A,function(t){t()}),C=e(n,t)}()}function u(){c(),l()}function c(){t:{try{k=v.state;break t}catch(t){}k=void 0}k=m(k)?null:k,D(k,j)&&(k=j),j=k}function l(){(O!==h.url()||E!==k)&&(O=h.url(),E=k,o(V,function(t){t(h.url(),k)}))}function f(t){try{return decodeURIComponent(t)}catch(e){return t}}var h=this,p=e[0],d=t.location,v=t.history,g=t.setTimeout,w=t.clearTimeout,b={};h.isMock=!1;var x=0,S=[];h.$$completeOutstandingRequest=a,h.$$incOutstandingRequestCount=function(){x++},h.notifyWhenNoOutstandingRequests=function(t){o(A,function(t){t()}),0===x?t():S.push(t)};var C,A=[];h.addPollFn=function(t){return m(C)&&s(100,g),A.push(t),t};var k,E,O=d.href,T=e.find("base"),M=null;c(),E=k,h.url=function(e,n,r){if(m(r)&&(r=null),d!==t.location&&(d=t.location),v!==t.history&&(v=t.history),e){var o=E===r;if(O===e&&(!i.history||o))return h;var a=O&&se(O)===se(e);return O=e,E=r,!i.history||a&&o?(a||(M=e),n?d.replace(e):a?(n=d,r=e.indexOf("#"),e=-1===r?"":e.substr(r+1),n.hash=e):d.href=e):(v[n?"replaceState":"pushState"](r,"",e),c(),E=k),h}return M||d.href.replace(/%27/g,"'")},h.state=function(){return k};var V=[],N=!1,j=null;h.onUrlChange=function(e){return N||(i.history&&wn(t).on("popstate",u),wn(t).on("hashchange",u),N=!0),V.push(e),e},h.$$checkUrlChange=l,h.baseHref=function(){var t=T.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var P={},R="",I=h.baseHref();h.cookies=function(t,e){var i,o,a,s;if(!t){if(p.cookie!==R)for(R=p.cookie,i=R.split("; "),P={},a=0;a<i.length;a++)o=i[a],s=o.indexOf("="),s>0&&(t=f(o.substring(0,s)),P[t]===n&&(P[t]=f(o.substring(s+1))));return P}e===n?p.cookie=encodeURIComponent(t)+"=;path="+I+";expires=Thu, 01 Jan 1970 00:00:00 GMT":y(e)&&(i=(p.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+";path="+I).length+1,i>4096&&r.warn("Cookie '"+t+"' possibly not set or overflowed because it was too large ("+i+" > 4096 bytes)!"))},h.defer=function(t,e){var n;return x++,n=g(function(){delete b[n],a(t)},e||0),b[n]=!0,n},h.defer.cancel=function(t){return b[t]?(delete b[t],w(t),a($),!0):!1}}function Rt(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,r){return new Pt(t,r,e,n)}]}function It(){this.$get=function(){function t(t,n){function i(t){t!=h&&($?$==t&&($=t.n):$=t,o(t.n,t.p),o(t,h),h=t,h.n=null)}function o(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}if(t in e)throw r("$cacheFactory")("iid",t);var a=0,s=l({},n,{id:t}),u={},c=n&&n.capacity||Number.MAX_VALUE,f={},h=null,$=null;return e[t]={put:function(t,e){if(c<Number.MAX_VALUE){var n=f[t]||(f[t]={key:t});i(n)}return m(e)?void 0:(t in u||a++,u[t]=e,a>c&&this.remove($.key),e)},get:function(t){if(c<Number.MAX_VALUE){var e=f[t];if(!e)return;i(e)}return u[t]},remove:function(t){if(c<Number.MAX_VALUE){var e=f[t];if(!e)return;e==h&&(h=e.p),e==$&&($=e.n),o(e.n,e.p),delete f[t]}delete u[t],a--},removeAll:function(){u={},a=0,f={},h=$=null},destroy:function(){f=s=u=null,delete e[t]},info:function(){return l({},s,{size:a})}}}var e={};return t.info=function(){var t={};return o(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function qt(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function Ut(t,r){function i(t,e){var n=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,r={};return o(t,function(t,i){var o=t.match(n);if(!o)throw $r("iscp",e,i,t);r[i]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||i}}),r}var a={},u=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,c=/(([\w\-]+)(?:\:([^;]+))?;?)/,f=O("ngSrc,ngSrcset,src,srcset"),m=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,w=/^(on[a-z]+|formaction)$/;this.directive=function S(e,n){return tt(e,"directive"),y(e)?(X(n,"directiveFactory"),a.hasOwnProperty(e)||(a[e]=[],t.factory(e+"Directive",["$injector","$exceptionHandler",function(t,n){var r=[];return o(a[e],function(o,a){try{var s=t.invoke(o);x(s)?s={compile:d(s)}:!s.compile&&s.link&&(s.compile=d(s.link)),s.priority=s.priority||0,s.index=a,s.name=s.name||e,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA",g(s.scope)&&(s.$$isolateBindings=i(s.scope,s.name)),r.push(s)}catch(u){n(u)}}),r}])),a[e].push(n)):o(e,s(S)),this},this.aHrefSanitizationWhitelist=function(t){return v(t)?(r.aHrefSanitizationWhitelist(t),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return v(t)?(r.imgSrcSanitizationWhitelist(t),this):r.imgSrcSanitizationWhitelist()};var b=!0;this.debugInfoEnabled=function(t){return v(t)?(b=t,this):b},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(t,r,i,s,d,v,S,C,k,E,O){function V(t,e){try{t.addClass(e)}catch(n){}}function N(t,e,n,r,i){t instanceof wn||(t=wn(t)),o(t,function(e,n){e.nodeType==Bn&&e.nodeValue.match(/\S+/)&&(t[n]=wn(e).wrap("<span></span>").parent()[0])});var a=j(t,e,t,n,r,i);N.$$addScopeClass(t);var s=null;return function(e,n,r){X(e,"scope"),r=r||{};var i=r.parentBoundTranscludeFn,o=r.transcludeControllers;if(r=r.futureParentElement,i&&i.$$boundTransclude&&(i=i.$$boundTransclude),s||(s=(r=r&&r[0])&&"foreignobject"!==T(r)&&r.toString().match(/SVG/)?"svg":"html"),r="html"!==s?wn(Y(s,wn("<div>").append(t).html())):n?nr.clone.call(t):t,o)for(var u in o)r.data("$"+u+"Controller",o[u].instance);return N.$$addScopeInfo(r,e),n&&n(r,e),a&&a(e,r,r,i),r}}function j(t,e,r,i,o,a){function s(t,r,i,o){var a,s,u,c,l,f,p;if(h)for(p=Array(r.length),c=0;c<$.length;c+=3)a=$[c],p[a]=r[a];else p=r;for(c=0,l=$.length;l>c;)s=p[$[c++]],r=$[c++],a=$[c++],r?(r.scope?(u=t.$new(),N.$$addScopeInfo(wn(s),u)):u=t,f=r.transcludeOnThisElement?P(t,r.transclude,o,r.elementTranscludeOnThisElement):!r.templateOnThisElement&&o?o:!o&&e?P(t,e):null,r(a,u,s,i,f)):a&&a(t,s.childNodes,n,o)}for(var u,c,l,f,h,$=[],p=0;p<t.length;p++)u=new it,c=R(t[p],[],u,0===p?i:n,o),(a=c.length?F(c,t[p],u,e,r,null,[],[],a):null)&&a.scope&&N.$$addScopeClass(u.$$element),u=a&&a.terminal||!(l=t[p].childNodes)||!l.length?null:j(l,a?(a.transcludeOnThisElement||!a.templateOnThisElement)&&a.transclude:e),(a||u)&&($.push(p,a,u),f=!0,h=h||a),a=null;return f?s:null}function P(t,e,n,r){return function(r,i,o,a,s){return r||(r=t.$new(!1,s),r.$$transcluded=!0),e(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}}function R(t,e,n,r,i){var o,a=n.$attr;switch(t.nodeType){case _n:_(e,Ft(T(t)),"E",r,i);for(var s,l,f,h=t.attributes,$=0,p=h&&h.length;p>$;$++){var d=!1,m=!1;s=h[$],o=s.name,l=Rn(s.value),s=Ft(o),(f=ut.test(s))&&(o=o.replace(pr,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var v=s.replace(/(Start|End)$/,"");B(v)&&s===v+"Start"&&(d=o,m=o.substr(0,o.length-5)+"end",o=o.substr(0,o.length-6)),s=Ft(o.toLowerCase()),a[s]=o,(f||!n.hasOwnProperty(s))&&(n[s]=l,At(t,s)&&(n[s]=!0)),Q(t,e,l,s,f),_(e,s,"A",r,i,d,m)}if(t=t.className,g(t)&&(t=t.animVal),y(t)&&""!==t)for(;o=c.exec(t);)s=Ft(o[2]),_(e,s,"C",r,i)&&(n[s]=Rn(o[3])),t=t.substr(o.index+o[0].length);break;case Bn:J(e,t.nodeValue);break;case 8:try{(o=u.exec(t.nodeValue))&&(s=Ft(o[1]),_(e,s,"M",r,i)&&(n[s]=Rn(o[2])))}catch(w){}}return e.sort(G),e}function I(t,e,n){var r=[],i=0;if(e&&t.hasAttribute&&t.hasAttribute(e)){do{if(!t)throw $r("uterdir",e,n);t.nodeType==_n&&(t.hasAttribute(e)&&i++,t.hasAttribute(n)&&i--),r.push(t),t=t.nextSibling}while(i>0)}else r.push(t);return wn(r)}function q(t,e,n){return function(r,i,o,a,s){return i=I(i[0],e,n),t(r,i,o,a,s)}}function F(t,a,s,u,c,l,f,h,$){function p(t,e,n,r){t&&(n&&(t=q(t,n,r)),t.require=k.require,t.directiveName=E,(j===k||k.$$isolateScope)&&(t=et(t,{isolateScope:!0})),f.push(t)),e&&(n&&(e=q(e,n,r)),e.require=k.require,e.directiveName=E,(j===k||k.$$isolateScope)&&(e=et(e,{isolateScope:!0})),h.push(e))}function w(t,e,n,r){var i,a,s="data",u=!1,c=n;if(y(e)){if(a=e.match(m),e=e.substring(a[0].length),a[3]&&(a[1]?a[3]=null:a[1]=a[3]),"^"===a[1]?s="inheritedData":"^^"===a[1]&&(s="inheritedData",c=n.parent()),"?"===a[2]&&(u=!0),i=null,r&&"data"===s&&(i=r[e])&&(i=i.instance),i=i||c[s]("$"+e+"Controller"),!i&&!u)throw $r("ctreq",e,t);return i||null}return Pn(e)&&(i=[],o(e,function(e){i.push(w(t,e,n,r))})),i}function b(t,e,i,u,c){function l(t,e,r){var i;return A(t)||(r=e,e=t,t=n),G&&(i=y),r||(r=G?x.parent():x),c(t,e,i,r,E)}var $,p,m,g,y,b,x,S;if(a===i?(S=s,x=s.$$element):(x=wn(i),S=new it(x,s)),j&&(g=e.$new(!0)),c&&(b=l,b.$$boundTransclude=c),V&&(C={},y={},o(V,function(t){var n={$scope:t===j||t.$$isolateScope?g:e,$element:x,$attrs:S,$transclude:b};m=t.controller,"@"==m&&(m=S[t.name]),n=v(m,n,!0,t.controllerAs),y[t.name]=n,G||x.data("$"+t.name+"Controller",n.instance),C[t.name]=n})),j){N.$$addScopeInfo(x,g,!0,!(P&&(P===j||P===j.$$originalDirective))),N.$$addScopeClass(x,!0),u=C&&C[j.name];var k=g;u&&u.identifier&&!0===j.bindToController&&(k=u.instance),o(g.$$isolateBindings=j.$$isolateBindings,function(t,n){var i,o,a,s,u=t.attrName,c=t.optional;switch(t.mode){case"@":S.$observe(u,function(t){k[n]=t}),S.$$observers[u].$$scope=e,S[u]&&(k[n]=r(S[u])(e));break;case"=":if(c&&!S[u])break;o=d(S[u]),s=o.literal?D:function(t,e){return t===e||t!==t&&e!==e},a=o.assign||function(){throw i=k[n]=o(e),$r("nonassign",S[u],j.name)},i=k[n]=o(e),c=function(t){return s(t,k[n])||(s(t,i)?a(e,t=k[n]):k[n]=t),i=t},c.$stateful=!0,c=t.collection?e.$watchCollection(S[u],c):e.$watch(d(S[u],c),null,o.literal),g.$on("$destroy",c);break;case"&":o=d(S[u]),k[n]=function(t){return o(e,t)}}})}for(C&&(o(C,function(t){t()}),C=null),u=0,$=f.length;$>u;u++)p=f[u],nt(p,p.isolateScope?g:e,x,S,p.require&&w(p.directiveName,p.require,x,y),b);var E=e;for(j&&(j.template||null===j.templateUrl)&&(E=g),t&&t(E,i.childNodes,n,c),u=h.length-1;u>=0;u--)p=h[u],nt(p,p.isolateScope?g:e,x,S,p.require&&w(p.directiveName,p.require,x,y),b)}$=$||{};for(var S,C,k,E,O,T,M=-Number.MAX_VALUE,V=$.controllerDirectives,j=$.newIsolateScopeDirective,P=$.templateDirective,F=$.nonTlbTranscludeDirective,_=!1,B=!1,G=$.hasElementTranscludeDirective,J=s.$$element=wn(a),Z=u,K=0,X=t.length;X>K;K++){k=t[K];var Q=k.$$start,rt=k.$$end;if(Q&&(J=I(a,Q,rt)),O=n,M>k.priority)break;if((O=k.scope)&&(k.templateUrl||(g(O)?(W("new/isolated scope",j||S,k,J),j=k):W("new/isolated scope",j,k,J)),S=S||k),E=k.name,!k.templateUrl&&k.controller&&(O=k.controller,V=V||{},W("'"+E+"' controller",V[E],k,J),V[E]=k),(O=k.transclude)&&(_=!0,k.$$tlb||(W("transclusion",F,k,J),F=k),"element"==O?(G=!0,M=k.priority,O=J,J=s.$$element=wn(e.createComment(" "+E+": "+s[E]+" ")),a=J[0],tt(c,En.call(O,0),a),Z=N(O,u,M,l&&l.name,{nonTlbTranscludeDirective:F})):(O=wn(lt(a)).contents(),J.empty(),Z=N(O,u))),k.template)if(B=!0,W("template",P,k,J),P=k,O=x(k.template)?k.template(J,s):k.template,O=st(O),k.replace){if(l=k,O=Xn.test(O)?_t(Y(k.templateNamespace,Rn(O))):[],a=O[0],1!=O.length||a.nodeType!==_n)throw $r("tplrt",E,"");tt(c,J,a),X={$attr:{}},O=R(a,[],X);var ot=t.splice(K+1,t.length-(K+1));j&&H(O),t=t.concat(O).concat(ot),L(s,X),X=t.length}else J.html(O);if(k.templateUrl)B=!0,W("template",P,k,J),P=k,k.replace&&(l=k),b=z(t.splice(K,t.length-K),J,s,c,_&&Z,f,h,{controllerDirectives:V,newIsolateScopeDirective:j,templateDirective:P,nonTlbTranscludeDirective:F}),X=t.length;else if(k.compile)try{T=k.compile(J,s,Z),x(T)?p(null,T,Q,rt):T&&p(T.pre,T.post,Q,rt)}catch(at){i(at,U(J))}k.terminal&&(b.terminal=!0,M=Math.max(M,k.priority))}return b.scope=S&&!0===S.scope,b.transcludeOnThisElement=_,b.elementTranscludeOnThisElement=G,b.templateOnThisElement=B,b.transclude=Z,$.hasElementTranscludeDirective=G,b}function H(t){for(var e=0,n=t.length;n>e;e++)t[e]=h(t[e],{$$isolateScope:!0})}function _(e,r,o,s,u,c,l){if(r===u)return null;if(u=null,a.hasOwnProperty(r)){var f;r=t.get(r+"Directive");for(var $=0,p=r.length;p>$;$++)try{f=r[$],(s===n||s>f.priority)&&-1!=f.restrict.indexOf(o)&&(c&&(f=h(f,{$$start:c,$$end:l})),e.push(f),u=f)}catch(d){i(d)}}return u}function B(e){if(a.hasOwnProperty(e))for(var n=t.get(e+"Directive"),r=0,i=n.length;i>r;r++)if(e=n[r],e.multiElement)return!0;return!1}function L(t,e){var n=e.$attr,r=t.$attr,i=t.$$element;o(t,function(r,i){"$"!=i.charAt(0)&&(e[i]&&e[i]!==r&&(r+=("style"===i?";":" ")+e[i]),t.$set(i,r,!0,n[i]))}),o(e,function(e,o){"class"==o?(V(i,e),t["class"]=(t["class"]?t["class"]+" ":"")+e):"style"==o?(i.attr("style",i.attr("style")+";"+e),t.style=(t.style?t.style+";":"")+e):"$"==o.charAt(0)||t.hasOwnProperty(o)||(t[o]=e,r[o]=n[o])})}function z(t,e,n,r,i,a,u,c){var l,f,$=[],p=e[0],d=t.shift(),m=h(d,{templateUrl:null,transclude:null,replace:null,$$originalDirective:d}),v=x(d.templateUrl)?d.templateUrl(e,n):d.templateUrl,y=d.templateNamespace;return e.empty(),s(k.getTrustedResourceUrl(v)).then(function(s){var h,w;if(s=st(s),d.replace){if(s=Xn.test(s)?_t(Y(y,Rn(s))):[],h=s[0],1!=s.length||h.nodeType!==_n)throw $r("tplrt",d.name,v);s={$attr:{}},tt(r,e,h);var b=R(h,[],s);g(d.scope)&&H(b),t=b.concat(t),L(n,s)}else h=p,e.html(s);for(t.unshift(m),l=F(t,h,n,i,e,d,a,u,c),o(r,function(t,n){t==h&&(r[n]=e[0])}),f=j(e[0].childNodes,i);$.length;){s=$.shift(),w=$.shift();var x=$.shift(),S=$.shift(),b=e[0];if(!s.$$destroyed){if(w!==p){var C=w.className;c.hasElementTranscludeDirective&&d.replace||(b=lt(h)),tt(x,wn(w),b),V(wn(b),C)}w=l.transcludeOnThisElement?P(s,l.transclude,S):S,l(f,s,b,r,w)}}$=null}),function(t,e,n,r,i){t=i,e.$$destroyed||($?$.push(e,n,r,t):(l.transcludeOnThisElement&&(t=P(e,l.transclude,i)),l(f,e,n,r,t)))}}function G(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function W(t,e,n,r){if(e)throw $r("multidir",e.name,n.name,t,U(r))}function J(t,e){var n=r(e,!0);n&&t.push({priority:0,compile:function(t){t=t.parent();var e=!!t.length;return e&&N.$$addBindingClass(t),function(t,r){var i=r.parent();e||N.$$addBindingClass(i),N.$$addBindingInfo(i,n.expressions),t.$watch(n,function(t){r[0].nodeValue=t})}}})}function Y(t,n){switch(t=Cn(t||"html")){case"svg":case"math":var r=e.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function K(t,e){if("srcdoc"==e)return k.HTML;var n=T(t);return"xlinkHref"==e||"form"==n&&"action"==e||"img"!=n&&("src"==e||"ngSrc"==e)?k.RESOURCE_URL:void 0}function Q(t,e,n,i,o){var a=K(t,i);o=f[i]||o;var s=r(n,!0,a,o);if(s){if("multiple"===i&&"select"===T(t))throw $r("selmulti",U(t));e.push({priority:100,compile:function(){return{pre:function(t,e,u){if(e=u.$$observers||(u.$$observers={}),w.test(i))throw $r("nodomevents");var c=u[i];c!==n&&(s=c&&r(c,!0,a,o),n=c),s&&(u[i]=s(t),(e[i]||(e[i]=[])).$$inter=!0,(u.$$observers&&u.$$observers[i].$$scope||t).$watch(s,function(t,e){
"class"===i&&t!=e?u.$updateClass(t,e):u.$set(i,t)}))}}}})}}function tt(t,n,r){var i,o,a=n[0],s=n.length,u=a.parentNode;if(t)for(i=0,o=t.length;o>i;i++)if(t[i]==a){t[i++]=r,o=i+s-1;for(var c=t.length;c>i;i++,o++)c>o?t[i]=t[o]:delete t[i];t.length-=s-1,t.context===a&&(t.context=r);break}for(u&&u.replaceChild(r,a),t=e.createDocumentFragment(),t.appendChild(a),wn(r).data(wn(a).data()),bn?(jn=!0,bn.cleanData([a])):delete wn.cache[a[wn.expando]],a=1,s=n.length;s>a;a++)u=n[a],wn(u).remove(),t.appendChild(u),delete n[a];n[0]=r,n.length=1}function et(t,e){return l(function(){return t.apply(null,arguments)},t,e)}function nt(t,e,n,r,o,a){try{t(e,n,r,o,a)}catch(s){i(s,U(n))}}var it=function(t,e){if(e){var n,r,i,o=Object.keys(e);for(n=0,r=o.length;r>n;n++)i=o[n],this[i]=e[i]}else this.$attr={};this.$$element=t};it.prototype={$normalize:Ft,$addClass:function(t){t&&0<t.length&&E.addClass(this.$$element,t)},$removeClass:function(t){t&&0<t.length&&E.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=Ht(t,e);n&&n.length&&E.addClass(this.$$element,n),(n=Ht(e,t))&&n.length&&E.removeClass(this.$$element,n)},$set:function(t,e,r,a){var s=this.$$element[0],u=At(s,t),c=kt(s,t),s=t;if(u?(this.$$element.prop(t,e),a=u):c&&(this[c]=e,s=c),this[t]=e,a?this.$attr[t]=a:(a=this.$attr[t])||(this.$attr[t]=a=Z(t,"-")),u=T(this.$$element),"a"===u&&"href"===t||"img"===u&&"src"===t)this[t]=e=O(e,"src"===t);else if("img"===u&&"srcset"===t){for(var u="",c=Rn(e),l=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,l=/\s/.test(c)?l:/(,)/,c=c.split(l),l=Math.floor(c.length/2),f=0;l>f;f++)var h=2*f,u=u+O(Rn(c[h]),!0),u=u+(" "+Rn(c[h+1]));c=Rn(c[2*f]).split(/\s/),u+=O(Rn(c[0]),!0),2===c.length&&(u+=" "+Rn(c[1])),this[t]=e=u}!1!==r&&(null===e||e===n?this.$$element.removeAttr(a):this.$$element.attr(a,e)),(t=this.$$observers)&&o(t[s],function(t){try{t(e)}catch(n){i(n)}})},$observe:function(t,e){var n=this,r=n.$$observers||(n.$$observers=rt()),i=r[t]||(r[t]=[]);return i.push(e),S.$evalAsync(function(){!i.$$inter&&n.hasOwnProperty(t)&&e(n[t])}),function(){M(i,e)}}};var ot=r.startSymbol(),at=r.endSymbol(),st="{{"==ot||"}}"==at?p:function(t){return t.replace(/\{\{/g,ot).replace(/}}/g,at)},ut=/^ngAttr[A-Z]/;return N.$$addBindingInfo=b?function(t,e){var n=t.data("$binding")||[];Pn(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:$,N.$$addBindingClass=b?function(t){V(t,"ng-binding")}:$,N.$$addScopeInfo=b?function(t,e,n,r){t.data(n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope",e)}:$,N.$$addScopeClass=b?function(t,e){V(t,e?"ng-isolate-scope":"ng-scope")}:$,N}]}function Ft(t){return at(t.replace(pr,""))}function Ht(t,e){var n="",r=t.split(/\s+/),i=e.split(/\s+/),o=0;t:for(;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a==i[s])continue t;n+=(0<n.length?" ":"")+a}return n}function _t(t){t=wn(t);var e=t.length;if(1>=e)return t;for(;e--;)8===t[e].nodeType&&On.call(t,e,1);return t}function Bt(){var t={},e=!1,i=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(e,n){tt(e,"controller"),g(e)?l(t,e):t[e]=n},this.allowGlobals=function(){e=!0},this.$get=["$injector","$window",function(o,a){function s(t,e,n,i){if(!t||!g(t.$scope))throw r("$controller")("noscp",i,e);t.$scope[e]=n}return function(r,u,c,f){var h,$,p;if(c=!0===c,f&&y(f)&&(p=f),y(r)){if(f=r.match(i),!f)throw dr("ctrlfmt",r);$=f[1],p=p||f[3],r=t.hasOwnProperty($)?t[$]:et(u.$scope,$,!0)||(e?et(a,$,!0):n),Q(r,$,!0)}return c?(c=(Pn(r)?r[r.length-1]:r).prototype,h=Object.create(c||null),p&&s(u,p,h,$||r.name),l(function(){return o.invoke(r,h,u,$),h},{instance:h,identifier:p})):(h=o.instantiate(r,u,$),p&&s(u,p,h,$||r.name),h)}}]}function Lt(){this.$get=["$window",function(t){return wn(t.document)}]}function zt(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}function Gt(t,e){if(y(t)){var n=t.replace(wr,"").trim();if(n){var r=e("Content-Type");(r=r&&0===r.indexOf(mr))||(r=(r=n.match(gr))&&yr[r[0]].test(n)),r&&(t=q(n))}}return t}function Wt(t){var e,n,r,i=rt();return t?(o(t.split("\n"),function(t){r=t.indexOf(":"),e=Cn(Rn(t.substr(0,r))),n=Rn(t.substr(r+1)),e&&(i[e]=i[e]?i[e]+", "+n:n)}),i):i}function Jt(t){var e=g(t)?t:n;return function(n){return e||(e=Wt(t)),n?(n=e[Cn(n)],void 0===n&&(n=null),n):e}}function Yt(t,e,n,r){return x(r)?r(t,e,n):(o(r,function(r){t=r(t,e,n)}),t)}function Zt(){var t=this.defaults={transformResponse:[Gt],transformRequest:[function(t){return g(t)&&"[object File]"!==Mn.call(t)&&"[object Blob]"!==Mn.call(t)&&"[object FormData]"!==Mn.call(t)?I(t):t}],headers:{common:{Accept:"application/json, text/plain, */*"},post:N(vr),put:N(vr),patch:N(vr)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},e=!1;this.useApplyAsync=function(t){return v(t)?(e=!!t,this):e};var i=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(s,u,c,f,h,$){function p(e){function i(t){var e=l({},t);return e.data=t.data?Yt(t.data,t.headers,t.status,s.transformResponse):t.data,t=t.status,t>=200&&300>t?e:h.reject(e)}function a(t){var e,n={};return o(t,function(t,r){x(t)?(e=t(),null!=e&&(n[r]=e)):n[r]=t}),n}if(!Nn.isObject(e))throw r("$http")("badreq",e);var s=l({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse},e);s.headers=function(e){var n,r,i=t.headers,o=l({},e.headers),i=l({},i.common,i[Cn(e.method)]);t:for(n in i){e=Cn(n);for(r in o)if(Cn(r)===e)continue t;o[n]=i[n]}return a(o)}(e),s.method=kn(s.method);var u=[function(e){var r=e.headers,a=Yt(e.data,Jt(r),n,e.transformRequest);return m(a)&&o(r,function(t,e){"content-type"===Cn(e)&&delete r[e]}),m(e.withCredentials)&&!m(t.withCredentials)&&(e.withCredentials=t.withCredentials),d(e,a).then(i,i)},n],c=h.when(s);for(o(C,function(t){(t.request||t.requestError)&&u.unshift(t.request,t.requestError),(t.response||t.responseError)&&u.push(t.response,t.responseError)});u.length;){e=u.shift();var f=u.shift(),c=c.then(e,f)}return c.success=function(t){return c.then(function(e){t(e.data,e.status,e.headers,s)}),c},c.error=function(t){return c.then(null,function(e){t(e.data,e.status,e.headers,s)}),c},c}function d(r,i){function o(t,n,r,i){function o(){a(n,t,r,i)}$&&(t>=200&&300>t?$.put(A,[t,n,Wt(r),i]):$.remove(A)),e?f.$applyAsync(o):(o(),f.$$phase||f.$apply())}function a(t,e,n,i){e=Math.max(e,0),(e>=200&&300>e?y.resolve:y.reject)({data:t,status:e,headers:Jt(n),config:r,statusText:i})}function c(t){a(t.data,t.status,N(t.headers()),t.statusText)}function l(){var t=p.pendingRequests.indexOf(r);-1!==t&&p.pendingRequests.splice(t,1)}var $,d,y=h.defer(),b=y.promise,C=r.headers,A=w(r.url,r.params);return p.pendingRequests.push(r),b.then(l,l),!r.cache&&!t.cache||!1===r.cache||"GET"!==r.method&&"JSONP"!==r.method||($=g(r.cache)?r.cache:g(t.cache)?t.cache:S),$&&(d=$.get(A),v(d)?d&&x(d.then)?d.then(c,c):Pn(d)?a(d[1],d[0],N(d[2]),d[3]):a(d,200,{},"OK"):$.put(A,b)),m(d)&&((d=_e(r.url)?u.cookies()[r.xsrfCookieName||t.xsrfCookieName]:n)&&(C[r.xsrfHeaderName||t.xsrfHeaderName]=d),s(r.method,A,i,o,C,r.timeout,r.withCredentials,r.responseType)),b}function w(t,e){if(!e)return t;var n=[];return a(e,function(t,e){null===t||m(t)||(Pn(t)||(t=[t]),o(t,function(t){g(t)&&(t=b(t)?t.toISOString():I(t)),n.push(L(e)+"="+L(t))}))}),0<n.length&&(t+=(-1==t.indexOf("?")?"?":"&")+n.join("&")),t}var S=c("$http"),C=[];return o(i,function(t){C.unshift(y(t)?$.get(t):$.invoke(t))}),p.pendingRequests=[],function(t){o(arguments,function(t){p[t]=function(e,n){return p(l(n||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){o(arguments,function(t){p[t]=function(e,n,r){return p(l(r||{},{method:t,url:e,data:n}))}})}("post","put","patch"),p.defaults=t,p}]}function Kt(){return new t.XMLHttpRequest}function Xt(){this.$get=["$browser","$window","$document",function(t,e,n){return Qt(t,Kt,t.defer,e.angular.callbacks,n[0])}]}function Qt(t,e,r,i,a){function s(t,e,n){var r=a.createElement("script"),o=null;return r.type="text/javascript",r.src=t,r.async=!0,o=function(t){r.removeEventListener("load",o,!1),r.removeEventListener("error",o,!1),a.body.removeChild(r),r=null;var s=-1,u="unknown";t&&("load"!==t.type||i[e].called||(t={type:"error"}),u=t.type,s="error"===t.type?404:200),n&&n(s,u)},r.addEventListener("load",o,!1),r.addEventListener("error",o,!1),a.body.appendChild(r),o}return function(a,u,c,l,f,h,p,d){function m(){w&&w(),b&&b.abort()}function g(e,i,o,a,s){C!==n&&r.cancel(C),w=b=null,e(i,o,a,s),t.$$completeOutstandingRequest($)}if(t.$$incOutstandingRequestCount(),u=u||t.url(),"jsonp"==Cn(a)){var y="_"+(i.counter++).toString(36);i[y]=function(t){i[y].data=t,i[y].called=!0};var w=s(u.replace("JSON_CALLBACK","angular.callbacks."+y),y,function(t,e){g(l,t,i[y].data,"",e),i[y]=$})}else{var b=e();if(b.open(a,u,!0),o(f,function(t,e){v(t)&&b.setRequestHeader(e,t)}),b.onload=function(){var t=b.statusText||"",e="response"in b?b.response:b.responseText,n=1223===b.status?204:b.status;0===n&&(n=e?200:"file"==He(u).protocol?404:0),g(l,n,e,b.getAllResponseHeaders(),t)},a=function(){g(l,-1,null,null,"")},b.onerror=a,b.onabort=a,p&&(b.withCredentials=!0),d)try{b.responseType=d}catch(S){if("json"!==d)throw S}b.send(c||null)}if(h>0)var C=r(m,h);else h&&x(h.then)&&h.then(m)}}function te(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(t){return"\\\\\\"+t}function a(o,a,h,$){function p(n){return n.replace(c,t).replace(f,e)}function d(t){try{var e=t;t=h?i.getTrusted(h,e):i.valueOf(e);var n;if($&&!v(t))n=t;else if(null==t)n="";else{switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=I(t)}n=t}return n}catch(a){n=br("interr",o,a.toString()),r(n)}}$=!!$;for(var g,y,w=0,b=[],S=[],C=o.length,A=[],k=[];C>w;){if(-1==(g=o.indexOf(t,w))||-1==(y=o.indexOf(e,g+s))){w!==C&&A.push(p(o.substring(w)));break}w!==g&&A.push(p(o.substring(w,g))),w=o.substring(g+s,y),b.push(w),S.push(n(w,d)),w=y+u,k.push(A.length),A.push("")}if(h&&1<A.length)throw br("noconcat",o);if(!a||b.length){var E=function(t){for(var e=0,n=b.length;n>e;e++){if($&&m(t[e]))return;A[k[e]]=t[e]}return A.join("")};return l(function(t){var e=0,n=b.length,i=Array(n);try{for(;n>e;e++)i[e]=S[e](t);return E(i)}catch(a){t=br("interr",o,a.toString()),r(t)}},{exp:o,expressions:b,$$watchDelegate:function(t,e,n){var r;return t.$watchGroup(S,function(n,i){var o=E(n);x(e)&&e.call(this,o,n!==i?r:o,t),r=o},n)}})}}var s=t.length,u=e.length,c=new RegExp(t.replace(/./g,o),"g"),f=new RegExp(e.replace(/./g,o),"g");return a.startSymbol=function(){return t},a.endSymbol=function(){return e},a}]}function ee(){this.$get=["$rootScope","$window","$q","$$q",function(t,e,n,r){function i(i,a,s,u){var c=e.setInterval,l=e.clearInterval,f=0,h=v(u)&&!u,$=(h?r:n).defer(),p=$.promise;return s=v(s)?s:0,p.then(null,null,i),p.$$intervalId=c(function(){$.notify(f++),s>0&&f>=s&&($.resolve(f),l(p.$$intervalId),delete o[p.$$intervalId]),h||t.$apply()},a),o[p.$$intervalId]=$,p}var o={};return i.cancel=function(t){return t&&t.$$intervalId in o?(o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0):!1},i}]}function ne(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"Â¤",posSuf:"",negPre:"(Â¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(t){return 1===t?"one":"other"}}}}function re(t){t=t.split("/");for(var e=t.length;e--;)t[e]=B(t[e]);return t.join("/")}function ie(t,e){var n=He(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=f(n.port)||Sr[n.protocol]||null}function oe(t,e){var n="/"!==t.charAt(0);n&&(t="/"+t);var r=He(t);e.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),e.$$search=H(r.search),e.$$hash=decodeURIComponent(r.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function ae(t,e){return 0===e.indexOf(t)?e.substr(t.length):void 0}function se(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function ue(t){return t.replace(/(#.+)|#$/,"$1")}function ce(t){return t.substr(0,se(t).lastIndexOf("/")+1)}function le(t,e){this.$$html5=!0,e=e||"";var r=ce(t);ie(t,this),this.$$parse=function(t){var e=ae(r,t);if(!y(e))throw Cr("ipthprfx",t,r);oe(e,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=_(this.$$search),e=this.$$hash?"#"+B(this.$$hash):"";this.$$url=re(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=r+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var a,s;return(a=ae(t,i))!==n?(s=a,s=(a=ae(e,a))!==n?r+(ae("/",a)||a):t+s):(a=ae(r,i))!==n?s=r+a:r==i+"/"&&(s=r),s&&this.$$parse(s),!!s}}function fe(t,e){var n=ce(t);ie(t,this),this.$$parse=function(r){r=ae(t,r)||ae(n,r);var i;"#"===r.charAt(0)?(i=ae(e,r),m(i)&&(i=r)):i=this.$$html5?r:"",oe(i,this),r=this.$$path;var o=/^\/[A-Z]:(\/.*)/;0===i.indexOf(t)&&(i=i.replace(t,"")),o.exec(i)||(r=(i=o.exec(r))?i[1]:r),this.$$path=r,this.$$compose()},this.$$compose=function(){var n=_(this.$$search),r=this.$$hash?"#"+B(this.$$hash):"";this.$$url=re(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=t+(this.$$url?e+this.$$url:"")},this.$$parseLinkUrl=function(e,n){return se(t)==se(e)?(this.$$parse(e),!0):!1}}function he(t,e){this.$$html5=!0,fe.apply(this,arguments);var n=ce(t);this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a;return t==se(r)?o=r:(a=ae(n,r))?o=t+e+a:n===r+"/"&&(o=n),o&&this.$$parse(o),!!o},this.$$compose=function(){var n=_(this.$$search),r=this.$$hash?"#"+B(this.$$hash):"";this.$$url=re(this.$$path)+(n?"?"+n:"")+r,this.$$absUrl=t+e+this.$$url}}function $e(t){return function(){return this[t]}}function pe(t,e){return function(n){return m(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function de(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return v(e)?(t=e,this):t},this.html5Mode=function(t){return k(t)?(e.enabled=t,this):g(t)?(k(t.enabled)&&(e.enabled=t.enabled),k(t.requireBase)&&(e.requireBase=t.requireBase),k(t.rewriteLinks)&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){function s(t,e,n){var i=c.url(),o=c.$$state;try{r.url(t,e,n),c.$$state=r.state()}catch(a){throw c.url(i),c.$$state=o,a}}function u(t,e){n.$broadcast("$locationChangeSuccess",c.absUrl(),t,c.$$state,e)}var c,l;l=r.baseHref();var f,h=r.url();if(e.enabled){if(!l&&e.requireBase)throw Cr("nobase");f=h.substring(0,h.indexOf("/",h.indexOf("//")+2))+(l||"/"),l=i.history?le:he}else f=se(h),l=fe;c=new l(f,"#"+t),c.$$parseLinkUrl(h,h),c.$$state=r.state();var $=/^\s*(javascript|mailto):/i;o.on("click",function(t){if(e.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&2!=t.which&&2!=t.button){for(var i=wn(t.target);"a"!==T(i[0]);)if(i[0]===o[0]||!(i=i.parent())[0])return;var s=i.prop("href"),u=i.attr("href")||i.attr("xlink:href");g(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=He(s.animVal).href),$.test(s)||!s||i.attr("target")||t.isDefaultPrevented()||!c.$$parseLinkUrl(s,u)||(t.preventDefault(),c.absUrl()!=r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),ue(c.absUrl())!=ue(h)&&r.url(c.absUrl(),!0);var p=!0;return r.onUrlChange(function(t,e){n.$evalAsync(function(){var r,i=c.absUrl(),o=c.$$state;c.$$parse(t),c.$$state=e,r=n.$broadcast("$locationChangeStart",t,i,e,o).defaultPrevented,c.absUrl()===t&&(r?(c.$$parse(i),c.$$state=o,s(i,!1,o)):(p=!1,u(i,o)))}),n.$$phase||n.$digest()}),n.$watch(function(){var t=ue(r.url()),e=ue(c.absUrl()),o=r.state(),a=c.$$replace,l=t!==e||c.$$html5&&i.history&&o!==c.$$state;(p||l)&&(p=!1,n.$evalAsync(function(){var e=c.absUrl(),r=n.$broadcast("$locationChangeStart",e,t,c.$$state,o).defaultPrevented;c.absUrl()===e&&(r?(c.$$parse(t),c.$$state=o):(l&&s(e,a,o===c.$$state?null:c.$$state),u(t,o)))})),c.$$replace=!1}),c}]}function me(){var t=!0,e=this;this.debugEnabled=function(e){return v(e)?(t=e,this):t},this.$get=["$window",function(n){function r(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function i(t){var e=n.console||{},i=e[t]||e.log||$;t=!1;try{t=!!i.apply}catch(a){}return t?function(){var t=[];return o(arguments,function(e){t.push(r(e))}),i.apply(e,t)}:function(t,e){i(t,null==e?"":e)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){t&&n.apply(e,arguments)}}()}}]}function ve(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw kr("isecfld",e);return t}function ge(t,e){if(t){if(t.constructor===t)throw kr("isecfn",e);if(t.window===t)throw kr("isecwindow",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw kr("isecdom",e);if(t===Object)throw kr("isecobj",e)}return t}function ye(t){return t.constant}function we(t,e,n,r,i){ge(t,i),ge(e,i),n=n.split(".");for(var o,a=0;1<n.length;a++){o=ve(n.shift(),i);var s=0===a&&e&&e[o]||t[o];s||(s={},t[o]=s),t=ge(s,i)}return o=ve(n.shift(),i),ge(t[o],i),t[o]=r}function be(t){return"constructor"==t}function xe(t,e,r,i,o,a,s){ve(t,a),ve(e,a),ve(r,a),ve(i,a),ve(o,a);var u=function(t){return ge(t,a)},c=s||be(t)?u:p,l=s||be(e)?u:p,f=s||be(r)?u:p,h=s||be(i)?u:p,$=s||be(o)?u:p;return function(a,s){var u=s&&s.hasOwnProperty(t)?s:a;return null==u?u:(u=c(u[t]),e?null==u?n:(u=l(u[e]),r?null==u?n:(u=f(u[r]),i?null==u?n:(u=h(u[i]),o?null==u?n:u=$(u[o]):u):u):u):u)}}function Se(t,e){return function(n,r){return t(n,r,ge,e)}}function Ce(t,e,r){var i=e.expensiveChecks,a=i?Rr:Pr,s=a[t];if(s)return s;var u=t.split("."),c=u.length;if(e.csp)s=6>c?xe(u[0],u[1],u[2],u[3],u[4],r,i):function(t,e){var o,a=0;do o=xe(u[a++],u[a++],u[a++],u[a++],u[a++],r,i)(t,e),e=n,t=o;while(c>a);return o};else{var l="";i&&(l+="s = eso(s, fe);\nl = eso(l, fe);\n");var f=i;o(u,function(t,e){ve(t,r);var n=(e?"s":'((l&&l.hasOwnProperty("'+t+'"))?l:s)')+"."+t;(i||be(t))&&(n="eso("+n+", fe)",f=!0),l+="if(s == null) return undefined;\ns="+n+";\n"}),l+="return s;",e=new Function("s","l","eso","fe",l),e.toString=d(l),f&&(e=Se(e,r)),s=e}return s.sharedGetter=!0,s.assign=function(e,n,r){return we(e,r,t,n,t)},a[t]=s}function Ae(t){return x(t.valueOf)?t.valueOf():Ir.call(t)}function ke(){var t=rt(),e=rt();this.$get=["$filter","$sniffer",function(n,r){function i(t){var e=t;return t.sharedGetter&&(e=function(e,n){return t(e,n)},e.literal=t.literal,e.constant=t.constant,e.assign=t.assign),e}function a(t,e){for(var n=0,r=t.length;r>n;n++){var i=t[n];i.constant||(i.inputs?a(i.inputs,e):-1===e.indexOf(i)&&e.push(i))}return e}function s(t,e){return null==t||null==e?t===e:"object"==typeof t&&(t=Ae(t),"object"==typeof t)?!1:t===e||t!==t&&e!==e}function u(t,e,n,r){var i,o=r.$$inputs||(r.$$inputs=a(r.inputs,[]));if(1===o.length){var u=s,o=o[0];return t.$watch(function(t){var e=o(t);return s(e,u)||(i=r(t),u=e&&Ae(e)),i},e,n)}for(var c=[],l=0,f=o.length;f>l;l++)c[l]=s;return t.$watch(function(t){for(var e=!1,n=0,a=o.length;a>n;n++){var u=o[n](t);(e||(e=!s(u,c[n])))&&(c[n]=u&&Ae(u))}return e&&(i=r(t)),i},e,n)}function c(t,e,n,r){var i,o;return i=t.$watch(function(t){return r(t)},function(t,n,r){o=t,x(e)&&e.apply(this,arguments),v(t)&&r.$$postDigest(function(){v(o)&&i()})},n)}function l(t,e,n,r){function i(t){var e=!0;return o(t,function(t){v(t)||(e=!1)}),e}var a,s;return a=t.$watch(function(t){return r(t)},function(t,n,r){s=t,x(e)&&e.call(this,t,n,r),i(t)&&r.$$postDigest(function(){i(s)&&a()})},n)}function f(t,e,n,r){var i;return i=t.$watch(function(t){return r(t)},function(t,n,r){x(e)&&e.apply(this,arguments),i()},n)}function h(t,e){if(!e)return t;var n=t.$$watchDelegate,n=n!==l&&n!==c?function(n,r){var i=t(n,r);return e(i,n,r)}:function(n,r){var i=t(n,r),o=e(i,n,r);return v(i)?o:i};return t.$$watchDelegate&&t.$$watchDelegate!==u?n.$$watchDelegate=t.$$watchDelegate:e.$stateful||(n.$$watchDelegate=u,n.inputs=[t]),n}var p={csp:r.csp,expensiveChecks:!1},d={csp:r.csp,expensiveChecks:!0};return function(r,o,a){var s,m,v;switch(typeof r){case"string":v=r=r.trim();var g=a?e:t;return s=g[v],s||(":"===r.charAt(0)&&":"===r.charAt(1)&&(m=!0,r=r.substring(2)),a=a?d:p,s=new Dr(a),s=new jr(s,n,a).parse(r),s.constant?s.$$watchDelegate=f:m?(s=i(s),s.$$watchDelegate=s.literal?l:c):s.inputs&&(s.$$watchDelegate=u),g[v]=s),h(s,o);case"function":return h(r,o);default:return h($,o)}}}]}function Ee(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return Te(function(e){t.$evalAsync(e)},e)}]}function Oe(){this.$get=["$browser","$exceptionHandler",function(t,e){return Te(function(e){t.defer(e)},e)}]}function Te(t,e){function i(t,e,n){function r(e){return function(n){i||(i=!0,e.call(t,n))}}var i=!1;return[r(e),r(n)]}function a(){this.$$state={status:0}}function s(t,e){return function(n){e.call(t,n)}}function u(r){!r.processScheduled&&r.pending&&(r.processScheduled=!0,t(function(){var t,i,o;o=r.pending,r.processScheduled=!1,r.pending=n;for(var a=0,s=o.length;s>a;++a){i=o[a][0],t=o[a][r.status];try{x(t)?i.resolve(t(r.value)):1===r.status?i.resolve(r.value):i.reject(r.value)}catch(u){i.reject(u),e(u)}}}))}function c(){this.promise=new a,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}var l=r("$q",TypeError);a.prototype={then:function(t,e,n){var r=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,t,e,n]),0<this.$$state.status&&u(this.$$state),r.promise},"catch":function(t){return this.then(null,t)},"finally":function(t,e){return this.then(function(e){return h(e,!0,t)},function(e){return h(e,!1,t)},e)}},c.prototype={resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(l("qcycle",t)):this.$$resolve(t))},$$resolve:function(t){var n,r;r=i(this,this.$$resolve,this.$$reject);try{(g(t)||x(t))&&(n=t&&t.then),x(n)?(this.promise.$$state.status=-1,n.call(t,r[0],r[1],this.notify)):(this.promise.$$state.value=t,this.promise.$$state.status=1,u(this.promise.$$state))}catch(o){r[1](o),e(o)}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,u(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;0>=this.promise.$$state.status&&r&&r.length&&t(function(){for(var t,i,o=0,a=r.length;a>o;o++){i=r[o][0],t=r[o][3];try{i.notify(x(t)?t(n):n)}catch(s){e(s)}}})}};var f=function(t,e){var n=new c;return e?n.resolve(t):n.reject(t),n.promise},h=function(t,e,n){var r=null;try{x(n)&&(r=n())}catch(i){return f(i,!1)}return r&&x(r.then)?r.then(function(){return f(t,e)},function(t){return f(t,!1)}):f(t,e)},$=function(t,e,n,r){var i=new c;return i.resolve(t),i.promise.then(e,n,r)},p=function d(t){if(!x(t))throw l("norslvr",t);if(!(this instanceof d))return new d(t);var e=new c;return t(function(t){e.resolve(t)},function(t){e.reject(t)}),e.promise};return p.defer=function(){return new c},p.reject=function(t){var e=new c;return e.reject(t),e.promise},p.when=$,p.all=function(t){var e=new c,n=0,r=Pn(t)?[]:{};return o(t,function(t,i){n++,$(t).then(function(t){r.hasOwnProperty(i)||(r[i]=t,--n||e.resolve(r))},function(t){r.hasOwnProperty(i)||e.reject(t)})}),0===n&&e.resolve(r),e.promise},p}function Me(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(t){var e=n(t);return function(){r(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=i,o}]}function Ve(){function t(t){function e(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=++Dn,this.$$ChildScope=null}return e.prototype=t,e}var e=10,n=r("$rootScope"),a=null,s=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,u,c,l){function f(t){t.currentScope.$$destroyed=!0}function h(){this.$id=++Dn,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function p(t){if(b.$$phase)throw n("inprog",b.$$phase);b.$$phase=t}function d(t,e,n){do t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n];while(t=t.$parent)}function v(){}function y(){for(;A.length;)try{A.shift()()}catch(t){u(t)}s=null}function w(){null===s&&(s=l.defer(function(){b.$apply(y)}))}h.prototype={constructor:h,$new:function(e,n){var r;return n=n||this,e?(r=new h,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=t(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(e||n!=this)&&r.$on("$destroy",f),r},$watch:function(t,e,n){var r=c(t);if(r.$$watchDelegate)return r.$$watchDelegate(this,e,n,r);var i=this.$$watchers,o={fn:e,last:v,get:r,exp:t,eq:!!n};return a=null,x(e)||(o.fn=$),i||(i=this.$$watchers=[]),i.unshift(o),function(){M(i,o),a=null}},$watchGroup:function(t,e){function n(){u=!1,c?(c=!1,e(i,i,s)):e(i,r,s)}var r=Array(t.length),i=Array(t.length),a=[],s=this,u=!1,c=!0;if(!t.length){var l=!0;return s.$evalAsync(function(){l&&e(i,i,s)}),function(){l=!1}}return 1===t.length?this.$watch(t[0],function(t,n,o){i[0]=t,r[0]=n,e(i,t===n?i:r,o)}):(o(t,function(t,e){var o=s.$watch(t,function(t,o){i[e]=t,r[e]=o,u||(u=!0,s.$evalAsync(n))});a.push(o)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(t,e){function n(t){r=t;var e,n,a,s;if(!m(r)){if(g(r))if(i(r))for(o!==h&&(o=h,d=o.length=0,l++),t=r.length,d!==t&&(l++,o.length=d=t),e=0;t>e;e++)s=o[e],a=r[e],n=s!==s&&a!==a,n||s===a||(l++,o[e]=a);else{o!==$&&(o=$={},d=0,l++),t=0;for(e in r)r.hasOwnProperty(e)&&(t++,a=r[e],s=o[e],e in o?(n=s!==s&&a!==a,n||s===a||(l++,o[e]=a)):(d++,o[e]=a,l++));if(d>t)for(e in l++,o)r.hasOwnProperty(e)||(d--,delete o[e])}else o!==r&&(o=r,l++);return l}}n.$stateful=!0;var r,o,a,s=this,u=1<e.length,l=0,f=c(t,n),h=[],$={},p=!0,d=0;return this.$watch(f,function(){if(p?(p=!1,e(r,r,s)):e(r,a,s),u)if(g(r))if(i(r)){a=Array(r.length);for(var t=0;t<r.length;t++)a[t]=r[t]}else for(t in a={},r)An.call(r,t)&&(a[t]=r[t]);else a=r})},$digest:function(){var t,r,i,o,c,f,h,$,d,m=e,g=[];p("$digest"),l.$$checkUrlChange(),this===b&&null!==s&&(l.defer.cancel(s),y()),a=null;do{for(f=!1,h=this;S.length;){try{d=S.shift(),d.scope.$eval(d.expression,d.locals)}catch(w){u(w)}a=null}t:do{if(o=h.$$watchers)for(c=o.length;c--;)try{if(t=o[c])if((r=t.get(h))===(i=t.last)||(t.eq?D(r,i):"number"==typeof r&&"number"==typeof i&&isNaN(r)&&isNaN(i))){if(t===a){f=!1;break t}}else f=!0,a=t,t.last=t.eq?V(r,null):r,t.fn(r,i===v?r:i,h),5>m&&($=4-m,g[$]||(g[$]=[]),g[$].push({msg:x(t.exp)?"fn: "+(t.exp.name||t.exp.toString()):t.exp,newVal:r,oldVal:i}))}catch(A){u(A)}if(!(o=h.$$childHead||h!==this&&h.$$nextSibling))for(;h!==this&&!(o=h.$$nextSibling);)h=h.$parent}while(h=o);if((f||S.length)&&!m--)throw b.$$phase=null,n("infdig",e,g)}while(f||S.length);for(b.$$phase=null;C.length;)try{C.shift()()}catch(k){u(k)}},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==b){for(var e in this.$$listenerCount)d(this,this.$$listenerCount[e],e);t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=$,this.$on=this.$watch=this.$watchGroup=function(){return $},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(t,e){return c(t)(this,e)},$evalAsync:function(t,e){b.$$phase||S.length||l.defer(function(){S.length&&b.$digest()}),S.push({scope:this,expression:t,locals:e})},$$postDigest:function(t){C.push(t)},$apply:function(t){try{return p("$apply"),this.$eval(t)}catch(e){u(e)}finally{b.$$phase=null;try{b.$digest()}catch(n){throw u(n),n}}},$applyAsync:function(t){function e(){n.$eval(t)}var n=this;t&&A.push(e),w()},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var r=this;do r.$$listenerCount[t]||(r.$$listenerCount[t]=0),r.$$listenerCount[t]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(e);-1!==r&&(n[r]=null,d(i,1,t))}},$emit:function(t,e){var n,r,i,o=[],a=this,s=!1,c={name:t,targetScope:a,stopPropagation:function(){s=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},l=j([c],arguments,1);do{for(n=a.$$listeners[t]||o,c.currentScope=a,r=0,i=n.length;i>r;r++)if(n[r])try{n[r].apply(null,l)}catch(f){u(f)}else n.splice(r,1),r--,i--;if(s)return c.currentScope=null,c;a=a.$parent}while(a);return c.currentScope=null,c},$broadcast:function(t,e){var n=this,r=this,i={name:t,targetScope:this,preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return i;for(var o,a,s=j([i],arguments,1);n=r;){for(i.currentScope=n,r=n.$$listeners[t]||[],o=0,a=r.length;a>o;o++)if(r[o])try{r[o].apply(null,s)}catch(c){u(c)}else r.splice(o,1),o--,a--;if(!(r=n.$$listenerCount[t]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(r=n.$$nextSibling);)n=n.$parent}return i.currentScope=null,i}};var b=new h,S=b.$$asyncQueue=[],C=b.$$postDigestQueue=[],A=b.$$applyAsyncQueue=[];return b}]}function Ne(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return v(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return v(t)?(e=t,this):e},this.$get=function(){return function(n,r){var i,o=r?e:t;return i=He(n).href,""===i||i.match(o)?n:"unsafe:"+i}}}function De(t){if("self"===t)return t;if(y(t)){if(-1<t.indexOf("***"))throw qr("iwcard",t);return t=In(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(S(t))return new RegExp("^"+t.source+"$");throw qr("imatcher")}function je(t){var e=[];return v(t)&&o(t,function(t){e.push(De(t))}),e}function Pe(){this.SCE_CONTEXTS=Ur;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=je(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=je(t)),e},this.$get=["$injector",function(r){function i(t,e){return"self"===t?_e(e):!!t.exec(e.href)}function o(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}var a=function(t){throw qr("unsafe")};r.has("$sanitize")&&(a=r.get("$sanitize"));var s=o(),u={};return u[Ur.HTML]=o(s),u[Ur.CSS]=o(s),u[Ur.URL]=o(s),u[Ur.JS]=o(s),u[Ur.RESOURCE_URL]=o(u[Ur.URL]),{trustAs:function(t,e){var r=u.hasOwnProperty(t)?u[t]:null;if(!r)throw qr("icontext",t,e);if(null===e||e===n||""===e)return e;
if("string"!=typeof e)throw qr("itype",t);return new r(e)},getTrusted:function(r,o){if(null===o||o===n||""===o)return o;var s=u.hasOwnProperty(r)?u[r]:null;if(s&&o instanceof s)return o.$$unwrapTrustedValue();if(r===Ur.RESOURCE_URL){var c,l,s=He(o.toString()),f=!1;for(c=0,l=t.length;l>c;c++)if(i(t[c],s)){f=!0;break}if(f)for(c=0,l=e.length;l>c;c++)if(i(e[c],s)){f=!1;break}if(f)return o;throw qr("insecurl",o.toString())}if(r===Ur.HTML)return a(o);throw qr("unsafe")},valueOf:function(t){return t instanceof s?t.$$unwrapTrustedValue():t}}}]}function Re(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&8>yn)throw qr("iequirks");var r=N(Ur);r.isEnabled=function(){return t},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,t||(r.trustAs=r.getTrusted=function(t,e){return e},r.valueOf=p),r.parseAs=function(t,n){var i=e(n);return i.literal&&i.constant?i:e(n,function(e){return r.getTrusted(t,e)})};var i=r.parseAs,a=r.getTrusted,s=r.trustAs;return o(Ur,function(t,e){var n=Cn(e);r[at("parse_as_"+n)]=function(e){return i(t,e)},r[at("get_trusted_"+n)]=function(e){return a(t,e)},r[at("trust_as_"+n)]=function(e){return s(t,e)}}),r}]}function Ie(){this.$get=["$window","$document",function(t,e){var n,r={},i=f((/android (\d+)/.exec(Cn((t.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((t.navigator||{}).userAgent),a=e[0]||{},s=/^(Moz|webkit|ms)(?=[A-Z])/,u=a.body&&a.body.style,c=!1,l=!1;if(u){for(var h in u)if(c=s.exec(h)){n=c[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in u&&"webkit"),c=!!("transition"in u||n+"Transition"in u),l=!!("animation"in u||n+"Animation"in u),!i||c&&l||(c=y(a.body.style.webkitTransition),l=y(a.body.style.webkitAnimation))}return{history:!(!t.history||!t.history.pushState||4>i||o),hasEvent:function(t){if("input"===t&&11>=yn)return!1;if(m(r[t])){var e=a.createElement("div");r[t]="on"+t in e}return r[t]},csp:qn(),vendorPrefix:n,transitions:c,animations:l,android:i}}]}function qe(){this.$get=["$templateCache","$http","$q",function(t,e,n){function r(i,o){r.totalPendingRequests++;var a=e.defaults&&e.defaults.transformResponse;return Pn(a)?a=a.filter(function(t){return t!==Gt}):a===Gt&&(a=null),e.get(i,{cache:t,transformResponse:a})["finally"](function(){r.totalPendingRequests--}).then(function(t){return t.data},function(t){if(!o)throw $r("tpload",i);return n.reject(t)})}return r.totalPendingRequests=0,r}]}function Ue(){this.$get=["$rootScope","$browser","$location",function(t,e,n){return{findBindings:function(t,e,n){t=t.getElementsByClassName("ng-binding");var r=[];return o(t,function(t){var i=Nn.element(t).data("$binding");i&&o(i,function(i){n?new RegExp("(^|\\s)"+In(e)+"(\\s|\\||$)").test(i)&&r.push(t):-1!=i.indexOf(e)&&r.push(t)})}),r},findModels:function(t,e,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=t.querySelectorAll("["+r[i]+"model"+(n?"=":"*=")+'"'+e+'"]');if(o.length)return o}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}}}]}function Fe(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,r,i){function o(o,s,u){var c=v(u)&&!u,l=(c?r:n).defer(),f=l.promise;return s=e.defer(function(){try{l.resolve(o())}catch(e){l.reject(e),i(e)}finally{delete a[f.$$timeoutId]}c||t.$apply()},s),f.$$timeoutId=s,a[s]=l,f}var a={};return o.cancel=function(t){return t&&t.$$timeoutId in a?(a[t.$$timeoutId].reject("canceled"),delete a[t.$$timeoutId],e.defer.cancel(t.$$timeoutId)):!1},o}]}function He(t){return yn&&(Fr.setAttribute("href",t),t=Fr.href),Fr.setAttribute("href",t),{href:Fr.href,protocol:Fr.protocol?Fr.protocol.replace(/:$/,""):"",host:Fr.host,search:Fr.search?Fr.search.replace(/^\?/,""):"",hash:Fr.hash?Fr.hash.replace(/^#/,""):"",hostname:Fr.hostname,port:Fr.port,pathname:"/"===Fr.pathname.charAt(0)?Fr.pathname:"/"+Fr.pathname}}function _e(t){return t=y(t)?He(t):t,t.protocol===Hr.protocol&&t.host===Hr.host}function Be(){this.$get=d(t)}function Le(t){function e(n,r){if(g(n)){var i={};return o(n,function(t,n){i[n]=e(n,t)}),i}return t.factory(n+"Filter",r)}this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+"Filter")}}],e("currency",Je),e("date",rn),e("filter",ze),e("json",on),e("limitTo",an),e("lowercase",Gr),e("number",Ye),e("orderBy",sn),e("uppercase",Wr)}function ze(){return function(t,e,n){if(!Pn(t))return t;var r;switch(typeof e){case"function":break;case"boolean":case"number":case"string":r=!0;case"object":e=Ge(e,n,r);break;default:return t}return t.filter(e)}}function Ge(t,e,n){var r=g(t)&&"$"in t;return!0===e?e=D:x(e)||(e=function(t,e){return g(t)||g(e)?!1:(t=Cn(""+t),e=Cn(""+e),-1!==t.indexOf(e))}),function(i){return r&&!g(i)?We(i,t.$,e,!1):We(i,t,e,n)}}function We(t,e,n,r,i){var o=null!==t?typeof t:"null",a=null!==e?typeof e:"null";if("string"===a&&"!"===e.charAt(0))return!We(t,e.substring(1),n,r);if(Pn(t))return t.some(function(t){return We(t,e,n,r)});switch(o){case"object":var s;if(r){for(s in t)if("$"!==s.charAt(0)&&We(t[s],e,n,!0))return!0;return i?!1:We(t,e,n,!1)}if("object"===a){for(s in e)if(i=e[s],!x(i)&&!m(i)&&(o="$"===s,!We(o?t:t[s],i,n,o,o)))return!1;return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function Je(t){var e=t.NUMBER_FORMATS;return function(t,n,r){return m(n)&&(n=e.CURRENCY_SYM),m(r)&&(r=e.PATTERNS[1].maxFrac),null==t?t:Ze(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function Ye(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:Ze(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function Ze(t,e,n,r,i){if(!isFinite(t)||g(t))return"";var o=0>t;t=Math.abs(t);var a=t+"",s="",u=[],c=!1;if(-1!==a.indexOf("e")){var l=a.match(/([\d\.]+)e(-?)(\d+)/);l&&"-"==l[2]&&l[3]>i+1?t=0:(s=a,c=!0)}if(c)i>0&&1>t&&(s=t.toFixed(i),t=parseFloat(s));else{a=(a.split(_r)[1]||"").length,m(i)&&(i=Math.min(Math.max(e.minFrac,a),e.maxFrac)),t=+(Math.round(+(t.toString()+"e"+i)).toString()+"e"+-i);var a=(""+t).split(_r),c=a[0],a=a[1]||"",f=0,h=e.lgSize,$=e.gSize;if(c.length>=h+$)for(f=c.length-h,l=0;f>l;l++)0===(f-l)%$&&0!==l&&(s+=n),s+=c.charAt(l);for(l=f;l<c.length;l++)0===(c.length-l)%h&&0!==l&&(s+=n),s+=c.charAt(l);for(;a.length<i;)a+="0";i&&"0"!==i&&(s+=r+a.substr(0,i))}return 0===t&&(o=!1),u.push(o?e.negPre:e.posPre,s,o?e.negSuf:e.posSuf),u.join("")}function Ke(t,e,n){var r="";for(0>t&&(r="-",t=-t),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),r+t}function Xe(t,e,n,r){return n=n||0,function(i){return i=i["get"+t](),(n>0||i>-n)&&(i+=n),0===i&&-12==n&&(i=12),Ke(i,e,r)}}function Qe(t,e){return function(n,r){var i=n["get"+t](),o=kn(e?"SHORT"+t:t);return r[o][i]}}function tn(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(4>=e?5:12)-e)}function en(t){return function(e){var n=tn(e.getFullYear());return e=+new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))-+n,e=1+Math.round(e/6048e5),Ke(e,t)}}function nn(t,e){return 0>=t.getFullYear()?e.ERAS[0]:e.ERAS[1]}function rn(t){function e(t){var e;if(e=t.match(n)){t=new Date(0);var r=0,i=0,o=e[8]?t.setUTCFullYear:t.setFullYear,a=e[8]?t.setUTCHours:t.setHours;e[9]&&(r=f(e[9]+e[10]),i=f(e[9]+e[11])),o.call(t,f(e[1]),f(e[2])-1,f(e[3])),r=f(e[4]||0)-r,i=f(e[5]||0)-i,o=f(e[6]||0),e=Math.round(1e3*parseFloat("0."+(e[7]||0))),a.call(t,r,i,o,e)}return t}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var a,s,u="",c=[];if(r=r||"mediumDate",r=t.DATETIME_FORMATS[r]||r,y(n)&&(n=zr.test(n)?f(n):e(n)),w(n)&&(n=new Date(n)),!b(n))return n;for(;r;)(s=Lr.exec(r))?(c=j(c,s,1),r=c.pop()):(c.push(r),r=null);return i&&"UTC"===i&&(n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+n.getTimezoneOffset())),o(c,function(e){a=Br[e],u+=a?a(n,t.DATETIME_FORMATS):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function on(){return function(t,e){return m(e)&&(e=2),I(t,e)}}function an(){return function(t,e){return w(t)&&(t=t.toString()),Pn(t)||y(t)?(e=1/0===Math.abs(Number(e))?Number(e):f(e))?e>0?t.slice(0,e):t.slice(e):y(t)?"":[]:t}}function sn(t){return function(e,n,r){function o(t,e){return e?function(e,n){return t(n,e)}:t}function a(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function s(t){return null===t?"null":"function"==typeof t.valueOf&&(t=t.valueOf(),a(t))||"function"==typeof t.toString&&(t=t.toString(),a(t))?t:""}function u(t,e){var n=typeof t,r=typeof e;return n===r&&"object"===n&&(t=s(t),e=s(e)),n===r?("string"===n&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e?0:e>t?-1:1):r>n?-1:1}return i(e)?(n=Pn(n)?n:[n],0===n.length&&(n=["+"]),n=n.map(function(e){var n=!1,r=e||p;if(y(e)){if(("+"==e.charAt(0)||"-"==e.charAt(0))&&(n="-"==e.charAt(0),e=e.substring(1)),""===e)return o(u,n);if(r=t(e),r.constant){var i=r();return o(function(t,e){return u(t[i],e[i])},n)}}return o(function(t,e){return u(r(t),r(e))},n)}),En.call(e).sort(o(function(t,e){for(var r=0;r<n.length;r++){var i=n[r](t,e);if(0!==i)return i}return 0},r))):e}}function un(t){return x(t)&&(t={link:t}),t.restrict=t.restrict||"AC",d(t)}function cn(t,e,r,i,a){var s=this,u=[],c=s.$$parentForm=t.parent().controller("form")||Zr;s.$error={},s.$$success={},s.$pending=n,s.$name=a(e.name||e.ngForm||"")(r),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,c.$addControl(s),s.$rollbackViewValue=function(){o(u,function(t){t.$rollbackViewValue()})},s.$commitViewValue=function(){o(u,function(t){t.$commitViewValue()})},s.$addControl=function(t){tt(t.$name,"input"),u.push(t),t.$name&&(s[t.$name]=t)},s.$$renameControl=function(t,e){var n=t.$name;s[n]===t&&delete s[n],s[e]=t,t.$name=e},s.$removeControl=function(t){t.$name&&s[t.$name]===t&&delete s[t.$name],o(s.$pending,function(e,n){s.$setValidity(n,null,t)}),o(s.$error,function(e,n){s.$setValidity(n,null,t)}),o(s.$$success,function(e,n){s.$setValidity(n,null,t)}),M(u,t)},vn({ctrl:this,$element:t,set:function(t,e,n){var r=t[e];r?-1===r.indexOf(n)&&r.push(n):t[e]=[n]},unset:function(t,e,n){var r=t[e];r&&(M(r,n),0===r.length&&delete t[e])},parentForm:c,$animate:i}),s.$setDirty=function(){i.removeClass(t,Vi),i.addClass(t,Ni),s.$dirty=!0,s.$pristine=!1,c.$setDirty()},s.$setPristine=function(){i.setClass(t,Vi,Ni+" ng-submitted"),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,o(u,function(t){t.$setPristine()})},s.$setUntouched=function(){o(u,function(t){t.$setUntouched()})},s.$setSubmitted=function(){i.addClass(t,"ng-submitted"),s.$submitted=!0,c.$setSubmitted()}}function ln(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function fn(t,e,n,r,i,o){var a=Cn(e[0].type);if(!i.android){var s=!1;e.on("compositionstart",function(t){s=!0}),e.on("compositionend",function(){s=!1,u()})}var u=function(t){if(c&&(o.defer.cancel(c),c=null),!s){var i=e.val();t=t&&t.type,"password"===a||n.ngTrim&&"false"===n.ngTrim||(i=Rn(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,t)}};if(i.hasEvent("input"))e.on("input",u);else{var c,l=function(t,e,n){c||(c=o.defer(function(){c=null,e&&e.value===n||u(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||e>15&&19>e||e>=37&&40>=e||l(t,this,this.value)}),i.hasEvent("paste")&&e.on("paste cut",l)}e.on("change",u),r.$render=function(){e.val(r.$isEmpty(r.$viewValue)?"":r.$viewValue)}}function hn(t,e){return function(n,r){var i,a;if(b(n))return n;if(y(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),ti.test(n))return new Date(n);if(t.lastIndex=0,i=t.exec(n))return i.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(i,function(t,n){n<e.length&&(a[e[n]]=+t)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function $n(t,e,r,i){return function(o,a,s,u,c,l,f){function h(t){return t&&!(t.getTime&&t.getTime()!==t.getTime())}function $(t){return v(t)?b(t)?t:r(t):n}pn(o,a,s,u),fn(o,a,s,u,c,l);var p,d=u&&u.$options&&u.$options.timezone;if(u.$$parserName=t,u.$parsers.push(function(t){return u.$isEmpty(t)?null:e.test(t)?(t=r(t,p),"UTC"===d&&t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t):n}),u.$formatters.push(function(t){if(t&&!b(t))throw ji("datefmt",t);if(h(t)){if((p=t)&&"UTC"===d){var e=6e4*p.getTimezoneOffset();p=new Date(p.getTime()+e)}return f("date")(t,i,d)}return p=null,""}),v(s.min)||s.ngMin){var g;u.$validators.min=function(t){return!h(t)||m(g)||r(t)>=g},s.$observe("min",function(t){g=$(t),u.$validate()})}if(v(s.max)||s.ngMax){var y;u.$validators.max=function(t){return!h(t)||m(y)||r(t)<=y},s.$observe("max",function(t){y=$(t),u.$validate()})}}}function pn(t,e,r,i){(i.$$hasNativeValidators=g(e[0].validity))&&i.$parsers.push(function(t){var r=e.prop("validity")||{};return r.badInput&&!r.typeMismatch?n:t})}function dn(t,e,n,i,o){if(v(i)){if(t=t(i),!t.constant)throw r("ngModel")("constexpr",n,i);return t(e)}return o}function mn(t,e){return t="ngClass"+t,["$animate",function(n){function r(t,e){var n=[],r=0;t:for(;r<t.length;r++){for(var i=t[r],o=0;o<e.length;o++)if(i==e[o])continue t;n.push(i)}return n}function i(t){if(!Pn(t)){if(y(t))return t.split(" ");if(g(t)){var e=[];return o(t,function(t,n){t&&(e=e.concat(n.split(" ")))}),e}}return t}return{restrict:"AC",link:function(a,s,u){function c(t,e){var n=s.data("$classCounts")||{},r=[];return o(t,function(t){(e>0||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(e>0)&&r.push(t))}),s.data("$classCounts",n),r.join(" ")}function l(t){if(!0===e||a.$index%2===e){var o=i(t||[]);if(f){if(!D(t,f)){var l=i(f),h=r(o,l),o=r(l,o),h=c(h,1),o=c(o,-1);h&&h.length&&n.addClass(s,h),o&&o.length&&n.removeClass(s,o)}}else{var h=c(o,1);u.$addClass(h)}}f=N(t)}var f;a.$watch(u[t],l,!0),u.$observe("class",function(e){l(a.$eval(u[t]))}),"ngClass"!==t&&a.$watch("$index",function(n,r){var o=1&n;if(o!==(1&r)){var s=i(a.$eval(u[t]));o===e?(o=c(s,1),u.$addClass(o)):(o=c(s,-1),u.$removeClass(o))}})}}}]}function vn(t){function e(t,e){e&&!a[t]?(l.addClass(o,t),a[t]=!0):!e&&a[t]&&(l.removeClass(o,t),a[t]=!1)}function r(t,n){t=t?"-"+Z(t,"-"):"",e(Ti+t,!0===n),e(Mi+t,!1===n)}var i=t.ctrl,o=t.$element,a={},s=t.set,u=t.unset,c=t.parentForm,l=t.$animate;a[Mi]=!(a[Ti]=o.hasClass(Ti)),i.$setValidity=function(t,o,a){o===n?(i.$pending||(i.$pending={}),s(i.$pending,t,a)):(i.$pending&&u(i.$pending,t,a),gn(i.$pending)&&(i.$pending=n)),k(o)?o?(u(i.$error,t,a),s(i.$$success,t,a)):(s(i.$error,t,a),u(i.$$success,t,a)):(u(i.$error,t,a),u(i.$$success,t,a)),i.$pending?(e(Di,!0),i.$valid=i.$invalid=n,r("",null)):(e(Di,!1),i.$valid=gn(i.$error),i.$invalid=!i.$valid,r("",i.$valid)),o=i.$pending&&i.$pending[t]?n:i.$error[t]?!1:i.$$success[t]?!0:null,r(t,o),c.$setValidity(t,o,i)}}function gn(t){if(t)for(var e in t)return!1;return!0}var yn,wn,bn,xn,Sn=/^\/(.+)\/([a-z]*)$/,Cn=function(t){return y(t)?t.toLowerCase():t},An=Object.prototype.hasOwnProperty,kn=function(t){return y(t)?t.toUpperCase():t},En=[].slice,On=[].splice,Tn=[].push,Mn=Object.prototype.toString,Vn=r("ng"),Nn=t.angular||(t.angular={}),Dn=0;yn=e.documentMode,$.$inject=[],p.$inject=[];var jn,Pn=Array.isArray,Rn=function(t){return y(t)?t.trim():t},In=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},qn=function(){if(v(qn.isActive_))return qn.isActive_;var t=!(!e.querySelector("[ng-csp]")&&!e.querySelector("[data-ng-csp]"));if(!t)try{new Function("")}catch(n){t=!0}return qn.isActive_=t},Un=["ng-","data-ng-","ng:","x-ng-"],Fn=/[A-Z]/g,Hn=!1,_n=1,Bn=3,Ln={full:"1.3.15",major:1,minor:3,dot:15,codeName:"locality-filtration"};ct.expando="ng339";var zn=ct.cache={},Gn=1;ct._data=function(t){return this.cache[t[this.expando]]||{}};var Wn=/([\:\-\_]+(.))/g,Jn=/^moz([A-Z])/,Yn={mouseleave:"mouseout",mouseenter:"mouseover"},Zn=r("jqLite"),Kn=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Xn=/<|&#?\w+;/,Qn=/<([\w:]+)/,tr=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,er={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};er.optgroup=er.option,er.tbody=er.tfoot=er.colgroup=er.caption=er.thead,er.th=er.td;var nr=ct.prototype={ready:function(n){function r(){i||(i=!0,n())}var i=!1;"complete"===e.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),ct(t).on("load",r))},toString:function(){var t=[];return o(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return wn(t>=0?this[t]:this[this.length+t])},length:0,push:Tn,sort:[].sort,splice:[].splice},rr={};o("multiple selected checked disabled readOnly required open".split(" "),function(t){rr[Cn(t)]=t});var ir={};o("input select option textarea button form details".split(" "),function(t){ir[t]=!0});var or={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};o({data:dt,removeData:$t},function(t,e){ct[e]=t}),o({data:dt,inheritedData:bt,scope:function(t){return wn.data(t,"$scope")||bt(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return wn.data(t,"$isolateScope")||wn.data(t,"$isolateScopeNoTemplate")},controller:wt,injector:function(t){return bt(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:mt,css:function(t,e,n){return e=at(e),v(n)?void(t.style[e]=n):t.style[e]},attr:function(t,e,r){var i=Cn(e);if(rr[i]){if(!v(r))return t[e]||(t.attributes.getNamedItem(e)||$).specified?i:n;r?(t[e]=!0,t.setAttribute(e,i)):(t[e]=!1,t.removeAttribute(i))}else if(v(r))t.setAttribute(e,r);else if(t.getAttribute)return t=t.getAttribute(e,2),null===t?n:t},prop:function(t,e,n){return v(n)?void(t[e]=n):t[e]},text:function(){function t(t,e){if(m(e)){var n=t.nodeType;return n===_n||n===Bn?t.textContent:""}t.textContent=e}return t.$dv="",t}(),val:function(t,e){if(m(e)){if(t.multiple&&"select"===T(t)){var n=[];return o(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){return m(e)?t.innerHTML:(ft(t,!0),void(t.innerHTML=e))},empty:xt},function(t,e){ct.prototype[e]=function(e,r){var i,o,a=this.length;if(t!==xt&&(2==t.length&&t!==mt&&t!==wt?e:r)===n){if(g(e)){for(i=0;a>i;i++)if(t===dt)t(this[i],e);else for(o in e)t(this[i],o,e[o]);return this}for(i=t.$dv,a=i===n?Math.min(a,1):a,o=0;a>o;o++){var s=t(this[o],e,r);i=i?i+s:s}return i}for(i=0;a>i;i++)t(this[i],e,r);return this}}),o({removeData:$t,on:function oo(t,e,n,r){if(v(r))throw Zn("onargs");if(st(t)){var i=pt(t,!0);r=i.events;var o=i.handle;o||(o=i.handle=Et(t,r));for(var i=0<=e.indexOf(" ")?e.split(" "):[e],a=i.length;a--;){e=i[a];var s=r[e];s||(r[e]=[],"mouseenter"===e||"mouseleave"===e?oo(t,Yn[e],function(t){var n=t.relatedTarget;n&&(n===this||this.contains(n))||o(t,e)}):"$destroy"!==e&&t.addEventListener(e,o,!1),s=r[e]),s.push(n)}}},off:ht,one:function(t,e,n){t=wn(t),t.on(e,function r(){t.off(e,n),t.off(e,r)}),t.on(e,n)},replaceWith:function(t,e){var n,r=t.parentNode;ft(t),o(new ct(e),function(e){n?r.insertBefore(e,n.nextSibling):r.replaceChild(e,t),n=e})},children:function(t){var e=[];return o(t.childNodes,function(t){t.nodeType===_n&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===_n||11===n){e=new ct(e);for(var n=0,r=e.length;r>n;n++)t.appendChild(e[n])}},prepend:function(t,e){if(t.nodeType===_n){var n=t.firstChild;o(new ct(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){e=wn(e).eq(0).clone()[0];var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)},remove:St,detach:function(t){St(t,!0)},after:function(t,e){var n=t,r=t.parentNode;e=new ct(e);for(var i=0,o=e.length;o>i;i++){var a=e[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:gt,removeClass:vt,toggleClass:function(t,e,n){e&&o(e.split(" "),function(e){var r=n;m(r)&&(r=!mt(t,e)),(r?gt:vt)(t,e)})},parent:function(t){return(t=t.parentNode)&&11!==t.nodeType?t:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:lt,triggerHandler:function(t,e,n){var r,i,a=e.type||e,s=pt(t);(s=(s=s&&s.events)&&s[a])&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:$,type:a,target:t},e.type&&(r=l(r,e)),e=N(s),i=n?[r].concat(n):[r],o(e,function(e){r.isImmediatePropagationStopped()||e.apply(t,i)}))}},function(t,e){ct.prototype[e]=function(e,n,r){for(var i,o=0,a=this.length;a>o;o++)m(i)?(i=t(this[o],e,n,r),v(i)&&(i=wn(i))):yt(i,t(this[o],e,n,r));return v(i)?i:this},ct.prototype.bind=ct.prototype.on,ct.prototype.unbind=ct.prototype.off}),Mt.prototype={put:function(t,e){this[Tt(t,this.nextUid)]=e},get:function(t){return this[Tt(t,this.nextUid)]},remove:function(t){var e=this[t=Tt(t,this.nextUid)];return delete this[t],e}};var ar=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,sr=/,/,ur=/^\s*(_?)(\S+?)\1\s*$/,cr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,lr=r("$injector");Nt.$$annotate=function(t,e,n){var r;if("function"==typeof t){if(!(r=t.$inject)){if(r=[],t.length){if(e)throw y(n)&&n||(n=t.name||Vt(t)),lr("strictdi",n);e=t.toString().replace(cr,""),e=e.match(ar),o(e[1].split(sr),function(t){t.replace(ur,function(t,e,n){r.push(n)})})}t.$inject=r}}else Pn(t)?(e=t.length-1,Q(t[e],"fn"),r=t.slice(0,e)):Q(t,"fn",!0);return r};var fr=r("$animate"),hr=["$provide",function(t){this.$$selectors={},this.register=function(e,n){var r=e+"-animation";if(e&&"."!=e.charAt(0))throw fr("notcsel",e);this.$$selectors[e.substr(1)]=r,t.factory(r,n)},this.classNameFilter=function(t){return 1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(t,e,n){function r(e){var r,i=t.defer();return i.promise.$$cancelFn=function(){r&&r()},n.$$postDigest(function(){r=e(function(){i.resolve()})}),i.promise}function i(t,e){var n=[],r=[],i=rt();return o((t.attr("class")||"").split(/\s+/),function(t){i[t]=!0}),o(e,function(t,e){var o=i[e];!1===t&&o?r.push(e):!0!==t||o||n.push(e)}),0<n.length+r.length&&[n.length?n:null,r.length?r:null]}function a(t,e,n){for(var r=0,i=e.length;i>r;++r)t[e[r]]=n}function s(){return c||(c=t.defer(),e(function(){c.resolve(),c=null})),c.promise}function u(t,e){if(Nn.isObject(e)){var n=l(e.from||{},e.to||{});t.css(n)}}var c;return{animate:function(t,e,n){return u(t,{from:e,to:n}),s()},enter:function(t,e,n,r){return u(t,r),n?n.after(t):e.prepend(t),s()},leave:function(t,e){return u(t,e),t.remove(),s()},move:function(t,e,n,r){return this.enter(t,e,n,r)},addClass:function(t,e,n){return this.setClass(t,e,[],n)},$$addClassImmediately:function(t,e,n){return t=wn(t),e=y(e)?e:Pn(e)?e.join(" "):"",o(t,function(t){gt(t,e)}),u(t,n),s()},removeClass:function(t,e,n){return this.setClass(t,[],e,n)},$$removeClassImmediately:function(t,e,n){return t=wn(t),e=y(e)?e:Pn(e)?e.join(" "):"",o(t,function(t){vt(t,e)}),u(t,n),s()},setClass:function(t,e,n,o){var s=this,u=!1;t=wn(t);var c=t.data("$$animateClasses");return c?o&&c.options&&(c.options=Nn.extend(c.options||{},o)):(c={classes:{},options:o},u=!0),o=c.classes,e=Pn(e)?e:e.split(" "),n=Pn(n)?n:n.split(" "),a(o,e,!0),a(o,n,!1),u&&(c.promise=r(function(e){var n=t.data("$$animateClasses");if(t.removeData("$$animateClasses"),n){var r=i(t,n.classes);r&&s.$$setClassImmediately(t,r[0],r[1],n.options)}e()}),t.data("$$animateClasses",c)),c.promise},$$setClassImmediately:function(t,e,n,r){return e&&this.$$addClassImmediately(t,e),n&&this.$$removeClassImmediately(t,n),u(t,r),s()},enabled:$,cancel:$}}]}],$r=r("$compile");Ut.$inject=["$provide","$$sanitizeUriProvider"];var pr=/^((?:x|data)[\:\-_])/i,dr=r("$controller"),mr="application/json",vr={"Content-Type":mr+";charset=utf-8"},gr=/^\[|^\{(?!\{)/,yr={"[":/]$/,"{":/}$/},wr=/^\)\]\}',?\n/,br=r("$interpolate"),xr=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Sr={http:80,https:443,ftp:21},Cr=r("$location"),Ar={$$html5:!1,$$replace:!1,absUrl:$e("$$absUrl"),url:function(t){if(m(t))return this.$$url;var e=xr.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:$e("$$protocol"),host:$e("$$host"),port:$e("$$port"),path:pe("$$path",function(t){return t=null!==t?t.toString():"","/"==t.charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(y(t)||w(t))t=t.toString(),this.$$search=H(t);else{if(!g(t))throw Cr("isrcharg");t=V(t,{}),o(t,function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:m(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:pe("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};o([he,fe,le],function(t){t.prototype=Object.create(Ar),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==le||!this.$$html5)throw Cr("nostate");return this.$$state=m(e)?null:e,this}});var kr=r("$parse"),Er=Function.prototype.call,Or=Function.prototype.apply,Tr=Function.prototype.bind,Mr=rt();o({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(t,e){t.constant=t.literal=t.sharedGetter=!0,Mr[e]=t}),Mr["this"]=function(t){return t},Mr["this"].sharedGetter=!0;var Vr=l(rt(),{"+":function(t,e,r,i){return r=r(t,e),i=i(t,e),v(r)?v(i)?r+i:r:v(i)?i:n},"-":function(t,e,n,r){return n=n(t,e),r=r(t,e),(v(n)?n:0)-(v(r)?r:0)},"*":function(t,e,n,r){return n(t,e)*r(t,e)},"/":function(t,e,n,r){return n(t,e)/r(t,e)},"%":function(t,e,n,r){return n(t,e)%r(t,e)},"===":function(t,e,n,r){return n(t,e)===r(t,e)},"!==":function(t,e,n,r){return n(t,e)!==r(t,e)},"==":function(t,e,n,r){return n(t,e)==r(t,e)},"!=":function(t,e,n,r){return n(t,e)!=r(t,e)},"<":function(t,e,n,r){return n(t,e)<r(t,e)},">":function(t,e,n,r){return n(t,e)>r(t,e)},"<=":function(t,e,n,r){return n(t,e)<=r(t,e)},">=":function(t,e,n,r){return n(t,e)>=r(t,e)},"&&":function(t,e,n,r){return n(t,e)&&r(t,e)},"||":function(t,e,n,r){return n(t,e)||r(t,e)},"!":function(t,e,n){return!n(t,e)},"=":!0,"|":!0}),Nr={n:"\n",f:"\f",r:"\r",t:"	",v:"\x0B","'":"'",'"':'"'},Dr=function(t){this.options=t};Dr.prototype={constructor:Dr,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;)if(t=this.text.charAt(this.index),'"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var e=t+this.peek(),n=e+this.peek(2),r=Vr[e],i=Vr[n];Vr[t]||r||i?(t=i?n:r?e:t,this.tokens.push({index:this.index,text:t,operator:!0}),this.index+=t.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){return t=t||1,this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(t){return t>="0"&&"9">=t&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"	"===t||"\n"===t||"\x0B"===t||"Â "===t},isIdent:function(t){return t>="a"&&"z">=t||t>="A"&&"Z">=t||"_"===t||"$"===t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){throw n=n||this.index,e=v(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n,kr("lexerr",t,e,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=Cn(this.text.charAt(this.index));if("."==n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){for(var t=this.index;this.index<this.text.length;){var e=this.text.charAt(this.index);if(!this.isIdent(e)&&!this.isNumber(e))break;this.index++}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index),r=r+o;if(i)"u"===o?(i=this.text.substring(this.index+1,this.index+5),i.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+i+"]"),this.index+=4,n+=String.fromCharCode(parseInt(i,16))):n+=Nr[o]||o,i=!1;else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var jr=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n};jr.ZERO=l(function(){return 0},{sharedGetter:!0,constant:!0}),jr.prototype={constructor:jr,parse:function(t){return this.text=t,this.tokens=this.lexer.lex(t),t=this.statements(),0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.peek().identifier&&this.peek().text in Mr?t=Mr[this.consume().text]:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e,n;e=this.expect("(","[",".");)"("===e.text?(t=this.functionCall(t,n),n=null):"["===e.text?(n=t,t=this.objectIndex(t)):"."===e.text?(n=t,t=this.fieldAccess(t)):this.throwError("IMPOSSIBLE");return t},throwError:function(t,e){throw kr("syntax",e.text,t,e.index+1,this.text,this.text.substring(e.index))},peekToken:function(){if(0===this.tokens.length)throw kr("ueoe",this.text);return this.tokens[0]},peek:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)},peekAhead:function(t,e,n,r,i){if(this.tokens.length>t){t=this.tokens[t];var o=t.text;if(o===e||o===n||o===r||o===i||!(e||n||r||i))return t}return!1},expect:function(t,e,n,r){return(t=this.peek(t,e,n,r))?(this.tokens.shift(),t):!1},consume:function(t){if(0===this.tokens.length)throw kr("ueoe",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},unaryFn:function(t,e){var n=Vr[t];return l(function(t,r){return n(t,r,e)},{constant:e.constant,inputs:[e]})},binaryFn:function(t,e,n,r){var i=Vr[e];return l(function(e,r){return i(e,r,t,n)},{constant:t.constant&&n.constant,inputs:!r&&[t,n]})},identifier:function(){for(var t=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)t+=this.consume().text+this.consume().text;return Ce(t,this.options,this.text)},constant:function(){var t=this.consume().value;return l(function(){return t},{constant:!0,literal:!0})},statements:function(){for(var t=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&t.push(this.filterChain()),!this.expect(";"))return 1===t.length?t[0]:function(e,n){for(var r,i=0,o=t.length;o>i;i++)r=t[i](e,n);return r}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},filter:function(t){var e,r,i=this.$filter(this.consume().text);if(this.peek(":"))for(e=[],r=[];this.expect(":");)e.push(this.expression());var o=[t].concat(e||[]);return l(function(o,a){var s=t(o,a);if(r){for(r[0]=s,s=e.length;s--;)r[s+1]=e[s](o,a);return i.apply(n,r)}return i(s)},{constant:!i.$stateful&&o.every(ye),inputs:!i.$stateful&&o})},expression:function(){return this.assignment()},assignment:function(){var t,e,n=this.ternary();
return(e=this.expect("="))?(n.assign||this.throwError("implies assignment but ["+this.text.substring(0,e.index)+"] can not be assigned to",e),t=this.ternary(),l(function(e,r){return n.assign(e,t(e,r),r)},{inputs:[n,t]})):n},ternary:function(){var t,e=this.logicalOR();if(this.expect("?")&&(t=this.assignment(),this.consume(":"))){var n=this.assignment();return l(function(r,i){return e(r,i)?t(r,i):n(r,i)},{constant:e.constant&&t.constant&&n.constant})}return e},logicalOR:function(){for(var t,e=this.logicalAND();t=this.expect("||");)e=this.binaryFn(e,t.text,this.logicalAND(),!0);return e},logicalAND:function(){for(var t,e=this.equality();t=this.expect("&&");)e=this.binaryFn(e,t.text,this.equality(),!0);return e},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e=this.binaryFn(e,t.text,this.relational());return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e=this.binaryFn(e,t.text,this.additive());return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e=this.binaryFn(e,t.text,this.multiplicative());return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e=this.binaryFn(e,t.text,this.unary());return e},unary:function(){var t;return this.expect("+")?this.primary():(t=this.expect("-"))?this.binaryFn(jr.ZERO,t.text,this.unary()):(t=this.expect("!"))?this.unaryFn(t.text,this.unary()):this.primary()},fieldAccess:function(t){var e=this.identifier();return l(function(r,i,o){return r=o||t(r,i),null==r?n:e(r)},{assign:function(n,r,i){var o=t(n,i);return o||t.assign(n,o={},i),e.assign(o,r)}})},objectIndex:function(t){var e=this.text,r=this.expression();return this.consume("]"),l(function(i,o){var a=t(i,o),s=r(i,o);return ve(s,e),a?ge(a[s],e):n},{assign:function(n,i,o){var a=ve(r(n,o),e),s=ge(t(n,o),e);return s||t.assign(n,s={},o),s[a]=i}})},functionCall:function(t,e){var r=[];if(")"!==this.peekToken().text)do r.push(this.expression());while(this.expect(","));this.consume(")");var i=this.text,o=r.length?[]:null;return function(a,s){var u=e?e(a,s):v(e)?n:a,c=t(a,s,u)||$;if(o)for(var l=r.length;l--;)o[l]=ge(r[l](a,s),i);if(ge(u,i),c){if(c.constructor===c)throw kr("isecfn",i);if(c===Er||c===Or||c===Tr)throw kr("isecff",i)}return u=c.apply?c.apply(u,o):c(o[0],o[1],o[2],o[3],o[4]),o&&(o.length=0),ge(u,i)}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),l(function(e,n){for(var r=[],i=0,o=t.length;o>i;i++)r.push(t[i](e,n));return r},{literal:!0,constant:t.every(ye),inputs:t})},object:function(){var t=[],e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var n=this.consume();n.constant?t.push(n.value):n.identifier?t.push(n.text):this.throwError("invalid key",n),this.consume(":"),e.push(this.expression())}while(this.expect(","));return this.consume("}"),l(function(n,r){for(var i={},o=0,a=e.length;a>o;o++)i[t[o]]=e[o](n,r);return i},{literal:!0,constant:e.every(ye),inputs:e})}};var Pr=rt(),Rr=rt(),Ir=Object.prototype.valueOf,qr=r("$sce"),Ur={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},$r=r("$compile"),Fr=e.createElement("a"),Hr=He(t.location.href);Le.$inject=["$provide"],Je.$inject=["$locale"],Ye.$inject=["$locale"];var _r=".",Br={yyyy:Xe("FullYear",4),yy:Xe("FullYear",2,0,!0),y:Xe("FullYear",1),MMMM:Qe("Month"),MMM:Qe("Month",!0),MM:Xe("Month",2,1),M:Xe("Month",1,1),dd:Xe("Date",2),d:Xe("Date",1),HH:Xe("Hours",2),H:Xe("Hours",1),hh:Xe("Hours",2,-12),h:Xe("Hours",1,-12),mm:Xe("Minutes",2),m:Xe("Minutes",1),ss:Xe("Seconds",2),s:Xe("Seconds",1),sss:Xe("Milliseconds",3),EEEE:Qe("Day"),EEE:Qe("Day",!0),a:function(t,e){return 12>t.getHours()?e.AMPMS[0]:e.AMPMS[1]},Z:function(t){return t=-1*t.getTimezoneOffset(),t=(t>=0?"+":"")+(Ke(Math[t>0?"floor":"ceil"](t/60),2)+Ke(Math.abs(t%60),2))},ww:en(2),w:en(1),G:nn,GG:nn,GGG:nn,GGGG:function(t,e){return 0>=t.getFullYear()?e.ERANAMES[0]:e.ERANAMES[1]}},Lr=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,zr=/^\-?\d+$/;rn.$inject=["$locale"];var Gr=d(Cn),Wr=d(kn);sn.$inject=["$parse"];var Jr=d({restrict:"E",compile:function(t,e){return e.href||e.xlinkHref||e.name?void 0:function(t,e){if("a"===e[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Mn.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}}),Yr={};o(rr,function(t,e){if("multiple"!=t){var n=Ft("ng-"+e);Yr[n]=function(){return{restrict:"A",priority:100,link:function(t,r,i){t.$watch(i[n],function(t){i.$set(e,!!t)})}}}}}),o(or,function(t,e){Yr[e]=function(){return{priority:100,link:function(t,n,r){return"ngPattern"===e&&"/"==r.ngPattern.charAt(0)&&(n=r.ngPattern.match(Sn))?void r.$set("ngPattern",new RegExp(n[1],n[2])):void t.$watch(r[e],function(t){r.$set(e,t)})}}}}),o(["src","srcset","href"],function(t){var e=Ft("ng-"+t);Yr[e]=function(){return{priority:99,link:function(n,r,i){var o=t,a=t;"href"===t&&"[object SVGAnimatedString]"===Mn.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(e,function(e){e?(i.$set(a,e),yn&&o&&r.prop(o,i[a])):"href"===t&&i.$set(a,null)})}}}});var Zr={$addControl:$,$$renameControl:function(t,e){t.$name=e},$removeControl:$,$setValidity:$,$setDirty:$,$setPristine:$,$setSubmitted:$};cn.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Kr=function(t){return["$timeout",function(e){return{name:"form",restrict:t?"EAC":"E",controller:cn,compile:function(r,i){r.addClass(Vi).addClass(Ti);var o=i.name?"name":t&&i.ngForm?"ngForm":!1;return{pre:function(t,r,i,a){if(!("action"in i)){var s=function(e){t.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),e.preventDefault()};r[0].addEventListener("submit",s,!1),r.on("$destroy",function(){e(function(){r[0].removeEventListener("submit",s,!1)},0,!1)})}var u=a.$$parentForm;o&&(we(t,null,a.$name,a,a.$name),i.$observe(o,function(e){a.$name!==e&&(we(t,null,a.$name,n,a.$name),u.$$renameControl(a,e),we(t,null,a.$name,a,a.$name))})),r.on("$destroy",function(){u.$removeControl(a),o&&we(t,null,i[o],n,a.$name),l(a,Zr)})}}}}}]},Xr=Kr(),Qr=Kr(!0),ti=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,ei=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,ni=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,ri=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,ii=/^(\d{4})-(\d{2})-(\d{2})$/,oi=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ai=/^(\d{4})-W(\d\d)$/,si=/^(\d{4})-(\d\d)$/,ui=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ci={text:function(t,e,n,r,i,o){fn(t,e,n,r,i,o),ln(r)},date:$n("date",ii,hn(ii,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":$n("datetimelocal",oi,hn(oi,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:$n("time",ui,hn(ui,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:$n("week",ai,function(t,e){if(b(t))return t;if(y(t)){ai.lastIndex=0;var n=ai.exec(t);if(n){var r=+n[1],i=+n[2],o=n=0,a=0,s=0,u=tn(r),i=7*(i-1);return e&&(n=e.getHours(),o=e.getMinutes(),a=e.getSeconds(),s=e.getMilliseconds()),new Date(r,0,u.getDate()+i,n,o,a,s)}}return NaN},"yyyy-Www"),month:$n("month",si,hn(si,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,r,i,o,a){if(pn(t,e,r,i),fn(t,e,r,i,o,a),i.$$parserName="number",i.$parsers.push(function(t){return i.$isEmpty(t)?null:ri.test(t)?parseFloat(t):n}),i.$formatters.push(function(t){if(!i.$isEmpty(t)){if(!w(t))throw ji("numfmt",t);t=t.toString()}return t}),v(r.min)||r.ngMin){var s;i.$validators.min=function(t){return i.$isEmpty(t)||m(s)||t>=s},r.$observe("min",function(t){v(t)&&!w(t)&&(t=parseFloat(t,10)),s=w(t)&&!isNaN(t)?t:n,i.$validate()})}if(v(r.max)||r.ngMax){var u;i.$validators.max=function(t){return i.$isEmpty(t)||m(u)||u>=t},r.$observe("max",function(t){v(t)&&!w(t)&&(t=parseFloat(t,10)),u=w(t)&&!isNaN(t)?t:n,i.$validate()})}},url:function(t,e,n,r,i,o){fn(t,e,n,r,i,o),ln(r),r.$$parserName="url",r.$validators.url=function(t,e){var n=t||e;return r.$isEmpty(n)||ei.test(n)}},email:function(t,e,n,r,i,o){fn(t,e,n,r,i,o),ln(r),r.$$parserName="email",r.$validators.email=function(t,e){var n=t||e;return r.$isEmpty(n)||ni.test(n)}},radio:function(t,e,n,r){m(n.name)&&e.attr("name",++Dn),e.on("click",function(t){e[0].checked&&r.$setViewValue(n.value,t&&t.type)}),r.$render=function(){e[0].checked=n.value==r.$viewValue},n.$observe("value",r.$render)},checkbox:function(t,e,n,r,i,o,a,s){var u=dn(s,t,"ngTrueValue",n.ngTrueValue,!0),c=dn(s,t,"ngFalseValue",n.ngFalseValue,!1);e.on("click",function(t){r.$setViewValue(e[0].checked,t&&t.type)}),r.$render=function(){e[0].checked=r.$viewValue},r.$isEmpty=function(t){return!1===t},r.$formatters.push(function(t){return D(t,u)}),r.$parsers.push(function(t){return t?u:c})},hidden:$,button:$,submit:$,reset:$,file:$},li=["$browser","$sniffer","$filter","$parse",function(t,e,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(ci[Cn(a.type)]||ci.text)(i,o,a,s[0],e,t,n,r)}}}}],fi=/^(true|false|\d+)$/,hi=function(){return{restrict:"A",priority:100,compile:function(t,e){return fi.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},$i=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,r,i){t.$$addBindingInfo(r,i.ngBind),r=r[0],e.$watch(i.ngBind,function(t){r.textContent=t===n?"":t})}}}}],pi=["$interpolate","$compile",function(t,e){return{compile:function(r){return e.$$addBindingClass(r),function(r,i,o){r=t(i.attr(o.$attr.ngBindTemplate)),e.$$addBindingInfo(i,r.expressions),i=i[0],o.$observe("ngBindTemplate",function(t){i.textContent=t===n?"":t})}}}}],di=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(r,i){var o=e(i.ngBindHtml),a=e(i.ngBindHtml,function(t){return(t||"").toString()});return n.$$addBindingClass(r),function(e,r,i){n.$$addBindingInfo(r,i.ngBindHtml),e.$watch(a,function(){r.html(t.getTrustedHtml(o(e))||"")})}}}}],mi=d({restrict:"A",require:"ngModel",link:function(t,e,n,r){r.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),vi=mn("",!0),gi=mn("Odd",0),yi=mn("Even",1),wi=un({compile:function(t,e){e.$set("ngCloak",n),t.removeClass("ng-cloak")}}),bi=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],xi={},Si={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=Ft("ng-"+t);xi[e]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[e],null,!0);return function(e,n){n.on(t,function(n){var i=function(){a(e,{$event:n})};Si[t]&&r.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}]});var Ci=["$animate",function(t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,u,c;n.$watch(i.ngIf,function(n){n?u||a(function(n,o){u=o,n[n.length++]=e.createComment(" end ngIf: "+i.ngIf+" "),s={clone:n},t.enter(n,r.parent(),r)}):(c&&(c.remove(),c=null),u&&(u.$destroy(),u=null),s&&(c=nt(s.clone),t.leave(c).then(function(){c=null}),s=null))})}}}],Ai=["$templateRequest","$anchorScroll","$animate","$sce",function(t,e,n,r){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Nn.noop,compile:function(i,o){var a=o.ngInclude||o.src,s=o.onload||"",u=o.autoscroll;return function(i,o,c,l,f){var h,$,p,d=0,m=function(){$&&($.remove(),$=null),h&&(h.$destroy(),h=null),p&&(n.leave(p).then(function(){$=null}),$=p,p=null)};i.$watch(r.parseAsResourceUrl(a),function(r){var a=function(){!v(u)||u&&!i.$eval(u)||e()},c=++d;r?(t(r,!0).then(function(t){if(c===d){var e=i.$new();l.template=t,t=f(e,function(t){m(),n.enter(t,null,o).then(a)}),h=e,p=t,h.$emit("$includeContentLoaded",r),i.$eval(s)}},function(){c===d&&(m(),i.$emit("$includeContentError",r))}),i.$emit("$includeContentRequested",r)):(m(),l.template=null)})}}}}],ki=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){/SVG/.test(r[0].toString())?(r.empty(),t(ut(o.template,e).childNodes)(n,function(t){r.append(t)},{futureParentElement:r})):(r.html(o.template),t(r.contents())(n))}}}],Ei=un({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Oi=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,r,i){var a=e.attr(r.$attr.ngList)||", ",s="false"!==r.ngTrim,u=s?Rn(a):a;i.$parsers.push(function(t){if(!m(t)){var e=[];return t&&o(t.split(u),function(t){t&&e.push(s?Rn(t):t)}),e}}),i.$formatters.push(function(t){return Pn(t)?t.join(a):n}),i.$isEmpty=function(t){return!t||!t.length}}}},Ti="ng-valid",Mi="ng-invalid",Vi="ng-pristine",Ni="ng-dirty",Di="ng-pending",ji=new r("ngModel"),Pi=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,r,i,a,s,u,c,l,f){this.$modelValue=this.$viewValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=f(r.name||"",!1)(t);var h,p=a(r.ngModel),d=p.assign,g=p,y=d,b=null,S=this;this.$$setOptions=function(t){if((S.$options=t)&&t.getterSetter){var e=a(r.ngModel+"()"),n=a(r.ngModel+"($$$p)");g=function(t){var n=p(t);return x(n)&&(n=e(t)),n},y=function(t,e){x(p(t))?n(t,{$$$p:S.$modelValue}):d(t,S.$modelValue)}}else if(!p.assign)throw ji("nonassign",r.ngModel,U(i))},this.$render=$,this.$isEmpty=function(t){return m(t)||""===t||null===t||t!==t};var C=i.inheritedData("$formController")||Zr,A=0;vn({ctrl:this,$element:i,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},parentForm:C,$animate:s}),this.$setPristine=function(){S.$dirty=!1,S.$pristine=!0,s.removeClass(i,Ni),s.addClass(i,Vi)},this.$setDirty=function(){S.$dirty=!0,S.$pristine=!1,s.removeClass(i,Vi),s.addClass(i,Ni),C.$setDirty()},this.$setUntouched=function(){S.$touched=!1,S.$untouched=!0,s.setClass(i,"ng-untouched","ng-touched")},this.$setTouched=function(){S.$touched=!0,S.$untouched=!1,s.setClass(i,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){u.cancel(b),S.$viewValue=S.$$lastCommittedViewValue,S.$render()},this.$validate=function(){if(!w(S.$modelValue)||!isNaN(S.$modelValue)){var t=S.$$rawModelValue,e=S.$valid,r=S.$modelValue,i=S.$options&&S.$options.allowInvalid;S.$$runValidators(t,S.$$lastCommittedViewValue,function(o){i||e===o||(S.$modelValue=o?t:n,S.$modelValue!==r&&S.$$writeModelToScope())})}},this.$$runValidators=function(t,e,r){function i(){var n=!0;return o(S.$validators,function(r,i){var o=r(t,e);n=n&&o,s(i,o)}),n?!0:(o(S.$asyncValidators,function(t,e){s(e,null)}),!1)}function a(){var r=[],i=!0;o(S.$asyncValidators,function(o,a){var u=o(t,e);if(!u||!x(u.then))throw ji("$asyncValidators",u);s(a,n),r.push(u.then(function(){s(a,!0)},function(t){i=!1,s(a,!1)}))}),r.length?l.all(r).then(function(){u(i)},$):u(!0)}function s(t,e){c===A&&S.$setValidity(t,e)}function u(t){c===A&&r(t)}A++;var c=A;(function(){var t=S.$$parserName||"parse";return h!==n?(h||(o(S.$validators,function(t,e){s(e,null)}),o(S.$asyncValidators,function(t,e){s(e,null)})),s(t,h),h):(s(t,null),!0)})()&&i()?a():u(!1)},this.$commitViewValue=function(){var t=S.$viewValue;u.cancel(b),(S.$$lastCommittedViewValue!==t||""===t&&S.$$hasNativeValidators)&&(S.$$lastCommittedViewValue=t,S.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var e=S.$$lastCommittedViewValue;if(h=m(e)?n:!0)for(var r=0;r<S.$parsers.length;r++)if(e=S.$parsers[r](e),m(e)){h=!1;break}w(S.$modelValue)&&isNaN(S.$modelValue)&&(S.$modelValue=g(t));var i=S.$modelValue,o=S.$options&&S.$options.allowInvalid;S.$$rawModelValue=e,o&&(S.$modelValue=e,S.$modelValue!==i&&S.$$writeModelToScope()),S.$$runValidators(e,S.$$lastCommittedViewValue,function(t){o||(S.$modelValue=t?e:n,S.$modelValue!==i&&S.$$writeModelToScope())})},this.$$writeModelToScope=function(){y(t,S.$modelValue),o(S.$viewChangeListeners,function(t){try{t()}catch(n){e(n)}})},this.$setViewValue=function(t,e){S.$viewValue=t,S.$options&&!S.$options.updateOnDefault||S.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var n=0,r=S.$options;r&&v(r.debounce)&&(r=r.debounce,w(r)?n=r:w(r[e])?n=r[e]:w(r["default"])&&(n=r["default"])),u.cancel(b),n?b=u(function(){S.$commitViewValue()},n):c.$$phase?S.$commitViewValue():t.$apply(function(){S.$commitViewValue()})},t.$watch(function(){var e=g(t);if(e!==S.$modelValue){S.$modelValue=S.$$rawModelValue=e,h=n;for(var r=S.$formatters,i=r.length,o=e;i--;)o=r[i](o);S.$viewValue!==o&&(S.$viewValue=S.$$lastCommittedViewValue=o,S.$render(),S.$$runValidators(e,o,$))}return e})}],Ri=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Pi,priority:1,compile:function(e){return e.addClass(Vi).addClass("ng-untouched").addClass(Ti),{pre:function(t,e,n,r){var i=r[0],o=r[1]||Zr;i.$$setOptions(r[2]&&r[2].$options),o.$addControl(i),n.$observe("name",function(t){i.$name!==t&&o.$$renameControl(i,t)}),t.$on("$destroy",function(){o.$removeControl(i)})},post:function(e,n,r,i){var o=i[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(n){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],Ii=/(\s+|^)default(\s+|$)/,qi=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var r=this;this.$options=t.$eval(e.ngModelOptions),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=Rn(this.$options.updateOn.replace(Ii,function(){return r.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Ui=un({terminal:!0,priority:1e3}),Fi=["$locale","$interpolate",function(t,e){var n=/{}/g,r=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(i,a,s){function u(t){a.text(t||"")}var c,l=s.count,f=s.$attr.when&&a.attr(s.$attr.when),h=s.offset||0,$=i.$eval(f)||{},p={},f=e.startSymbol(),d=e.endSymbol(),m=f+l+"-"+h+d,v=Nn.noop;o(s,function(t,e){var n=r.exec(e);n&&(n=(n[1]?"-":"")+Cn(n[2]),$[n]=a.attr(s.$attr[e]))}),o($,function(t,r){p[r]=e(t.replace(n,m))}),i.$watch(l,function(e){e=parseFloat(e);var n=isNaN(e);n||e in $||(e=t.pluralCat(e-h)),e===c||n&&isNaN(c)||(v(),v=i.$watch(p[e],u),c=e)})}}}],Hi=["$parse","$animate",function(t,a){var s=r("ngRepeat"),u=function(t,e,n,r,i,o,a){t[n]=r,i&&(t[i]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&e))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,c){var l=c.ngRepeat,f=e.createComment(" end ngRepeat: "+l+" "),h=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!h)throw s("iexp",l);var $=h[1],p=h[2],d=h[3],m=h[4],h=$.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!h)throw s("iidexp",$);var v=h[3]||h[1],g=h[2];if(d&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(d)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(d)))throw s("badident",d);var y,w,b,x,S={$id:Tt};return m?y=t(m):(b=function(t,e){return Tt(e)},x=function(t){return t}),function(t,e,r,c,h){y&&(w=function(e,n,r){return g&&(S[g]=e),S[v]=n,S.$index=r,y(t,S)});var $=rt();t.$watchCollection(p,function(r){var c,p,m,y,S,C,A,k,E,O,T=e[0],M=rt();if(d&&(t[d]=r),i(r))k=r,p=w||b;else{p=w||x,k=[];for(O in r)r.hasOwnProperty(O)&&"$"!=O.charAt(0)&&k.push(O);k.sort()}for(y=k.length,O=Array(y),c=0;y>c;c++)if(S=r===k?c:k[c],C=r[S],A=p(S,C,c),$[A])E=$[A],delete $[A],M[A]=E,O[c]=E;else{if(M[A])throw o(O,function(t){t&&t.scope&&($[t.id]=t)}),s("dupes",l,A,C);O[c]={id:A,scope:n,clone:n},M[A]=!0}for(m in $){if(E=$[m],A=nt(E.clone),a.leave(A),A[0].parentNode)for(c=0,p=A.length;p>c;c++)A[c].$$NG_REMOVED=!0;E.scope.$destroy()}for(c=0;y>c;c++)if(S=r===k?c:k[c],C=r[S],E=O[c],E.scope){m=T;do m=m.nextSibling;while(m&&m.$$NG_REMOVED);E.clone[0]!=m&&a.move(nt(E.clone),null,wn(T)),T=E.clone[E.clone.length-1],u(E.scope,c,v,C,g,S,y)}else h(function(t,e){E.scope=e;var n=f.cloneNode(!1);t[t.length++]=n,a.enter(t,null,wn(T)),T=n,E.clone=t,M[E.id]=E,u(E.scope,c,v,C,g,S,y)});$=M})}}}}],_i=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngShow,function(e){t[e?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Bi=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,r){e.$watch(r.ngHide,function(e){t[e?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Li=un(function(t,e,n){t.$watchCollection(n.ngStyle,function(t,n){n&&t!==n&&o(n,function(t,n){e.css(n,"")}),t&&e.css(t)})}),zi=["$animate",function(t){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,a){var s=[],u=[],c=[],l=[],f=function(t,e){return function(){t.splice(e,1)}};n.$watch(i.ngSwitch||i.on,function(n){var r,i;for(r=0,i=c.length;i>r;++r)t.cancel(c[r]);for(r=c.length=0,i=l.length;i>r;++r){var h=nt(u[r].clone);l[r].$destroy(),(c[r]=t.leave(h)).then(f(c,r))}u.length=0,l.length=0,(s=a.cases["!"+n]||a.cases["?"])&&o(s,function(n){n.transclude(function(r,i){l.push(i);var o=n.element;r[r.length++]=e.createComment(" end ngSwitchWhen: "),u.push({clone:r}),t.enter(r,o.parent(),o)})})})}}}],Gi=un({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:e})}}),Wi=un({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:e})}}),Ji=un({restrict:"EAC",link:function(t,e,n,i,o){if(!o)throw r("ngTransclude")("orphan",U(e));o(function(t){e.empty(),e.append(t)})}}),Yi=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){"text/ng-template"==n.type&&t.put(n.id,e[0].text)}}}],Zi=r("ngOptions"),Ki=d({restrict:"A",terminal:!0}),Xi=["$compile","$parse",function(t,r){var i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,a={$setViewValue:$};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(t,e,n){var r,i=this,o={},s=a;i.databound=n.ngModel,i.init=function(t,e,n){s=t,r=n},i.addOption=function(e,n){tt(e,'"option value"'),o[e]=!0,s.$viewValue==e&&(t.val(e),r.parent()&&r.remove()),n&&n[0].hasAttribute("selected")&&(n[0].selected=!0)},i.removeOption=function(t){this.hasOption(t)&&(delete o[t],s.$viewValue===t&&this.renderUnknownOption(t))},i.renderUnknownOption=function(e){e="? "+Tt(e)+" ?",r.val(e),t.prepend(r),t.val(e),r.prop("selected",!0)},i.hasOption=function(t){return o.hasOwnProperty(t)},e.$on("$destroy",function(){i.renderUnknownOption=$})}],link:function(a,s,u,c){function l(t,e,n,r){n.$render=function(){var t=n.$viewValue;r.hasOption(t)?(S.parent()&&S.remove(),e.val(t),""===t&&p.prop("selected",!0)):m(t)&&p?e.val(""):r.renderUnknownOption(t)},e.on("change",function(){t.$apply(function(){S.parent()&&S.remove(),n.$setViewValue(e.val())})})}function f(t,e,n){var r;n.$render=function(){var t=new Mt(n.$viewValue);o(e.find("option"),function(e){e.selected=v(t.get(e.value))})},t.$watch(function(){D(r,n.$viewValue)||(r=N(n.$viewValue),n.$render())}),e.on("change",function(){t.$apply(function(){var t=[];o(e.find("option"),function(e){e.selected&&t.push(e.value)}),n.$setViewValue(t)})})}function h(e,a,s){function u(t,n,r){return D[S]=r,k&&(D[k]=n),t(e,D)}function c(t){var e;if(d)if(M&&Pn(t)){e=new Mt([]);for(var n=0;n<t.length;n++)e.put(u(M,null,t[n]),!0)}else e=new Mt(t);else M&&(t=u(M,null,t));return function(n,r){var i;return i=M?M:A?A:O,d?v(e.remove(u(i,n,r))):t===u(i,n,r)}}function l(){w||(e.$$postDigest(h),w=!0)}function f(t,e,n){t[e]=t[e]||0,t[e]+=n?1:-1}function h(){w=!1;var t,n,r,i,l,h={"":[]},p=[""];r=s.$viewValue,i=T(e)||[];var g,S,C,A,O=k?Object.keys(i).sort():i,j={};l=c(r);var P,R,I=!1;for(V={},A=0;C=O.length,C>A;A++)g=A,k&&(g=O[A],"$"===g.charAt(0))||(S=i[g],t=u(E,g,S)||"",(n=h[t])||(n=h[t]=[],p.push(t)),t=l(g,S),I=I||t,S=u(m,g,S),S=v(S)?S:"",R=M?M(e,D):k?O[A]:A,M&&(V[R]=g),n.push({id:R,label:S,selected:t}));for(d||(y||null===r?h[""].unshift({id:"",label:"",selected:!I}):I||h[""].unshift({id:"?",label:"",selected:!0})),g=0,O=p.length;O>g;g++){for(t=p[g],n=h[t],N.length<=g?(r={element:x.clone().attr("label",t),label:n.label},i=[r],N.push(i),a.append(r.element)):(i=N[g],r=i[0],r.label!=t&&r.element.attr("label",r.label=t)),I=null,A=0,C=n.length;C>A;A++)t=n[A],(l=i[A+1])?(I=l.element,l.label!==t.label&&(f(j,l.label,!1),f(j,t.label,!0),I.text(l.label=t.label),I.prop("label",l.label)),l.id!==t.id&&I.val(l.id=t.id),I[0].selected!==t.selected&&(I.prop("selected",l.selected=t.selected),yn&&I.prop("selected",l.selected))):(""===t.id&&y?P=y:(P=b.clone()).val(t.id).prop("selected",t.selected).attr("selected",t.selected).prop("label",t.label).text(t.label),i.push(l={element:P,label:t.label,id:t.id,selected:t.selected}),f(j,t.label,!0),I?I.after(P):r.element.append(P),I=P);for(A++;i.length>A;)t=i.pop(),f(j,t.label,!1),t.element.remove()}for(;N.length>g;){for(n=N.pop(),A=1;A<n.length;++A)f(j,n[A].label,!1);n[0].element.remove()}o(j,function(t,e){t>0?$.addOption(e):0>t&&$.removeOption(e)})}var p;if(!(p=g.match(i)))throw Zi("iexp",g,U(a));var m=r(p[2]||p[1]),S=p[4]||p[6],C=/ as /.test(p[0])&&p[1],A=C?r(C):null,k=p[5],E=r(p[3]||""),O=r(p[2]?p[1]:S),T=r(p[7]),M=p[8]?r(p[8]):null,V={},N=[[{element:a,label:""}]],D={};y&&(t(y)(e),y.removeClass("ng-scope"),y.remove()),a.empty(),a.on("change",function(){e.$apply(function(){var t,r=T(e)||[];if(d)t=[],o(a.val(),function(e){e=M?V[e]:e,t.push("?"===e?n:""===e?null:u(A?A:O,e,r[e]))});else{var i=M?V[a.val()]:a.val();t="?"===i?n:""===i?null:u(A?A:O,i,r[i])}s.$setViewValue(t),h()})}),s.$render=h,e.$watchCollection(T,l),e.$watchCollection(function(){var t,n=T(e);if(n&&Pn(n)){t=Array(n.length);for(var r=0,i=n.length;i>r;r++)t[r]=u(m,r,n[r])}else if(n)for(r in t={},n)n.hasOwnProperty(r)&&(t[r]=u(m,r,n[r]));return t},l),d&&e.$watchCollection(function(){return s.$modelValue},l)}if(c[1]){var $=c[0];c=c[1];var p,d=u.multiple,g=u.ngOptions,y=!1,w=!1,b=wn(e.createElement("option")),x=wn(e.createElement("optgroup")),S=b.clone();u=0;for(var C=s.children(),A=C.length;A>u;u++)if(""===C[u].value){p=y=C.eq(u);break}$.init(c,y,S),d&&(c.$isEmpty=function(t){return!t||0===t.length}),g?h(a,s,c):d?f(a,s,c):l(a,s,c,$)}}}}],Qi=["$interpolate",function(t){var e={addOption:$,removeOption:$};return{restrict:"E",priority:100,compile:function(n,r){if(m(r.value)){var i=t(n.text(),!0);i||r.$set("value",n.text())}return function(t,n,r){var o=n.parent(),a=o.data("$selectController")||o.parent().data("$selectController");a&&a.databound||(a=e),i?t.$watch(i,function(t,e){r.$set("value",t),e!==t&&a.removeOption(e),a.addOption(t,n)}):a.addOption(r.value,n),n.on("$destroy",function(){a.removeOption(r.value)})}}}}],to=d({restrict:"E",terminal:!1}),eo=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){r&&(n.required=!0,r.$validators.required=function(t,e){return!n.required||!r.$isEmpty(e)},n.$observe("required",function(){r.$validate()}))}}},no=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,i,o){if(o){var a,s=i.ngPattern||i.pattern;i.$observe("pattern",function(t){if(y(t)&&0<t.length&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw r("ngPattern")("noregexp",s,t,U(e));a=t||n,o.$validate()}),o.$validators.pattern=function(t){return o.$isEmpty(t)||m(a)||a.test(t)}}}}},ro=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=-1;n.$observe("maxlength",function(t){t=f(t),i=isNaN(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(t,e){return 0>i||r.$isEmpty(e)||e.length<=i}}}}},io=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,r){if(r){var i=0;n.$observe("minlength",function(t){i=f(t)||0,r.$validate()}),r.$validators.minlength=function(t,e){return r.$isEmpty(e)||e.length>=i}}}}};t.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(K(),ot(Nn),wn(e).ready(function(){G(e,W)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>');
!function(e,t,r){"use strict";function n(e){var r=[];return l(r,t.noop).chars(e),r.join("")}function a(e,r){var n,a={},i=e.split(",");for(n=0;n<i.length;n++)a[r?t.lowercase(i[n]):i[n]]=!0;return a}function i(e,r){function n(e,n,i,o){if(n=t.lowercase(n),w[n])for(;b.last()&&z[b.last()];)a("",b.last());v[n]&&b.last()==n&&a("",n),(o=y[n]||!!o)||b.push(n);var l={};i.replace(h,function(e,t,r,n,a){l[t]=s(r||n||a||"")}),r.start&&r.start(n,l,o)}function a(e,n){var a,i=0;if(n=t.lowercase(n))for(i=b.length-1;i>=0&&b[i]!=n;i--);if(i>=0){for(a=b.length-1;a>=i;a--)r.end&&r.end(b[a]);b.length=i}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var i,o,l,b=[],k=e;for(b.last=function(){return b[b.length-1]};e;){if(l="",o=!0,b.last()&&$[b.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+b.last()+"[^>]*>","i"),function(e,t){return t=t.replace(f,"$1").replace(x,"$1"),r.chars&&r.chars(s(t)),""}),a("",b.last())):(0===e.indexOf("<!--")?(i=e.indexOf("--",4),i>=0&&e.lastIndexOf("-->",i)===i&&(r.comment&&r.comment(e.substring(4,i)),e=e.substring(i+3),o=!1)):m.test(e)?(i=e.match(m))&&(e=e.replace(i[0],""),o=!1):g.test(e)?(i=e.match(p))&&(e=e.substring(i[0].length),i[0].replace(p,a),o=!1):d.test(e)&&((i=e.match(u))?(i[4]&&(e=e.substring(i[0].length),i[0].replace(u,n)),o=!1):(l+="<",e=e.substring(1))),o&&(i=e.indexOf("<"),l+=0>i?e:e.substring(0,i),e=0>i?"":e.substring(i),r.chars&&r.chars(s(l)))),e==k)throw c("badparse",e);k=e}a()}function s(e){return e?(E.innerHTML=e.replace(/</g,"&lt;"),E.textContent):""}function o(e){return e.replace(/&/g,"&amp;").replace(b,function(e){var t=e.charCodeAt(0);return e=e.charCodeAt(1),"&#"+(1024*(t-55296)+(e-56320)+65536)+";"}).replace(k,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(e,r){var n=!1,a=t.bind(e,e.push);return{start:function(e,i,s){e=t.lowercase(e),!n&&$[e]&&(n=e),n||!0!==A[e]||(a("<"),a(e),t.forEach(i,function(n,i){var s=t.lowercase(i),l="img"===e&&"src"===s||"background"===s;!0!==D[s]||!0===C[s]&&!r(n,l)||(a(" "),a(i),a('="'),a(o(n)),a('"'))}),a(s?"/>":">"))},end:function(e){e=t.lowercase(e),n||!0!==A[e]||(a("</"),a(e),a(">")),e==n&&(n=!1)},chars:function(e){n||a(o(e))}}}var c=t.$$minErr("$sanitize"),u=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,p=/^<\/\s*([\w:-]+)[^>]*>/,h=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,d=/^</,g=/^<\//,f=/\x3c!--(.*?)--\x3e/g,m=/<!DOCTYPE([^>]*?)>/i,x=/<!\[CDATA\[(.*?)]]\x3e/g,b=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,k=/([^\#-~| |!])/g,y=a("area,br,col,hr,img,wbr");e=a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),r=a("rp,rt");var v=t.extend({},r,e),w=t.extend({},e,a("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),z=t.extend({},r,a("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));e=a("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use");var $=a("script,style"),A=t.extend({},y,w,z,v,e),C=a("background,cite,href,longdesc,src,usemap,xlink:href");e=a("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),r=a("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0);var D=t.extend({},C,r,e),E=document.createElement("pre");t.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(e){return function(t){var r=[];return i(t,l(r,function(t,r){return!/^unsafe/.test(e(t,r))})),r.join("")}}]}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var r=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,a=/^mailto:/i;return function(i,s){function o(e){e&&d.push(n(e))}function l(e,r){d.push("<a "),t.isDefined(s)&&d.push('target="',s,'" '),d.push('href="',e.replace(/"/g,"&quot;"),'">'),o(r),d.push("</a>")}if(!i)return i;for(var c,u,p,h=i,d=[];c=h.match(r);)u=c[0],c[2]||c[4]||(u=(c[3]?"http://":"mailto:")+u),p=c.index,o(h.substr(0,p)),l(u,c[0].replace(a,"")),h=h.substring(p+c[0].length);return o(h),e(d.join(""))}}])}(window,window.angular);
function uiUploader(e){"use strict";function t(e){for(var t=0;t<e.length;t++)l.files.push(e[t])}function n(){return l.files}function i(e){l.options=e;for(var t=0;t<l.files.length&&l.activeUploads!=l.options.concurrency;t++)l.files[t].active||a(l.files[t],l.options.url)}function r(e){l.files.splice(l.files.indexOf(e),1)}function o(){l.files.splice(0,l.files.length)}function u(e){var t=["n/a","bytes","KiB","MiB","GiB","TB","PB","EiB","ZiB","YiB"],n=+Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,n)).toFixed(n?1:0)+" "+t[isNaN(e)?0:n+1]}function a(e,t){var n,r,o,a="",s="file";if(l.activeUploads+=1,e.active=!0,n=new window.XMLHttpRequest,r=new window.FormData,n.open("POST",t),n.upload.onloadstart=function(){},n.upload.onprogress=function(t){t.lengthComputable&&(e.loaded=t.loaded,e.humanSize=u(t.loaded),l.options.onProgress(e))},n.onload=function(){l.activeUploads-=1,i(l.options),l.options.onCompleted(e,n.responseText)},n.onerror=function(){},a)for(o in a)a.hasOwnProperty(o)&&r.append(o,a[o]);return r.append(s,e,e.name),n.send(r),n}var l=this;return l.files=[],l.options={},l.activeUploads=0,e.info("uiUploader loaded"),{addFiles:t,getFiles:n,files:l.files,startUpload:i,removeFile:r,removeAll:o}}angular.module("ui.alias",[]).config(["$compileProvider","uiAliasConfig",function(e,t){"use strict";t=t||{},angular.forEach(t,function(t,n){angular.isString(t)&&(t={replace:!0,template:t}),e.directive(n,function(){return t})})}]),angular.module("ui.event",[]).directive("uiEvent",["$parse",function(e){"use strict";return function(t,n,i){var r=t.$eval(i.uiEvent);angular.forEach(r,function(i,r){var o=e(i);n.bind(r,function(e){var n=Array.prototype.slice.call(arguments);n=n.splice(1),o(t,{$event:e,$params:n}),t.$$phase||t.$apply()})})}}]),angular.module("ui.format",[]).filter("format",function(){"use strict";return function(e,t){var n=e;if(angular.isString(n)&&void 0!==t)if(angular.isArray(t)||angular.isObject(t)||(t=[t]),angular.isArray(t)){var i=t.length,r=function(e,n){return n=parseInt(n,10),n>=0&&i>n?t[n]:e};n=n.replace(/\$([0-9]+)/g,r)}else angular.forEach(t,function(e,t){n=n.split(":"+t).join(e)});return n}}),angular.module("ui.highlight",[]).filter("highlight",function(){"use strict";return function(e,t,n){return e&&(t||angular.isNumber(t))?(e=e.toString(),t=t.toString(),n?e.split(t).join('<span class="ui-match">'+t+"</span>"):e.replace(new RegExp(t,"gi"),'<span class="ui-match">$&</span>')):e}}),angular.module("ui.include",[]).directive("uiInclude",["$http","$templateCache","$anchorScroll","$compile",function(e,t,n,i){"use strict";return{restrict:"ECA",terminal:!0,compile:function(r,o){var u=o.uiInclude||o.src,a=o.fragment||"",l=o.onload||"",s=o.autoscroll;return function(r,o){function c(){var c=++d,g=r.$eval(u),h=r.$eval(a);g?e.get(g,{cache:t}).success(function(e){if(c===d){f&&f.$destroy(),f=r.$new();var t;t=h?angular.element("<div/>").html(e).find(h):angular.element("<div/>").html(e).contents(),o.html(t),i(t)(f),!angular.isDefined(s)||s&&!r.$eval(s)||n(),f.$emit("$includeContentLoaded"),r.$eval(l)}}).error(function(){c===d&&p()}):p()}var f,d=0,p=function(){f&&(f.$destroy(),f=null),o.html("")};r.$watch(a,c),r.$watch(u,c)}}}}]),angular.module("ui.indeterminate",[]).directive("uiIndeterminate",[function(){"use strict";return{compile:function(e,t){return t.type&&"checkbox"===t.type.toLowerCase()?function(e,t,n){e.$watch(n.uiIndeterminate,function(e){t[0].indeterminate=!!e})}:angular.noop}}}]),angular.module("ui.inflector",[]).filter("inflector",function(){"use strict";function e(e){return e=e.replace(/([A-Z])|([\-|\_])/g,function(e,t){return" "+(t||"")}),e.replace(/\s\s+/g," ").trim().toLowerCase().split(" ")}function t(e){var t=[];return angular.forEach(e,function(e){t.push(e.charAt(0).toUpperCase()+e.substr(1))}),t}var n={humanize:function(n){return t(e(n)).join(" ")},underscore:function(t){return e(t).join("_")},variable:function(n){return n=e(n),n=n[0]+t(n.slice(1)).join("")}};return function(e,t){return t!==!1&&angular.isString(e)?(t=t||"humanize",n[t](e)):e}}),angular.module("ui.jq",[]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","$timeout",function(e,t){"use strict";return{restrict:"A",compile:function(n,i){if(!angular.isFunction(n[i.uiJq]))throw new Error('ui-jq: The "'+i.uiJq+'" function does not exist');var r=e&&e[i.uiJq];return function(e,n,i){function o(){var t=[];return i.uiOptions?(t=e.$eval("["+i.uiOptions+"]"),angular.isObject(r)&&angular.isObject(t[0])&&(t[0]=angular.extend({},r,t[0]))):r&&(t=[r]),t}function u(){t(function(){n[i.uiJq].apply(n,o())},0,!1)}i.ngModel&&n.is("select,input,textarea")&&n.bind("change",function(){n.trigger("input")}),i.uiRefresh&&e.$watch(i.uiRefresh,function(){u()}),u()}}}}]),angular.module("ui.keypress",[]).factory("keypressHelper",["$parse",function(e){"use strict";var t={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},n=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return function(i,r,o,u){var a,l=[];a=r.$eval(u["ui"+n(i)]),angular.forEach(a,function(t,n){var i,r;r=e(t),angular.forEach(n.split(" "),function(e){i={expression:r,keys:{}},angular.forEach(e.split("-"),function(e){i.keys[e]=!0}),l.push(i)})}),o.bind(i,function(e){var n=!(!e.metaKey||e.ctrlKey),o=!!e.altKey,u=!!e.ctrlKey,a=!!e.shiftKey,s=e.keyCode;"keypress"===i&&!a&&s>=97&&122>=s&&(s-=32),angular.forEach(l,function(i){var l=i.keys[t[s]]||i.keys[s.toString()],c=!!i.keys.meta,f=!!i.keys.alt,d=!!i.keys.ctrl,p=!!i.keys.shift;l&&c===n&&f===o&&d===u&&p===a&&r.$apply(function(){i.expression(r,{$event:e})})})})}}]),angular.module("ui.keypress").directive("uiKeydown",["keypressHelper",function(e){"use strict";return{link:function(t,n,i){e("keydown",t,n,i)}}}]),angular.module("ui.keypress").directive("uiKeypress",["keypressHelper",function(e){"use strict";return{link:function(t,n,i){e("keypress",t,n,i)}}}]),angular.module("ui.keypress").directive("uiKeyup",["keypressHelper",function(e){"use strict";return{link:function(t,n,i){e("keyup",t,n,i)}}}]),angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0}).directive("uiMask",["uiMaskConfig","$parse",function(e,t){"use strict";return{priority:100,require:"ngModel",restrict:"A",compile:function(){var n=e;return function(e,i,r,o){function u(e){return angular.isDefined(e)?(b(e),U?(f(),d(),!0):c()):c()}function a(e){angular.isDefined(e)&&(T=e,U&&k())}function l(e){return U?(A=h(e||""),j=g(A),o.$setValidity("mask",j),j&&A.length?m(A):void 0):e}function s(e){return U?(A=h(e||""),j=g(A),o.$viewValue=A.length?m(A):"",o.$setValidity("mask",j),""===A&&r.required&&o.$setValidity("required",!o.$error.required),j?A:void 0):e}function c(){return U=!1,p(),angular.isDefined(_)?i.attr("placeholder",_):i.removeAttr("placeholder"),angular.isDefined(z)?i.attr("maxlength",z):i.removeAttr("maxlength"),i.val(o.$modelValue),o.$viewValue=o.$modelValue,!1}function f(){A=D=h(o.$viewValue||""),P=q=m(A),j=g(A);var e=j&&A.length?P:"";r.maxlength&&i.attr("maxlength",2*O[O.length-1]),i.attr("placeholder",T),i.val(e),o.$viewValue=e}function d(){B||(i.bind("blur",y),i.bind("mousedown mouseup",w),i.bind("input keyup click focus",k),B=!0)}function p(){B&&(i.unbind("blur",y),i.unbind("mousedown",w),i.unbind("mouseup",w),i.unbind("input",k),i.unbind("keyup",k),i.unbind("click",k),i.unbind("focus",k),B=!1)}function g(e){return e.length?e.length>=R:!0}function h(e){var t="",n=C.slice();return e=e.toString(),angular.forEach(M,function(t){e=e.replace(t,"")}),angular.forEach(e.split(""),function(e){n.length&&n[0].test(e)&&(t+=e,n.shift())}),t}function m(e){var t="",n=O.slice();return angular.forEach(T.split(""),function(i,r){e.length&&r===n[0]?(t+=e.charAt(0)||"_",e=e.substr(1),n.shift()):t+=i}),t}function v(e){var t=r.placeholder;return"undefined"!=typeof t&&t[e]?t[e]:"_"}function $(){return T.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")}function b(e){var t=0;if(O=[],C=[],T="","string"==typeof e){R=0;var n=!1,i=0,r=e.split("");angular.forEach(r,function(e,r){K.maskDefinitions[e]?(O.push(t),T+=v(r-i),C.push(K.maskDefinitions[e]),t++,n||R++):"?"===e?(n=!0,i++):(T+=e,t++)})}O.push(O.slice().pop()+1),M=$(),U=O.length>1?!0:!1}function y(){K.clearOnBlur&&(L=0,F=0,j&&0!==A.length||(P="",i.val(""),e.$apply(function(){o.$setViewValue("")})))}function w(e){"mousedown"===e.type?i.bind("mouseout",x):i.unbind("mouseout",x)}function x(){F=H(this),i.unbind("mouseout",x)}function k(t){t=t||{};var n=t.which,r=t.type;if(16!==n&&91!==n){var u,a=i.val(),l=q,s=h(a),c=D,f=!1,d=E(this)||0,p=L||0,g=d-p,v=O[0],$=O[s.length]||O.slice().shift(),b=F||0,y=H(this)>0,w=b>0,x=a.length>l.length||b&&a.length>l.length-b,k=a.length<l.length||b&&a.length===l.length-b,C=n>=37&&40>=n&&t.shiftKey,T=37===n,M=8===n||"keyup"!==r&&k&&-1===g,R=46===n||"keyup"!==r&&k&&0===g&&!w,A=(T||M||"click"===r)&&d>v;if(F=H(this),!C&&(!y||"click"!==r&&"keyup"!==r)){if("input"===r&&k&&!w&&s===c){for(;M&&d>v&&!S(d);)d--;for(;R&&$>d&&-1===O.indexOf(d);)d++;var P=O.indexOf(d);s=s.substring(0,P)+s.substring(P+1),f=!0}for(u=m(s),q=u,D=s,i.val(u),f&&e.$apply(function(){o.$setViewValue(s)}),x&&v>=d&&(d=v+1),A&&d--,d=d>$?$:v>d?v:d;!S(d)&&d>v&&$>d;)d+=A?-1:1;(A&&$>d||x&&!S(p))&&d++,L=d,V(this,d)}}}function S(e){return O.indexOf(e)>-1}function E(e){if(!e)return 0;if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();return t.moveStart("character",e.value?-e.value.length:0),t.text.length}return 0}function V(e,t){if(!e)return 0;if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}}function H(e){return e?void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var O,C,T,M,R,A,P,j,q,D,L,F,U=!1,B=!1,_=r.placeholder,z=r.maxlength,K={};r.uiOptions?(K=e.$eval("["+r.uiOptions+"]"),angular.isObject(K[0])&&(K=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(void 0===t[n]?t[n]=angular.copy(e[n]):angular.extend(t[n],e[n]));return t}(n,K[0]))):K=n,r.$observe("uiMask",u),r.$observe("placeholder",a);var W=!1;r.$observe("modelViewValue",function(e){"true"===e&&(W=!0)}),e.$watch(r.ngModel,function(n){if(W&&n){var i=t(r.ngModel);i.assign(e,o.$viewValue)}}),o.$formatters.push(l),o.$parsers.push(s),i.bind("mousedown mouseup",w),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>1&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&i!==1/0&&i!==-(1/0)&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var r=i>=0?i:Math.max(n-Math.abs(i),0);n>r;r++)if(r in t&&t[r]===e)return r;return-1})}}}}]),angular.module("ui.reset",[]).value("uiResetConfig",null).directive("uiReset",["uiResetConfig",function(e){"use strict";var t=null;return void 0!==e&&(t=e),{require:"ngModel",link:function(e,n,i,r){var o;o=angular.element('<a class="ui-reset" />'),n.wrap('<span class="ui-resetwrap" />').after(o),o.bind("click",function(n){n.preventDefault(),e.$apply(function(){r.$setViewValue(i.uiReset?e.$eval(i.uiReset):t),r.$render()})})}}}]),angular.module("ui.route",[]).directive("uiRoute",["$location","$parse",function(e,t){"use strict";return{restrict:"AC",scope:!0,compile:function(n,i){var r;if(i.uiRoute)r="uiRoute";else if(i.ngHref)r="ngHref";else{if(!i.href)throw new Error("uiRoute missing a route or href property on "+n[0]);r="href"}return function(n,i,o){function u(t){var i=t.indexOf("#");i>-1&&(t=t.substr(i+1)),(s=function(){l(n,e.path().indexOf(t)>-1)})()}function a(t){var i=t.indexOf("#");i>-1&&(t=t.substr(i+1)),(s=function(){var i=new RegExp("^"+t+"$",["i"]);l(n,i.test(e.path()))})()}var l=t(o.ngModel||o.routeModel||"$uiRoute").assign,s=angular.noop;switch(r){case"uiRoute":o.uiRoute?a(o.uiRoute):o.$observe("uiRoute",a);break;case"ngHref":o.ngHref?u(o.ngHref):o.$observe("ngHref",u);break;case"href":u(o.href)}n.$on("$routeChangeSuccess",function(){s()}),n.$on("$stateChangeSuccess",function(){s()})}}}}]),angular.module("ui.scroll.jqlite",["ui.scroll"]).service("jqLiteExtras",["$log","$window",function(e,t){"use strict";return{registerFor:function(e){var n,i,r,o,u,a,l;return i=angular.element.prototype.css,e.prototype.css=function(e,t){var n,r;return r=this,n=r[0],n&&3!==n.nodeType&&8!==n.nodeType&&n.style?i.call(r,e,t):void 0},a=function(e){return e&&e.document&&e.location&&e.alert&&e.setInterval},l=function(e,t,n){var i,r,o,u,l;return i=e[0],l={top:["scrollTop","pageYOffset","scrollLeft"],left:["scrollLeft","pageXOffset","scrollTop"]}[t],r=l[0],u=l[1],o=l[2],a(i)?angular.isDefined(n)?i.scrollTo(e[o].call(e),n):u in i?i[u]:i.document.documentElement[r]:angular.isDefined(n)?i[r]=n:i[r]},t.getComputedStyle?(o=function(e){return t.getComputedStyle(e,null)},n=function(e,t){return parseFloat(t)}):(o=function(e){return e.currentStyle},n=function(e,t){var n,i,r,o,u,a,l;return n=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,o=new RegExp("^("+n+")(?!px)[a-z%]+$","i"),o.test(t)?(l=e.style,i=l.left,u=e.runtimeStyle,a=u&&u.left,u&&(u.left=l.left),l.left=t,r=l.pixelLeft,l.left=i,a&&(u.left=a),r):parseFloat(t)}),r=function(e,t){var i,r,u,l,s,c,f,d,p,g,h,m,v;return a(e)?(i=document.documentElement[{height:"clientHeight",width:"clientWidth"}[t]],{base:i,padding:0,border:0,margin:0}):(v={width:[e.offsetWidth,"Left","Right"],height:[e.offsetHeight,"Top","Bottom"]}[t],i=v[0],f=v[1],d=v[2],c=o(e),h=n(e,c["padding"+f])||0,m=n(e,c["padding"+d])||0,r=n(e,c["border"+f+"Width"])||0,u=n(e,c["border"+d+"Width"])||0,l=c["margin"+f],s=c["margin"+d],p=n(e,l)||0,g=n(e,s)||0,{base:i,padding:h+m,border:r+u,margin:p+g})},u=function(e,t,n){var i,u,a;return u=r(e,t),u.base>0?{base:u.base-u.padding-u.border,outer:u.base,outerfull:u.base+u.margin}[n]:(i=o(e),a=i[t],(0>a||null===a)&&(a=e.style[t]||0),a=parseFloat(a)||0,{base:a-u.padding-u.border,outer:a,outerfull:a+u.padding+u.border+u.margin}[n])},angular.forEach({before:function(e){var t,n,i,r,o,u,a;if(o=this,n=o[0],r=o.parent(),t=r.contents(),t[0]===n)return r.prepend(e);for(i=u=1,a=t.length-1;a>=1?a>=u:u>=a;i=a>=1?++u:--u)if(t[i]===n)return void angular.element(t[i-1]).after(e);throw new Error("invalid DOM structure "+n.outerHTML)},height:function(e){var t;return t=this,angular.isDefined(e)?(angular.isNumber(e)&&(e+="px"),i.call(t,"height",e)):u(this[0],"height","base")},outerHeight:function(e){return u(this[0],"height",e?"outerfull":"outer")},offset:function(e){var t,n,i,r,o,u;if(o=this,arguments.length){if(void 0===e)return o;throw new Error("offset setter method is not implemented")}return t={top:0,left:0},r=o[0],(n=r&&r.ownerDocument)?(i=n.documentElement,null!=r.getBoundingClientRect&&(t=r.getBoundingClientRect()),u=n.defaultView||n.parentWindow,{top:t.top+(u.pageYOffset||i.scrollTop)-(i.clientTop||0),left:t.left+(u.pageXOffset||i.scrollLeft)-(i.clientLeft||0)}):void 0},scrollTop:function(e){return l(this,"top",e)},scrollLeft:function(e){return l(this,"left",e)}},function(t,n){return e.prototype[n]?void 0:e.prototype[n]=t})}}}]).run(["$log","$window","jqLiteExtras",function(e,t,n){"use strict";return t.jQuery?void 0:n.registerFor(angular.element)}]),angular.module("ui.scroll",[]).directive("uiScrollViewport",["$log",function(){"use strict";return{controller:["$scope","$element",function(e,t){return this.viewport=t,this}]}}]).directive("uiScroll",["$log","$injector","$rootScope","$timeout",function(e,t,n,i){"use strict";return{require:["?^uiScrollViewport"],transclude:"element",priority:1e3,terminal:!0,compile:function(r,o,u){return function(r,o,a,l){var s,c,f,d,p,g,h,m,v,$,b,y,w,x,k,S,E,V,H,O,C,T,M,R,A,P,j,q,D,L,F,U,B,_,z,K,W,I,J,N,Y,Z,X,G,Q,ee,te,ne,ie;if(U=e.debug||e.log,B=a.uiScroll.match(/^\s*(\w+)\s+in\s+([\w\.]+)\s*$/),!B)throw new Error("Expected uiScroll in form of '_item_ in _datasource_' but got '"+a.uiScroll+"'");if(L=B[1],k=B[2],P=function(e,t){var n;return e?(n=t.match(/^([\w]+)\.(.+)$/),n&&3===n.length?P(e[n[1]],n[2]):e[t]):void 0},Y=function(e,t,n,i){var r;return e&&t&&((r=t.match(/^([\w]+)\.(.+)$/))||-1===t.indexOf("."))?r&&3===r.length?(angular.isObject(e[r[1]])||i||(e[r[1]]={}),Y(e[r[1]],r[2],n,i)):e[t]=angular.isObject(e[t])||i?n:n:void 0},x=P(r,k),D=function(){return angular.isObject(x)&&"function"==typeof x.get},!D()&&(x=t.get(k),!D()))throw new Error(""+k+" is not a valid datasource");return $=Math.max(3,+a.bufferSize||10),v=function(){return te.outerHeight()*Math.max(.1,+a.padding||.1)},N=function(e){var t;return null!=(t=e[0].scrollHeight)?t:e[0].document.documentElement.scrollHeight},b=null,u(r.$new(),function(e){var t,n,i,u,a,s;if(u=e[0].localName,"dl"===u)throw new Error("ui-scroll directive does not support <"+e[0].localName+"> as a repeating tag: "+e[0].outerHTML);return"li"!==u&&"tr"!==u&&(u="div"),s=l[0]&&l[0].viewport?l[0].viewport:angular.element(window),s.css({"overflow-y":"auto",display:"block"}),i=function(e){var t,n,i;switch(e){case"tr":return i=angular.element("<table><tr><td><div></div></td></tr></table>"),t=i.find("div"),n=i.find("tr"),n.paddingHeight=function(){return t.height.apply(t,arguments)},n;default:return n=angular.element("<"+e+"></"+e+">"),n.paddingHeight=n.height,n}},n=function(e,t,n){return t[{top:"before",bottom:"after"}[n]](e),{paddingHeight:function(){return e.paddingHeight.apply(e,arguments)},insert:function(t){return e[{top:"after",bottom:"before"}[n]](t)}}},a=n(i(u),o,"top"),t=n(i(u),o,"bottom"),r.$on("$destroy",e.remove),b={viewport:s,topPadding:a.paddingHeight,bottomPadding:t.paddingHeight,append:t.insert,prepend:a.insert,bottomDataPos:function(){return N(s)-t.paddingHeight()},topDataPos:function(){return a.paddingHeight()}}}),te=b.viewport,ne=te.scope()||n,Q=function(e){return s.topVisible=e.scope[L],s.topVisibleElement=e.element,s.topVisibleScope=e.scope,a.topVisible&&Y(ne,a.topVisible,s.topVisible),a.topVisibleElement&&Y(ne,a.topVisibleElement,s.topVisibleElement),a.topVisibleScope&&Y(ne,a.topVisibleScope,s.topVisibleScope),"function"==typeof x.topVisible?x.topVisible(e):void 0},F=function(e){return s.isLoading=e,a.isLoading&&Y(r,a.isLoading,e),"function"==typeof x.loading?x.loading(e):void 0},J=0,A=1,_=1,m=[],z=[],C=!1,g=!1,W=function(e,t){var n,i;for(n=i=e;t>=e?t>i:i>t;n=t>=e?++i:--i)m[n].scope.$destroy(),m[n].element.remove();return m.splice(e,t-e)},K=function(){return J++,A=1,_=1,W(0,m.length),b.topPadding(0),b.bottomPadding(0),z=[],C=!1,g=!1,f(J)},h=function(){return te.scrollTop()+te.outerHeight()},ee=function(){return te.scrollTop()},Z=function(){return!C&&b.bottomDataPos()<h()+v()},y=function(){var e,t,n,i,r,o,u,a,l,s;for(e=0,u=0,t=l=s=m.length-1;0>=s?0>=l:l>=0;t=0>=s?++l:--l)if(n=m[t],r=n.element.offset().top,o=a!==r,a=r,o&&(i=n.element.outerHeight(!0)),b.bottomDataPos()-e-i>h()+v())o&&(e+=i),u++,C=!1;else{if(o)break;u++}return u>0?(b.bottomPadding(b.bottomPadding()+e),W(m.length-u,m.length),_-=u):void 0},X=function(){return!g&&b.topDataPos()>ee()-v()},w=function(){var e,t,n,i,r,o,u,a,l;for(u=0,r=0,a=0,l=m.length;l>a;a++)if(e=m[a],n=e.element.offset().top,i=o!==n,o=n,i&&(t=e.element.outerHeight(!0)),b.topDataPos()+u+t<ee()-v())i&&(u+=t),r++,g=!1;else{if(i)break;r++}return r>0?(b.topPadding(b.topPadding()+u),W(0,r),A+=r):void 0},O=function(e,t){return s.isLoading||F(!0),1===z.push(t)?M(e):void 0},j=function(e){return e.displayTemp=e.css("display"),e.css("display","none")},G=function(e){return e.hasOwnProperty("displayTemp")?e.css("display",e.displayTemp):void 0},q=function(e,t){var n,i,o;return n=r.$new(),n[L]=t,i=e>A,n.$index=e,i&&n.$index--,o={scope:n},u(n,function(t){return o.element=t,i?e===_?(j(t),b.append(t),m.push(o)):(m[e-A].element.after(t),m.splice(e-A+1,0,o)):(j(t),b.prepend(t),m.unshift(o))}),{appended:i,wrapper:o}},d=function(e,t){var n;return e?b.bottomPadding(Math.max(0,b.bottomPadding()-t.element.outerHeight(!0))):(n=b.topPadding()-t.element.outerHeight(!0),n>=0?b.topPadding(n):te.scrollTop(te.scrollTop()+t.element.outerHeight(!0)))},S=function(e,t){var n,i,r,o,u,a,l,s,c;if(Z()?O(e,!0):X()&&O(e,!1),t&&t(e),0===z.length){for(a=0,c=[],l=0,s=m.length;s>l;l++){if(n=m[l],r=n.element.offset().top,o=u!==r,u=r,o&&(i=n.element.outerHeight(!0)),!(o&&b.topDataPos()+a+i<ee())){o&&Q(n);break}c.push(a+=i)}return c}},f=function(e,t,n){return t&&t.length?i(function(){var i,r,o,u,a,l,s,c,f;for(a=[],l=0,c=t.length;c>l;l++)o=t[l],i=o.wrapper.element,G(i),r=i.offset().top,u!==r&&(a.push(o),u=r);for(s=0,f=a.length;f>s;s++)o=a[s],d(o.appended,o.wrapper);return S(e,n)}):S(e,n)},R=function(e,t){return f(e,t,function(){return z.shift(),0===z.length?F(!1):M(e)})},M=function(e){var t;return t=z[0],t?m.length&&!Z()?R(e):x.get(_,$,function(t){var n,i,o,u;if(!(e&&e!==J||r.$$destroyed)){if(i=[],t.length<$&&(C=!0,b.bottomPadding(0)),t.length>0)for(w(),o=0,u=t.length;u>o;o++)n=t[o],i.push(q(++_,n));return R(e,i)}}):m.length&&!X()?R(e):x.get(A-$,$,function(t){var n,i,o,u;if(!(e&&e!==J||r.$$destroyed)){if(i=[],t.length<$&&(g=!0,b.topPadding(0)),t.length>0)for(m.length&&y(),n=o=u=t.length-1;0>=u?0>=o:o>=0;n=0>=u?++o:--o)i.unshift(q(--A,t[n]));return R(e,i)}})},I=function(){return n.$$phase||s.isLoading?void 0:(f(),r.$apply())},ie=function(e){var t,n;return t=te[0].scrollTop,n=te[0].scrollHeight-te[0].clientHeight,0===t&&!g||t===n&&!C?e.preventDefault():void 0},te.bind("resize",I),te.bind("scroll",I),te.bind("mousewheel",ie),r.$watch(x.revision,K),T=x.scope?x.scope.$new():r.$new(),r.$on("$destroy",function(){var e,t,n;for(t=0,n=m.length;n>t;t++)e=m[t],e.scope.$destroy(),e.element.remove();return te.unbind("resize",I),te.unbind("scroll",I),te.unbind("mousewheel",ie)}),s={},s.isLoading=!1,p=function(e,t){var n,i,r,o,u,a,l,s,c,f,d,p;if(i=[],angular.isArray(t))if(t.length){if(1===t.length&&t[0]===e.scope[L])return i;for(o=e.scope.$index,a=o>A?o-A:1,n=l=0,f=t.length;f>l;n=++l)u=t[n],i.push(q(o+n,u));for(W(a,a+1),n=s=0,d=m.length;d>s;n=++s)r=m[n],r.scope.$index=A+n}else for(W(e.scope.$index-A,e.scope.$index-A+1),_--,n=c=0,p=m.length;p>c;n=++c)r=m[n],r.scope.$index=A+n;return i},s.applyUpdates=function(e,t){var n,i,r,o,u,a;if(n=[],J++,angular.isFunction(e))for(u=m.slice(0),r=0,o=u.length;o>r;r++)i=u[r],n.concat(n,p(i,e(i.scope[L],i.scope,i.element)));else{if(e%1!==0)throw new Error("applyUpdates - "+e+" is not a valid index or outside of range");0<=(a=e-A-1)&&a<m.length&&(n=p(m[e-A],t))}return f(J,n)},a.adapter&&(c=P(r,a.adapter),c||(Y(r,a.adapter,{}),c=P(r,a.adapter)),angular.extend(c,s),s=c),H=function(e,t){var n,i,r,o,u;if(angular.isFunction(e))for(i=function(t){return e(t.scope)},r=0,o=m.length;o>r;r++)n=m[r],i(n);else 0<=(u=e-A-1)&&u<m.length&&(m[e-A-1].scope[L]=t);return null},E=function(e){var t,n,i,r,o,u,a,l,s,c,d,p;if(angular.isFunction(e)){for(i=[],u=0,s=m.length;s>u;u++)n=m[u],i.unshift(n);for(o=function(n){return e(n.scope)?(W(i.length-1-t,i.length-t),_--):void 0},t=a=0,c=i.length;c>a;t=++a)r=i[t],o(r)}else 0<=(p=e-A-1)&&p<m.length&&(W(e-A-1,e-A),_--);for(t=l=0,d=m.length;d>l;t=++l)n=m[t],n.scope.$index=A+t;return f()},V=function(e,t){var n,i,r,o,u;if(i=[],angular.isFunction(e))throw new Error("not implemented - Insert with locator function");for(0<=(u=e-A-1)&&u<m.length&&(i.push(q(e,t)),_++),n=r=0,o=m.length;o>r;n=++r)t=m[n],t.scope.$index=A+n;return f(null,i)},T.$on("insert.item",function(e,t,n){return V(t,n)}),T.$on("update.items",function(e,t,n){return H(t,n)}),T.$on("delete.items",function(e,t){return E(t)})}}}}]),angular.module("ui.scrollfix",[]).directive("uiScrollfix",["$window",function(e){"use strict";function t(){if(angular.isDefined(e.pageYOffset))return e.pageYOffset;var t=document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body;return t.scrollTop}return{require:"^?uiScrollfixTarget",link:function(n,i,r,o){function u(){var e=l?r.uiScrollfix:i[0].offsetTop+s,n=o?c[0].scrollTop:t();!i.hasClass("ui-scrollfix")&&n>e?(i.addClass("ui-scrollfix"),a=e):i.hasClass("ui-scrollfix")&&a>n&&i.removeClass("ui-scrollfix")}var a,l=!0,s=0,c=o&&o.$element||angular.element(e);r.uiScrollfix?"string"==typeof r.uiScrollfix&&("-"===r.uiScrollfix.charAt(0)?(l=!1,s=-parseFloat(r.uiScrollfix.substr(1))):"+"===r.uiScrollfix.charAt(0)&&(l=!1,s=parseFloat(r.uiScrollfix.substr(1)))):l=!1,a=l?r.uiScrollfix:i[0].offsetTop+s,c.on("scroll",u),n.$on("$destroy",function(){c.off("scroll",u)})}}}]).directive("uiScrollfixTarget",[function(){"use strict";return{controller:["$element",function(e){this.$element=e}]}}]),angular.module("ui.showhide",[]).directive("uiShow",[function(){"use strict";return function(e,t,n){e.$watch(n.uiShow,function(e){e?t.addClass("ui-show"):t.removeClass("ui-show")})}}]).directive("uiHide",[function(){"use strict";return function(e,t,n){e.$watch(n.uiHide,function(e){e?t.addClass("ui-hide"):t.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){"use strict";return function(e,t,n){e.$watch(n.uiToggle,function(e){e?t.removeClass("ui-hide").addClass("ui-show"):t.removeClass("ui-show").addClass("ui-hide")})}}]),angular.module("ui.unique",[]).filter("unique",["$parse",function(e){"use strict";return function(t,n){if(n===!1)return t;if((n||angular.isUndefined(n))&&angular.isArray(t)){var i=[],r=angular.isString(n)?e(n):function(e){return e},o=function(e){return angular.isObject(e)?r(e):e};angular.forEach(t,function(e){for(var t=!1,n=0;n<i.length;n++)if(angular.equals(o(i[n]),o(e))){t=!0;break}t||i.push(e)}),t=i}return t}}]),angular.module("ui.uploader",[]).service("uiUploader",uiUploader),uiUploader.$inject=["$log"],angular.module("ui.validate",[]).directive("uiValidate",function(){"use strict";return{restrict:"A",require:"ngModel",link:function(e,t,n,i){function r(t){return angular.isString(t)?void e.$watch(t,function(){angular.forEach(u,function(e){e(i.$modelValue)})}):angular.isArray(t)?void angular.forEach(t,function(t){e.$watch(t,function(){angular.forEach(u,function(e){e(i.$modelValue)})})}):void(angular.isObject(t)&&angular.forEach(t,function(t,n){angular.isString(t)&&e.$watch(t,function(){u[n](i.$modelValue)}),angular.isArray(t)&&angular.forEach(t,function(t){e.$watch(t,function(){u[n](i.$modelValue)})})}))}var o,u={},a=e.$eval(n.uiValidate);a&&(angular.isString(a)&&(a={validator:a}),angular.forEach(a,function(t,n){o=function(r){var o=e.$eval(t,{$value:r});return angular.isObject(o)&&angular.isFunction(o.then)?(o.then(function(){i.$setValidity(n,!0)},function(){i.$setValidity(n,!1)}),r):o?(i.$setValidity(n,!0),r):(i.$setValidity(n,!1),r)},u[n]=o,i.$formatters.push(o),i.$parsers.push(o)}),n.uiValidateWatch&&r(e.$eval(n.uiValidateWatch)))}}}),angular.module("ui.utils",["ui.event","ui.format","ui.highlight","ui.include","ui.indeterminate","ui.inflector","ui.jq","ui.keypress","ui.mask","ui.reset","ui.route","ui.scrollfix","ui.scroll","ui.scroll.jqlite","ui.showhide","ui.unique","ui.validate"]);
!function(u,e){"use strict";var i=["ngInclude","ngPluralize","ngView","ngSwitch","uiCurrency","uiCodemirror","uiDate","uiEvent","uiKeypress","uiKeyup","uiKeydown","uiMask","uiMapInfoWindow","uiMapMarker","uiMapPolyline","uiMapPolygon","uiMapRectangle","uiMapCircle","uiMapGroundOverlay","uiModal","uiReset","uiScrollfix","uiSelect2","uiShow","uiHide","uiToggle","uiSortable","uiTinymce"];u.myCustomTags=u.myCustomTags||[],i.push.apply(i,u.myCustomTags);for(var a=function(u){var e=[],i=u.replace(/([A-Z])/g,function(u){return" "+u.toLowerCase()}),a=i.split(" ");if(1===a.length){var r=a[0];e.push(r),e.push("x-"+r),e.push("data-"+r)}else{var n=a[0],o=a.slice(1).join("-");e.push(n+":"+o),e.push(n+"-"+o),e.push("x-"+n+"-"+o),e.push("data-"+n+"-"+o)}return e},r=0,n=i.length;n>r;r++)for(var o=a(i[r]),t=0,l=o.length;l>t;t++){var s=o[t];e.createElement(s)}}(window,document);
!function(e){if("object"==typeof breeze)e(breeze);else if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var n=require("breeze");e(n)}else{if("function"!=typeof define||!define.amd)throw new Error("Can't find breeze");define(["breeze"],e)}}(function(e){"use strict";function n(){function n(n,i){function t(){var i=e.config.initializeAdapterInstance("ajax","angular",!0);i.setHttp(n)}function r(){if(!e.config.setQ)throw new Error("Cannot use the breeze angular service with breeze.version="+e.version);e.config.setQ(i),i.resolve=i.fcall=i.when,e.Q||(e.Q=i)}return t(),r(),e}function i(n,i){return e.config.initializeAdapterInstance("dataService",n,i)}e.config.initializeAdapterInstance("modelLibrary","backingStore",!0),this.breeze=e,this.NamingConvention=e.NamingConvention,this.initializeDataServiceAdapter=i,this.$get=["$http","$q",n]}angular.module("breeze.angular",[],["$provide",function(e){e.provider({breeze:n})}])});
!function(){"use strict";function o(o,t){var r,e=o[t];return r="function"==typeof e?e.call(o):e}angular.module("ng.group",[]).filter("groupBy",function(){function t(o,t){this.items=[o],this._poolGen=t}function r(o){this.groupField=o,this.poolGen=0}var e={};return e.poolFor=function(o,t){var e;if(void 0===o)return new r(t);if(this.hasOwnProperty(o)){if(e=this[o],e.groupField!==t)throw new Error('expected grouping "'+o+'" to group by '+e.groupField+" but asked to group by "+t+" instead!");return e}return this[o]=e=new r(t),e},r.prototype.addItem=function(t){var r,e=o(t,this.groupField);if(this.hasOwnProperty(e)&&(r=this[e]),void 0===r)return r=this.makeGroup(t),r[this.groupField]=e,this[e]=r,r;var n=this.addToGroup(r,t);return n?r:void 0},r.prototype.makeGroup=function(o){return new t(o,this.poolGen)},r.prototype.addToGroup=function(o,r){return o._poolGen<this.poolGen?(t.call(o,r,this.poolGen),!0):(o.items.push(r),!1)},r.prototype.newGen=function(){this.deleteOldGroups(),++this.poolGen},r.prototype.deleteOldGroups=function(){for(var o in this)if(this.hasOwnProperty(o)){var t=this[o];t._poolGen<this.poolGen&&delete this[o]}},function(o,t,r){var n=e.poolFor(r,t),i=[];return angular.forEach(o,function(o){var t=n.addItem(o);t&&i.push(t)}),n.newGen(),i}})}();
var oldClient=OData.defaultHttpClient,cacheMin=5,cacheERM=1440,cacheMetadata=30,metadataKey="metadataKeyCache",hasMetadataKey="hasMetadataInCache";Pd.ODataRequests=null,Pd.ODataRequestTimer=null;var myClient={request:function(e,a,t){if("undefined"!=typeof lscache&&"undefined"!=typeof JSRequest.QueryString.cache&&"undefined"==typeof lscache.flushed&&(lscache.flush(),lscache.flushed=!0),void 0!=Pd.Shared&&Pd.Config.ClientCacheEnabled&&0!=Pd.Utility.GetUrlParameter("clientcache")&&0==/^https?:\/\//i.test(e.requestUri)&&location.href.startsWith(Pd.Config.Urls.WwwUrl)&&(e.requestUri="/clientcache"+e.requestUri,"undefined"!=typeof JSRequest.QueryString.cache&&(e.headers.Cache=JSRequest.QueryString.cache)),-1!==e.requestUri.indexOf("$metadata",e.requestUri.length-"$metadata".length))e.enableJsonpCallback=!1,e.headers.Accept="application/xml";else if("undefined"!=typeof lscache&&""!=e.requestUri&&"undefined"==typeof JSRequest.QueryString.cache){var r=lscache.get(e.requestUri);if(r)return void 0!=Pd.Shared&&(Pd.Utility.SaveODataRequest(e.requestUri,!0),Pd.Utility.RemoveODataRequest(r.requestUri,!0)),a(r),{}}var s=function(t){var r={};for(var s in t.headers)t.headers.hasOwnProperty(s)&&(r[s]=t.headers[s]);if(t.headers=r,"undefined"!=typeof lscache){var d=cacheMin;e.requestUri.indexOf("getByTitle('Entity Mappings')")>-1&&(d=cacheERM),""!=e.requestUri&&lscache.set(e.requestUri,t,d)}void 0!=Pd.Shared&&Pd.Utility.RemoveODataRequest(t.requestUri),a(t);var i=lscache.get(hasMetadataKey);if(!i&&null!=manager.metadataStore&&null!=manager.metadataStore.dataServices&&manager.metadataStore.dataServices.length>0){var n=manager.metadataStore.exportMetadata();n&&(lscache.set(metadataKey,n,cacheMetadata),lscache.set(hasMetadataKey,!0,cacheMetadata))}},d=function(e){try{var a="{0}: {1}".format(e.message,e.request.requestUri),r="";a.length>130?(a=a.substring(0,125)+"...",r="URL: {0}<br>Status: {1} {2}".format(e.request.requestUri,e.response.statusCode,e.response.statusText)):r="Status: {0} {1}".format(e.response.statusCode,e.response.statusText),void 0!=Pd.Shared&&Pd.Shared.LogErrorToStatusDialog(a,r)}catch(s){console.log&&console.log("BreezeInit: unable to show Http Exception to Status Dialog due to unexpected error: "+s.message)}void 0!=t&&t(e)};return void 0!=Pd.Shared&&Pd.Utility.SaveODataRequest(e.requestUri),oldClient.request(e,s,d)}},getMetadataFromCache=function(){var e=lscache.get(hasMetadataKey);if(1==e){var a=lscache.get(metadataKey);if(a)return a}return""};JSRequest.EnsureSetup(),OData.defaultHttpClient=myClient,OData.defaultHttpClient.enableJsonpCallback=!1;var dsAdapter=breeze.config.initializeAdapterInstance("dataService","OData",!0),serviceNameUrl=Pd.Config.Urls.WSUrl,manager={},metadataCached=getMetadataFromCache();if(""!=metadataCached){var metadataCachedObj=new breeze.MetadataStore;metadataCachedObj.importMetadata(metadataCached),manager=new breeze.EntityManager({serviceName:serviceNameUrl,metadataStore:metadataCachedObj})}else manager=new breeze.EntityManager(serviceNameUrl);
function CreateSPBreezeTypeVariables(){smartDataLibraryType=metadataStore.getEntityType("Smart Data Library"),picturesLibraryType=metadataStore.getEntityType("Pictures"),authorsLibraryType=metadataStore.getEntityType("Authors"),sessionImportantAffairsLibraryType=metadataStore.getEntityType("Session Important Affairs"),liveStreamingSpeakersType=metadataStore.getEntityType("LiveStreamingSpeakers")}var breezeSPTypes=[],typeSmartDataLibrary={name:"Smart Data Library",defaultResourceName:"getbytitle('Smart Data Library')/items",dataProperties:{Id:{type:breeze.DataType.Int32},FileLeafRef:{nullable:!1},Title:{nullable:!1},SmartDataSourceType:{nullable:!1},SmartDataSourceCategory:{nullable:!1},SmartTemplateCategory:{nullable:!1},SmartTemplateDataSourceCategory:{nullable:!1},SmartIsSystem:{nullable:!1},ContentTypeId:{nullable:!1}}},typePictures={name:"Pictures",defaultResourceName:"getbytitle('Pictures')/items",dataProperties:{Id:{type:breeze.DataType.Int32},ContentType:{type:breeze.DataType.Int32},FileLeafRef:{nullable:!1},FileRef:{nullable:!1},Caption_de:{nullable:!1},Caption_fr:{nullable:!1},Caption_it:{nullable:!1},Caption_en:{nullable:!1},Title:{nullable:!1},Title_de:{nullable:!1},Title_fr:{nullable:!1},Title_it:{nullable:!1},Title_en:{nullable:!1},MediaCategory:{nullable:!1},Subcategory:{nullable:!1},PictureLink:{nullable:!1},AlbumDate:{nullable:!1},MediaFieldsLanguage:{nullable:!1},ContentTypeId:{nullable:!1},Folder:{nullable:!0}}},typeAuthors={name:"Authors",defaultResourceName:"getbytitle('Authors')/items",dataProperties:{ID:{type:breeze.DataType.Int32},Title:{nullable:!1},Title_en:{nullable:!0},Title_de:{nullable:!0},Title_fr:{nullable:!0},Title_it:{nullable:!0},Title_rm:{nullable:!0},Address_en:{nullable:!0},Address_de:{nullable:!0},Address_fr:{nullable:!0},Address_it:{nullable:!0},Address_rm:{nullable:!0}}},typeSessionImportantAffairs={name:"Session Important Affairs",defaultResourceName:"getbytitle('Session Important Affairs')/items",dataProperties:{ID:{type:breeze.DataType.Int32},SIACouncil:{nullable:!1},SIAAffairShortNumber:{nullable:!1},SIADate:{type:breeze.DataType.DateTime},SIAAffairName_en:{nullable:!0},SIAAffairName_de:{nullable:!0},SIAAffairName_fr:{nullable:!0},SIAAffairName_it:{nullable:!0},SIAAffairName_rm:{nullable:!0}}},typeLiveStreamingSpeakers={name:"LiveStreamingSpeakers",defaultResourceName:"getbytitle('LiveStreamingSpeakers')/items",dataProperties:{Id:{type:breeze.DataType.Int32},FileLeafRef:{nullable:!1},Title:{nullable:!1},Council:{nullable:!1},MemberCouncilId:{nullable:!1},AffairId:{nullable:!1},Modified:{nullable:!1}}};breezeSPTypes.push(typeSmartDataLibrary),breezeSPTypes.push(typePictures),breezeSPTypes.push(typeAuthors),breezeSPTypes.push(typeSessionImportantAffairs),breezeSPTypes.push(typeLiveStreamingSpeakers);var smartDataLibraryType,picturesLibraryType,authorsLibraryType,sessionImportantAffairsLibraryType,liveStreamingSpeakersType;
"use strict";function configureSPBreeze(){var e=breeze.config.initializeAdapterInstance("dataService","SharePointOData",!1);e.getRequestDigest=function(){return jQuery("#__REQUESTDIGEST").val()}}function createSPMetadata(){metadataStore=new breeze.MetadataStore;var e="";metadataHelper=new breeze.config.MetadataHelper(e,breeze.AutoGeneratedKeyType.Identity);for(var a=0;a<breezeSPTypes.length;a++)addSPBreezeType(breezeSPTypes[a])}function initSPBreeze(){CreateSPBreezeTypeVariables();var e=new breeze.DataService({serviceName:"/_api/web/lists/",adapterName:"SharePointOData",hasServerMetadata:!1});spManager=new breeze.EntityManager({dataService:e,metadataStore:metadataStore})}function addDefaultSelect(e){var a=e.custom;if(!a||null==a.defaultSelect){var t=[];return e.dataProperties.forEach(function(e){e.isUnmapped||t.push(e.name)}),t.length&&(a||(e.custom=a={}),a.defaultSelect=t.join(",")),e}}function addSPBreezeType(e){var a=metadataHelper.addTypeToStore(metadataStore,e);return addDefaultSelect(a),a}var spManager,metadataStore,metadataHelper;configureSPBreeze(),createSPMetadata(),initSPBreeze();
var app=angular.module("app",["breeze.angular","ui.utils","ng.group","ngSanitize"]);
var PdCustomJs=jQuery.noConflict();Pd=window.Pd||{};var PdDebugMode="-1",PdVerboseMode="-1",PdEditMode="-1",PdPageLayout="",PdFilename="",PdStatusMessages=[],PdTabletScreenSize=992;
/*** Start ControllerBUS.min.js ***/
"use strict";app.factory("controllerBUS",["$rootScope",function(t){var r={};return r.message="",r.filter={},r.perpForBroadcast=function(t){this.message=t,this.broadcastItem()},r.broadcastItem=function(){t.$broadcast("handleBroadcast")},r.setFilter=function(t){this.filter=t,this.broadcastFilter()},r.broadcastFilter=function(){t.$broadcast("filterChanged")},r.broadcastFilterClear=function(){t.$broadcast("filterClear")},r}]);
/*** End ControllerBUS.min.js ***/
/*** Start affairService.min.js ***/
!function(){app.factory("affairService",function(){"use strict";var e={},r=[],n=[],t=[],i=null,o=[],s="",u=0;e.cosigners=[],e.billLinks=[],e.hasLinks=!1;var a=function(e){if(0==e.length)return void v("ExtendedBusinessRoles");for(var r=0;r<e.length;r++){var n=e[r],t=breeze.EntityQuery.from("MemberCouncil").where("Language","==",s).where("ID","==",n.MemberCouncilNumber).expand("MemberCouncilHistories");if(7==n.Role)switch(n.ReturnType){case 1:t=breeze.EntityQuery.from("Canton").where("Language","==",s).where("ID","==",n.CantonNumber);break;case 2:t=breeze.EntityQuery.from("Committee").where("Language","==",s).where("ID","==",n.CommitteeNumber);break;case 3:t=breeze.EntityQuery.from("ParlGroup").where("Language","==",s).where("ID","==",n.ParlGroupNumber);break;case 4:t=breeze.EntityQuery.from("External").where("Language","==",s).where("ID","==",n.IdExternal)}manager.executeQuery(t).then(function(e){v("ExtendedBusinessRoles")})}},l=function(e,r){var t=Q.defer();return manager.executeQuery(breeze.EntityQuery.from("BusinessRole").where("Language","==",r).where("BusinessNumber","==",e).where("Role","in",[7,2,4,1])).then(function(i){n[e+r]=i.results,v("BusinessRoles"),a(n[e+r]),L(i.results).then(function(e){v("Cosigners")}),t.resolve(Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(i.results,"BusinessRole"))}).fail(function(e){t.reject(e)}),t.promise},f=function(r,n){var i=Q.defer();return manager.executeQuery(breeze.EntityQuery.from("Bill").where("Language","==",n).where("BusinessNumber","==",r).expand("Resolutions, BillLinks")).then(function(o){t[r+n]=o.results,angular.forEach(o.results,function(r){var n=[];0===r.BillNumber&&(angular.forEach(r.BillLinks,function(e){var r={};r.href=e.LinkUrl,r.title=e.LinkText,this.push(r)},n),e.billLinks=e.billLinks.concat(n),e.hasLinks=e.hasLinks||n.length>0),angular.forEach(r.Resolutions,function(e){e.DetailLinkUrl="",e.DetailLinkTarget=""}),r.Resolutions=Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(r.Resolutions,"Resolution")}),i.resolve(o.results)}).fail(function(e){i.reject(e)}),i.promise},c=function(e,r){Pd.Shared.LogToConsoleIfDebug("affairService.getResolutionLinks",!0);var n=Q.defer();return manager.executeQuery(breeze.EntityQuery.from("SubjectBusiness").where("Language","==",r).where("BusinessNumber","==",e).expand("Subjects,Subjects.Meetings").select("IdSubject,Subjects.Meetings.Date,Subjects.Meetings.Council")).then(function(t){g(e,r,t),n.resolve(t.results)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug("affairService.getResolutionLinks : have error : "+e),n.reject(e)}),n.promise},g=function(e,r,n){try{var i=n.results;Pd.Shared.LogToConsoleIfDebug("affairService.getResolutionLinks : have data, length: "+n.results.length,!0);for(var o=0;o<t[e+r].length;o++)for(var s=t[e+r][o],u=0;u<s.Resolutions.length;u++){var a=s.Resolutions[u];try{if(Pd.Shared.LogToConsoleIfDebug("affairService.getResolutionLinks : processing Business.Bill.BillNumber '{0}' and Business.Bill.Resolution.ResolutionNumber '{1}'".format(s.BillNumber,a.ResolutionNumber),!0),Pd.Utility.StringIsNullOrEmpty(a.Council))continue;for(var l=0,f=0;f<i.length;f++){var c=i[f];try{var g=c.Subjects.Meetings;if(null==g)continue;if(g.Council==a.Council&&g.Date.toISOString()==a.ResolutionDate.toISOString()){Pd.Shared.LogToConsoleIfDebug("affairService.getResolutionLinks : matched Council '{0}' and Date '{1}' to SubjectID '{2}'".format(g.Council,g.Date.toISOString(),c.IdSubject),!0),l=c.IdSubject;break}}catch(h){Pd.Shared.LogToConsoleIfDebug("affairService.getResolutionLinks : unexpected exception occurred on meetings: "+h)}}if(0!=l)Pd.Shared.LogToConsoleIfDebug("affairService.getResolutionLinks : matching debate for this resolution is "+l,!0),a.DetailLinkUrl=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.AmtlichesBulletin.Detail,l),a.DetailLinkTarget="_self";else{Pd.Shared.LogToConsoleIfDebug("affairService.getResolutionLinks : warning: no matching debate was found in WS",!0);var d=Pd.Angular.GetABSearchUrl(s.BusinessShortNumber,a.ResolutionDate,a.CouncilName);Pd.Shared.LogToConsoleIfDebug("affairService.getResolutionLinks : static URL retrieved for item '{0}'".format(d.Url),!0),a.DetailLinkUrl=d.Url,a.DetailLinkTarget=d.Target}}catch(h){Pd.Shared.LogToConsoleIfDebug("affairService.getResolutionLinks : unexpected exception occurred on resolutions: "+h)}}}catch(h){Pd.Shared.LogToConsoleIfDebug("affairService.getResolutionLinks : unexpected top level exception occurred: "+h)}},h=function(e,r){var n=Q.defer();return manager.executeQuery(breeze.EntityQuery.from("Objective").where("Language","==",r).where("BusinessNumber","==",e)).then(function(e){n.resolve(Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(e.results,"Objective"))}).fail(function(e){n.reject(e)}),n.promise},d=function(e,r){var n=Q.defer();return manager.executeQuery(breeze.EntityQuery.from("Preconsultation").where("Language","==",r).where("BusinessNumber","==",e)).then(function(e){n.resolve(Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(e.results,"Preconsultation"))}).fail(function(e){n.reject(e)}),n.promise},b=function(e,r){var n=Q.defer();return manager.executeQuery(breeze.EntityQuery.from("BusinessResponsibility").where("Language","==",r).where("BusinessNumber","==",e)).then(function(e){n.resolve(e.results)}).fail(function(e){n.reject(e)}),n.promise},m=function(e,r){var n=Q.defer();return manager.executeQuery(breeze.EntityQuery.from("RelatedBusiness").where("Language","==",r).where("BusinessNumber","==",e)).then(function(e){n.resolve(Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(e.results,"RelatedBusiness"))}).fail(function(e){n.reject(e)}),n.promise},L=function(r){Pd.Shared.LogToConsoleIfDebug("AffairController.getCosigners");var n=Q.defer();return manager.executeQuery(breeze.EntityQuery.from("BusinessRole").where("Language","==",s).where("BusinessNumber","==",u).where("Role","==",3)).then(function(r){var t=[],i=r.results;if(angular.forEach(i,function(e){3===e.Role&&0===e.ReturnType&&this.push(e.MemberCouncilNumber)},t),0!==t.length){for(var o=50,u=0,a=0,l=[];a<t.length;){a+=o;var f=t.slice(u,a);Pd.Shared.LogToConsoleIfDebug("AffairController.getCosigners : slicing batch ("+u+","+a+"), batch size: "+f.length,!0);var c=breeze.EntityQuery.from("MemberCouncilHistory").where("PersonNumber","in",f).where("Language","==",s).orderBy("LastName, FirstName, DateJoining desc").select("PersonNumber, LastName, FirstName").using(manager);l.push(c),u=a}var g=[];angular.forEach(l,function(e){Pd.Shared.LogToConsoleIfDebug("AffairController.getCosigners : executing batch query",!0);var r=Q.defer();e.execute().then(function(e){r.resolve(e.results)},function(e){Pd.Shared.LogToConsoleIfDebug(e),r.reject(e)}),g.push(r.promise)}),Q.all(g).then(function(r){Pd.Shared.LogToConsoleIfDebug("AffairController.getCosigners : compiling results",!0);var t=[].concat.apply([],r),i=[],o=[];angular.forEach(t,function(e){o.indexOf(e.PersonNumber)<0&&(o.push(e.PersonNumber),this.push(e))},i),e.cosigners=i,n.resolve(e.cosigners)})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e),n.reject(e)})}}).fail(function(e){}),n.promise};e.getBusiness=function(e,n,t){return null!=i?(o.push(t),i.promise):(i=Q.defer(),r!=[]&&null!=r[e+n]&&i.resolve(r[e+n]),o.push(t),s=n,u=e,manager.executeQuery(breeze.EntityQuery.from("Business").where("Language","==",n).where("ID","==",e)).then(function(t){r[e+n]=Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(t.results,"Business"),i.resolve(t.results)}).fail(function(e){i.reject(e)}),h(e,n).then(function(e){v("Objectives")}),f(e,n).then(function(r){v("Bills"),c(e,n).then(function(e){v("ResolutionLinks")})}),l(e,n).then(function(r){v("BusinessRoles"),d(e,n).then(function(e){v("Preconsultations")}),b(e,n).then(function(e){v("BusinessResponsabilities")}),m(e,n).then(function(e){v("RelatedBusinesses")})}),i.promise)};var v=function(e){for(var r=0;r<o.length;r++)o[r](e)};return e})}();
/*** End affairService.min.js ***/
/*** Start councilorService.min.js ***/
"use strict";app.factory("councilorService",["$rootScope","$q","$http",function(n,t,i){function l(n,t){var i=t.defer(),o=i.promise,u;try{u=breeze.EntityQuery.from("MemberCouncil").where("Language","==",Pd.Language.GetCurrentLanguage()).where("ID","==",n).expand("MemberCouncilHistories").take(1).using(manager);u.execute().then(function(n){for(var u={HasDetailLink:!1,DetailLinkUrl:"",DetailLinkTarget:"_self"},t=0;t<n.results.length;t++)n.results[t].SubmittedBusinessesByParlMember=u,n.results[t].AdoptedBusinessesByParlMember=u,n.results[t].SpokesmanByParlGroupBusiness=u;r[e+f]=Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(n.results,"MemberCouncil");i.resolve()}).fail(function(n){Pd.Shared.LogToConsoleIfDebug(n);i.reject()})}catch(s){Pd.Shared.LogToConsoleIfDebug(s);i.reject()}return o}function a(n,t){var i=t.defer(),u=i.promise,r;try{r=breeze.EntityQuery.from("Person").where("Language","==",f).where("ID","==",n).expand("PersonAddresses, PersonCommunications, PersonOccupations, PersonEmployees, Citizenships").using(manager);r.execute().then(function(){i.resolve()}).fail(function(n){Pd.Shared.LogToConsoleIfDebug(n);i.reject()})}catch(e){Pd.Shared.LogToConsoleIfDebug(e);i.reject()}return u}function v(){var n=t.defer(),r=n.promise,i;try{i=breeze.EntityQuery.from("BusinessRole").where("Language","==",f).where("MemberCouncilNumber","==",e).where("Role","==",7).orderBy("BusinessSubmissionDate desc").take(4).using(manager);i.execute().then(function(){n.resolve()}).fail(function(t){Pd.Shared.LogToConsoleIfDebug(t);n.reject()})}catch(u){Pd.Shared.LogToConsoleIfDebug(u);n.reject()}return r}function y(){var n=t.defer(),r=n.promise,i;try{i=breeze.EntityQuery.from("MemberCommittee").where("Language","==",f).where("PersonNumber","==",e).using(manager);i.execute().then(function(){n.resolve()}).fail(function(t){Pd.Shared.LogToConsoleIfDebug(t);n.reject()})}catch(u){Pd.Shared.LogToConsoleIfDebug(u);n.reject()}return r}function p(){var n=t.defer(),r=n.promise,i;try{i=breeze.EntityQuery.from("MemberCommitteeHistory").where("Language","==",f).where("PersonNumber","==",e).where("DateLeaving","!=",null).using(manager);i.execute().then(function(){n.resolve()}).fail(function(t){Pd.Shared.LogToConsoleIfDebug(t);n.reject()})}catch(u){Pd.Shared.LogToConsoleIfDebug(u);n.reject()}return r}function w(){var n=t.defer(),r=n.promise,i;try{i=breeze.EntityQuery.from("PersonInterest").where("Language","==",f).where("PersonNumber","==",e).using(manager);i.execute().then(function(){n.resolve()}).fail(function(t){Pd.Shared.LogToConsoleIfDebug(t);n.reject()})}catch(u){Pd.Shared.LogToConsoleIfDebug(u);n.reject()}return r}function b(n){var i=t.defer(),f=i.promise;try{var e=function(t){var r={CouncilorId:n,SubmittedBusinessesByParlMember:t.submittedBusinesses,AdoptedBusinessesByParlMember:t.adoptedBusinesses,SpokesmanByParlGroupBusiness:t.spokesmanByParlGroupBusiness};i.resolve(r)},r=function(n){Pd.Shared.LogToConsoleIfDebug(n);i.reject(n)},o=function(n,i){var u=t.defer(),f=u.promise,e={querytext:'{1}:{2} (ContentSource="External WS SearchBusiness" OR ContentSource="External WS SearchBusinessSummary" OR ContentSource="Swissbase") PdLanguage:{0} -PdShowInSearch=false -path:bdc3://searchbusiness*'.format(i,Pd.Utility.ManagedProperties.PdBusinessCouncilorPersonNumber,n),rowlimit:2,trimduplicates:!0,selectproperties:[Pd.Utility.ManagedProperties.PdAffairId]};return Pd.Angular.ExecuteSPSearchQuery(e).then(function(t){var i={HasDetailLink:t.length>0,DetailLinkUrl:t.length==1?Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.Affair.Detail,t[0].PdAffairId):t.length>1?Pd.Angular.GetSubmittedBusinessByMemberCouncilSearchUrl(n):"",DetailLinkTarget:"_self"};u.resolve(i)},r),f},s=function(n,i){var u=t.defer(),f=u.promise,e={querytext:'{1}:{2} ({3}:{4} OR {3}:{5}) (ContentSource="External WS SearchBusiness" OR ContentSource="External WS SearchBusinessSummary" OR ContentSource="Swissbase") PdLanguage:{0} -PdShowInSearch=false -path:bdc3://searchbusiness*'.format(i,Pd.Utility.ManagedProperties.PdBusinessCouncilorPersonNumber,n,Pd.Utility.ManagedProperties.PdAffairStateId,25,26),rowlimit:2,trimduplicates:!0,selectproperties:[Pd.Utility.ManagedProperties.PdAffairId]};return Pd.Angular.ExecuteSPSearchQuery(e).then(function(t){var i={HasDetailLink:t.length>0,DetailLinkUrl:t.length==1?Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.Affair.Detail,t[0].PdAffairId):t.length>1?Pd.Angular.GetAdoptedBusinessByMemberCouncilSearchUrl(n):"",DetailLinkTarget:"_self"};u.resolve(i)},r),f},h=function(n,i){var u=t.defer(),f=u.promise,e={querytext:'{1}:{2} (ContentSource="External WS SearchBusiness" OR ContentSource="External WS SearchBusinessSummary" OR ContentSource="Swissbase") PdLanguage:{0} -PdShowInSearch=false -path:bdc3://searchbusiness*'.format(i,Pd.Utility.ManagedProperties.PdBusinessSpeakerId,n),rowlimit:2,trimduplicates:!0,selectproperties:[Pd.Utility.ManagedProperties.PdAffairId]};return Pd.Angular.ExecuteSPSearchQuery(e).then(function(t){var i={HasDetailLink:t.length>0,DetailLinkUrl:t.length==1?Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.Affair.Detail,t[0].PdAffairId):t.length>1?Pd.Angular.GetBusinessBySpokesmanSearchUrl(n):"",DetailLinkTarget:"_self"};u.resolve(i)},r),f},u=Pd.Language.GetCurrentLanguage(),c={submittedBusinesses:o(n,u),adoptedBusinesses:s(n,u),spokesmanByParlGroupBusiness:h(n,u)};t.all(c).then(e,r)}catch(l){Pd.Shared.LogToConsoleIfDebug(l);i.reject()}return f}function o(n){for(var t=0;t<s.length;t++)s[t](n)}var h={},u=null,s=[],f="",r=[],e=0,c="HistoricalLexiconCacheKey_Data";return h.getCouncilor=function(n,i,h){if(u==null)u=Q.defer();else return s.push(h),u.promise;r!=[]&&r[n+i]!=null&&u.resolve(r[n+i]);s.push(h);f=i;e=n;var c=[];return c.push(l(n,t)),c.push(a(n,t)),t.all(c).then(function(){u.resolve(r[n+i]);o("Councilor");v().then(function(){o("BusinessRoles")});y().then(function(){o("MemberCommittee")});p().then(function(){o("FormerMemberCommittee")});w().then(function(){o("PersonInterest")});b(n).then(function(t){r[n+i].length>0&&(r[n+i][0].AdoptedBusinessesByParlMember=t.AdoptedBusinessesByParlMember,r[n+i][0].SubmittedBusinessesByParlMember=t.SubmittedBusinessesByParlMember,r[n+i][0].SpokesmanByParlGroupBusiness=t.SpokesmanByParlGroupBusiness)})},function(n){u.reject(n)}),u.promise},h.getHistoricalLexicon=function(n){function u(n){return n}var cacheKey,t,r;if(Pd.Shared.LogToConsoleIfDebug("councilorService.getHistoricalLexicon",!0),cacheKey=c+"_"+n,t=Pd.Utility.lscacheGet(cacheKey),t!=null)return r=Q.defer(),r.resolve(t),r.promise;var f=u.toString().match(/^function\s*([^\s(]+)/)[1],e=Pd.Config.Metagrid.MetagridServiceApiUrl.format(Pd.Config.Metagrid.ProjectSlug,n,f),deferred=Q.defer();try{i({method:"GET",timeout:2e3,url:e}).then(function(response){var data=eval(response.data);data&&data.length>0?(Pd.Shared.LogToConsoleIfDebug("councilorService.getHistoricalLexicon :: data retrieved, resolving promise"),Pd.Utility.lscacheSet(cacheKey,data[0],60),deferred.resolve(data[0])):deferred.resolve(null)},function(n){Pd.Shared.LogToConsoleIfDebug(n);deferred.reject(new Error("API request failed: "+n.message))})}catch(o){deferred.reject(new Error("Fatal Unhandled Error: "+o.message))}return deferred.promise},h}]);
/*** End councilorService.min.js ***/
/*** Start officialBulletinService.min.js ***/
"use strict";app.factory("officialBulletinService",["$rootScope","$q",function(e,n){var r,t={},i=null,s=null,o=[],u="",a=0,l=0,c=0,f=68734,g=[],d=[],S=[],h=[],p=[],b=[],v=[],m=[];t.meeting={},t.meetings=[],t.subjects=[],t.businesses=[],t.transcript={},t.transcripts=[],t.transcriptIds=[],t.firstBusiness=0,t.functionTemplates=[],t.currentSession=null,t.printingConfiguration={};var B=function(e,n){Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getSubjectsByMeetingId");var r=Q.defer(),t=breeze.EntityQuery.from("Subject").where("IdMeeting","==",e).where("Language","==",n).orderBy("SortOrder").using(manager);return t.execute().then(function(t){var i=[],s=[];angular.forEach(t.results,function(e){var n=e.ID;-1===s.indexOf(n)&&(s.push(e.ID),this.push(e))},i),h[e+n]=s,S[e+n]=i,r.resolve(i)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),r.reject(e)}),r.promise},I=function(e,n){Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getTranscripts");var r=Q.defer(),t=breeze.EntityQuery.from("Transcript").expand("MembersCouncil, MembersCouncil.MemberCouncilHistories").where("IdSubject","==",e).where("Language","==",Pd.Language.GetCurrentLanguage()).orderBy("SortOrder").using(manager);return t.execute().then(function(t){var i=[],s=[];angular.forEach(t.results,function(e){var n=e.ID;-1===i.indexOf(n)&&(i.push(parseInt(n)),this.push(e))},s),angular.forEach(s,function(e){e.HaveVideo=e.ID>=f&&1==e.Type}),s.HaveDebateVideo=null!=Pd.Utility.FirstOrDefault(s,function(e){return e.HaveVideo}),i[e+n]=i,b[e+n]=s,s=Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(s,"Transcript"),r.resolve(s)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),r.reject(e)}),r.promise},P=function(e,n){Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getBusinesses");var r=Q.defer(),t=breeze.EntityQuery.from("SubjectBusiness").where("IdSubject","==",e).where("Language","==",Pd.Language.GetCurrentLanguage()).orderBy("SortOrder").using(manager);return t.execute().then(function(t){p[e+n]=t.results,r.resolve(t.results)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),r.reject()}),r.promise},D=function(e,n){Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getMeetingsByBusiness");var r=Q.defer();if("undefined"!=typeof g[e+n])return r.resolve(g[e+n]),r.promise;var t=breeze.EntityQuery.from("SubjectBusiness").where("BusinessNumber","==",e).where("Language","==",n).expand("Subjects,Subjects.Meetings").orderBy("Subjects.Meetings.Date,Subjects.Meetings.Begin,Subjects.Meetings.SortOrder,Subjects.SortOrder").using(manager);return t.execute().then(function(n){var t=[];angular.forEach(n.results,function(e){var n={};n.BusinessNumber=e.BusinessNumber,n.IdSubject=e.IdSubject,n.PublishedNotes=e.PublishedNotes,null!=e.Subjects&&null!=e.Subjects.Meetings&&(n.CouncilName=e.Subjects.Meetings.CouncilName,n.MeetingDate=e.Subjects.Meetings.Date,n.MeetingTime=Pd.Angular.GetMeetingStartTimeFormatted(e.Subjects.Meetings.Begin)),this.push(n)},t),d[e]=t,r.resolve(t)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),r.reject(e)}),r.promise},y=function(e){for(var n=0;n<o.length;n++)o[n](e)},T=function(e,n,r,t){var i=Q.defer(),s=[];return angular.forEach(e,function(e){s.push(Pd.EntityMappings.GetAllEntityRecordMappings(n,e[r]))}),Q.all(s).then(function(n){var s=[];try{angular.forEach(n,function(n,i){var s=e[i],o="ERMUrl_{0}".format(t.toLowerCase());angular.forEach(n.results,function(e){var n=e.ERMCategory,t=e[o],i=e.ERMExternalId.replace(s[r],n);s[i]=t}),this.push(s)},s),i.resolve(s)}catch(o){Pd.Shared.LogToConsoleIfDebug(o.stack),s=e,i.resolve(s)}},function(n){Pd.Shared.LogToConsoleIfDebug(n.stack),v=e,i.resolve(v)}),i.promise},C=function(){Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getOfficialBulletinTemplates");var e=Q.defer(),n="pd_ab_function_templates";if(lscache){var r=lscache.get(n);if(r)return e.resolve(r),e.promise}var t=Pd.Angular.GetOfficialBulletinFunctions();return t.then(function(r){var t=[];angular.forEach(r,function(e){this.push(e)},t),lscache&&lscache.set(n,t,1440),e.resolve(t)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)}),e.promise};t.getMeetingBySubjectId=function(e,n,s){if(Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getMeetingBySubjectId"),null!=i)return o.push(s),i.promise;if(i=Q.defer(),S!==[]&&null!=S[e+n]){var c=S[e+n].IdMeeting;g!==[]&&null!=g[c+n]&&i.resolve(g[c+n])}o.push(s),u=n,l=e;var f=breeze.EntityQuery.from("Subject").expand("Meetings").where("Language","==",n).where("ID","==",e).using(manager);return f.execute().then(function(e){var n=e.results[0],s=e.results[0].Meetings;s.Begin=Pd.Angular.GetMeetingStartTimeFormatted(s.Begin),a=s.ID,S[l+u]=n,g[a+u]=s,t.meeting=s,B(a,u).then(function(e){t.subjects=e,h[a+u]=[],angular.forEach(e,function(e){h[a+u].push(e.ID)}),t.subjectIds=h[a+u],y("Subjects")}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),y("Subjects")}),P(l,u).then(function(e){if(e&&e.length>0){r=e[0],t.firstBusiness=r,y("FirstBusiness"),t.businesses=e,y("Businesses");var n=[];angular.forEach(e,function(e){var n=e.BusinessNumber,r=D(n,u);this.push(r)},n),Q.all(n).then(function(e){angular.forEach(e,function(e){var n=e[0].BusinessNumber;g[n+u]=e,t.meetings[n]=e}),y("Meetings")}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),y("Meetings")})}}),I(l,u).then(function(e){angular.forEach(e,function(e){var n=e.ID;b[n+u]=e}),t.transcripts=e,C().then(function(e){t.functionTemplates=e,y("Transcripts")}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),y("Transcripts")})}),i.resolve(s)}).fail(function(e){i.reject(e)}),m=Pd.Config.Printing.Entities,y("PrintingConfigurations"),i.promise},t.getMeetingByTranscriptId=function(e,n,i){if(Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getTranscript"),null!=s)return o.push(i),s.promise;if(s=Q.defer(),b!==[]&&null!=b[e+n]){var d=b[e+n].IdSubject,h=S[d+n].IdMeeting;g!==[]&&null!=g[h+n]&&s.resolve(g[h+n])}o.push(i),u=n,c=e;var p=breeze.EntityQuery.from("Transcript").expand("Subjects,Subjects.Meetings,MembersCouncil,MembersCouncil.MemberCouncilHistories").where("Language","==",n).where("ID","==",e).using(manager);return p.execute().then(function(e){angular.forEach(e.results,function(e){e.HaveVideo=e.ID>=f&&1==e.Type});var i=e.results[0],o=e.results[0].Subjects,d=e.results[0].Subjects.Meetings;d.Begin=Pd.Angular.GetMeetingStartTimeFormatted(d.Begin),c=i.ID,l=o.ID,a=d.ID,b[c+n]=i,S[l+u]=o,g[a+u]=d,t.transcript=i,t.subject=o,t.meeting=d,I(l,u).then(function(e){angular.forEach(e,function(e){var n=e.ID;t.transcriptIds.push(n)}),t.transcripts=e,C().then(function(e){t.functionTemplates=e,y("Transcripts")}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),y("Transcripts")})}),P(l,u).then(function(e){e&&e.length>0&&(r=e[0],t.firstBusiness=r,y("FirstBusiness"),t.businesses=e,y("Businesses"))}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),y("Businesses")}),s.resolve(d)}).fail(function(e){s.reject(e)}),m=Pd.Config.Printing.Entities,y("PrintingConfigurations"),s.promise},t.getSessionsByYear=function(e,r,t,i){Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getSessionByYear");var s=Q.defer();"undefined"==typeof e&&(e=moment().year),o.push(i),u=r,"undefined"!=typeof v[e+r]&&s.resolve(v[e+r]);var a={};return a.getSessionsByYearWebServicePromise=L(e,r,t),a.getSpecialMeetingsApiPromise=j(),Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getSessionByYear :: all promises prepared"),n.all(a).then(function(e){Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getSessionByYear :: multiple promises ready");var n=e.getSessionsByYearWebServicePromise.results,r=e.getSpecialMeetingsApiPromise.results;angular.forEach(n,function(e){e.ShowNR=!0,e.ShowSR=!0,e.ShowVBV=!0;var n=Pd.Utility.FirstOrDefault(r,function(n){return n.LegislativePeriodNumber===e.LegislativePeriodNumber&&n.SessionNumber===e.SessionNumber});null!=n&&(Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getSessionByYear :: updating session item '"+e.SessionName+"' with custom properties"),e.ShowNR=n.ShowNR,e.ShowSR=n.ShowSR,e.ShowVBV=n.ShowVBV)}),s.resolve(n)},function(e){s.reject(new Error("Fatal Unhandled Error: "+e.message))}),s.promise};var L=function(e,n,r){Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getSessionsByYearWebServicePromise");var i=Q.defer(),o=">",u="0";"1999"==e&&(o="==",u=1);var a=breeze.EntityQuery.from("Session").where("year(StartDate)","==",e).where("Language","==",n).where("SessionNumber",o,u).orderBy("StartDate desc").using(manager);return a.execute().then(function(s){if(s.results.length>0){var o=e-1+n;T(s.results,"Session","ID",n).then(function(e){v[o]=e,t.sessions=e,r?(t.currentSession=e[0],y("CurrentSession")):(t.sessions=e,y("Sessions")),Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getSessionsByYearWebServicePromise :: data retrieved, resolving promise")})}i.resolve(s)}).fail(function(e){s.reject(e)}),i.promise},j=function(){Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getSpecialMeetingsApiPromise");var e="/_api/Web/Lists/getByTitle('SessionSpecialMeetings')/Items";e+="?$select=LegislativePeriodNumber,SessionNumber,ShowNR,ShowSR,ShowVBV";var n=Q.defer();return OData.read({requestUri:e,contentType:"application/json;odata=verbose",headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}},function(e){Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getSpecialMeetingsApiPromise :: data retrieved, resolving promise"),n.resolve(e)},function(e){n.reject(new Error("API request failed: "+e.message))}),n.promise};return t.getBusinessInfo=function(e){Pd.Shared.LogToConsoleIfDebug("officialBulletinService::getBusinessInfo");var n=Q.defer(),r=breeze.EntityQuery.from("Business").where("ID","==",e).where("Language","==",Pd.Language.GetCurrentLanguage()).using(manager);return r.execute().then(function(e){n.resolve(e.results)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),n.reject()}),n.promise},t}]);
/*** End officialBulletinService.min.js ***/
/*** Start abStructuredNavigationService.min.js ***/
app.factory("abStructuredNavigationService",["$rootScope","$q",function(e,r){"use strict";var o=[],t=[],n=[],u=[],i=[],s=[],a=[],d=[],g={};return g.getUniqueValuesOfKey=function(e,r){return e.reduce(function(e,o){return o[r]&&!~e.indexOf(o[r])&&e.push(o[r]),e},[])},g.firstOrDefault=function(e,r){for(var o,t=0,n=e.length;n>t;++t)if(o=e[t],r(o))return o;return null},g.getSessions=function(e){var t="abStructuredNavigationService::getSessions";Pd.Shared.LogToConsoleIfDebug(t,!0);var u=r.defer(),a="abStructuredNavigationService_Meeting_Language"+e,d=function(){if(lscache){var r=lscache.get(a);if(r){Pd.Shared.LogToConsoleIfDebug(t+": getMeetingData: getting meetings from extended cache",!0);var o=Q.defer();return o.resolve(r),o.promise}}var n=breeze.EntityQuery.from("Meeting").where("Language","==",e).select("ID, Language, IdSession, SessionNumber, SessionName, Council, Date, Begin, LegislativePeriodNumber, MeetingOrderText, SortOrder").orderBy("SortOrder").using(manager);return n.execute()},c=e;return Pd.Shared.LogToConsoleIfDebug(t+": execution breeze query",!0),d().then(function(r){Pd.Shared.LogToConsoleIfDebug(t+": processing query results",!0),void 0==r.results&&(r={results:r}),lscache&&(Pd.Shared.LogToConsoleIfDebug(t+": writing meeting data to extended cache",!0),lscache.set(a,r.results,60)),n[c]=r.results;var d=g.getUniqueValuesOfKey(r.results,"IdSession"),f=g.getUniqueValuesOfKey(r.results,"Council"),l=o[c]=[];angular.forEach(d,function(o){var t=g.firstOrDefault(r.results,function(e){return e.IdSession===o});if("undefined"!=typeof t){var n={ID:t.IdSession,Language:t.Language,SessionNumber:t.SessionNumber,SessionName:t.SessionName,LegislativePeriodNumber:t.LegislativePeriodNumber};this.push(n)}i[o+"_"+c]=r.results.filter(function(e){return e.IdSession===o}),angular.forEach(f,function(t){s[o+"_"+t+"_"+e]=r.results.filter(function(e){return e.IdSession===o&&e.Council===t})})},l),l.sort(function(e,r){return r.ID-e.ID}),u.resolve(l),Pd.Shared.LogToConsoleIfDebug(t+": promise resolved",!0)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),u.reject(e)}),u.promise},g.getCouncils=function(e){var o="abStructuredNavigationService::getCouncils";Pd.Shared.LogToConsoleIfDebug(o,!0);var n=r.defer(),u=e,i=t[u];if("undefined"!=typeof i)return Pd.Shared.LogToConsoleIfDebug(o+": cache hit!",!0),n.resolve(i),n.promise;var s=breeze.EntityQuery.from("Council").where("Language","==",e).orderBy("ID").using(manager);return Pd.Shared.LogToConsoleIfDebug(o+": execution breeze query",!0),s.execute().then(function(e){Pd.Shared.LogToConsoleIfDebug(o+": processing query results",!0),t[u]=e.results,n.resolve(e.results)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),n.reject(e)}),n.promise},g.getMeetingsBySession=function(e,o){var t="abStructuredNavigationService::getMeetingsBySession";Pd.Shared.LogToConsoleIfDebug(t,!0);var n=r.defer(),u=e+"_"+o,s=i[u];if("undefined"!=typeof s)return Pd.Shared.LogToConsoleIfDebug(t+": cache hit!",!0),n.resolve(s),n.promise;var a=breeze.EntityQuery.from("Meeting").where("IdSession","==",e).where("Language","==",o).using(manager);return Pd.Shared.LogToConsoleIfDebug(t+": execution breeze query",!0),a.execute().then(function(e){Pd.Shared.LogToConsoleIfDebug(t+": processing query results",!0),i[u]=e.results,n.resolve(e.results)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),n.reject(e)}),n.promise},g.getMeetingsByCouncil=function(e,o,t){var n="abStructuredNavigationService::getMeetingsByCouncil";Pd.Shared.LogToConsoleIfDebug(n,!0);var u=r.defer(),i=e+"_"+o+"_"+t,a=s[i];if("undefined"!=typeof a)return Pd.Shared.LogToConsoleIfDebug(n+": cache hit!",!0),u.resolve(a),u.promise;var d=breeze.EntityQuery.from("Meeting").where("IdSession","==",e).where("Council","==",o).where("Language","==",t).orderBy("SortOrder").using(manager);return Pd.Shared.LogToConsoleIfDebug(n+": execution breeze query",!0),d.execute().then(function(e){Pd.Shared.LogToConsoleIfDebug(n+": processing query results",!0),s[i]=e.results,u.resolve(e.results)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),u.reject(e)}),u.promise},g.getSubjectsByMeeting=function(e,o){var t="abStructuredNavigationService::getSubjectsByMeeting";Pd.Shared.LogToConsoleIfDebug(t,!0);var n=r.defer();Pd.Shared.LogToConsoleIfDebug(t+": execution breeze query",!0);var u=e+"_"+o,i=a[u];if("undefined"!=typeof i)return Pd.Shared.LogToConsoleIfDebug(t+": cache hit!",!0),n.resolve(i),n.promise;var s={querytext:"{0}={1} AND {2}={3}".format(Pd.Utility.ManagedProperties.PdSubjectIdMeeting,e,Pd.Utility.ManagedProperties.PdLanguage,o),rowlimit:2500,trimduplicates:!0,selectproperties:[Pd.Utility.ManagedProperties.PdSubjectId,Pd.Utility.ManagedProperties.PdAffairId,Pd.Utility.ManagedProperties.PdAffairIdFormatted,Pd.Utility.ManagedProperties.PdSubjectSortOrder,Pd.Utility.ManagedProperties.PdSubjectBusinessInfos],sortlist:{PdSubjectSortOrder:"ascending"}};return Pd.Angular.ExecuteSPSearchQuery(s).then(function(e){var r=[];angular.forEach(e,function(e){var r=[],o=e[Pd.Utility.ManagedProperties.PdSubjectBusinessInfos].split("|");angular.forEach(o,function(e){var r=e.split(";#");this.push({BusinessShortNumber:r[0],BusinessTitle:r[1],ResponsibleCommittee:r[2]})},r);var t={ID:e[Pd.Utility.ManagedProperties.PdSubjectId],BusinessShortNumber:r.length>0?r[0].BusinessShortNumber:"",SortOrder:e[Pd.Utility.ManagedProperties.PdSubjectSortOrder],Title:r.length>0?r[0].BusinessTitle:""};this.push(t)},r),n.resolve(r)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),n.reject(e)}),n.promise},g.getTranscriptsBySubjectId=function(e,o,t){var n="abStructuredNavigationService::getTranscriptsBySubjectId";Pd.Shared.LogToConsoleIfDebug(n,!0);var u=r.defer();"undefined"==typeof t&&(t=!1);var i=e+"_"+o+"_"+t,s=d[i];if("undefined"!=typeof s)return Pd.Shared.LogToConsoleIfDebug(n+": cache hit!",!0),u.resolve(s),u.promise;var a;return a=t===!0?breeze.EntityQuery.from("Transcript").expand("MembersCouncil.MemberCouncilHistories").where("IdSubject","==",e).where("Language","==",o).orderBy("SortOrder").using(manager):breeze.EntityQuery.from("Transcript").where("IdSubject","==",e).where("Language","==",o).orderBy("SortOrder").using(manager),Pd.Shared.LogToConsoleIfDebug(n+":: execution breeze query",!0),a.execute().then(function(e){Pd.Shared.LogToConsoleIfDebug(n+":: processing query results",!0),d[i]=e.results,u.resolve(e.results)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),u.reject(e)}),u.promise},g.getSubjectById=function(e,o){var t="abStructuredNavigationService::getSubjectById";Pd.Shared.LogToConsoleIfDebug(t,!0);var n=r.defer(),i=e+"_"+o,s=u[i];if("undefined"!=typeof s)return Pd.Shared.LogToConsoleIfDebug(t+": cache hit!",!0),n.resolve(s),n.promise;var a=breeze.EntityQuery.from("Subject").expand("SubjectsBusiness,Meetings").where("ID","==",e+"L").where("Language","==",o).orderBy("SortOrder").using(manager);return Pd.Shared.LogToConsoleIfDebug(t+":: execution breeze query",!0),a.execute().then(function(e){Pd.Shared.LogToConsoleIfDebug(t+":: processing query results",!0),u[i]=e.results,n.resolve(e.results)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),n.reject(e)}),n.promise},g}]);
/*** End abStructuredNavigationService.min.js ***/
/*** Start broadcastService.min.js ***/
!function(){app.factory("broadcastService",["$rootScope",function(o){return{send:function(c,n){o.$broadcast(c,n)}}}])}();
/*** End broadcastService.min.js ***/
/*** Start ParliamentHistoryService.min.js ***/
!function(){app.factory("parliamentHistoryService",function(){"use strict";var e=[];e.ListItem="0x0120D5200071B51D4A80E24895A12537F798B3C940",e.Image="0x0101009148F5A04DDD49CBA7127AADA5FB792B00AADE34325A8B49CDA8BB4DB53328F21400AAD31BE5BF864CD89B89DB5F9A95307F",e.Audio="0x0101009148F5A04DDD49CBA7127AADA5FB792B006973ACD696DC4858A76371B2FB2F439A00A60C265F9A25412990F9D154AEF88F6D",e.Video="0x0101009148F5A04DDD49CBA7127AADA5FB792B00291D173ECE694D56B19D111489C4369D004D4142027F8D42C081E9810E2201127C";var t=[];t.ListingImage=110,t.DetailSmall=111,t.DetailLarge=112;var r=Pd.Language.GetCurrentLanguage().toLowerCase(),a="ParliamentHistory_FullListing_{0}".format(Pd.Language.GetCurrentLanguage()),i=function(){Pd.Shared.LogToConsoleIfDebug("parliamentHistoryService.getBasicListingData",!0);var e="/_api/web/lists/getByTitle('Parliament%20History')/items";e+="?$filter=startswith(ContentTypeId,'{0}')",e+="&$select=Id,Title_{1},DateDay,DateMonth,DateYear,IsSpecialDate,Content_{1},ExcludeLanguage",e+="&$orderBy=DateYear,DateMonth,DateDay",e+="&$top=20";var t=g();return null!=t?t:n(e,!1)},l=function(){Pd.Shared.LogToConsoleIfDebug("parliamentHistoryService.getFullListingData",!0);var e="/_api/web/lists/getByTitle('Parliament%20History')/items";e+="?$expand=Folder/Files/ListItemAllFields",e+="&$filter=startswith(ContentTypeId,'{0}')",e+="&$select=Id,Title_{1},DateDay,DateMonth,DateYear,IsSpecialDate,Content_{1},ExcludeLanguage,",e+="Folder/Files/ListItemAllFields/Caption_{1},Folder/Files/ServerRelativeUrl,Folder/Files/ListItemAllFields/DisplayOrder,",e+="Folder/Files/ListItemAllFields/ContentTypeId,Folder/Files/ListItemAllFields/ExcludeLanguage",e+="&$orderBy=DateYear,DateMonth,DateDay",e+="&$top=10000";var t=g();if(null!=t)return t;var r=n(e,!0);return r.then(function(e){p(e)}),r},n=function(t,a){Pd.Shared.LogToConsoleIfDebug("parliamentHistoryService.getListingData",!0);var i=Q.defer();t=t.format(e.ListItem,r),Pd.Shared.LogToConsoleIfDebug("parliamentHistoryService.getListingData : "+t,!0);try{OData.read({requestUri:t,contentType:"application/json;odata=verbose",headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}},function(e){var t=o(e.results);t.CompleteDataSet=a,i.resolve(t)},function(e){i.reject(new Error("API request failed: "+e.message))})}catch(l){i.reject(new Error("Fatal Unhandled Error: "+l.message))}return i.promise},o=function(a){try{for(var i=[],l=[],n=[],o=[],s=0;s<a.length;s++){var d=a[s];if(!c(d.ExcludeLanguage)){i.push(d);var g=u(d),p=g.year(),D=10*Math.floor(p/10);if(-1==l.indexOf(D)&&l.push(D),-1==n.indexOf(p)&&(n.push(p),o.push({HistoricDecade:D,HistoricYear:p})),d.HistoricDate=g,d.HistoricYear=p,d.HistoricDecade=D,d.Title=d["Title_{0}".format(r)],d.Content=d["Content_{0}".format(r)],d.ImageUrl="",void 0!=d.Folder)for(var m=0;m<d.Folder.Files.results.length;m++){var f=d.Folder.Files.results[m];if(!c(f.ListItemAllFields.ExcludeLanguage)&&f.ListItemAllFields.ContentTypeId.startsWith(e.Image)){d.ImageUrl="{0}?RenditionId={1}".format(f.ServerRelativeUrl,t.ListingImage),d.ImageCaption=f.ListItemAllFields["Caption_{0}".format(r)];break}}}}var v={ListingResults:i,ListingDecades:l,ListingDecadesYears:o};return v}catch(L){return Pd.Shared.LogToConsoleIfDebug("parliamentHistoryService.prepareListingData: unexpected error: "+L.message),{}}},s=function(e){Pd.Shared.LogToConsoleIfDebug("parliamentHistoryService.getDetailData",!0);var t=Q.defer(),a="/_api/web/lists/getByTitle('Parliament%20History')/items({0})";a+="?$expand=Folder/Files/ListItemAllFields",a+="&$select=Title_{1},DateDay,DateMonth,DateYear,IsSpecialDate,Content_{1},LinkList_{1},ExcludeLanguage,",a+="Folder/Files/ListItemAllFields/Caption_{1},Folder/Files/ServerRelativeUrl,Folder/Files/ListItemAllFields/DisplayOrder,",a+="Folder/Files/ListItemAllFields/ContentTypeId,Folder/Files/ListItemAllFields/ExcludeLanguage",a=a.format(e,r),Pd.Shared.LogToConsoleIfDebug("parliamentHistoryService.getDetailData : "+a,!0);try{OData.read({requestUri:a,contentType:"application/json;odata=verbose",headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}},function(e){var r=d(e);t.resolve(r)},function(e){t.reject(new Error("API request failed: "+e.message))})}catch(i){t.reject(new Error("Fatal Unhandled Error: "+i.message))}return t.promise},d=function(a){try{var i=[];if(void 0!=a){var l=a;if(c(l.ExcludeLanguage))return i;var n=u(l);l.HistoricDate=n,l.Title=l["Title_{0}".format(r)],l.Content=l["Content_{0}".format(r)],l.Content=D(l.Content),l.Links=[];var o=l["LinkList_{0}".format(r)];if(!Pd.Utility.StringIsNullOrEmpty(o)){o=o.split("\n");for(var s=0;s<o.length;s++){var d=o[s].split("|");if(d.length<2||d.length>3)Pd.Shared.LogToConsoleIfDebug("parliamentHistoryService.getDetailData : warning, format of LinkList item incorrect, skipping");else{var g=d[0],p=d[1],m="_self";if(3===d.length){var f=parseInt(d[2]);isNaN(f)||1!==f||(m="_blank")}l.Links.push({LinkTitle:g,LinkUrl:p,LinkTarget:m})}}}l.Media=[];for(var v=0;v<l.Folder.Files.results.length;v++){var L=l.Folder.Files.results[v];if(!c(L.ListItemAllFields.ExcludeLanguage)){var F=L.ListItemAllFields["Caption_{0}".format(r)],y={};y.Caption=F,y.DisplayOrder=L.ListItemAllFields.DisplayOrder;var h=L.ListItemAllFields.ContentTypeId;switch(!0){case h.startsWith(e.Image):y.MediaType="Image",y.MediaTypeOrder=1,y.SmallImage="{0}".format(L.ServerRelativeUrl),y.BigImage="{0}?RenditionId={1}".format(L.ServerRelativeUrl,t.DetailLarge),l.Media.push(y);break;case h.startsWith(e.Audio):y.MediaType="Audio",y.MediaTypeOrder=3,y.Url=L.ServerRelativeUrl,l.Media.push(y);break;case h.startsWith(e.Video):y.MediaType="Video",y.MediaTypeOrder=2,y.Url=L.ServerRelativeUrl,l.Media.push(y)}}}return l.Media.sort(function(e,t){return e.DisplayOrder<t.DisplayOrder?-1:e.DisplayOrder>t.DisplayOrder?1:e.MediaTypeOrder<t.MediaTypeOrder?-1:e.MediaTypeOrder>t.MediaTypeOrder?1:0}),i[0]=l,i}return i}catch(A){return Pd.Shared.LogToConsoleIfDebug("parliamentHistoryService.prepareDetailData: unexpected error: "+A.message),i}},g=function(){Pd.Shared.LogToConsoleIfDebug("pariamentHistoryService.getListingDataFromCacheAsPromise",!0);var e=Pd.Utility.lscacheGet(a);if(Pd.Shared.LogToConsoleIfDebug("pariamentHistoryService.getListingDataFromCacheAsPromise: cached item found, returning promise",!0),null==e)return null;var t=Q.defer();return t.resolve(e),t.promise},p=function(e){Pd.Shared.LogToConsoleIfDebug("parliamentHistoryService.setListingDataIntoCache",!0),Pd.Utility.lscacheSet(a,e,60)},u=function(e){return moment("{0}-{1}-{2}".format(e.DateYear,e.DateMonth,e.DateDay),"YYYY-MM-DD")},c=function(e){return null!=e&&e.results.indexOf(r.toUpperCase())>=0?(Pd.Shared.LogToConsoleIfDebug("parliamentHistoryService.recordShouldBeExcluded: item was excluded from this language",!0),!0):!1},D=function(e){try{if(Pd.Utility.StringIsNullOrEmpty(e))return e;var t=function(e){return-1==e.indexOf("<p>")&&-1==e.indexOf("</p>")?!0:!1};if(t(e))return"<p>{0}</p>".format(e);if(e=Pd.Shared.RemoveInvalidSharePointWhitespace(e).replace("&#160;","").trim(),!e.startsWith("<p>")||!e.endsWith("</p>")){for(var r=e.replace(/<p>/gi,"~PARAGRAPHSTART~<p>").replace(/<\/p>/gi,"</p>~PARAGRAPHEND~"),a=[],i=r.split("~PARAGRAPHSTART~"),l=0;l<i.length;l++)for(var n=i[l].split("~PARAGRAPHEND~"),o=0;o<n.length;o++)a.push(n[o]);r="";for(var s=0;s<a.length;s++)Pd.Utility.StringIsNullOrEmpty(a[s])||(t(a[s])&&(a[s]="<p>{0}</p>".format(a[s])),r+=a[s]);e=r}}catch(d){Pd.Shared.LogToConsoleIfDebug("parliamentHistoryService.cleanupHtmlContent: unexpected error, returning original html: "+d.message)}return e};return{getBasicListingData:i,getFullListingData:l,getDetailData:s}})}();
/*** End ParliamentHistoryService.min.js ***/
/*** Start SeatOrganisationService.min.js ***/
!function(){
  app.factory("seatOrganisationService",["$q",function(l){
    "use strict";
    var a=Pd.Language.GetCurrentLanguage().toLowerCase(),e={
    };
    e[0]="#826E1A",e[139]="#FB7203",e[1]="#0044D5",e[136]="#ffe540",e[4]="#007832",e[6]="#03F61A",e[137]="#7e3874",e[2]="#FF0000";
    var r={
      seatFillDefaultColour:"transparent",seatNumberFillDefaultColour:"#000",seatNumberFillInactiveColour:"#6A6A6A",parlGroupColourFallback:"#826E1A"}
    ,t={
      NR:1,SR:2}
    ,o="/_api/web/lists/GetByTitle('SeatOrganisationCouncilOfStates')/Items?$select=SeatNumber,MemberCouncilId",Z=function(a){
      Pd.Shared.LogToConsoleIfDebug("seatOrganisationService.getSeatOrganisationData("+a+")",!0);
      var e,r=Q.defer();
      switch(a){
        case t.SR:e=n;
          break;
        default:e=u}
      var o={
        seatingData:e(),councilorImageUrlData:i()};
      return l.all(o).then(function(l){
        try{
          var e=h(a,l.seatingData,l.councilorImageUrlData);
          r.resolve(e)}
        catch(t){
          r.reject("seatOrganisationService.getSeatOrganisationData: unhandled exception: "+t.message)}
      }
                          ),r.promise}
    ,u=function(){
      Pd.Shared.LogToConsoleIfDebug("seatOrganisationService.getSeatingDataNr",!0);
      var l=Q.defer(),e=breeze.EntityQuery.from("SeatOrganisationNr").where("Language","==",a).select("SeatNumber,PersonNumber,PersonIdCode,FirstName,LastName,CantonAbbreviation,ParlGroupNumber,ParlGroupName").using(manager);
      return e.execute().then(function(a){
        l.resolve(a.results)}
                             ).fail(function(a){
        Pd.Shared.LogToConsoleIfDebug(a),l.reject(a)}
                                   ),l.promise}
    ,n=function(){
      Pd.Shared.LogToConsoleIfDebug("seatOrganisationService.getSeatingDataSr",!0);
      var a=Q.defer(),e={
        councilorSeatMappingDataSr:M(),councilorDataSr:s()};
      return l.all(e).then(function(l){
        try{
          for(var e=[],r=0;r<l.councilorSeatMappingDataSr.length;r++)for(var t=l.councilorSeatMappingDataSr[r],o=0;o<l.councilorDataSr.length;o++){
            var Z=l.councilorDataSr[o];
            t.MemberCouncilId==Z.PersonNumber&&e.push({
              ID:0,SeatNumber:t.SeatNumber,PersonNumber:Z.PersonNumber,PersonIdCode:Z.PersonIdCode,FirstName:Z.FirstName,LastName:Z.LastName,CantonAbbreviation:Z.CantonAbbreviation,ParlGroupNumber:Z.ParlGroupNumber,ParlGroupName:Z.ParlGroupName}
                                                     )}
          a.resolve(e)}
        catch(u){
          a.reject("seatOrganisationService.getSeatingDataSr: unhandled exception: "+u.message)}
      }
                          ),a.promise}
    ,M=function(){
      var l=Q.defer();
      try{
        OData.read({
          requestUri:o,contentType:"application/json;odata=verbose",headers:{
            "Content-Type":"application/json",Accept:"application/json; odata=verbose"}
        }
                   ,function(a){
          l.resolve(a.results)}
                   ,function(a){
          l.reject(new Error("API request failed: "+a.message))}
                  )}
      catch(a){
        l.reject(new Error("Fatal Unhandled Error: "+a.message))}
      return l.promise}
    ,s=function(){
      Pd.Shared.LogToConsoleIfDebug("seatOrganisationService.getCouncilorDataSr",!0);
      var l=Q.defer(),e=breeze.EntityQuery.from("MemberCouncil").where("Language","==",a).where("Council","==","2").where("Active","==","true").select("PersonNumber,PersonIdCode,FirstName,LastName,CantonAbbreviation,ParlGroupNumber,ParlGroupName").using(manager);
      return e.execute().then(function(a){
        l.resolve(a.results)}
                             ).fail(function(a){
        Pd.Shared.LogToConsoleIfDebug(a),l.reject(a)}
                                   ),l.promise}
    ,i=function(){
      return Pd.Shared.LogToConsoleIfDebug("seatOrganisationService.getCouncilorSmallImageUrl",!0),Pd.EntityMappings.GetEntityRecordMapping("Councilor","SmallPicture","0")}
    ,h=function(l,e,r){
      Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.prepareSeatingData",!0);
      var o=[],Z=[],u=[],n={
      };
      switch(l){
        case t.SR:o=A(g),Z=c(N);
          break;
        default:o=A(v),Z=c(b)}
      for(var M="",s=0;s<r[0].length;s++)if(r[0][s].language===a.toLowerCase()){
        M=r[0][s].url;
        break}
      for(var i=0;i<e.length;i++){
        var h=e[i],Q=m(o,h.SeatNumber);
        null!=Q&&((Pd.Utility.StringIsNullOrEmpty(h.PersonNumber)||Pd.Utility.StringIsNullOrEmpty(h.LastName)||Pd.Utility.StringIsNullOrEmpty(h.FirstName))&&(h.PersonNumber=0,h.LastName="",h.FirstName="",h.CantonAbbreviation="",Q.disabled=!0,Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.prepareSeatingData: have invalid/disabled seat: "+h.SeatNumber)),(Pd.Utility.StringIsNullOrEmpty(h.ParlGroupNumber)||Pd.Utility.StringIsNullOrEmpty(h.ParlGroupName))&&(Pd.Utility.StringIsNullOrEmpty(h.ParlGroupNumber)&&(h.ParlGroupNumber=0),Pd.Utility.StringIsNullOrEmpty(h.ParlGroupName)&&(h.ParlGroupName=Res.seatOrganisationNoParlGroupInfo)),Q.parlGroupColour=p(h.ParlGroupNumber),Q.councilorName="{0} {1}".format(h.LastName,h.FirstName),Q.councilorDetailUrl=Pd.Utility.GetCouncillorFriendlyUrl(h.FirstName,h.LastName,h.PersonNumber),Q.councilorCanton=h.CantonAbbreviation,Q.parlGroupName=h.ParlGroupName,Q.parlGroupNumber=h.ParlGroupNumber,void 0==n[h.ParlGroupNumber]&&(n[h.ParlGroupNumber]={
                  }
                  ,n[h.ParlGroupNumber].Counter=0,n[h.ParlGroupNumber].ParlGroupName=h.ParlGroupName,n[h.ParlGroupNumber].ParlGroupColour=p(h.ParlGroupNumber)),n[h.ParlGroupNumber].Counter++,Q.councilorPhotoUrl=M.format(h.PersonIdCode).format(h.PersonNumber))}
      for(var q in n)if(n.hasOwnProperty(q)){
        var d=n[q],D=d.Counter/e.length*100+"%";
        u.push({
          parlGroupCount:d.Counter,parlGroupNumber:parseInt(q),parlGroupName:d.ParlGroupName,parlGroupColour:d.ParlGroupColour,barWidth:D,showGroup:!0}
              )}
      for(var P=0;P<Z.length;P++){
        var f=Z[P],Q=m(o,f.number);
        null!=Q&&(Q.seatNumber=f)}
      return{
        seats:o,seatNumbers:Z,groups:u}
    }
    ,p=function(l){
      if(Pd.Utility.StringIsNullOrEmpty(l))return r.parlGroupColourFallback;
      var a=e[l];
      return Pd.Utility.StringIsNullOrEmpty(a)?r.parlGroupColourFallback:a}
    ,m=function(l,a){
      if(0===a)return null;
      var e=Pd.Utility.FirstOrDefault(l,function(l){
        return l.number==a}
                                     );
      return null!=e?e:(Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.getSeatBySeatNumber: count not locate seat with seat number '"+a+"'",!1),null)}
    ,A=function(l){
      Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.populateSeatDefaultValues",!0);
      for(var a=0;a<l.length;a++){
        var e=l[a];
        e.parlGroupColour=r.seatFillDefaultColour,e.opacity=1,e.councilorName="",e.councilorDetailUrl="",e.councilorCanton="",e.parlGroupName="",e.parlGroupNumber=0,e.councilorPhotoUrl="",e.isActive=!0,e.isHighlighted=!1,e.seatNumber=null,e.disabled=!1}
      return l}
    ,c=function(l){
      return Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.populateSeatDefaultValues",!0),Pd.Utility.ProcessArrayItems(l,function(l){
        l.fillColour=r.seatNumberFillDefaultColour}
                                                                                                                                  ),l}
    ,q=function(l,a,e,r,t){
      l.push({
        number:a,pathDesc:e,popupX:r,popupY:t}
            )}
    ,v=[];
    q(v,1,"M452.74,519.62v27H409.05v-27Z","452.74","519.62"),q(v,2,"M496.43,519.62v27H474.59v-27Z","496.43","519.62"),q(v,3,"M474.59,472.8v27H452.74v-27Z","474.59","472.8"),q(v,4,"M537.45,545.51q-10.47,1.05-21.14,1.11l-.14-27q9.37,0,18.59-1Z","537.45","545.51"),q(v,5,"M496.43,472.8v27H474.59v-27Z","496.43","472.8"),q(v,6,"M559.11,542.25q-10.69,2.15-21.66,3.26l-2.68-26.86q9.64-1,19-2.87Z","559.11","542.25"),q(v,7,"M365.37,453V426h21.84v27Z","365.37","453"),q(v,8,"M430.9,453V426h21.84v27Z","430.9","453"),q(v,9,"M387.21,453V426h21.84v27Z","387.21","453"),q(v,10,"M452.74,453V426h21.84v27Z","452.74","453"),q(v,11,"M409.05,453V426H430.9v27Z","409.05","453"),q(v,12,"M474.59,453V426h21.84v27Z","474.59","453"),q(v,13,"M357.36,373.48l-21.21-13.54a83.29,83.29,0,0,0-10,22.19L350.38,389A58.18,58.18,0,0,1,357.36,373.48Z","357.36","373.48"),q(v,14,"M470.1,314.39,461.28,338a58.3,58.3,0,0,0-20.51-3.7v-25.2h0A83.18,83.18,0,0,1,470.1,314.39Z","470.1","314.39"),q(v,15,"M368.86,360.3l-16.25-19.2a84.47,84.47,0,0,0-16.46,18.85l21.21,13.54A58.88,58.88,0,0,1,368.86,360.3Z","368.86","360.3"),q(v,16,"M494.83,328.94l-16.25,19.2A58.51,58.51,0,0,0,461.28,338l8.82-23.59A83.85,83.85,0,0,1,494.83,328.94Z","494.83","328.94"),q(v,17,"M400.52,338l-8.82-23.59A83.85,83.85,0,0,0,367,328.94l16.25,19.2A58.51,58.51,0,0,1,400.52,338Z","400.52","338"),q(v,18,"M525.65,359.94l-21.21,13.54a58.88,58.88,0,0,0-11.51-13.18l16.25-19.2A84.47,84.47,0,0,1,525.65,359.94Z","525.65","359.94"),q(v,19,"M421,334.28v-25.2h0a83.18,83.18,0,0,0-29.33,5.31L400.52,338A58.3,58.3,0,0,1,421,334.28Z","421","334.28"),q(v,20,"M535.65,382.13,511.42,389a58.18,58.18,0,0,0-7-15.52l21.21-13.54A83.29,83.29,0,0,1,535.65,382.13Z","535.65","382.13"),q(v,21,"M306.48,378.86l-26.12-6.8a129.57,129.57,0,0,0-3.49,19.17l26.84,2.84A102.76,102.76,0,0,1,306.48,378.86Z","306.48","378.86"),q(v,22,"M461.79,264l-4.35,26.64a103.54,103.54,0,0,0-16.67-1.37h0v-27h0A130.54,130.54,0,0,1,461.79,264Z","461.79","264"),q(v,23,"M311.54,364.17l-24.8-10.64a129.34,129.34,0,0,0-6.38,18.52l26.12,6.8A102.58,102.58,0,0,1,311.54,364.17Z","311.54","364.17"),q(v,24,"M486,270.34l-9.34,25.33a102.52,102.52,0,0,0-19.17-5L461.79,264A129.24,129.24,0,0,1,486,270.34Z","486","270.34"),q(v,25,"M319.08,349.87l-22.83-14.36a130.26,130.26,0,0,0-9.51,18l24.8,10.64A103.32,103.32,0,0,1,319.08,349.87Z","319.08","349.87"),q(v,26,"M508.06,281l-13.92,23.12a103.16,103.16,0,0,0-17.53-8.48L486,270.34A130.05,130.05,0,0,1,508.06,281Z","508.06","281"),q(v,27,"M328.65,337l-20.34-17.71a131.37,131.37,0,0,0-12.06,16.2l22.83,14.36A104.2,104.2,0,0,1,328.65,337Z","328.65","337"),q(v,28,"M525.05,293.23l-17.43,20.59a104.27,104.27,0,0,0-13.48-9.68L508.06,281A131.44,131.44,0,0,1,525.05,293.23Z","525.05","293.23"),q(v,29,"M339.81,326l-17.43-20.59a131.88,131.88,0,0,0-14.08,13.92L328.65,337A104.62,104.62,0,0,1,339.81,326Z","339.81","326"),q(v,30,"M553.49,319.31,533.15,337A104.62,104.62,0,0,0,522,326l17.43-20.59A131.88,131.88,0,0,1,553.49,319.31Z","553.49","319.31"),q(v,31,"M367.66,304.15,353.74,281a131.44,131.44,0,0,0-17,12.2l17.43,20.59A104.27,104.27,0,0,1,367.66,304.15Z","367.66","304.15"),q(v,32,"M565.55,335.51l-22.83,14.36A104.2,104.2,0,0,0,533.15,337l20.34-17.71A131.37,131.37,0,0,1,565.55,335.51Z","565.55","335.51"),q(v,33,"M385.19,295.67l-9.34-25.33A130.05,130.05,0,0,0,353.74,281l13.92,23.12A103.16,103.16,0,0,1,385.19,295.67Z","385.19","295.67"),q(v,34,"M575.06,353.53l-24.8,10.64a103.32,103.32,0,0,0-7.54-14.29l22.83-14.36A130.26,130.26,0,0,1,575.06,353.53Z","575.06","353.53"),q(v,35,"M404.36,290.63,400,264a129.24,129.24,0,0,0-24.16,6.36l9.34,25.33A102.52,102.52,0,0,1,404.36,290.63Z","404.36","290.63"),q(v,36,"M581.44,372.05l-26.12,6.8a102.58,102.58,0,0,0-5.06-14.69l24.8-10.64A129.34,129.34,0,0,1,581.44,372.05Z","581.44","372.05"),q(v,37,"M421,289.26h0v-27h0A130.54,130.54,0,0,0,400,264l4.35,26.64A103.54,103.54,0,0,1,421,289.26Z","421","289.26"),q(v,38,"M584.93,391.22l-26.84,2.84a102.76,102.76,0,0,0-2.77-15.2l26.12-6.8A129.57,129.57,0,0,1,584.93,391.22Z","584.93","391.22"),q(v,39,"M260,371.92,233.67,366a176.31,176.31,0,0,0-3.35,20.32l26.84,2.84A149.19,149.19,0,0,1,260,371.92Z","260","371.92"),q(v,40,"M464.6,217,461,243.8a150.76,150.76,0,0,0-20.2-1.36h0v-27h0A178,178,0,0,1,464.6,217Z","464.6","217"),q(v,41,"M265.32,353.76l-25.39-9.19A175.78,175.78,0,0,0,233.67,366L260,371.92A149,149,0,0,1,265.32,353.76Z","265.32","353.76"),q(v,42,"M489.72,222.35l-7.45,26A148.89,148.89,0,0,0,461,243.8L464.6,217A175.76,175.76,0,0,1,489.72,222.35Z","489.72","222.35"),q(v,43,"M273.22,335.85l-24-12.43a176.4,176.4,0,0,0-9.3,21.14l25.39,9.19A149.44,149.44,0,0,1,273.22,335.85Z","273.22","335.85"),q(v,44,"M514.14,231.39,503,256a149.07,149.07,0,0,0-20.7-7.68l7.45-26A175.86,175.86,0,0,1,514.14,231.39Z","514.14","231.39"),q(v,45,"M283.39,319.09,261.2,303.64a177.65,177.65,0,0,0-12,19.78l24,12.43A150.56,150.56,0,0,1,283.39,319.09Z","283.39","319.09"),q(v,46,"M536.38,243.51l-14.56,22.74A150.3,150.3,0,0,0,503,256l11.17-24.58A177.21,177.21,0,0,1,536.38,243.51Z","536.38","243.51"),q(v,47,"M295.19,304.24l-20-18.11a178.68,178.68,0,0,0-14,17.51l22.19,15.45A151.53,151.53,0,0,1,295.19,304.24Z","295.19","304.24"),q(v,48,"M555.29,257.51l-17.45,20.61a151.5,151.5,0,0,0-16-11.87l14.56-22.74A178.49,178.49,0,0,1,555.29,257.51Z","555.29","257.51"),q(v,49,"M309.59,290.27l-17.45-20.61a179,179,0,0,0-17,16.48l20,18.11A151.93,151.93,0,0,1,309.59,290.27Z","309.59","290.27"),q(v,50,"M586.65,286.13l-20,18.11a151.93,151.93,0,0,0-14.39-14l17.45-20.61A179,179,0,0,1,586.65,286.13Z","586.65","286.13"),q(v,51,"M340,266.25l-14.56-22.74a178.49,178.49,0,0,0-18.92,14l17.45,20.61A151.5,151.5,0,0,1,340,266.25Z","340","266.25"),q(v,52,"M600.6,303.64l-22.19,15.45a151.53,151.53,0,0,0-11.81-14.85l20-18.11A178.68,178.68,0,0,1,600.6,303.64Z","600.6","303.64"),q(v,53,"M358.83,256l-11.17-24.58a177.21,177.21,0,0,0-22.23,12.12L340,266.25A150.3,150.3,0,0,1,358.83,256Z","358.83","256"),q(v,54,"M612.57,323.42l-24,12.43a150.56,150.56,0,0,0-10.16-16.76l22.19-15.45A177.65,177.65,0,0,1,612.57,323.42Z","612.57","323.42"),q(v,55,"M379.53,248.3l-7.45-26a175.86,175.86,0,0,0-24.42,9L358.83,256A149.07,149.07,0,0,1,379.53,248.3Z","379.53","248.3"),q(v,56,"M621.87,344.56l-25.39,9.19a149.44,149.44,0,0,0-7.91-17.91l24-12.43A176.4,176.4,0,0,1,621.87,344.56Z","621.87","344.56"),q(v,57,"M400.82,243.8,397.19,217a175.76,175.76,0,0,0-25.12,5.3l7.45,26A148.89,148.89,0,0,1,400.82,243.8Z","400.82","243.8"),q(v,58,"M628.13,366l-26.37,5.94a149,149,0,0,0-5.28-18.16l25.39-9.19A175.78,175.78,0,0,1,628.13,366Z","628.13","366"),q(v,59,"M421,242.44h0v-27h0a178,178,0,0,0-23.83,1.6l3.63,26.76A150.76,150.76,0,0,1,421,242.44Z","421","242.44"),q(v,60,"M631.48,386.29l-26.84,2.84a149.19,149.19,0,0,0-2.87-17.22L628.13,366A176.31,176.31,0,0,1,631.48,386.29Z","631.48","386.29"),q(v,61,"M213.12,367.44l-26.5-5.14c-1.21,6.27-2.18,12.62-2.86,19.07l26.84,2.84C211.2,378.54,212.05,373,213.12,367.44Z","213.12","367.44"),q(v,62,"M462.81,169.71l-2.65,26.87c-6.38-.63-12.84-1-19.38-1h0v-27h0C448.21,168.62,455.56,169,462.81,169.71Z","462.81","169.71"),q(v,63,"M217.52,349.35l-25.9-7.61q-3,10.1-5,20.57l26.5,5.14Q214.9,358.23,217.52,349.35Z","217.52","349.35"),q(v,64,"M485,173l-5.32,26.47a196.17,196.17,0,0,0-19.5-2.9l2.65-26.87A223,223,0,0,1,485,173Z","485","173"),q(v,65,"M223.87,331.15l-25-10.1q-4.09,10.11-7.21,20.68l25.9,7.61Q220.26,340.05,223.87,331.15Z","223.87","331.15"),q(v,66,"M507.41,178.75l-8,25.78a195.29,195.29,0,0,0-19.73-5.05L485,173A222,222,0,0,1,507.41,178.75Z","507.41","178.75"),q(v,67,"M232.11,313.41l-23.9-12.53q-5.17,9.81-9.37,20.17l25,10.1Q227.56,322.05,232.11,313.41Z","232.11","313.41"),q(v,68,"M529.37,186.9,518.7,211.7a195.58,195.58,0,0,0-19.32-7.17l8-25.78A222.38,222.38,0,0,1,529.37,186.9Z","529.37","186.9"),q(v,69,"M242,296.64l-22.54-14.83q-6.09,9.22-11.27,19.06l23.9,12.53Q236.66,304.77,242,296.64Z","242","296.64"),q(v,70,"M550.16,197.19,537,220.75a196.58,196.58,0,0,0-18.28-9l10.67-24.8A223.52,223.52,0,0,1,550.16,197.19Z","550.16","197.19"),q(v,71,"M253.24,281.29l-21-16.93q-6.79,8.41-12.76,17.46L242,296.64Q247.26,288.69,253.24,281.29Z","253.24","281.29"),q(v,72,"M569.17,209.18l-15.46,22.11A197.68,197.68,0,0,0,537,220.75l13.17-23.56A224.75,224.75,0,0,1,569.17,209.18Z","569.17","209.18"),q(v,73,"M265.35,267.63,246,248.83q-7.23,7.44-13.76,15.53l21,16.93Q259,274.18,265.35,267.63Z","265.35","267.63"),q(v,74,"M585.52,221.79l-17.43,20.6q-6.92-5.87-14.38-11.1l15.46-22.11Q577.64,215.12,585.52,221.79Z","585.52","221.79"),q(v,75,"M279.34,254.54l-17.43-20.6Q253.59,241,246,248.83l19.35,18.8Q272,260.76,279.34,254.54Z","279.34","254.54"),q(v,76,"M615.8,248.83l-19.35,18.8q-6.68-6.87-14-13.09l17.43-20.6Q608.2,241,615.8,248.83Z","615.8","248.83"),q(v,77,"M308.09,231.29l-15.46-22.11q-8.47,5.94-16.35,12.62l17.43,20.6Q300.63,236.52,308.09,231.29Z","308.09","231.29"),q(v,78,"M629.56,264.35l-21,16.93q-5.74-7.11-12.11-13.66l19.35-18.8Q623,256.27,629.56,264.35Z","629.56","264.35"),q(v,79,"M324.82,220.75l-13.17-23.56a224.75,224.75,0,0,0-19,12l15.46,22.11A197.68,197.68,0,0,1,324.82,220.75Z","324.82","220.75"),q(v,80,"M642.32,281.81l-22.54,14.83q-5.25-8-11.22-15.36l21-16.93Q636.35,272.76,642.32,281.81Z","642.32","281.81"),q(v,81,"M343.1,211.7l-10.67-24.8a223.52,223.52,0,0,0-20.78,10.29l13.17,23.56A196.58,196.58,0,0,1,343.1,211.7Z","343.1","211.7"),q(v,82,"M653.59,300.88l-23.9,12.53q-4.55-8.64-9.91-16.77l22.54-14.83Q648.41,291,653.59,300.88Z","653.59","300.88"),q(v,83,"M362.41,204.53l-8-25.78a222.38,222.38,0,0,0-22,8.15l10.67,24.8A195.58,195.58,0,0,1,362.41,204.53Z","362.41","204.53"),q(v,84,"M663,321.05l-25,10.1q-3.69-9.1-8.24-17.74l23.9-12.53Q658.76,310.69,663,321.05Z","663","321.05"),q(v,85,"M382.15,199.48,376.82,173a222,222,0,0,0-22.43,5.74l8,25.78A195.29,195.29,0,0,1,382.15,199.48Z","382.15","199.48"),q(v,86,"M670.17,341.73l-25.9,7.61q-2.74-9.29-6.35-18.19l25-10.1Q667.05,331.16,670.17,341.73Z","670.17","341.73"),q(v,87,"M401.64,196.58,399,169.71a223,223,0,0,0-22.17,3.3l5.32,26.47A196.17,196.17,0,0,1,401.64,196.58Z","401.64","196.58"),q(v,88,"M675.18,362.3l-26.5,5.14q-1.78-9.21-4.4-18.09l25.9-7.61Q673.15,351.83,675.18,362.3Z","675.18","362.3"),q(v,89,"M421,195.62h0v-27h0c-7.44,0-14.78.38-22,1.09l2.65,26.87C408,195.95,414.49,195.62,421,195.62Z","421","195.62"),q(v,90,"M678,381.37l-26.84,2.84c-.6-5.67-1.45-11.26-2.51-16.77l26.5-5.14C676.39,368.57,677.36,374.93,678,381.37Z","678","381.37"),q(v,91,"M173.69,332.53l-25.78-8q-2.76,8.86-4.91,18l26.27,6.22Q171.21,340.51,173.69,332.53Z","173.69","332.53"),q(v,92,"M461.14,122.57l-2,26.92c-6.06-.45-12.17-.7-18.34-.7h0v-27h0C447.62,121.8,454.41,122.07,461.14,122.57Z","461.14","122.57"),q(v,93,"M179.41,316.23l-25.14-9.82q-3.49,8.9-6.35,18.1l25.78,8Q176.27,324.25,179.41,316.23Z","179.41","316.23"),q(v,94,"M481.79,124.92l-4.09,26.69q-9.19-1.4-18.59-2.11l2-26.92Q471.58,123.35,481.79,124.92Z","481.79","124.92"),q(v,95,"M186.43,300.07l-24.37-11.61q-4.21,8.8-7.79,17.94l25.14,9.82Q182.64,308,186.43,300.07Z","186.43","300.07"),q(v,96,"M502.82,129l-6.18,26.28q-9.34-2.2-18.94-3.67l4.09-26.69Q492.45,126.54,502.82,129Z","502.82","129"),q(v,97,"M194.68,284.33,171.23,271q-4.89,8.56-9.17,17.49l24.37,11.61Q190.27,292,194.68,284.33Z","194.68","284.33"),q(v,98,"M523.84,134.84l-8.28,25.7q-9.3-3-18.92-5.27L502.82,129Q513.5,131.5,523.84,134.84Z","523.84","134.84"),q(v,99,"M204,269.24l-22.42-15q-5.49,8.17-10.4,16.75l23.46,13.35Q199.09,276.6,204,269.24Z","204","269.24"),q(v,100,"M544.41,142.44l-10.33,24.94q-9.09-3.78-18.52-6.84l8.28-25.7Q534.32,138.22,544.41,142.44Z","544.41","142.44"),q(v,101,"M214.34,255l-21.28-16.59q-6,7.67-11.44,15.77l22.42,15Q208.94,262,214.34,255Z","214.34","255"),q(v,102,"M564.15,151.59l-12.29,24q-8.69-4.47-17.77-8.25l10.33-24.94Q554.49,146.63,564.15,151.59Z","564.15","151.59"),q(v,103,"M225.37,241.9l-20.06-18q-6.37,7.08-12.25,14.6L214.34,255Q219.63,248.28,225.37,241.9Z","225.37","241.9"),q(v,104,"M582.72,162.07l-14.14,23q-8.15-5-16.72-9.43l12.29-24Q573.65,156.48,582.72,162.07Z","582.72","162.07"),q(v,105,"M236.9,229.92l-18.78-19.37q-6.63,6.43-12.81,13.31l20.06,18Q230.94,235.71,236.9,229.92Z","236.9","229.92"),q(v,106,"M599.84,173.58,584,195.42q-7.5-5.46-15.41-10.37l14.14-23Q591.51,167.5,599.84,173.58Z","599.84","173.58"),q(v,107,"M249.11,218.82l-17.43-20.6q-7,5.93-13.56,12.32l18.78,19.37Q242.82,224.17,249.11,218.82Z","249.11","218.82"),q(v,108,"M615.75,186.08l-17.43,20.6q-6.95-5.89-14.33-11.25l15.85-21.84Q608,179.54,615.75,186.08Z","615.75","186.08"),q(v,109,"M277.81,195.42,262,173.58q-8.19,6-15.92,12.5l17.43,20.6Q270.42,200.78,277.81,195.42Z","277.81","195.42"),q(v,110,"M643.68,210.55l-18.78,19.37q-5.92-5.74-12.21-11.09l17.43-20.6Q637.11,204.16,643.68,210.55Z","643.68","210.55"),q(v,111,"M293.22,185.05l-14.14-23q-8.79,5.43-17.12,11.51l15.85,21.84Q285.31,190,293.22,185.05Z","293.22","185.05"),q(v,112,"M656.49,223.85l-20.06,18q-5.56-6.18-11.53-12l18.78-19.37Q650.31,217,656.49,223.85Z","656.49","223.85"),q(v,113,"M309.94,175.62l-12.29-24q-9.5,4.88-18.57,10.47l14.14,23Q301.37,180,309.94,175.62Z","309.94","175.62"),q(v,114,"M668.73,238.46,647.45,255q-5.29-6.77-11-13.15l20.06-18Q662.86,230.93,668.73,238.46Z","668.73","238.46"),q(v,115,"M327.71,167.38l-10.33-24.94q-10.08,4.19-19.74,9.16l12.29,24Q318.63,171.16,327.71,167.38Z","327.71","167.38"),q(v,116,"M680.17,254.23l-22.42,15q-4.9-7.29-10.3-14.2l21.28-16.59Q674.73,246.13,680.17,254.23Z","680.17","254.23"),q(v,117,"M346.23,160.54,338,134.84q-10.48,3.39-20.57,7.6l10.33,24.94Q336.8,163.6,346.23,160.54Z","346.23","160.54"),q(v,118,"M690.57,271l-23.46,13.35q-4.41-7.72-9.36-15.08l22.42-15Q685.66,262.4,690.57,271Z","690.57","271"),q(v,119,"M365.16,155.27,359,129q-10.67,2.51-21,5.85l8.28,25.7Q355.54,157.53,365.16,155.27Z","365.16","155.27"),q(v,120,"M699.74,288.47l-24.37,11.61q-3.84-8-8.25-15.75L690.57,271Q695.46,279.54,699.74,288.47Z","699.74","288.47"),q(v,121,"M384.09,151.61,380,124.92q-10.66,1.63-21,4.07l6.18,26.28Q374.49,153.07,384.09,151.61Z","384.09","151.61"),q(v,122,"M707.53,306.41l-25.14,9.82q-3.22-8.23-7-16.16l24.37-11.61Q703.94,297.27,707.53,306.41Z","707.53","306.41"),q(v,123,"M402.69,149.5l-2-26.92q-10.44.78-20.65,2.34l4.09,26.69Q393.29,150.2,402.69,149.5Z","402.69","149.5"),q(v,124,"M713.88,324.52l-25.78,8q-2.58-8.28-5.72-16.3l25.14-9.82Q711,315.32,713.88,324.52Z","713.88","324.52"),q(v,125,"M421,148.8h0v-27h0c-6.85,0-13.64.27-20.37.77l2,26.92C408.74,149,414.86,148.8,421,148.8Z","421","148.8"),q(v,126,"M718.79,342.49l-26.27,6.22q-1.94-8.2-4.42-16.18l25.78-8Q716.64,333.38,718.79,342.49Z","718.79","342.49"),q(v,127,"M128.28,321l-25.84-7.79q-2.76,9.13-5,18.49l26.27,6.22Q125.75,329.36,128.28,321Z","128.28","321"),q(v,128,"M462.87,75.75,461,102.68q-10-.69-20.22-.7h0V75h0Q451.91,75,462.87,75.75Z","462.87","75.75"),q(v,129,"M134,303.9l-25.31-9.38q-3.43,9.21-6.29,18.69L128.28,321Q130.9,312.33,134,303.9Z","134","303.9"),q(v,130,"M484.38,78l-3.7,26.74q-9.74-1.34-19.68-2l1.88-26.93Q473.73,76.5,484.38,78Z","484.38","78"),q(v,131,"M141,286.83l-24.66-11q-4.1,9.18-7.61,18.66L134,303.9Q137.26,295.23,141,286.83Z","141","286.83"),q(v,132,"M506.33,81.8l-5.57,26.42q-9.93-2.09-20.09-3.5L484.38,78Q495.48,79.5,506.33,81.8Z","506.33","81.8"),q(v,133,"M149.18,270l-23.9-12.53q-4.75,9-8.94,18.38l24.66,11Q144.82,278.27,149.18,270Z","149.18","270"),q(v,134,"M528.4,87.3l-7.44,26q-10-2.86-20.19-5l5.57-26.42Q517.51,84.16,528.4,87.3Z","528.4","87.3"),q(v,135,"M158.47,253.66l-23-14q-5.36,8.75-10.15,17.87L149.18,270Q153.57,261.67,158.47,253.66Z","158.47","253.66"),q(v,136,"M550.23,94.44l-9.3,25.35q-9.83-3.62-20-6.54l7.44-26Q539.48,90.48,550.23,94.44Z","550.23","94.44"),q(v,137,"M168.76,238l-22.09-15.5q-5.89,8.37-11.24,17.14l23,14Q163.37,245.65,168.76,238Z","168.76","238"),q(v,138,"M571.49,103.15l-11.1,24.61q-9.55-4.33-19.45-8l9.3-25.35Q561,98.43,571.49,103.15Z","571.49","103.15"),q(v,139,"M179.92,223.15l-21.05-16.88q-6.35,7.9-12.2,16.2L168.76,238Q174.11,230.38,179.92,223.15Z","179.92","223.15"),q(v,140,"M591.84,113.29,579,137q-9.12-5-18.62-9.28l11.1-24.61Q581.87,107.86,591.84,113.29Z","591.84","113.29"),q(v,141,"M191.76,209.32l-20-18.16q-6.7,7.35-12.94,15.12l21.05,16.88Q185.62,216,191.76,209.32Z","191.76","209.32"),q(v,142,"M611,124.6l-14.46,22.78Q588,141.91,579,137l12.83-23.74Q601.64,118.62,611,124.6Z","611","124.6"),q(v,143,"M204.09,196.56l-18.81-19.35q-6.95,6.76-13.47,13.94l20,18.16Q197.74,202.76,204.09,196.56Z","204.09","196.56"),q(v,144,"M628.84,136.82l-16,21.75q-8-5.86-16.3-11.18L611,124.6Q620.15,130.41,628.84,136.82Z","628.84","136.82"),q(v,145,"M218.88,183.11l-17.43-20.6q-8.34,7.07-16.17,14.7l18.81,19.35Q211.25,189.59,218.88,183.11Z","218.88","183.11"),q(v,146,"M646,150.36,628.55,171q-7.62-6.46-15.69-12.4l16-21.75Q637.64,143.3,646,150.36Z","646","150.36"),q(v,147,"M248.93,158.56l-16-21.75q-8.8,6.49-17.14,13.55L233.25,171Q240.87,164.5,248.93,158.56Z","248.93","158.56"),q(v,148,"M676.52,177.21l-18.81,19.35q-7.17-7-14.79-13.45l17.43-20.6Q668.68,169.59,676.52,177.21Z","676.52","177.21"),q(v,149,"M265.24,147.38,250.77,124.6q-9.12,5.82-17.82,12.22l16,21.75Q256.88,152.7,265.24,147.38Z","265.24","147.38"),q(v,150,"M690,191.15l-20,18.16q-6-6.56-12.32-12.76l18.81-19.35Q683.46,184,690,191.15Z","690","191.15"),q(v,151,"M282.79,137,270,113.29q-9.8,5.32-19.18,11.3l14.46,22.78Q273.82,141.91,282.79,137Z","282.79","137"),q(v,152,"M702.93,206.27l-21.05,16.88Q676.17,216,670,209.32l20-18.16Q696.68,198.51,702.93,206.27Z","702.93","206.27"),q(v,153,"M301.41,127.76l-11.1-24.61q-10.38,4.71-20.35,10.14L282.79,137Q291.91,132.08,301.41,127.76Z","301.41","127.76"),q(v,154,"M715.12,222.47,693,238q-5.35-7.6-11.16-14.83l21.05-16.88Q709.27,214.17,715.12,222.47Z","715.12","222.47"),q(v,155,"M320.86,119.79l-9.3-25.35q-10.82,4-21.26,8.71l11.1,24.61Q311,123.43,320.86,119.79Z","320.86","119.79"),q(v,156,"M726.37,239.61l-23,14q-4.9-8-10.29-15.69l22.09-15.5Q721,230.84,726.37,239.61Z","726.37","239.61"),q(v,157,"M340.84,113.25l-7.44-26q-11.09,3.19-21.84,7.15l9.3,25.35Q330.69,116.17,340.84,113.25Z","340.84","113.25"),q(v,158,"M736.52,257.48,712.62,270q-4.39-8.34-9.29-16.35l23-14Q731.72,248.37,736.52,257.48Z","736.52","257.48"),q(v,159,"M361,108.22,355.47,81.8q-11.18,2.36-22.07,5.5l7.44,26Q350.8,110.39,361,108.22Z","361","108.22"),q(v,160,"M745.46,275.86l-24.66,11Q717,278.27,712.62,270l23.9-12.53Q741.27,266.51,745.46,275.86Z","745.46","275.86"),q(v,161,"M381.12,104.71,377.42,78q-11.1,1.53-22,3.83L361,108.22Q371,106.13,381.12,104.71Z","381.12","104.71"),q(v,162,"M753.07,294.52l-25.31,9.38q-3.22-8.67-7-17.07l24.66-11Q749.56,285,753.07,294.52Z","753.07","294.52"),q(v,163,"M400.81,102.68l-1.88-26.93q-10.86.75-21.51,2.22l3.7,26.74Q390.87,103.37,400.81,102.68Z","400.81","102.68"),q(v,164,"M759.36,313.2,733.52,321q-2.62-8.67-5.75-17.1l25.31-9.38Q756.5,303.73,759.36,313.2Z","759.36","313.2"),q(v,165,"M421,102h0V75h0q-11.14,0-22.1.76l1.88,26.93Q410.83,102,421,102Z","421","102"),q(v,166,"M764.31,331.69,738,337.92q-2-8.56-4.56-16.92l25.84-7.79Q762.09,322.34,764.31,331.69Z","764.31","331.69"),q(v,167,"M118.5,229.33,95.23,215.15q-6.16,10.07-11.63,20.5l24.12,12.64Q112.81,238.63,118.5,229.33Z","118.5","229.33"),q(v,168,"M464.72,28.94l-1.77,27q-11-.72-22.17-.73h0v-27Q452.81,28.16,464.72,28.94Z","464.72","28.94"),q(v,169,"M130.57,210.94l-22.28-15.65q-6.87,9.74-13.06,19.87l23.26,14.18Q124.24,219.94,130.57,210.94Z","130.57","210.94"),q(v,170,"M487.54,31.13l-3.47,26.81q-10.47-1.35-21.12-2.05l1.77-27Q476.2,29.68,487.54,31.13Z","487.54","31.13"),q(v,171,"M143.82,193.37l-21.2-17.06q-7.5,9.28-14.33,19l22.28,15.65Q136.91,201.94,143.82,193.37Z","143.82","193.37"),q(v,172,"M510.69,34.84,505.5,61.41q-10.6-2.07-21.43-3.47l3.47-26.81Q499.2,32.62,510.69,34.84Z","510.69","34.84"),q(v,173,"M158.06,176.84l-20-18.39q-8,8.72-15.4,17.86l21.2,17.06Q150.67,184.87,158.06,176.84Z","158.06","176.84"),q(v,174,"M533.89,40.13,527,66.34q-10.6-2.8-21.47-4.93l5.19-26.57Q522.4,37.11,533.89,40.13Z","533.89","40.13"),q(v,175,"M173.07,161.49l-18.83-19.63q-2.7,2.59-5.36,5.25-5.57,5.57-10.86,11.33l20,18.39Q165.32,168.93,173.07,161.49Z","173.07","161.49"),q(v,176,"M556.84,47,548.2,72.72Q537.73,69.19,527,66.34l6.92-26.22Q545.49,43.17,556.84,47Z","556.84","47"),q(v,177,"M188.65,147.4,171.1,126.66q-8.62,7.32-16.86,15.21l18.83,19.63Q180.65,154.21,188.65,147.4Z","188.65","147.4"),q(v,178,"M579.23,55.31,568.91,80.46q-10.19-4.2-20.71-7.75L556.84,47Q568.17,50.77,579.23,55.31Z","579.23","55.31"),q(v,179,"M219.69,122l-16.22-21.82q-9.19,6.87-18,14.34L203,135.25Q211.14,128.36,219.69,122Z","219.69","122"),q(v,180,"M600.78,65,588.84,89.45q-9.8-4.8-19.94-9l10.32-25.16Q590.16,59.79,600.78,65Z","600.78","65"),q(v,181,"M236.22,110.42l-14.9-22.76q-9.09,6-17.85,12.51L219.69,122Q227.77,116,236.22,110.42Z","236.22","110.42"),q(v,182,"M621.26,75.85,607.79,99.5q-9.29-5.32-18.95-10.05L600.78,65Q611.18,70.08,621.26,75.85Z","621.26","75.85"),q(v,183,"M254,99.5,240.54,75.85q-9.78,5.59-19.22,11.8l14.9,22.76Q244.93,104.69,254,99.5Z","254","99.5"),q(v,184,"M640.48,87.65l-14.9,22.76q-8.71-5.73-17.79-10.92l13.47-23.65Q631,81.44,640.48,87.65Z","640.48","87.65"),q(v,185,"M273,89.45,261,65q-10.4,5.09-20.48,10.86L254,99.5Q263.3,94.18,273,89.45Z","273","89.45"),q(v,186,"M658.33,100.16,642.11,122q-8.08-6-16.53-11.57l14.9-22.76Q649.57,93.63,658.33,100.16Z","658.33","100.16"),q(v,187,"M292.89,80.46,282.57,55.31Q271.64,59.79,261,65L273,89.45Q282.75,84.64,292.89,80.46Z","292.89","80.46"),q(v,188,"M676.34,114.5l-17.56,20.74q-8.12-6.89-16.67-13.26l16.22-21.82Q667.52,107,676.34,114.5Z","676.34","114.5"),q(v,189,"M313.6,72.72,305,47q-11.34,3.8-22.39,8.33l10.32,25.16Q303.08,76.26,313.6,72.72Z","313.6","72.72"),q(v,190,"M707.56,141.86l-18.83,19.63q-7.58-7.28-15.58-14.09l17.56-20.74Q699.32,134,707.56,141.86Z","707.56","141.86"),q(v,191,"M334.83,66.34l-6.92-26.22q-11.6,3-22.95,6.84l8.64,25.75Q324.07,69.19,334.83,66.34Z","334.83","66.34"),q(v,192,"M723.78,158.45l-20,18.39q-7.26-7.91-15-15.35l18.83-19.63q2.7,2.59,5.36,5.25Q718.49,152.68,723.78,158.45Z","723.78","158.45"),q(v,193,"M356.3,61.41l-5.19-26.57q-11.71,2.26-23.2,5.28l6.92,26.22Q345.43,63.54,356.3,61.41Z","356.3","61.41"),q(v,194,"M739.18,176.31,718,193.37q-6.85-8.5-14.25-16.53l20-18.39Q731.79,167.17,739.18,176.31Z","739.18","176.31"),q(v,195,"M377.73,57.95l-3.47-26.81q-11.67,1.49-23.15,3.71l5.19,26.57Q366.9,59.35,377.73,57.95Z","377.73","57.95"),q(v,196,"M753.51,195.29l-22.28,15.65q-6.34-9-13.25-17.57l21.2-17.06Q746.68,185.59,753.51,195.29Z","753.51","195.29"),q(v,197,"M398.85,55.89l-1.77-27q-11.48.74-22.82,2.2l3.47,26.81Q388.2,56.6,398.85,55.89Z","398.85","55.89"),q(v,198,"M766.57,214.54,743.3,228.72q-5.75-9.4-12.07-18.39l22.28-15.65Q760.38,204.42,766.57,214.54Z","766.57","214.54"),q(v,199,"M421,55.16h0v-27q-12,0-23.95.77l1.77,27Q409.85,55.18,421,55.16Z","421","55.16"),q(v,200,"M778.2,235.65,754.07,248.3q-5.09-9.67-10.77-19l23.26-14.18Q772.73,225.23,778.2,235.65Z","778.2","235.65");
var b=[];
b.push({
number:1,pathDesc:"M433.17,538.3H432v-9.89l-2,1.79-.72-.86,2.88-2.37h1Z"}
),b.push({
      number:2,pathDesc:"M490.18,538.3H483V537l4.51-4.59q.26-.26.51-.54a5.16,5.16,0,0,0,.46-.61,3.32,3.32,0,0,0,.34-.67,2.15,2.15,0,0,0,.13-.74,2,2,0,0,0-.17-.83,1.77,1.77,0,0,0-.47-.62,2.18,2.18,0,0,0-.7-.39,2.62,2.62,0,0,0-.85-.14,2.3,2.3,0,0,0-1.47.48,2.18,2.18,0,0,0-.78,1.3l-1.22-.13a3.17,3.17,0,0,1,1.16-2,3.51,3.51,0,0,1,2.23-.72,4.52,4.52,0,0,1,1.3.18,3.27,3.27,0,0,1,1.09.55,2.69,2.69,0,0,1,.75.92,2.82,2.82,0,0,1,.28,1.29,3.47,3.47,0,0,1-.2,1.2,4.85,4.85,0,0,1-.52,1,6.9,6.9,0,0,1-.73.91q-.41.43-.84.85l-3.57,3.54h6Z"}
        ),b.push({
      number:3,pathDesc:"M467,487.65h1.63v1.06H467v2.69h-1.15v-2.69H461V487.4l4.58-7.33H467Zm-1.15-6.43h0l-3.9,6.43h3.94Z"}
                ),b.push({
      number:4,pathDesc:"M526.28,531.84h.59a4,4,0,0,0,1-.11,2.18,2.18,0,0,0,.79-.36,1.77,1.77,0,0,0,.54-.65,2.13,2.13,0,0,0,.2-1,1.82,1.82,0,0,0-.55-1.42,2.21,2.21,0,0,0-1.54-.5,2.45,2.45,0,0,0-1.26.32,2.51,2.51,0,0,0-.9.93l-1-.51a3.4,3.4,0,0,1,1.3-1.35,3.71,3.71,0,0,1,1.83-.44,4.08,4.08,0,0,1,1.26.19,3.07,3.07,0,0,1,1,.57,2.72,2.72,0,0,1,.71.93,2.88,2.88,0,0,1,.26,1.26,2.56,2.56,0,0,1-.15.88,2.72,2.72,0,0,1-.42.75,2.92,2.92,0,0,1-.62.58,2.78,2.78,0,0,1-.74.38l0,0a2.44,2.44,0,0,1,.88.36,2.73,2.73,0,0,1,.69.65,3,3,0,0,1,.45.86,3.17,3.17,0,0,1,.16,1,3.22,3.22,0,0,1-.29,1.39,3,3,0,0,1-.78,1,3.45,3.45,0,0,1-1.15.63,4.41,4.41,0,0,1-1.39.22,4.22,4.22,0,0,1-2.18-.54,3.31,3.31,0,0,1-1.39-1.74l1.22-.37a2.36,2.36,0,0,0,.86,1.21,2.78,2.78,0,0,0,1.59.39,2.61,2.61,0,0,0,.91-.16,2.33,2.33,0,0,0,.76-.46,2.08,2.08,0,0,0,.51-.71,2.46,2.46,0,0,0-.06-2,2,2,0,0,0-.64-.71,2.71,2.71,0,0,0-.92-.39,4.79,4.79,0,0,0-1.08-.12h-.5Z"}
                        ),b.push({
      number:5,pathDesc:"M488.86,487.65h1.63v1.06h-1.63v2.69h-1.15v-2.69h-4.9V487.4l4.58-7.33h1.47Zm-1.15-6.43h0l-3.9,6.43h3.94Z"}
                                ),b.push({
      number:7,pathDesc:"M379.64,440.83h1.63v1.06h-1.63v2.69h-1.15v-2.69h-4.9v-1.31l4.58-7.33h1.47Zm-1.15-6.43h0l-3.9,6.43h3.94Z"}
                                        ),b.push({
      number:8,pathDesc:"M445.18,440.83h1.63v1.06h-1.63v2.69H444v-2.69h-4.9v-1.31l4.58-7.33h1.47ZM444,434.4h0l-3.9,6.43H444Z"}
                                                ),b.push({
      number:9,pathDesc:"M401.49,440.83h1.63v1.06h-1.63v2.69h-1.15v-2.69h-4.9v-1.31l4.58-7.33h1.47Zm-1.15-6.43h0l-3.9,6.43h3.94Z"}
                                                        ),b.push({
      number:10,pathDesc:"M467,440.83h1.63v1.06H467v2.69h-1.15v-2.69H461v-1.31l4.58-7.33H467Zm-1.15-6.43h0l-3.9,6.43h3.94Z"}
                                                                ),b.push({
      number:11,pathDesc:"M423.33,440.83H425v1.06h-1.63v2.69h-1.15v-2.69h-4.9v-1.31l4.58-7.33h1.47Zm-1.15-6.43h0l-3.9,6.43h3.94Z"}
                                                                        ),b.push({
      number:12,pathDesc:"M488.86,440.83h1.63v1.06h-1.63v2.69h-1.15v-2.69h-4.9v-1.31l4.58-7.33h1.47Zm-1.15-6.43h0l-3.9,6.43h3.94Z"}
                                                                                ),b.push({
      number:0,pathDesc:"M293.84,477.42a2.28,2.28,0,0,1-.51-.59,2.53,2.53,0,0,1-.3-.73,2.9,2.9,0,0,1-.08-.81,2.69,2.69,0,0,1,.16-.83,2.87,2.87,0,0,1,.66-1.06,2.83,2.83,0,0,1,1-.64,3.07,3.07,0,0,1,1.15-.21,3.66,3.66,0,0,1,2.29.83,3.07,3.07,0,0,1,.74.9,2.83,2.83,0,0,1,.33,1.11,2.88,2.88,0,0,1-.18,1.24,2.71,2.71,0,0,1-.41.74,2.94,2.94,0,0,1-.58.57,2.54,2.54,0,0,1-.7.37,2.28,2.28,0,0,1-.77.12v0a2.7,2.7,0,0,1,1.08,1.52,3.2,3.2,0,0,1-.12,2,2.93,2.93,0,0,1-.73,1.15,3.26,3.26,0,0,1-1.08.69,3.41,3.41,0,0,1-1.29.22,4.28,4.28,0,0,1-2.57-.94,3.4,3.4,0,0,1-.85-1,3.26,3.26,0,0,1-.39-1.22,2.92,2.92,0,0,1,.18-1.35,3.2,3.2,0,0,1,1.2-1.61,2.7,2.7,0,0,1,1.8-.47Zm2.69,4a2.38,2.38,0,0,0,.15-.92,2.25,2.25,0,0,0-.21-.86,2.19,2.19,0,0,0-.55-.72,3,3,0,0,0-1.89-.69,2.2,2.2,0,0,0-.88.2,2.24,2.24,0,0,0-.71.52,2.5,2.5,0,0,0-.63,1.73,2.25,2.25,0,0,0,.21.86,2.19,2.19,0,0,0,.55.72,2.94,2.94,0,0,0,1.89.69,2.18,2.18,0,0,0,.89-.2,2.26,2.26,0,0,0,.71-.52A2.38,2.38,0,0,0,296.54,481.44Zm1.42-5.1a2.08,2.08,0,0,0,.13-.8,1.86,1.86,0,0,0-.18-.74,2,2,0,0,0-.46-.61,2.18,2.18,0,0,0-1.5-.55,2,2,0,0,0-.74.17,1.85,1.85,0,0,0-.61.45,2.18,2.18,0,0,0-.55,1.5,1.85,1.85,0,0,0,.18.74,2,2,0,0,0,.46.61,2.18,2.18,0,0,0,1.5.55,2,2,0,0,0,.74-.17,1.85,1.85,0,0,0,.61-.45A2.08,2.08,0,0,0,298,476.33Z"
    }
                                                                                        ),b.push({
      number:0,pathDesc:"M314.25,482.49a2.28,2.28,0,0,1-.6-.49,2.53,2.53,0,0,1-.43-.67,2.9,2.9,0,0,1-.22-.79,2.69,2.69,0,0,1,0-.84,2.87,2.87,0,0,1,.47-1.16,2.83,2.83,0,0,1,.84-.8,3.07,3.07,0,0,1,1.1-.41,3.66,3.66,0,0,1,2.4.42,3.07,3.07,0,0,1,.89.76,2.83,2.83,0,0,1,.52,1,2.88,2.88,0,0,1,0,1.25,2.71,2.71,0,0,1-.27.8,2.94,2.94,0,0,1-.47.66,2.54,2.54,0,0,1-.63.48,2.28,2.28,0,0,1-.74.25v0a2.7,2.7,0,0,1,1.33,1.31,3.2,3.2,0,0,1,.23,2,2.93,2.93,0,0,1-.52,1.26,3.26,3.26,0,0,1-.95.86,3.41,3.41,0,0,1-1.23.44,4.28,4.28,0,0,1-2.69-.48,3.4,3.4,0,0,1-1-.83,3.26,3.26,0,0,1-.6-1.14,2.92,2.92,0,0,1-.06-1.36,3.2,3.2,0,0,1,.9-1.79,2.7,2.7,0,0,1,1.7-.77ZM317.6,486a2.38,2.38,0,0,0,0-.94,2.25,2.25,0,0,0-.35-.81,2.19,2.19,0,0,0-.67-.61,3,3,0,0,0-2-.35,2.2,2.2,0,0,0-.83.35,2.24,2.24,0,0,0-.61.64,2.5,2.5,0,0,0-.32,1.81,2.25,2.25,0,0,0,.35.81,2.19,2.19,0,0,0,.66.61,2.94,2.94,0,0,0,2,.35,2.18,2.18,0,0,0,.84-.35,2.26,2.26,0,0,0,.61-.64A2.38,2.38,0,0,0,317.6,486Zm.51-5.27a2.08,2.08,0,0,0,0-.81,1.86,1.86,0,0,0-.31-.7,2,2,0,0,0-.56-.52,2.18,2.18,0,0,0-1.58-.28,2,2,0,0,0-.7.3,1.85,1.85,0,0,0-.53.55,2.18,2.18,0,0,0-.28,1.58,1.85,1.85,0,0,0,.31.7,2,2,0,0,0,.56.52,2.18,2.18,0,0,0,1.58.28,2,2,0,0,0,.7-.3,1.85,1.85,0,0,0,.53-.55A2.08,2.08,0,0,0,318.1,480.7Z"}
                                                                                                ),b.push({
      number:0,pathDesc:"M317.64,532.66l0,0a2,2,0,0,1-.77.16,4.07,4.07,0,0,1-.84-.05,3.52,3.52,0,0,1-1.3-.5,3.3,3.3,0,0,1-1.48-2.12,3.65,3.65,0,0,1,0-1.43,3.6,3.6,0,0,1,.52-1.35,3.21,3.21,0,0,1,.95-1,3.52,3.52,0,0,1,1.28-.51,4.36,4.36,0,0,1,2.9.51,3.52,3.52,0,0,1,1,.91,3.22,3.22,0,0,1,.56,1.22,3.61,3.61,0,0,1,0,1.45,4.45,4.45,0,0,1-.56,1.57,9.4,9.4,0,0,1-.93,1.25l-3.87,4.37-1.34-.24Zm1.68-2.9a2.58,2.58,0,0,0,0-1,2.2,2.2,0,0,0-.38-.85,2.48,2.48,0,0,0-.7-.64,2.95,2.95,0,0,0-2-.36,2.47,2.47,0,0,0-.88.36,2.2,2.2,0,0,0-.65.67,2.76,2.76,0,0,0-.34,2,2.26,2.26,0,0,0,1.08,1.49,3.07,3.07,0,0,0,2,.36,2.26,2.26,0,0,0,1.52-1A2.59,2.59,0,0,0,319.32,529.76Z"}
                                                                                                        ),b.push({
      number:0,pathDesc:"M333.95,485.36a2.28,2.28,0,0,1-.68-.38,2.53,2.53,0,0,1-.54-.58,2.9,2.9,0,0,1-.35-.74,2.69,2.69,0,0,1-.13-.83,2.87,2.87,0,0,1,.26-1.22,2.83,2.83,0,0,1,.69-.94,3.07,3.07,0,0,1,1-.59,3.66,3.66,0,0,1,2.43,0,3.07,3.07,0,0,1,1,.59,2.83,2.83,0,0,1,.69.94,2.88,2.88,0,0,1,.26,1.22,2.71,2.71,0,0,1-.13.83,2.94,2.94,0,0,1-.35.74,2.54,2.54,0,0,1-.54.58,2.28,2.28,0,0,1-.68.38v0a2.7,2.7,0,0,1,1.54,1.06,3.2,3.2,0,0,1,.58,1.92,2.93,2.93,0,0,1-.3,1.33,3.26,3.26,0,0,1-.78,1,3.41,3.41,0,0,1-1.14.65,4.28,4.28,0,0,1-2.74,0,3.4,3.4,0,0,1-1.14-.65,3.26,3.26,0,0,1-.78-1,2.92,2.92,0,0,1-.3-1.33,3.2,3.2,0,0,1,.58-1.92,2.7,2.7,0,0,1,1.54-1.06Zm3.9,2.85a2.38,2.38,0,0,0-.18-.92,2.25,2.25,0,0,0-.49-.74,2.19,2.19,0,0,0-.77-.49,3,3,0,0,0-2,0,2.2,2.2,0,0,0-.76.49,2.24,2.24,0,0,0-.49.74,2.5,2.5,0,0,0,0,1.84,2.25,2.25,0,0,0,.49.74,2.19,2.19,0,0,0,.76.49,2.94,2.94,0,0,0,2,0,2.18,2.18,0,0,0,.77-.49,2.26,2.26,0,0,0,.49-.74A2.38,2.38,0,0,0,337.85,488.21Zm-.42-5.28a2.08,2.08,0,0,0-.15-.8,1.86,1.86,0,0,0-.42-.63,2,2,0,0,0-.64-.42,2.18,2.18,0,0,0-1.6,0,2,2,0,0,0-.64.42,1.85,1.85,0,0,0-.42.63,2.18,2.18,0,0,0,0,1.6,1.85,1.85,0,0,0,.42.63,2,2,0,0,0,.64.42,2.18,2.18,0,0,0,1.6,0,2,2,0,0,0,.64-.42,1.85,1.85,0,0,0,.42-.63A2.08,2.08,0,0,0,337.43,482.93Z"}
                                                                                                                ),b.push({
      number:0,pathDesc:"M337.81,533.44l0,0a2,2,0,0,1-.73.29,4.07,4.07,0,0,1-.84.1,3.52,3.52,0,0,1-1.37-.26,3.3,3.3,0,0,1-1.82-1.83,3.65,3.65,0,0,1-.26-1.41,3.6,3.6,0,0,1,.27-1.42,3.21,3.21,0,0,1,.77-1.1A3.52,3.52,0,0,1,335,527a4.36,4.36,0,0,1,2.94,0,3.52,3.52,0,0,1,1.17.72,3.22,3.22,0,0,1,.77,1.1,3.61,3.61,0,0,1,.27,1.42,4.45,4.45,0,0,1-.28,1.65,9.4,9.4,0,0,1-.7,1.39l-3.06,5h-1.36Zm1.15-3.15a2.58,2.58,0,0,0-.18-1,2.2,2.2,0,0,0-.52-.77,2.48,2.48,0,0,0-.8-.5,2.95,2.95,0,0,0-2,0,2.47,2.47,0,0,0-.8.5,2.2,2.2,0,0,0-.52.77,2.76,2.76,0,0,0,0,2,2.26,2.26,0,0,0,1.32,1.28,3.07,3.07,0,0,0,2,0,2.26,2.26,0,0,0,1.32-1.28A2.59,2.59,0,0,0,339,530.28Z"}
                                                                                                                        ),b.push({
      number:0,pathDesc:"M376.06,484.93l0,0a2,2,0,0,1,.73-.29,4.07,4.07,0,0,1,.84-.1,3.52,3.52,0,0,1,1.37.26,3.3,3.3,0,0,1,1.82,1.83,3.65,3.65,0,0,1,.26,1.41,3.61,3.61,0,0,1-.27,1.42,3.21,3.21,0,0,1-.77,1.1,3.52,3.52,0,0,1-1.17.72,4.36,4.36,0,0,1-2.94,0,3.52,3.52,0,0,1-1.17-.72,3.2,3.2,0,0,1-.77-1.1,3.6,3.6,0,0,1-.27-1.42,4.45,4.45,0,0,1,.28-1.65,9.4,9.4,0,0,1,.7-1.39l3.06-5h1.36Zm-1.15,3.15a2.59,2.59,0,0,0,.18,1,2.26,2.26,0,0,0,1.32,1.28,3.06,3.06,0,0,0,2,0,2.26,2.26,0,0,0,1.32-1.28,2.77,2.77,0,0,0,0-2,2.19,2.19,0,0,0-.52-.77,2.46,2.46,0,0,0-.8-.5,2.95,2.95,0,0,0-2,0,2.46,2.46,0,0,0-.8.5,2.19,2.19,0,0,0-.52.77A2.59,2.59,0,0,0,374.91,488.08Z"}
                                                                                                                                ),b.push({
      number:0,pathDesc:"M380.57,528,376,538.3h-1.3L379.37,528h-5.52V527h6.72Z"}
                                                                                                                                        ),b.push({
      number:0,pathDesc:"M397.9,484.93l0,0a2,2,0,0,1,.73-.29,4.06,4.06,0,0,1,.84-.1,3.52,3.52,0,0,1,1.37.26,3.38,3.38,0,0,1,1.1.73,3.34,3.34,0,0,1,.73,1.1,3.64,3.64,0,0,1,.26,1.41,3.6,3.6,0,0,1-.27,1.42,3.22,3.22,0,0,1-.77,1.1,3.53,3.53,0,0,1-1.17.72,4.36,4.36,0,0,1-2.94,0,3.53,3.53,0,0,1-1.17-.72,3.19,3.19,0,0,1-.77-1.1,3.6,3.6,0,0,1-.27-1.42,4.45,4.45,0,0,1,.28-1.65,9.35,9.35,0,0,1,.7-1.39l3.06-5H401Zm-1.15,3.15a2.6,2.6,0,0,0,.18,1,2.27,2.27,0,0,0,1.32,1.28,3.05,3.05,0,0,0,2,0,2.27,2.27,0,0,0,1.32-1.28,2.77,2.77,0,0,0,0-2,2.19,2.19,0,0,0-.52-.77,2.45,2.45,0,0,0-.8-.5,2.95,2.95,0,0,0-2,0,2.45,2.45,0,0,0-.8.5,2.19,2.19,0,0,0-.52.77A2.6,2.6,0,0,0,396.75,488.08Z"}
                                                                                                                                                ),b.push({
      number:0,pathDesc:"M435,481.12h-4.62l-.08,3.41a3.68,3.68,0,0,1,.75-.21,4.65,4.65,0,0,1,.77-.06,3.76,3.76,0,0,1,1.46.27,3.3,3.3,0,0,1,1.13.76,3.51,3.51,0,0,1,.74,1.15,3.89,3.89,0,0,1,.26,1.45,3.79,3.79,0,0,1-.29,1.5,3.47,3.47,0,0,1-.8,1.17,3.66,3.66,0,0,1-1.21.76,4.11,4.11,0,0,1-1.51.27,3.73,3.73,0,0,1-1.94-.51,3.34,3.34,0,0,1-1.33-1.5l1.15-.5a2.61,2.61,0,0,0,.89,1.06,2.29,2.29,0,0,0,1.32.39,2.51,2.51,0,0,0,1-.2,2.64,2.64,0,0,0,.81-.54,2.51,2.51,0,0,0,.74-1.79,2.78,2.78,0,0,0-.21-1.09,2.57,2.57,0,0,0-.58-.86,2.48,2.48,0,0,0-.88-.55,3.17,3.17,0,0,0-1.12-.19,4.49,4.49,0,0,0-1.21.17,5.81,5.81,0,0,0-1.14.46l.11-5.87H435Z"}
),b.push({
      number:0,pathDesc:"M527.21,485.36a2.27,2.27,0,0,1-.68-.38,2.53,2.53,0,0,1-.54-.58,2.9,2.9,0,0,1-.35-.74,2.69,2.69,0,0,1-.13-.83,2.87,2.87,0,0,1,.26-1.22,2.83,2.83,0,0,1,.69-.94,3.07,3.07,0,0,1,1-.59,3.66,3.66,0,0,1,2.43,0,3.07,3.07,0,0,1,1,.59,2.83,2.83,0,0,1,.69.94,2.89,2.89,0,0,1,.26,1.22,2.72,2.72,0,0,1-.13.83,3,3,0,0,1-.35.74,2.55,2.55,0,0,1-.54.58,2.28,2.28,0,0,1-.68.38v0a2.69,2.69,0,0,1,1.54,1.06,3.2,3.2,0,0,1,.58,1.92,2.93,2.93,0,0,1-.3,1.33,3.26,3.26,0,0,1-.78,1,3.4,3.4,0,0,1-1.14.65,4.28,4.28,0,0,1-2.74,0,3.4,3.4,0,0,1-1.14-.65,3.26,3.26,0,0,1-.78-1,2.93,2.93,0,0,1-.3-1.33,3.2,3.2,0,0,1,.58-1.92,2.69,2.69,0,0,1,1.54-1.06Zm3.9,2.85a2.38,2.38,0,0,0-.18-.92,2.24,2.24,0,0,0-.49-.74,2.19,2.19,0,0,0-.77-.49,3,3,0,0,0-2,0,2.2,2.2,0,0,0-.76.49,2.24,2.24,0,0,0-.49.74,2.5,2.5,0,0,0,0,1.84,2.25,2.25,0,0,0,.49.74,2.19,2.19,0,0,0,.76.49,2.94,2.94,0,0,0,2,0,2.18,2.18,0,0,0,.77-.49,2.25,2.25,0,0,0,.49-.74A2.38,2.38,0,0,0,531.12,488.21Zm-.42-5.28a2.09,2.09,0,0,0-.15-.8,1.87,1.87,0,0,0-.42-.63,2,2,0,0,0-.64-.42,2.18,2.18,0,0,0-1.6,0,2,2,0,0,0-.64.42,1.87,1.87,0,0,0-.42.63,2.19,2.19,0,0,0,0,1.6,1.86,1.86,0,0,0,.42.63,2,2,0,0,0,.64.42,2.18,2.18,0,0,0,1.6,0,2,2,0,0,0,.64-.42,1.86,1.86,0,0,0,.42-.63A2.09,2.09,0,0,0,530.7,482.93Z"}
        ),b.push({
      number:0,pathDesc:"M547,483a2.28,2.28,0,0,1-.73-.25,2.53,2.53,0,0,1-.63-.48,2.9,2.9,0,0,1-.47-.66,2.7,2.7,0,0,1-.27-.8,2.87,2.87,0,0,1,0-1.25,2.82,2.82,0,0,1,.51-1,3.07,3.07,0,0,1,.89-.76,3.66,3.66,0,0,1,2.4-.42,3.07,3.07,0,0,1,1.1.41,2.82,2.82,0,0,1,.84.8,2.87,2.87,0,0,1,.47,1.16,2.7,2.7,0,0,1,0,.84,2.9,2.9,0,0,1-.22.79,2.53,2.53,0,0,1-.43.67,2.28,2.28,0,0,1-.6.49v0a2.7,2.7,0,0,1,1.7.77,3.2,3.2,0,0,1,.9,1.79,2.93,2.93,0,0,1-.06,1.36,3.26,3.26,0,0,1-.59,1.14,3.41,3.41,0,0,1-1,.84,4.28,4.28,0,0,1-2.69.47,3.4,3.4,0,0,1-1.23-.44,3.26,3.26,0,0,1-.95-.86,2.92,2.92,0,0,1-.52-1.26,3.2,3.2,0,0,1,.23-2A2.7,2.7,0,0,1,547,483Zm4.34,2.13a2.38,2.38,0,0,0-.33-.88,2.26,2.26,0,0,0-.61-.64,2.19,2.19,0,0,0-.84-.35,3,3,0,0,0-2,.35,2.2,2.2,0,0,0-.66.61,2.24,2.24,0,0,0-.35.81,2.5,2.5,0,0,0,.32,1.81,2.25,2.25,0,0,0,.61.64,2.19,2.19,0,0,0,.83.35,2.94,2.94,0,0,0,2-.35,2.18,2.18,0,0,0,.67-.61,2.27,2.27,0,0,0,.35-.81A2.38,2.38,0,0,0,551.35,485.13ZM550,480a2.07,2.07,0,0,0-.29-.76,1.85,1.85,0,0,0-.53-.55,2,2,0,0,0-.7-.3,2.18,2.18,0,0,0-1.58.28,2,2,0,0,0-.56.52,1.84,1.84,0,0,0-.31.7,2.18,2.18,0,0,0,.28,1.58,1.83,1.83,0,0,0,.53.55,2,2,0,0,0,.7.3,2.18,2.18,0,0,0,1.58-.28,2,2,0,0,0,.56-.52,1.85,1.85,0,0,0,.31-.7A2.07,2.07,0,0,0,550,480Z"}
                ),b.push({
      number:0,pathDesc:"M567.86,478.43a2.27,2.27,0,0,1-.77-.12,2.53,2.53,0,0,1-.7-.37,2.9,2.9,0,0,1-.58-.57,2.69,2.69,0,0,1-.4-.74,2.87,2.87,0,0,1-.18-1.24,2.83,2.83,0,0,1,.33-1.11,3.07,3.07,0,0,1,.74-.9,3.66,3.66,0,0,1,2.28-.83,3.07,3.07,0,0,1,1.15.21,2.83,2.83,0,0,1,1,.64,2.89,2.89,0,0,1,.66,1.06,2.72,2.72,0,0,1,.16.83,3,3,0,0,1-.08.81,2.55,2.55,0,0,1-.3.73,2.28,2.28,0,0,1-.51.59v0a2.69,2.69,0,0,1,1.8.47,3.2,3.2,0,0,1,1.2,1.61,2.93,2.93,0,0,1,.18,1.35,3.26,3.26,0,0,1-.39,1.22,3.4,3.4,0,0,1-.85,1A4.28,4.28,0,0,1,570,484a3.4,3.4,0,0,1-1.29-.22,3.26,3.26,0,0,1-1.08-.69,2.93,2.93,0,0,1-.73-1.15,3.2,3.2,0,0,1-.12-2,2.69,2.69,0,0,1,1.08-1.52Zm4.64,1.34a2.38,2.38,0,0,0-.48-.8,2.24,2.24,0,0,0-.71-.52,2.19,2.19,0,0,0-.89-.2,3,3,0,0,0-1.89.69,2.2,2.2,0,0,0-.55.72,2.24,2.24,0,0,0-.21.86,2.5,2.5,0,0,0,.63,1.73,2.25,2.25,0,0,0,.71.52,2.19,2.19,0,0,0,.88.2,2.94,2.94,0,0,0,1.89-.69,2.18,2.18,0,0,0,.55-.72,2.25,2.25,0,0,0,.21-.86A2.38,2.38,0,0,0,572.51,479.77Zm-2.2-4.82a2.09,2.09,0,0,0-.42-.7,1.87,1.87,0,0,0-.61-.45,2,2,0,0,0-.74-.17,2.18,2.18,0,0,0-1.5.55,2,2,0,0,0-.46.61,1.87,1.87,0,0,0-.18.74,2.19,2.19,0,0,0,.55,1.5,1.86,1.86,0,0,0,.61.45,2,2,0,0,0,.74.17,2.18,2.18,0,0,0,1.5-.55,2,2,0,0,0,.46-.61,1.86,1.86,0,0,0,.18-.74A2.09,2.09,0,0,0,570.31,475Z"}
                        );
    var g=[];
    q(g,1,"M453.24,519.69v27H409.55v-27Z","453.24","519.69"),q(g,2,"M431.4,472.83v27H409.56v-27Z","431.4","472.83"),q(g,3,"M496.31,545.51q-10.47,1.05-21.13,1.11l-.14-27q9.37,0,18.58-1Z","496.31","545.51"),q(g,4,"M269.34,364,242.6,355.5a176.5,176.5,0,0,0-7.44,35.4l27.91,3A148.64,148.64,0,0,1,269.34,364Z","269.34","364"),q(g,5,"M453.24,472.83v27H431.4v-27Z","453.24","472.83"),q(g,6,"M281.11,336.91l-24.53-13.63a176.86,176.86,0,0,0-14,32.22L269.34,364A148.94,148.94,0,0,1,281.11,336.91Z","281.11","336.91"),q(g,7,"M627.61,390.9l-27.91,3A148.64,148.64,0,0,0,593.43,364l26.74-8.54a176.5,176.5,0,0,1,7.44,35.4","627.61","390.9"),q(g,8,"M307.49,295.46l-21.38-18.17a178.67,178.67,0,0,0-20,28.73l24.53,13.63A150.48,150.48,0,0,1,307.49,295.46Z","307.49","295.46"),q(g,9,"M620.17,355.5,593.43,364a148.94,148.94,0,0,0-11.77-27.13l24.53-13.63A176.86,176.86,0,0,1,620.17,355.5Z","620.17","355.5"),q(g,10,"M330.9,273.27l-17-22.33a179.33,179.33,0,0,0-27.8,26.35l21.38,18.17A151,151,0,0,1,330.9,273.27Z","330.9","273.27"),q(g,11,"M596.61,306l-24.53,13.63a150.48,150.48,0,0,0-16.8-24.2l21.38-18.17A178.67,178.67,0,0,1,596.61,306Z","596.61","306"),q(g,12,"M359.9,255.92l-11.55-25.58a177.94,177.94,0,0,0-34.43,20.6l17,22.33A149.85,149.85,0,0,1,359.9,255.92Z","359.9","255.92"),q(g,13,"M576.66,277.29l-21.38,18.17a151,151,0,0,0-23.41-22.19l17-22.33A179.33,179.33,0,0,1,576.66,277.29Z","576.66","277.29"),q(g,14,"M390.38,245.89l-5.84-27.46a176.2,176.2,0,0,0-36.19,11.92l11.55,25.58A148.38,148.38,0,0,1,390.38,245.89Z","390.38","245.89"),q(g,15,"M548.86,250.95l-17,22.33a149.85,149.85,0,0,0-29-17.35l11.55-25.58A177.94,177.94,0,0,1,548.86,250.95Z","548.86","250.95"),q(g,16,"M421.52,242.62V214.55a177.73,177.73,0,0,0-37,3.88l5.84,27.46A149.67,149.67,0,0,1,421.52,242.62Z","421.52","242.62"),q(g,17,"M514.42,230.35l-11.55,25.58a148.38,148.38,0,0,0-30.48-10l5.84-27.46A176.2,176.2,0,0,1,514.42,230.35Z","514.42","230.35"),q(g,18,"M221,363.39l-27.28-6.6A223.06,223.06,0,0,0,188.63,386l27.91,3A195.21,195.21,0,0,1,221,363.39Z","221","363.39"),q(g,19,"M478.23,218.42l-5.84,27.46a149.67,149.67,0,0,0-31.14-3.27V214.55A177.73,177.73,0,0,1,478.23,218.42Z","478.23","218.42"),q(g,20,"M229.19,337.5l-26.11-10.3a222.63,222.63,0,0,0-9.39,29.59l27.28,6.6A194.81,194.81,0,0,1,229.19,337.5Z","229.19","337.5"),q(g,21,"M674.13,386l-27.91,3a195.21,195.21,0,0,0-4.42-25.54l27.28-6.6A223.06,223.06,0,0,1,674.13,386Z","674.13","386"),q(g,22,"M240.23,314.19,215.7,300.56a224,224,0,0,0-12.62,26.64l26.11,10.3A196,196,0,0,1,240.23,314.19Z","240.23","314.19"),q(g,23,"M669.08,356.79l-27.28,6.6a194.81,194.81,0,0,0-8.22-25.89l26.11-10.3A222.63,222.63,0,0,1,669.08,356.79Z","669.08","356.79"),q(g,24,"M267.45,270.55l-22-17.4a225.49,225.49,0,0,0-20.17,30.15l24.53,13.63A197.34,197.34,0,0,1,267.45,270.55Z","267.45","270.55"),q(g,25,"M659.69,327.2l-26.11,10.3a196,196,0,0,0-11-23.31l24.53-13.63A224,224,0,0,1,659.69,327.2Z","659.69","327.2"),q(g,26,"M289.32,247.11l-18.89-20.75a226.58,226.58,0,0,0-25,26.79l22,17.4A198.26,198.26,0,0,1,289.32,247.11Z","289.32","247.11"),q(g,27,"M637.49,283.31,613,296.94a197.34,197.34,0,0,0-17.65-26.39l22-17.4A225.49,225.49,0,0,1,637.49,283.31Z","637.49","283.31"),q(g,28,"M314.63,227.54,299.36,204a226,226,0,0,0-28.92,22.36l18.89,20.75A197.78,197.78,0,0,1,314.63,227.54Z","314.63","227.54"),q(g,29,"M617.32,253.15l-22,17.4a198.26,198.26,0,0,0-21.87-23.44l18.89-20.75A226.58,226.58,0,0,1,617.32,253.15Z","617.32","253.15"),q(g,30,"M341.24,213,329.77,187.4A224.33,224.33,0,0,0,299.36,204l15.27,23.54A196.26,196.26,0,0,1,341.24,213Z","341.24","213"),q(g,31,"M592.33,226.36l-18.89,20.75a197.78,197.78,0,0,0-25.3-19.57L563.41,204A226,226,0,0,1,592.33,226.36Z","592.33","226.36"),q(g,32,"M173.76,360.09l-27.48-5.71a269.8,269.8,0,0,0-4.17,26.68L170,384A241.91,241.91,0,0,1,173.76,360.09Z","173.76","360.09"),q(g,33,"M563.41,204l-15.27,23.54A196.26,196.26,0,0,0,521.53,213L533,187.4A224.33,224.33,0,0,1,563.41,204Z","563.41","204"),q(g,34,"M180,336.14l-26.76-8.48a268.88,268.88,0,0,0-7,26.71l27.48,5.71A241.1,241.1,0,0,1,180,336.14Z","180","336.14"),q(g,35,"M720.66,381.05l-27.91,3A241.91,241.91,0,0,0,689,360.09l27.48-5.71A269.8,269.8,0,0,1,720.66,381.05Z","720.66","381.05"),q(g,36,"M188.7,313l-25.76-11.15a269.39,269.39,0,0,0-9.68,25.83L180,336.14A241.63,241.63,0,0,1,188.7,313Z","188.7","313"),q(g,37,"M716.49,354.38,689,360.09a241.1,241.1,0,0,0-6.27-24l26.76-8.48A268.89,268.89,0,0,1,716.49,354.38Z","716.49","354.38"),q(g,38,"M199.34,291.48l-.83-.46-23.7-13.17q-6.5,11.66-11.86,24L188.7,313Q193.5,301.94,199.34,291.48Z","199.34","291.48"),q(g,39,"M709.5,327.66l-26.76,8.48A241.63,241.63,0,0,0,674.06,313l25.76-11.15A269.39,269.39,0,0,1,709.5,327.66Z","709.5","327.66"),q(g,40,"M222.32,252.89l-23-16.09a272.11,272.11,0,0,0-15,23.79l23.7,13.17.83.46A244,244,0,0,1,222.32,252.89Z","222.32","252.89"),q(g,41,"M699.82,301.84,674.06,313q-4.8-11-10.64-21.51l.83-.46L688,277.85Q694.46,289.5,699.82,301.84Z","699.82","301.84"),q(g,42,"M238.65,232.13l-21.1-18.49a273.28,273.28,0,0,0-18.22,23.16l23,16.09A245,245,0,0,1,238.65,232.13Z","238.65","232.13"),q(g,43,"M678.38,260.59l-23.7,13.17-.83.46a244,244,0,0,0-13.4-21.33l23-16.09A272.11,272.11,0,0,1,678.38,260.59Z","678.38","260.59"),q(g,44,"M257.59,212.77,238.67,192a273.82,273.82,0,0,0-21.12,21.59l21.1,18.49A245.49,245.49,0,0,1,257.59,212.77Z","257.59","212.77"),q(g,45,"M663.43,236.8l-23,16.09a245,245,0,0,0-16.33-20.76l21.1-18.49A273.28,273.28,0,0,1,663.43,236.8Z","663.43","236.8"),q(g,47,"M645.21,213.64l-21.1,18.49a245.49,245.49,0,0,0-18.93-19.36L624.09,192A273.82,273.82,0,0,1,645.21,213.64Z","645.21","213.64");
    var N=[];
    return N.push({
      number:1,pathDesc:"M433.17,538.3H432v-9.89l-2,1.79-.72-.86,2.88-2.37h1Z"}
                 ),N.push({
      number:2,pathDesc:"M424,487.65h1.63v1.06H424v2.69h-1.15v-2.69h-4.9V487.4l4.58-7.33H424Zm-1.15-6.43h0l-3.9,6.43h3.94Z"}
                         ),N.push({
      number:3,pathDesc:"M490.18,538.3H483V537l4.51-4.59q.26-.26.51-.54a5.16,5.16,0,0,0,.46-.61,3.32,3.32,0,0,0,.34-.67,2.15,2.15,0,0,0,.13-.74,2,2,0,0,0-.17-.83,1.77,1.77,0,0,0-.47-.62,2.18,2.18,0,0,0-.7-.39,2.62,2.62,0,0,0-.85-.14,2.3,2.3,0,0,0-1.47.48,2.18,2.18,0,0,0-.78,1.3l-1.22-.13a3.17,3.17,0,0,1,1.16-2,3.51,3.51,0,0,1,2.23-.72,4.52,4.52,0,0,1,1.3.18,3.27,3.27,0,0,1,1.09.55,2.69,2.69,0,0,1,.75.92,2.82,2.82,0,0,1,.28,1.29,3.47,3.47,0,0,1-.2,1.2,4.85,4.85,0,0,1-.52,1,6.9,6.9,0,0,1-.73.91q-.41.43-.84.85l-3.57,3.54h6Z"}
                                 ),N.push({
      number:5,pathDesc:"M442.53,485.12h.59a4,4,0,0,0,1-.11,2.18,2.18,0,0,0,.79-.36,1.77,1.77,0,0,0,.54-.65,2.13,2.13,0,0,0,.2-1,1.82,1.82,0,0,0-.55-1.42,2.21,2.21,0,0,0-1.54-.5,2.45,2.45,0,0,0-1.26.32,2.51,2.51,0,0,0-.9.93l-1-.51a3.4,3.4,0,0,1,1.3-1.35,3.71,3.71,0,0,1,1.83-.44,4.08,4.08,0,0,1,1.26.19,3.07,3.07,0,0,1,1,.57,2.72,2.72,0,0,1,.71.93,2.88,2.88,0,0,1,.26,1.26,2.56,2.56,0,0,1-.15.88,2.72,2.72,0,0,1-.42.75,2.92,2.92,0,0,1-.62.58,2.78,2.78,0,0,1-.74.38l0,0a2.44,2.44,0,0,1,.88.36,2.73,2.73,0,0,1,.69.65,3,3,0,0,1,.45.86,3.17,3.17,0,0,1,.16,1,3.22,3.22,0,0,1-.29,1.39,3,3,0,0,1-.78,1,3.45,3.45,0,0,1-1.15.63,4.41,4.41,0,0,1-1.39.22,4.22,4.22,0,0,1-2.18-.54,3.31,3.31,0,0,1-1.39-1.74l1.22-.37a2.36,2.36,0,0,0,.86,1.21,2.78,2.78,0,0,0,1.59.39,2.61,2.61,0,0,0,.91-.16,2.33,2.33,0,0,0,.76-.46,2.08,2.08,0,0,0,.51-.71,2.46,2.46,0,0,0-.06-2,2,2,0,0,0-.64-.71,2.71,2.71,0,0,0-.92-.39,4.79,4.79,0,0,0-1.08-.12h-.5Z"}
                                         ),N.push({
      number:0,pathDesc:"M336.15,477.42a2.28,2.28,0,0,1-.51-.59,2.53,2.53,0,0,1-.3-.73,2.9,2.9,0,0,1-.08-.81,2.69,2.69,0,0,1,.16-.83,2.87,2.87,0,0,1,.66-1.06,2.83,2.83,0,0,1,1-.64,3.07,3.07,0,0,1,1.15-.21,3.66,3.66,0,0,1,2.29.83,3.07,3.07,0,0,1,.74.9,2.83,2.83,0,0,1,.33,1.11,2.88,2.88,0,0,1-.18,1.24,2.71,2.71,0,0,1-.41.74,2.94,2.94,0,0,1-.58.57,2.54,2.54,0,0,1-.7.37,2.28,2.28,0,0,1-.77.12v0A2.7,2.7,0,0,1,340,480a3.2,3.2,0,0,1-.12,2,2.93,2.93,0,0,1-.73,1.15,3.26,3.26,0,0,1-1.08.69,3.41,3.41,0,0,1-1.29.22,4.28,4.28,0,0,1-2.57-.94,3.4,3.4,0,0,1-.85-1,3.26,3.26,0,0,1-.39-1.22,2.92,2.92,0,0,1,.18-1.35,3.2,3.2,0,0,1,1.2-1.61,2.7,2.7,0,0,1,1.8-.47Zm2.69,4a2.38,2.38,0,0,0,.15-.92,2.25,2.25,0,0,0-.21-.86,2.19,2.19,0,0,0-.55-.72,3,3,0,0,0-1.89-.69,2.2,2.2,0,0,0-.88.2,2.24,2.24,0,0,0-.71.52,2.5,2.5,0,0,0-.63,1.73,2.25,2.25,0,0,0,.21.86,2.19,2.19,0,0,0,.55.72,2.94,2.94,0,0,0,1.89.69,2.18,2.18,0,0,0,.89-.2,2.26,2.26,0,0,0,.71-.52A2.38,2.38,0,0,0,338.84,481.44Zm1.42-5.1a2.08,2.08,0,0,0,.13-.8,1.86,1.86,0,0,0-.18-.74,2,2,0,0,0-.46-.61,2.18,2.18,0,0,0-1.5-.55,2,2,0,0,0-.74.17,1.85,1.85,0,0,0-.61.45,2.18,2.18,0,0,0-.55,1.5,1.85,1.85,0,0,0,.18.74,2,2,0,0,0,.46.61,2.18,2.18,0,0,0,1.5.55,2,2,0,0,0,.74-.17,1.85,1.85,0,0,0,.61-.45A2.08,2.08,0,0,0,340.26,476.33Z"}
                                                 ),N.push({
      number:0,pathDesc:"M356.55,482.49a2.28,2.28,0,0,1-.6-.49,2.53,2.53,0,0,1-.43-.67,2.9,2.9,0,0,1-.22-.79,2.69,2.69,0,0,1,0-.84,2.87,2.87,0,0,1,.47-1.16,2.83,2.83,0,0,1,.84-.8,3.07,3.07,0,0,1,1.1-.41,3.66,3.66,0,0,1,2.4.42,3.07,3.07,0,0,1,.89.76,2.83,2.83,0,0,1,.52,1,2.88,2.88,0,0,1,0,1.25,2.71,2.71,0,0,1-.27.8,2.94,2.94,0,0,1-.47.66,2.54,2.54,0,0,1-.63.48,2.28,2.28,0,0,1-.74.25v0a2.7,2.7,0,0,1,1.33,1.31,3.2,3.2,0,0,1,.23,2,2.93,2.93,0,0,1-.52,1.26,3.26,3.26,0,0,1-.95.86,3.41,3.41,0,0,1-1.23.44,4.28,4.28,0,0,1-2.69-.48,3.4,3.4,0,0,1-1-.83,3.26,3.26,0,0,1-.6-1.14,2.92,2.92,0,0,1-.06-1.36,3.2,3.2,0,0,1,.9-1.79,2.7,2.7,0,0,1,1.7-.77ZM359.9,486a2.38,2.38,0,0,0,0-.94,2.25,2.25,0,0,0-.35-.81,2.19,2.19,0,0,0-.67-.61,3,3,0,0,0-2-.35,2.2,2.2,0,0,0-.83.35,2.24,2.24,0,0,0-.61.64,2.5,2.5,0,0,0-.32,1.81,2.25,2.25,0,0,0,.35.81,2.19,2.19,0,0,0,.66.61,2.94,2.94,0,0,0,2,.35,2.18,2.18,0,0,0,.84-.35,2.26,2.26,0,0,0,.61-.64A2.38,2.38,0,0,0,359.9,486Zm.51-5.27a2.08,2.08,0,0,0,0-.81,1.86,1.86,0,0,0-.31-.7,2,2,0,0,0-.56-.52,2.18,2.18,0,0,0-1.58-.28,2,2,0,0,0-.7.3,1.85,1.85,0,0,0-.53.55,2.18,2.18,0,0,0-.28,1.58,1.85,1.85,0,0,0,.31.7,2,2,0,0,0,.56.52,2.18,2.18,0,0,0,1.58.28,2,2,0,0,0,.7-.3,1.85,1.85,0,0,0,.53-.55A2.08,2.08,0,0,0,360.41,480.7Z"}
                                                         ),N.push({
      number:0,pathDesc:"M357.93,530.28l0,0a2,2,0,0,1,.77-.16,4.06,4.06,0,0,1,.84.05,3.52,3.52,0,0,1,1.3.5,3.38,3.38,0,0,1,1,.91,3.34,3.34,0,0,1,.52,1.21,3.64,3.64,0,0,1,0,1.43,3.6,3.6,0,0,1-.52,1.35,3.22,3.22,0,0,1-.95,1,3.53,3.53,0,0,1-1.28.51,4.36,4.36,0,0,1-2.9-.51,3.53,3.53,0,0,1-1-.91,3.19,3.19,0,0,1-.56-1.22,3.6,3.6,0,0,1,0-1.45,4.45,4.45,0,0,1,.56-1.57,9.35,9.35,0,0,1,.93-1.25l3.87-4.37,1.34.24Zm-1.68,2.9a2.6,2.6,0,0,0,0,1,2.27,2.27,0,0,0,1.08,1.49,3.05,3.05,0,0,0,2,.36,2.27,2.27,0,0,0,1.52-1,2.77,2.77,0,0,0,.34-2,2.19,2.19,0,0,0-.38-.85,2.45,2.45,0,0,0-.7-.64,2.95,2.95,0,0,0-2-.36,2.45,2.45,0,0,0-.88.36,2.19,2.19,0,0,0-.65.67A2.6,2.6,0,0,0,356.24,533.18Z"}
                                                                 ),N.push({
      number:0,pathDesc:"M376.25,485.36a2.28,2.28,0,0,1-.68-.38,2.53,2.53,0,0,1-.54-.58,2.9,2.9,0,0,1-.35-.74,2.69,2.69,0,0,1-.13-.83,2.87,2.87,0,0,1,.26-1.22,2.83,2.83,0,0,1,.69-.94,3.07,3.07,0,0,1,1-.59,3.66,3.66,0,0,1,2.43,0,3.07,3.07,0,0,1,1,.59,2.83,2.83,0,0,1,.69.94,2.88,2.88,0,0,1,.26,1.22,2.71,2.71,0,0,1-.13.83,2.94,2.94,0,0,1-.35.74,2.54,2.54,0,0,1-.54.58,2.28,2.28,0,0,1-.68.38v0a2.7,2.7,0,0,1,1.54,1.06,3.2,3.2,0,0,1,.58,1.92,2.93,2.93,0,0,1-.3,1.33,3.26,3.26,0,0,1-.78,1,3.41,3.41,0,0,1-1.14.65,4.28,4.28,0,0,1-2.74,0,3.4,3.4,0,0,1-1.14-.65,3.26,3.26,0,0,1-.78-1,2.92,2.92,0,0,1-.3-1.33,3.2,3.2,0,0,1,.58-1.92,2.7,2.7,0,0,1,1.54-1.06Zm3.9,2.85a2.38,2.38,0,0,0-.18-.92,2.25,2.25,0,0,0-.49-.74,2.19,2.19,0,0,0-.77-.49,3,3,0,0,0-2,0,2.2,2.2,0,0,0-.76.49,2.24,2.24,0,0,0-.49.74,2.5,2.5,0,0,0,0,1.84,2.25,2.25,0,0,0,.49.74,2.19,2.19,0,0,0,.76.49,2.94,2.94,0,0,0,2,0,2.18,2.18,0,0,0,.77-.49,2.26,2.26,0,0,0,.49-.74A2.38,2.38,0,0,0,380.16,488.21Zm-.42-5.28a2.08,2.08,0,0,0-.15-.8,1.86,1.86,0,0,0-.42-.63,2,2,0,0,0-.64-.42,2.18,2.18,0,0,0-1.6,0,2,2,0,0,0-.64.42,1.85,1.85,0,0,0-.42.63,2.18,2.18,0,0,0,0,1.6,1.85,1.85,0,0,0,.42.63,2,2,0,0,0,.64.42,2.18,2.18,0,0,0,1.6,0,2,2,0,0,0,.64-.42,1.85,1.85,0,0,0,.42-.63A2.08,2.08,0,0,0,379.74,482.93Z"}
                                                                         ),N.push({
      number:0,pathDesc:"M382.41,527.84h-4.62l-.08,3.41a3.68,3.68,0,0,1,.75-.21,4.65,4.65,0,0,1,.77-.06,3.76,3.76,0,0,1,1.46.27,3.3,3.3,0,0,1,1.13.76,3.51,3.51,0,0,1,.74,1.15,3.89,3.89,0,0,1,.26,1.45,3.79,3.79,0,0,1-.29,1.5,3.47,3.47,0,0,1-.8,1.17,3.66,3.66,0,0,1-1.21.76,4.11,4.11,0,0,1-1.51.27,3.73,3.73,0,0,1-1.94-.51,3.34,3.34,0,0,1-1.33-1.5l1.15-.5a2.61,2.61,0,0,0,.89,1.06,2.29,2.29,0,0,0,1.32.39,2.51,2.51,0,0,0,1-.2,2.64,2.64,0,0,0,.81-.54,2.51,2.51,0,0,0,.74-1.79,2.78,2.78,0,0,0-.21-1.09,2.57,2.57,0,0,0-.58-.86,2.48,2.48,0,0,0-.88-.55,3.17,3.17,0,0,0-1.12-.19,4.49,4.49,0,0,0-1.21.17,5.81,5.81,0,0,0-1.14.46l.11-5.87h5.78Z"}
                                                                                 ),N.push({
      number:0,pathDesc:"M485.76,485.55a2.27,2.27,0,0,1-.68-.38,2.53,2.53,0,0,1-.54-.58,2.9,2.9,0,0,1-.35-.74,2.69,2.69,0,0,1-.13-.83,2.87,2.87,0,0,1,.26-1.22,2.83,2.83,0,0,1,.69-.94,3.07,3.07,0,0,1,1-.59,3.66,3.66,0,0,1,2.43,0,3.07,3.07,0,0,1,1,.59,2.83,2.83,0,0,1,.69.94,2.89,2.89,0,0,1,.26,1.22,2.72,2.72,0,0,1-.13.83,3,3,0,0,1-.35.74,2.55,2.55,0,0,1-.54.58,2.28,2.28,0,0,1-.68.38v0a2.69,2.69,0,0,1,1.54,1.06,3.2,3.2,0,0,1,.58,1.92,2.93,2.93,0,0,1-.3,1.33,3.26,3.26,0,0,1-.78,1,3.4,3.4,0,0,1-1.14.65,4.28,4.28,0,0,1-2.74,0,3.4,3.4,0,0,1-1.14-.65,3.26,3.26,0,0,1-.78-1,2.93,2.93,0,0,1-.3-1.33,3.2,3.2,0,0,1,.58-1.92,2.69,2.69,0,0,1,1.54-1.06Zm3.9,2.85a2.38,2.38,0,0,0-.18-.92,2.24,2.24,0,0,0-.49-.74,2.19,2.19,0,0,0-.77-.49,3,3,0,0,0-2,0,2.2,2.2,0,0,0-.76.49,2.24,2.24,0,0,0-.49.74,2.5,2.5,0,0,0,0,1.84,2.25,2.25,0,0,0,.49.74,2.19,2.19,0,0,0,.76.49,2.94,2.94,0,0,0,2,0,2.18,2.18,0,0,0,.77-.49,2.25,2.25,0,0,0,.49-.74A2.38,2.38,0,0,0,489.67,488.4Zm-.42-5.28a2.09,2.09,0,0,0-.15-.8,1.87,1.87,0,0,0-.42-.63,2,2,0,0,0-.64-.42,2.18,2.18,0,0,0-1.6,0,2,2,0,0,0-.64.42,1.87,1.87,0,0,0-.42.63,2.19,2.19,0,0,0,0,1.6,1.86,1.86,0,0,0,.42.63,2,2,0,0,0,.64.42,2.18,2.18,0,0,0,1.6,0,2,2,0,0,0,.64-.42,1.86,1.86,0,0,0,.42-.63A2.09,2.09,0,0,0,489.25,483.12Z"}
                                                                                         ),N.push({
      number:0,pathDesc:"M505.56,483.19a2.28,2.28,0,0,1-.73-.25,2.53,2.53,0,0,1-.63-.48,2.9,2.9,0,0,1-.47-.66,2.7,2.7,0,0,1-.27-.8,2.87,2.87,0,0,1,0-1.25,2.82,2.82,0,0,1,.51-1,3.07,3.07,0,0,1,.89-.76,3.66,3.66,0,0,1,2.4-.42,3.07,3.07,0,0,1,1.1.41,2.82,2.82,0,0,1,.84.8,2.87,2.87,0,0,1,.47,1.16,2.7,2.7,0,0,1,0,.84,2.9,2.9,0,0,1-.22.79,2.53,2.53,0,0,1-.43.67,2.28,2.28,0,0,1-.6.49v0a2.7,2.7,0,0,1,1.7.77,3.2,3.2,0,0,1,.9,1.79,2.93,2.93,0,0,1-.06,1.36,3.26,3.26,0,0,1-.59,1.14,3.41,3.41,0,0,1-1,.84,4.28,4.28,0,0,1-2.69.47,3.4,3.4,0,0,1-1.23-.44,3.26,3.26,0,0,1-.95-.86,2.92,2.92,0,0,1-.52-1.26,3.2,3.2,0,0,1,.23-2,2.7,2.7,0,0,1,1.33-1.31Zm4.34,2.13a2.38,2.38,0,0,0-.33-.88,2.26,2.26,0,0,0-.61-.64,2.19,2.19,0,0,0-.84-.35,3,3,0,0,0-2,.35,2.2,2.2,0,0,0-.66.61,2.24,2.24,0,0,0-.35.81,2.5,2.5,0,0,0,.32,1.81,2.25,2.25,0,0,0,.61.64,2.19,2.19,0,0,0,.83.35,2.94,2.94,0,0,0,2-.35,2.18,2.18,0,0,0,.67-.61,2.27,2.27,0,0,0,.35-.81A2.38,2.38,0,0,0,509.9,485.32Zm-1.33-5.13a2.07,2.07,0,0,0-.29-.76,1.85,1.85,0,0,0-.53-.55,2,2,0,0,0-.7-.3,2.18,2.18,0,0,0-1.58.28,2,2,0,0,0-.56.52,1.84,1.84,0,0,0-.31.7,2.18,2.18,0,0,0,.28,1.58,1.83,1.83,0,0,0,.53.55,2,2,0,0,0,.7.3,2.18,2.18,0,0,0,1.58-.28,2,2,0,0,0,.56-.52,1.85,1.85,0,0,0,.31-.7A2.07,2.07,0,0,0,508.58,480.19Z"}
                                                                                                 ),N.push({
      number:0,pathDesc:"M509.56,526.51l-2.71,10.91-1.28.23,2.8-10.92-5.44,1-.18-1,6.62-1.17Z"}
                                                                                                         ),N.push({
      number:0,pathDesc:"M526.41,478.62a2.27,2.27,0,0,1-.77-.12,2.53,2.53,0,0,1-.7-.37,2.9,2.9,0,0,1-.58-.57,2.69,2.69,0,0,1-.4-.74,2.87,2.87,0,0,1-.18-1.24,2.83,2.83,0,0,1,.33-1.11,3.07,3.07,0,0,1,.74-.9,3.66,3.66,0,0,1,2.28-.83,3.07,3.07,0,0,1,1.15.21,2.83,2.83,0,0,1,1,.64,2.89,2.89,0,0,1,.66,1.06,2.72,2.72,0,0,1,.16.83,3,3,0,0,1-.08.81,2.55,2.55,0,0,1-.3.73,2.28,2.28,0,0,1-.51.59v0a2.69,2.69,0,0,1,1.8.47,3.2,3.2,0,0,1,1.2,1.61,2.93,2.93,0,0,1,.18,1.35,3.26,3.26,0,0,1-.39,1.22,3.4,3.4,0,0,1-.85,1,4.28,4.28,0,0,1-2.57.94,3.4,3.4,0,0,1-1.29-.22,3.26,3.26,0,0,1-1.08-.69,2.93,2.93,0,0,1-.73-1.15,3.2,3.2,0,0,1-.12-2,2.69,2.69,0,0,1,1.08-1.52Zm4.64,1.34a2.38,2.38,0,0,0-.48-.8,2.24,2.24,0,0,0-.71-.52,2.19,2.19,0,0,0-.89-.2,3,3,0,0,0-1.89.69,2.2,2.2,0,0,0-.55.72,2.24,2.24,0,0,0-.21.86,2.5,2.5,0,0,0,.63,1.73,2.25,2.25,0,0,0,.71.52,2.19,2.19,0,0,0,.88.2,2.94,2.94,0,0,0,1.89-.69,2.18,2.18,0,0,0,.55-.72,2.25,2.25,0,0,0,.21-.86A2.38,2.38,0,0,0,531.05,480Zm-2.2-4.82a2.09,2.09,0,0,0-.42-.7,1.87,1.87,0,0,0-.61-.45,2,2,0,0,0-.74-.17,2.18,2.18,0,0,0-1.5.55,2,2,0,0,0-.46.61,1.87,1.87,0,0,0-.18.74,2.19,2.19,0,0,0,.55,1.5,1.86,1.86,0,0,0,.61.45,2,2,0,0,0,.74.17,2.18,2.18,0,0,0,1.5-.55,2,2,0,0,0,.46-.61,1.86,1.86,0,0,0,.18-.74A2.09,2.09,0,0,0,528.86,475.14Z"}
                                                                                                                 ),{
      constants:r,council:t,getSeatOrganisationData:Z,getSeatBySeatNumber:m}
  }
                                        ])}
();
/*** End SeatOrganisationService.min.js ***/
/*** Start BlogService.min.js ***/
app.factory("blogService",["$q",function(n){"use strict";const i="0x010100C568DB52D9D0A14D9B2FDCC96666E9F2007948130EC3DB064584E219954237AF39000E2549C524FE47D4A5571F07430F89FC0020F8945775534DC5B35ED91213792077*",t={};var r=function(n){const t={RelevantResults:[],RefinementResults:n.RefinementResults};return angular.forEach(n.RelevantResults,function(n){const t={},i=Pd.Search.ExtractPublishingImageSrc(n[Pd.Utility.ManagedProperties.PublishingRollupImage]),r=Pd.Search.ExtractPublishingImageSrc(n[Pd.Utility.ManagedProperties.PdHeaderImage]);t.PublishingRollupImage=i;t.HeaderImage=r;t.Id=n.ListItemId;t.Title=n.Title;t.EventDate=n.PdEventDate;t.BlogDisplayTeaser=n.PdBlogDisplayTeaser;t.BlogDisplayOrder=n.PdBlogDisplayOrder;t.ServerRelativeUrl=Pd.Utility.GetUrlParts(n.Path).pathname;this.push(t)},t.RelevantResults),t};return t.getLatestBlogs=function(t){Pd.Shared.LogToConsoleIfDebug("blogService.getLatestBlogs",!0);const f={querytext:{ContentTypeId:i},selectproperties:["ListItemId","Title","Path",Pd.Utility.ManagedProperties.PdLead,Pd.Utility.ManagedProperties.PdBlogCategory,Pd.Utility.ManagedProperties.PdEventDate,Pd.Utility.ManagedProperties.PdBlogDisplayTeaser,Pd.Utility.ManagedProperties.PdBlogDisplayOrder,Pd.Utility.ManagedProperties.PublishingRollupImage,Pd.Utility.ManagedProperties.PdHeaderImage],refiners:[Pd.Utility.ManagedProperties.PdBlogCategory],sortlist:{PdBlogDisplayTeaser:"descending",PdBlogDisplayOrder:"ascending",PdEventDate:"descending"},rowlimit:t,trimduplicates:!1};var u=n.defer();const e=u.promise,o=Pd.Angular.ExecuteSPSearchQueryEx(f);return o.then(function(n){const t=r(n);u.resolve(t)},function(n){Pd.Shared.LogToConsoleIfDebug(n);u.reject(n)}),e},t.getBlogsByCategory=function(t,u){Pd.Shared.LogToConsoleIfDebug("blogService.getBlogTeaserData",!0);const e={querytext:{ContentTypeId:i},selectproperties:["ListItemId","Title",Pd.Utility.ManagedPropertiesPdLead,Pd.Utility.ManagedProperties.PdBlogCategory,Pd.Utility.ManagedProperties.PdEventDate,Pd.Utility.ManagedProperties.PdBlogDisplayTeaser,Pd.Utility.ManagedProperties.PdBlogDisplayOrder,"Path",Pd.Utility.ManagedProperties.PublishingRollupImage,Pd.Utility.ManagedProperties.PdHeaderImage],refiners:[Pd.Utility.ManagedProperties.PdBlogCategory],refinementFilters:["{0}:{1}".format(Pd.Utility.ManagedProperties.PdBlogCategory,t.replace(/^"(.+(?="$))"$/,"$1"))],sortlist:{PdBlogDisplayTeaser:"descending",PdBlogDisplayOrder:"ascending",PdEventDate:"descending"},rowlimit:u,trimduplicates:!1};var f=n.defer();const o=f.promise,s=Pd.Angular.ExecuteSPSearchQueryEx(e);return s.then(function(n){const t=r(n);f.resolve(t)},function(n){Pd.Shared.LogToConsoleIfDebug(n);f.reject(n)}),o},t}]);
/*** End BlogService.min.js ***/
/*** Start SessionsMeetingsService.min.js ***/
app.factory("SessionsMeetingsService",["$rootScope","$q",function(e,t){"use strict";var n={};return n.getNextMeeting=function(e){var n=_spPageContextInfo.siteAbsoluteUrl,o=(new Date).toISOString(),i="{0}/_api/lists/getByTitle('SessionsMeetings')/Items?$filter=MeetingDate gt DateTime'{1}' and Council eq '{2}'&$orderby=MeetingDate&$top=1".format(n,o,encodeURIComponent(e));return t(function(e,t){OData.read({requestUri:i,headers:{accept:"application/json;odata=verbose"}},function(t){e(t)},function(e){t(e)})})},n}]);
/*** End SessionsMeetingsService.min.js ***/
/*** Start ElectionResultsService.min.js ***/
(function(){app.factory("electionResultsService",["$q",function(n){"use strict";var i="electionResultsService",u=[];u.ListItem="0x0120D5200071B51D4A80E24895A12537F798B3C940";u.Image="0x0101009148F5A04DDD49CBA7127AADA5FB792B00AADE34325A8B49CDA8BB4DB53328F21400AAD31BE5BF864CD89B89DB5F9A95307F";u.Audio="0x0101009148F5A04DDD49CBA7127AADA5FB792B006973ACD696DC4858A76371B2FB2F439A00A60C265F9A25412990F9D154AEF88F6D";u.Video="0x0101009148F5A04DDD49CBA7127AADA5FB792B00291D173ECE694D56B19D111489C4369D004D4142027F8D42C081E9810E2201127C";var r=Pd.Language.GetCurrentLanguage().toLowerCase(),e=r.charAt(0).toUpperCase()+r.slice(1),t=[];t.push({CantonAbbreviation:"AG",NR:16,SR:2});t.push({CantonAbbreviation:"AR",NR:1,SR:1});t.push({CantonAbbreviation:"AI",NR:1,SR:1});t.push({CantonAbbreviation:"BL",NR:7,SR:1});t.push({CantonAbbreviation:"BS",NR:5,SR:1});t.push({CantonAbbreviation:"BE",NR:24,SR:2});t.push({CantonAbbreviation:"FR",NR:7,SR:2});t.push({CantonAbbreviation:"GE",NR:12,SR:2});t.push({CantonAbbreviation:"GL",NR:1,SR:2});t.push({CantonAbbreviation:"GR",NR:5,SR:2});t.push({CantonAbbreviation:"JU",NR:2,SR:2});t.push({CantonAbbreviation:"LU",NR:9,SR:2});t.push({CantonAbbreviation:"NE",NR:4,SR:2});t.push({CantonAbbreviation:"NW",NR:1,SR:1});t.push({CantonAbbreviation:"OW",NR:1,SR:1});t.push({CantonAbbreviation:"SG",NR:12,SR:2});t.push({CantonAbbreviation:"SH",NR:2,SR:2});t.push({CantonAbbreviation:"SZ",NR:4,SR:2});t.push({CantonAbbreviation:"SO",NR:6,SR:2});t.push({CantonAbbreviation:"TG",NR:6,SR:2});t.push({CantonAbbreviation:"TI",NR:8,SR:2});t.push({CantonAbbreviation:"UR",NR:1,SR:2});t.push({CantonAbbreviation:"VD",NR:19,SR:2});t.push({CantonAbbreviation:"VS",NR:8,SR:2});t.push({CantonAbbreviation:"ZH",NR:35,SR:2});t.push({CantonAbbreviation:"ZG",NR:3,SR:2});var o=function(n,t,i){PdCustomJs.ajax({url:n,method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"},success:t,error:i})},s=function(n){return n.format(u.ListItem,r)},h=function(t,r){var f,u,o,h;return Pd.Shared.LogToConsoleIfDebug(i+".getAllData",!0),f=Pd.Utility.GetUrlParameter("Canton"),u=Q.defer(),t=Pd.Utility.GloballyReplaceString(t,"[LANG]",e),t=Pd.Utility.GloballyReplaceString(t,"{data_cantonAbbreviation}",f),o=s(t,e),h={electionResultsListData:c(o),cantonWsData:l(),cantonBannerUrl:Pd.EntityMappings.GetEntityRecordMapping("Canton","SmallPicture",0),cantonBallotListData:a()},n.all(h).then(function(n){try{var t=v(n.electionResultsListData,n.cantonWsData,n.cantonBannerUrl,n.cantonBallotListData,r,f);u.resolve(t)}catch(e){u.reject(i+"getAllData: unhandled exception: "+e.message)}}),u.promise},c=function(n){var t,r,u;Pd.Shared.LogToConsoleIfDebug(i+".getElectionResultsListData",!0);t=Q.defer();try{r=function(n){n.d.results.forEach(function(n){Object.keys(n).forEach(function(t){var i="Manual"+t;n.hasOwnProperty(i)&&n[i]&&(n[t]=n[i])})});t.resolve(n.d.results)};u=function(n,r,u){t.reject(new Error(i+".getElectionResultsListData: Fatal Unhandled Error: "+u))};o(n,r,u)}catch(f){t.reject(new Error(i+".getElectionResultsListData: Fatal Unhandled Error: "+f.message))}return t.promise},l=function(){Pd.Shared.LogToConsoleIfDebug(i+".getCantonData",!0);var n=Q.defer(),t=breeze.EntityQuery.from("Canton").where("Language","==",r).select("CantonAbbreviation,CantonName").orderBy("CantonName").using(manager);return t.execute().then(function(t){n.resolve(t.results)}).fail(function(t){Pd.Shared.LogToConsoleIfDebug(t);n.reject(t)}),n.promise},a=function(){var n,t,r,u;Pd.Shared.LogToConsoleIfDebug(i+".getCantonBallotListData",!0);n=Q.defer();t="/_api/web/lists/getbytitle('ElectionResultsCantonBallot')/items?$select=CantonAbbreviation,BallotDate";Pd.Shared.LogToConsoleIfDebug(i+".getCantonBallotListData : "+t,!0);try{r=function(t){n.resolve(t.d.results)};u=function(t,r,u){n.reject(new Error(i+".getCantonBallotListData: Fatal Unhandled Error: "+u))};o(t,r,u)}catch(f){n.reject(new Error("Fatal Unhandled Error: "+f.message))}return n.promise},v=function(n,u,e,o,s,h){var v,a,y,l,b,k,p,c,d,g;try{var nt=[],w=[],tt="",it=Pd.Utility.FirstOrDefault(u,function(n){return n.CantonAbbreviation===h});it!=null&&(tt=it.CantonName);v=Pd.Utility.FirstOrDefault(e[0],function(n){return n.language===r});v==null&&(v={url:""});a=null;switch(s){case"NR":a=Res.electionResultsByCantonUrlNr;break;case"SR":a=Res.electionResultsByCantonUrlSr}for(a==null&&(a=""),y=0;y<u.length;y++)l=u[y],l.NumberOfSeats=0,l.Results=!1,l.CantonBannerUrl=v.url.format(l.CantonAbbreviation),l.ResultsByCantonUrl=a.format(r,l.CantonAbbreviation),b=Pd.Utility.FirstOrDefault(t,function(n){return n.CantonAbbreviation===l.CantonAbbreviation}),b!=null&&(l.NumberOfSeats=b[s]),k=Pd.Utility.FirstOrDefault(o,function(n){return n.CantonAbbreviation===l.CantonAbbreviation}),k!=null&&(l.SecondBallot=k.BallotDate),w.push(l);for(p=0;p<n.length;p++)c=n[p],Pd.Utility.StringIsNullOrEmpty(c.ProfilePhotoUrl)&&(c.ProfilePhotoUrl="/_layouts/15/itsystems.Pd.Internet/Branding/images/broken-images/person-200.png"),Pd.Utility.StringIsNullOrEmpty(c.PersonNumber)?c.ProfileUrl=Pd.Utility.StringIsNullOrEmpty(c.CustomBioUrl)?"#!":c.CustomBioUrl:(c.ProfileUrl=Pd.Utility.GetCouncillorFriendlyUrl(c.MemberFirstName,c.MemberLastName,c.PersonNumber),c.UrlNewWindow=!1),c.CantonName=f(c,"CantonName"),c.PartyAbbreviation=f(c,"PartyAbbreviation"),c.CandidateStatus=f(c,"CandidateStatus"),c.Occupation=f(c,"Occupation"),Pd.Utility.StringIsNullOrEmpty(c.CantonName)&&(d=Pd.Utility.FirstOrDefault(u,function(n){return n.CantonAbbreviation===c.CantonAbbreviation}),d!=null&&(c.CantonName=d.CantonName)),g=Pd.Utility.FirstOrDefault(w,function(n){return n.CantonAbbreviation===c.CantonAbbreviation}),g!=null&&(g.Results=!0),nt.push(c);return{MemberResults:nt,CantonResults:w,CantonName:tt}}catch(rt){return Pd.Shared.LogToConsoleIfDebug(i+".formatData: unexpected error: "+rt.message),{}}},f=function(n,t){return n[t+e]};return{council:{NR:1,SR:2},getAllData:h}}])})();
/*** End ElectionResultsService.min.js ***/

/*** Start wsController.min.js ***/
!function(){app.controller("WS",["$scope","$sce",function($scope,$sce){"use strict";function disableExecutionSessionMode(){if($scope.angularContainer&&angular.element("#"+$scope.angularContainer).length>0&&angular.element("#"+$scope.angularContainer).children().length>0){var e=angular.element("#"+$scope.angularContainer).children().first().attr("data-session-mode");(e&&"true"==e&&0==Pd.Angular.IsSessionMode()||e&&"false"==e&&1==Pd.Angular.IsSessionMode())&&($scope.disableExecution=!0)}}function getResults(){if(null==$scope.disableExecution||1!=$scope.disableExecution){var e="",t=angular.element("input[type='hidden'][id*='"+$scope.datasource+"']"),a=$scope.datatype.toLowerCase();if(t.length>0)switch(e=t.val(),e=verifyDataSourceDomain(e),a){case"breeze":dataBindWsCall(e);break;case"odata":dataBindODataCall(e)}else jQuery.ajax({url:"/Smart Data Library/Data Sources/"+$scope.datasource,async:!1,cache:!1,contentType:"text/plain"}).always(function(e){switch(a){case"breeze":dataBindWsCall(e);break;case"odata":dataBindODataCall(e)}})}}function verifyDataSourceDomain(e){try{if(Pd.Utility.StringIsNullOrEmpty(e))return e;if(0==e.toLowerCase().indexOf(Pd.Config.Urls.WSUrl.toLowerCase()))return e;var t="/odata.svc",a=e.toLowerCase().indexOf(t);if(-1==a)return e;var n=e.substring(a+t.length,e.length),o=Pd.Config.Urls.WSUrl+n;return Pd.Shared.LogToConsoleIfDebug("wsController.verifyDataSourceDomain : domain updated from '"+e+"' to '"+o+"'",!0),o}catch(r){return Pd.Shared.LogToConsoleIfDebug("wsController.verifyDataSourceDomain : unexpected error checking/updating domain: "+r.message),e}}function setUrlParametersInScope(e){for(var t in e)$scope["data_request_"+t]||($scope["data_request_"+t]=decodeURIComponent(e[t]))}function replaceValueInRequest(e){var t=Pd.Utility.GetUrlParameters();setUrlParametersInScope(t);for(var a in $scope)if(0==a.toLowerCase().indexOf("data_request_")){var n=a.split("data_request_")[1];n&&""!=n&&t&&t[n]&&(e=Pd.Utility.GloballyReplaceString(e,"{data_"+n+"}",t[n]))}for(var a in $scope)0==a.toLowerCase().indexOf("data_")&&(e=Pd.Utility.GloballyReplaceString(e,"{"+a+"}",$scope[a]));return e}function savePersistedVariables(){var e={};for(var t in $scope)0==t.toLowerCase().indexOf("data_persisted_")&&(e[t]=$scope[t]);return e}function restorePersistedVariables(e){for(var t in e)$scope[t]=e[t]}function dataBindWsCall(dataContent){var currentTemplate=$scope.templatePath,persistedVariables=savePersistedVariables();dataContent=replaceValueInRequest(dataContent);var datasource=eval(dataContent);datasource&&(manager.executeQuery(datasource).then(function(e){$scope.$applyAsync(function(){$scope.results=e.results}),restorePersistedVariables(persistedVariables),setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(currentTemplate)},3e3)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)}),showAngularContainer())}function dataBindODataCall(e){var t=savePersistedVariables();e=replaceValueInRequest(e),OData.read(e,function(e){$scope.$applyAsync(function(){$scope.results=e.results}),restorePersistedVariables(t)}),showAngularContainer()}function showAngularContainer(){var e=angular.element("div[id*='"+$scope.angularContainer+"']");e.length>0&&e.show(),"Smart Data Library/Templates/wsSessionsLiveStreaming.html"==$scope.templatePath&&(angular.element(".video-description-area").css("display",""),angular.element(".play-pause").css("display",""),angular.element(".au-dropdown").css("display",""))}$scope.init=function(e){$scope.params=e},$scope.trustSrc=function(e){return $sce.trustAsResourceUrl(e)},$scope.results=[],$scope.links=[],$scope.Res=Res,$scope.Pd=Pd,$scope.moment=moment,$scope.data_language=Pd.Language.GetCurrentLanguage(),$scope.showBlock={},$scope.disableExecution=!1,$scope.setShowBlock=function(e,t){$scope.showBlock[e]=t},$scope.getSPSearchQueryResults=function(e,t){var a=Pd.Angular.ExecuteSPSearchQuery(e);a.then(function(e){$scope[t]=e},function(e){Pd.Shared.LogToConsoleIfDebug(e)})},$scope.getSPSearchQueryResultsToArray=function(e,t,a){var n=Pd.Angular.ExecuteSPSearchQuery(e);n.then(function(e){"undefined"==typeof $scope[t]&&($scope[t]=new Array),$scope[t][a]=e},function(e){Pd.Shared.LogToConsoleIfDebug(e)})},"Smart Data Library/Templates/wsSessionsLiveStreaming.html"==$scope.templatePath&&(angular.element(".video-description-area").hide(),angular.element(".play-pause").hide(),angular.element(".au-dropdown").hide(),angular.element("#"+$scope.angularContainer).show()),$scope.getEntityRecordMapping=function(e,t,a,n,o){(null==$scope.disableExecution||1!=$scope.disableExecution)&&Pd.EntityMappings.GetEntityRecordMapping(e,t,a).then(function(e){$scope.$applyAsync(function(){for(var t="",a=0;a<e[0].length;a++)if(e[0][a].language==$scope.data_language.toLowerCase()){t=e[0][a].url;break}$scope[n]=t,o&&$scope.$eval(o)})})},$scope.greaterThan=function(e,t){return function(a){return a[e]>t}},$scope.lowerThan=function(e,t){return function(a){return a[e]<t}},$scope.groupByDateRangeWhere=function(e,t,a,n,o,r){if($scope[r])return $scope[r].length>0?!0:!1;var s=[],c=null,l=null;return angular.forEach(e,function(r,s){var i=null;if(0===s?(c=r[n],l=r[o],1===e.length&&this.push({start:c,end:l})):i=e[s-1],i){var u=moment(i[a]),p=moment(r[t]);p.diff(u,"days")<=1?l=r[o]:(this.push({start:c,end:l}),c=r[n],l=r[o]),s===e.length-1&&this.push({start:c,end:l})}},s),$scope[r]=s,$scope[r].length>0?!0:!1},$scope.getItemIdOrEmpty=function(e){return angular.isUndefined(e)||null==e||angular.isUndefined(e.ID)||null==e.ID?"":e.ID},$scope.executeWsQuery=function(dataContent,scopeVar,callbackCode){if(null==$scope.disableExecution||1!=$scope.disableExecution){var currentTemplate=$scope.templatePath;dataContent=replaceValueInRequest(dataContent);var datasource=eval(dataContent);datasource&&manager.executeQuery(datasource).then(function(e){$scope.$applyAsync(function(){$scope[scopeVar]=e.results,callbackCode&&$scope.$eval(callbackCode)}),setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(currentTemplate)},3e3)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)})}},$scope.executeSpQuery=function(dataContent,scopeVar,callbackCode){if(null==$scope.disableExecution||1!=$scope.disableExecution){dataContent=replaceValueInRequest(dataContent);var currentTemplate=$scope.templatePath,datasource=eval(dataContent);datasource&&spManager.executeQuery(datasource).then(function(e){$scope.$applyAsync(function(){$scope[scopeVar]=e.results,callbackCode&&$scope.$eval(callbackCode)}),Pd.Angular.ExecuteScriptsForTemplate(currentTemplate)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)})}},disableExecutionSessionMode(),getResults(),$scope.$on("$includeContentLoaded",function(e,t){setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(t)},3e3)}),$scope.personListLettersData=null,$scope.personListLetters=function(e){if(Pd.Shared.LogToConsoleIfDebug("wsController.personListLetters",!0),null!=$scope.personListLettersData)return $scope.personListLettersData;if(void 0==e&&(e=0),Pd.Utility.StringIsNullOrEmpty(e)&&(e=0),0==$scope.results.length)return[];for(var t=[],a=0;a<$scope.results.length;a++){var n=$scope.results[a],o=n.LastName;if(!Pd.Utility.StringIsNullOrEmpty(o)&&n.PersonNumber!=e){var r=o.charAt(0).toUpperCase(),s=Pd.Utility.FirstOrDefault(t,function(e){return e==r});null==s&&t.push(r)}}return $scope.personListLettersData=t,t}}])}();
/*** End wsController.min.js ***/
/*** Start spController.min.js ***/
!function(){app.controller("SP",["$scope",function($scope){function disableExecutionSessionMode(){if($scope.angularContainer&&angular.element("#"+$scope.angularContainer).length>0&&angular.element("#"+$scope.angularContainer).children().length>0){var e=angular.element("#"+$scope.angularContainer).children().first().attr("data-session-mode");(e&&"true"==e&&0==Pd.Angular.IsSessionMode()||e&&"false"==e&&1==Pd.Angular.IsSessionMode())&&($scope.disableExecution=!0)}}function getResults(){if(null==$scope.disableExecution||1!=$scope.disableExecution){var e="",a=angular.element("input[type='hidden'][id*='"+$scope.datasource+"']"),t=$scope.datatype.toLowerCase();if(a.length>0)switch(e=a.val(),t){case"breeze":dataBind(e);break;case"odata":dataBindODataCall(e)}else jQuery.ajax({url:"/Smart Data Library/Data Sources/"+$scope.datasource,async:!1,cache:!1,contentType:"text/plain"}).always(function(e){switch(t){case"breeze":dataBind(e);break;case"odata":dataBindODataCall(e)}})}}function dataBindODataCall(e){e=replaceValueInRequest(e);var a=$scope.templatePath;OData.read({requestUri:e,headers:{accept:"application/json;odata=verbose"}},function(e){$scope.$applyAsync(function(){$scope.results=e.results,setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(a)},1e3)})});var t=angular.element("div[id*='"+$scope.angularContainer+"']");t.length>0&&t.show()}function dataBind(dataContent){for(var propertyName in $scope)0==propertyName.toLowerCase().indexOf("data_")&&(dataContent=Pd.Utility.GloballyReplaceString(dataContent,"{"+propertyName+"}",$scope[propertyName]));var datasource=eval(dataContent),currentTemplate=$scope.templatePath;spManager.executeQuery(datasource).then(function(e){$scope.$applyAsync(function(){$scope.results=e.results,setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(currentTemplate)},1e3)})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)});var containerAngular=jQuery("div[id*='"+$scope.angularContainer+"']");containerAngular.length>0&&containerAngular.show()}function setUrlParametersInScope(e){for(var a in e)$scope["data_request_"+a]||($scope["data_request_"+a]=e[a])}function replaceValueInRequest(e){var a=Pd.Utility.GetUrlParameters();setUrlParametersInScope(a);for(var t in $scope)if(0==t.toLowerCase().indexOf("data_request_")){var n=t.split("data_request_")[1];n&&""!=n&&a&&a[n]&&(e=Pd.Utility.GloballyReplaceString(e,"{data_"+n+"}",a[n]))}for(var t in $scope)0==t.toLowerCase().indexOf("data_")&&(e=Pd.Utility.GloballyReplaceString(e,"{"+t+"}",$scope[t]));return e}$scope.init=function(e){$scope.params=e},$scope.results=[],$scope.Res=Res,$scope.Pd=Pd,$scope.disableExecution=!1,$scope.data_language=Pd.Language.GetCurrentLanguage(),$scope.executeSPQuery=function(dataContent,scopeVar){if(null==$scope.disableExecution||1!=$scope.disableExecution){dataContent=replaceValueInRequest(dataContent);var datasource=eval(dataContent);datasource&&spManager.executeQuery(datasource).then(function(e){$scope.$applyAsync(function(){$scope[scopeVar]=e.results})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)})}},disableExecutionSessionMode(),getResults()}])}();
/*** End spController.min.js ***/
/*** Start spSmartDataController.min.js ***/
!function(){app.controller("SPSmartData",["$scope",function($scope){function getResults(){var e="",a=jQuery("input[type='hidden'][id*='"+$scope.datasource+"']");a.length>0?(e=a.val(),dataBind(e)):jQuery.ajax({url:"/Smart Data Library/Data Sources/"+$scope.datasource,async:!1,cache:!1,contentType:"text/plain"}).always(function(e){dataBind(e)})}function dataBind(dataContent){for(var propertyName in $scope)0==propertyName.toLowerCase().indexOf("data_")&&(dataContent=Pd.Utility.GloballyReplaceString(dataContent,"{"+propertyName+"}",$scope[propertyName]));var datasource=eval(dataContent);spManager.executeQuery(datasource).then(function(e){$scope.results=e.results,$scope.hDataSourceTypeVal=angular.element("input[type='hidden'][id*='hDataSourceType']").val(),$scope.hDataSourceCategoryVal=angular.element("input[type='hidden'][id*='hDataSourceCategory']").val(),$scope.hDataSourceTemplateVal=angular.element("input[type='hidden'][id*='hDataSourceTemplate']").val(),$scope.hDataSourceODataVal=angular.element("input[type='hidden'][id*='hDataSourceOData']").val(),$scope.hPresentationCategoryVal=angular.element("input[type='hidden'][id*='hPresentationCategory']").val(),$scope.hPresentationTemplateVal=angular.element("input[type='hidden'][id*='hPresentationTemplate']").val(),null!=$scope.hDataSourceTypeVal&&($scope.dstype=$scope.hDataSourceTypeVal,"OData"==$scope.hDataSourceTypeVal&&($scope.dsodata=$scope.hDataSourceODataVal),"Breeze"==$scope.hDataSourceTypeVal&&(null!=$scope.hDataSourceCategoryVal&&($scope.dscategory=$scope.$eval("(results | filter:{ContentTypeId: '0x0101002CE6F080DB89416992E53D124493BC65'} | unique:'SmartDataSourceCategory' | filter:{SmartDataSourceCategory: hDataSourceCategoryVal})[0] | filter:{SmartIsSystem: false}")),null!=$scope.hDataSourceTemplateVal&&($scope.dstemplate=$scope.$eval("(results | filter:{ContentTypeId: '0x0101002CE6F080DB89416992E53D124493BC65'} | filter:{SmartDataSourceCategory: dscategory.SmartDataSourceCategory} | filter:{Id: hDataSourceTemplateVal})[0] | filter:{SmartIsSystem: false}")))),null!=$scope.hPresentationCategoryVal&&($scope.presentationcategory=$scope.$eval("(results | filter:{ContentTypeId: '0x010100D272EF12D3834C3C8B9E7BD1E666450F'} | unique:'SmartTemplateCategory' | filter:{SmartTemplateCategory: hPresentationCategoryVal})[0] | filter:{SmartIsSystem: false}")),null!=$scope.hPresentationTemplateVal&&($scope.presentationtemplate=$scope.$eval("(results | filter:{ContentTypeId: '0x010100D272EF12D3834C3C8B9E7BD1E666450F'} | filter:{SmartTemplateCategory: presentationcategory.SmartTemplateCategory} | filter:{SmartTemplateDataSourceCategory: dscategory.SmartDataSourceCategory} | filter:{Id: hPresentationTemplateVal})[0] | filter:{SmartIsSystem: false}")),$scope.$apply()}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)});var containerAngular=jQuery("div[id*='"+$scope.angularContainer+"']");containerAngular.length>0&&containerAngular.show()}$scope.init=function(e){$scope.params=e},$scope.results=[],$scope.dsTypes=["Breeze","OData"],$scope.hDataSourceTypeVal="",$scope.hDataSourceCategoryVal="",$scope.hDataSourceTemplateVal="",$scope.hDataSourceOData="",$scope.hPresentationCategoryVal="",$scope.hPresentationTemplateVal="",$scope.dstype="",$scope.dscategory="",$scope.dstemplate="",$scope.dsodata="",$scope.presentationcategory="",$scope.presentationtemplate="",$scope.TextBrowseText=Res.webPartSmartDataBrowseLink,$scope.TextDataSource=Res.webPartSmartDataDataSource,$scope.TextPresentation=Res.webPartSmartDataPresentation,$scope.TextType=Res.webPartSmartDataType,$scope.TextCategory=Res.webPartSmartDataCategory,$scope.TextTemplate=Res.webPartSmartDataTemplate,$scope.TextODataLink=Res.odataBrowserPageLinkTitle,$scope.getItemIdOrEmpty=function(e){return angular.isUndefined(e)||null==e||angular.isUndefined(e.Id)||null==e.Id?"":e.Id},getResults()}])}();
/*** End spSmartDataController.min.js ***/
/*** Start responsivePageController.min.js ***/
!function(){app.controller("ResponsivePage",["$scope",function(e){function i(){var i=angular.element("input[type='hidden'][id*='hAvailableWPList']").val(),d=angular.element("<div />").html(i).text();if(""!=d){var l=JSON.parse(d);e.availablewp=l,n(l)}}function n(i){for(var n=0;n<i.length;n++){var d=i[n];d.hideOnDesktop&&(e.hideInDesktopWp+=d.id+";"),d.hideOnMobile&&(e.hideInMobileWp+=d.id+";")}}e.init=function(i){e.params=i},e.WebPartNameTitle=Res.webPartResponsivePageWebPartNameTitle,e.DesktopTitle=Res.webPartResponsivePageDesktopTitle,e.MobileTitle=Res.webPartResponsivePageMobileTitle,e.availablewp=[],e.hideInDesktopWp="",e.hideInMobileWp="",e.rebuildHiddenValues=function(i){angular.isUndefined(i)||null==i||angular.isUndefined(i.id)||null==i.id||(i.hideOnDesktop&&e.hideInDesktopWp.indexOf(i.id)<=-1?e.hideInDesktopWp+=i.id+";":!i.hideOnDesktop&&e.hideInDesktopWp.indexOf(i.id)>=0&&(e.hideInDesktopWp=e.hideInDesktopWp.replace(i.id+";","")),i.hideOnMobile&&e.hideInMobileWp.indexOf(i.id)<=-1?e.hideInMobileWp+=i.id+";":!i.hideOnMobile&&e.hideInMobileWp.indexOf(i.id)>=0&&(e.hideInMobileWp=e.hideInMobileWp.replace(i.id+";","")))},i()}])}();
/*** End responsivePageController.min.js ***/
/*** Start spPictureEditorController.min.js ***/
!function(){app.controller("SPImageAlbumEditor",["$scope",function(a){function e(){var e="",n=jQuery("input[type='hidden'][id*='"+a.datasource+"']");n.length>0?(e=n.val(),t(e)):jQuery.ajax({url:"/Smart Data Library/Data Sources/"+a.datasource,async:!1,cache:!1,contentType:"text/plain"}).always(function(a){a&&a.responseText?t(a.responseText):a&&t(a)})}function t(e){for(var t in a)0==t.toLowerCase().indexOf("data_")&&e&&(e=Pd.Utility.GloballyReplaceString(e,"{"+t+"}",a[t]));a.dslibraries=Pd.Config.Urls.ImageAlbumPictureLibraries,a.hDataImageLibraryAlbumLocationVal=angular.element("input[type='hidden'][id*='hDataImageLibraryAlbumLocation']").val(),null!=a.hDataImageLibraryAlbumLocationVal&&(a.dslibrary=a.hDataImageLibraryAlbumLocationVal);var n="/media/_api/web/lists/getbytitle('Pictures')/items?$select=Id,FileRef,Title,ContentTypeId,PictureLink,AlbumDate&$filter=ContentTypeId ge '0x0120D52000F6C81D02918F434C87D6B30464128A51'&$orderby=Title&$top=5000";OData.read({requestUri:n,contentType:"application/json;odata=verbose",headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}},function(e){a.results=e.results,a.hDataImageAlbumIdVal=angular.element("input[type='hidden'][id*='hDataImageAlbumId']").val(),a.dsalbums=a.$eval("results | unique:'Title'"),null!=a.hDataImageAlbumIdVal&&""!=a.hDataImageAlbumIdVal&&(a.dsalbum=parseInt(a.hDataImageAlbumIdVal)),a.$$phase||a.$apply()});var l=jQuery("div[id*='"+a.angularContainer+"']");l.length>0&&l.show()}a.init=function(e){a.params=e},a.results=[],a.hDataSourceTypeVal="",a.dslibrary="",a.dsalbum="",a.Res=Res,a.getItemIdOrEmpty=function(a){return angular.isUndefined(a)||null==a||angular.isUndefined(a.Id)||null==a.Id?"":a.Id},e()}])}();
/*** End spPictureEditorController.min.js ***/
/*** Start imageAlbumController.min.js ***/
!function(){app.controller("ImageAlbum",["$scope",function(e){function a(){var a="",r=jQuery("input[type='hidden'][id*='"+e.datasource+"']");r.length>0?""!=r.val()&&(a=l(r.val()),t(a,n)):jQuery.ajax({url:"/Smart Data Library/Data Sources/"+e.datasource,async:!1,cache:!1,contentType:"text/plain"}).always(function(e){a=l(e),t(a,n)})}function t(a,t){e.url=a,e.angularContainerPerma=e.angularContainer,OData.read({requestUri:a,contentType:"application/json;odata=verbose",headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}},function(e){t(e)})}function l(a){for(var t in e)if(0==t.toLowerCase().indexOf("data_request_")){var l=t.split("data_request_")[1],n=Pd.Utility.GetUrlParameters();l&&""!=l&&n&&n[l]&&(a=Pd.Utility.GloballyReplaceString(a,"{data_"+l+"}",n[l]))}for(var t in e)0==t.toLowerCase().indexOf("data_")&&(a=Pd.Utility.GloballyReplaceString(a,"{"+t+"}",e[t]));return a}function n(a){try{var t=_spPageContextInfo.serverRequestPath.indexOf("ViewImageAlbum.aspx")>=0;e.results=a.results[0],e.results.ShowAlbumTitle=t===!0?!0:e.results.ShowAlbumTitle;var l=[];angular.forEach(a.results[0].Folder.Files.results,function(e){var a=Pd.Angular.GetSharePointImageUrl(e.ServerRelativeUrl);e.ThumbnailImageUrl=a.thumbnailImageUrl,e.WeboptimizedImageUrl=a.weboptimizedImageUrl,this.push(e)},l),e.filesResults=l,e.$$phase||e.$apply();var n=jQuery("div[id*='"+e.angularContainerPerma+"']");n.length>0&&n.show(),Pd.Shared.ApplyDotDotDot()}catch(r){Pd.Shared.LogToConsoleIfDebug(r)}}e.init=function(a){e.params=a},e.Res=Res,e.Language=Pd.Language,e.ShowingAll=!1,e.PageAlbumCount=angular.element(".pd-gallery-panel").length,e.PageAlbumCount>1?(e.DefaultViewNumber=8,e.ShowingAll=!1):(e.DefaultViewNumber=1e3,e.ShowingAll=!0),e.ShowAllPictures=function(){e.ShowingAll=!0,e.DefaultViewNumber=1e3},a()}])}();
/*** End imageAlbumController.min.js ***/
/*** Start spAuthorController.min.js ***/
!function(){"use strict";function e(e){e.createVisible=!1,e.editVisible=!1,e.displayVisible=!1,e.languageVisible=!1,e.entitySaved=!1,e.langEn=!1,e.langDe=!1,e.langFr=!1,e.langIt=!1,e.langRm=!1,e.localizationLanguage="",e.selectedCountry="none",e.templateLocalization={title:Res.mmauthorEditTitle,address:Res.mmauthorEditAddress,create:Res.mmauthorEditCreateButton,save:Res.mmauthorEditSaveButton,cancel:Res.mmauthorEditCancelButton},e.registerInputControl=function(t){e.currentControl=t},e.languages=[{label:"EN",value:"en","default":!1},{label:"DE",value:"de","default":!1},{label:"FR",value:"fr","default":!1},{label:"IT",value:"it","default":!1},{label:"RM",value:"rm","default":!1}],e.languageChange=function(t){switch(t){case"en":e.langEn=!0,e.langDe=!1,e.langFr=!1,e.langIt=!1,e.langRm=!1;break;case"de":e.langEn=!1,e.langDe=!0,e.langFr=!1,e.langIt=!1,e.langRm=!1;break;case"fr":e.langEn=!1,e.langDe=!1,e.langFr=!0,e.langIt=!1,e.langRm=!1;break;case"it":e.langEn=!1,e.langDe=!1,e.langFr=!1,e.langIt=!0,e.langRm=!1;break;case"rm":e.langEn=!1,e.langDe=!1,e.langFr=!1,e.langIt=!1,e.langRm=!0}e.selectedCountry=t},e.init=function(t){e.selectedEntity=t,e.loadAuthor()},e.loadAuthor=function(){e.author={title:e.selectedEntity[0].label,title_en:e.getValueFromMetadata(e.selectedEntity[0].data,"Title_en"),address_en:e.getValueFromMetadata(e.selectedEntity[0].data,"Address_en"),title_de:e.getValueFromMetadata(e.selectedEntity[0].data,"Title_de"),address_de:e.getValueFromMetadata(e.selectedEntity[0].data,"Address_de"),title_fr:e.getValueFromMetadata(e.selectedEntity[0].data,"Title_fr"),address_fr:e.getValueFromMetadata(e.selectedEntity[0].data,"Address_fr"),title_it:e.getValueFromMetadata(e.selectedEntity[0].data,"Title_it"),address_it:e.getValueFromMetadata(e.selectedEntity[0].data,"Address_it"),title_rm:e.getValueFromMetadata(e.selectedEntity[0].data,"Title_rm"),address_rm:e.getValueFromMetadata(e.selectedEntity[0].data,"Address_rm")}},e.hideAll=function(){e.createVisible=!1,e.editVisible=!1,e.displayVisible=!1,e.languageVisible=!1,e.editor=""},e.cancel=function(){e.hideAll()},e.save=function(){var t=e.selectedEntity[0].value.split(";#")[0],a=breeze.EntityQuery.from(e.authorsLibraryType.defaultResourceName).where("ID","eq",t).using(e.spManagerLookup).execute().then(function(e){return e.results},function(e){Pd.Shared.LogToConsoleIfDebug(e)});a.then(function(t){try{t[0].Title=e.author.title,t[0].Title_en=e.author.title_en,t[0].Title_de=e.author.title_de,t[0].Title_fr=e.author.title_fr,t[0].Title_it=e.author.title_it,t[0].Title_rm=e.author.title_rm,t[0].Address_en=e.author.address_en,t[0].Address_de=e.author.address_de,t[0].Address_fr=e.author.address_fr,t[0].Address_it=e.author.address_it,t[0].Address_rm=e.author.address_rm,e.spManagerLookup.saveChanges().then(function(){SP.UI.Notify.addNotification(Res.clientNotificationSelectionSaved,!1),e.entitySaved=!0,e.selectedEntity[0].data[0].value=e.author.title_en,e.selectedEntity[0].data[1].value=e.author.title_de,e.selectedEntity[0].data[2].value=e.author.title_fr,e.selectedEntity[0].data[3].value=e.author.title_it,e.selectedEntity[0].data[4].value=e.author.title_rm,e.selectedEntity[0].data[5].value=e.author.address_en,e.selectedEntity[0].data[6].value=e.author.address_de,e.selectedEntity[0].data[7].value=e.author.address_fr,e.selectedEntity[0].data[8].value=e.author.address_it,e.selectedEntity[0].data[9].value=e.author.address_rm},function(e){Pd.Shared.LogToConsoleIfDebug(e)})}catch(a){Pd.Shared.LogToConsoleIfDebug(a)}},function(e){Pd.Shared.LogToConsoleIfDebug(e)}),e.hideAll()},e.create=function(){var t=e.spManagerLookup.metadataStore,a=t.getEntityType("Authors"),r=a.createEntity({Title:e.resolveTitleValue(),Title_en:e.author.title_en,Title_de:e.author.title_de,Title_fr:e.author.title_fr,Title_it:e.author.title_it,Title_rm:e.author.title_rm,Address_en:e.author.address_en,Address_de:e.author.address_de,Address_fr:e.author.address_fr,Address_it:e.author.address_it,Address_rm:e.author.address_rm});return""==r.Title?void SP.UI.Notify.addNotification(Res.clientNotificationTitleWarning,!1):(e.newItem=e.spManagerLookup.addEntity(r),e.spManagerLookup.saveChanges().then(function(){var t="";try{var a=angular.element("input[id*='{0}']".format(e.currentControl.attr("data-target-control")));a.val("{0};#{1}".format(e.newItem.ID,e.newItem.Title)),e.currentControl.val(e.newItem.Title),t="{0} {1}".format(e.newItem.Title,Res.clientNotificationSelectionCreated),SP.UI.Notify.addNotification(t,!1)}catch(r){Pd.Shared.LogToConsoleIfDebug(r.stack),t=r.message,SP.UI.Notify.addNotification(t,!1)}},function(e){Pd.Shared.LogToConsoleIfDebug(e),Pd.Shared.LogToConsoleIfDebug(e.entityErrors)}),e.currentControl.val(""),void e.hideAll())},e.resolveTitleValue=function(){var t="";switch(e.localizationLanguage){case"en":t=e.author.title_en;break;case"de":t=e.author.title_de;break;case"fr":t=e.author.title_fr;break;case"it":t=e.author.title_it;break;case"rm":t=e.author.title_rm}return t},e.showForm=function(t,a){switch(e.hideAll(),e.languageChange(a),t){case"new":e.currentControl.val(""),e.createVisible?(e.createVisible=!1,e.editor=""):(e.createVisible=!0,e.languageVisible=!0,e.selectedCountry=a,e.editor={"border-color":"red","border-style":"solid","border-width":"1px",padding:"10px","min-width":"0"},e.author={title:"",addresss:"",title_en:"",title_de:"",title_fr:"",title_it:"",title_rm:"",address_en:"",address_de:"",address_fr:"",address_it:"",address_rm:""});break;case"edit":e.editVisible?(e.editVisible=!1,e.editor=""):null!=e.selectedEntity&&""!=angular.element(e.currentControl[0]).val()?(e.editVisible=!0,e.languageVisible=!0,e.selectedCountry=a,e.editor={"border-color":"red","border-style":"solid","border-width":"1px",padding:"10px","min-width":"0"},e.loadAuthor()):(e.editVisible=!1,e.editor="");break;case"delete":if(e.editor="",null!=e.selectedEntity&&""!=angular.element(e.currentControl[0]).val()){var r=confirm(Res.clientNotificationDeleteWarning);if(1==r){var l=e.currentControl[0],i=l.attributes["data-target-control"].value,n=angular.element("#"+i);n.val("");var d=e.selectedEntity[0].value.split(";#")[0];breeze.EntityQuery.from(e.authorsLibraryType.defaultResourceName).where("ID","eq",parseInt(d)).using(e.spManagerLookup).execute().then(function(t){var a=t.results,r=a[a.length-1];r.entityAspect.setDeleted(),e.spManagerLookup.saveChanges().then(function(){SP.UI.Notify.addNotification(Res.clientNotificationSelectionDeleted,!1),e.selectedEntity=null,e.currentControl.val("")},function(e){Pd.Shared.LogToConsoleIfDebug(e)})})}e.hideAll()}}},e.getValueFromMetadata=function(e,t){if(null!=e){var a="";return angular.forEach(e,function(e,r){e.columnName==t&&(a=e.value)}),a}return null}}var t="authorCtrl";angular.module("app").controller(t,["$scope",e])}();
/*** End spAuthorController.min.js ***/
/*** Start spAuthorDisplayController.min.js ***/
!function(){"use strict";function a(a){a.Res=Res,a.Language=Pd.Language,a.langEn=!0,a.langDe=!1,a.langFr=!1,a.langIt=!1,a.langRm=!1,a.hideAll=function(){a.langEn=!1,a.langDe=!1,a.langFr=!1,a.langIt=!1,a.langRm=!1},a.languageChange=function(n){switch(a.hideAll(),n){case"en":a.langEn=!0;break;case"de":a.langDe=!0;break;case"fr":a.langFr=!0;break;case"it":a.langIt=!0;break;case"rm":a.langRm=!0}}}var n="authorDisplayCtrl";angular.module("app").controller(n,["$scope",a])}();
/*** End spAuthorDisplayController.min.js ***/
/*** Start wsABController.min.js ***/
app.controller("wsABController",["$scope","$sce","$q","$timeout","officialBulletinService","broadcastService",function(e,t,n,s,r,o){"use strict";function a(t){e.$applyAsync(function(){switch(t){case"Subjects":if(0===e.subjects.length&&r.subjects.length>0){e.subjects=r.subjects,e.subjectIds=r.subjectIds,e.subjectsLoaded=!0;var n=Pd.Utility.GetUrlParameters().SubjectId;n&&(f(n),e.subjectId=n),d()}break;case"Transcripts":e.transcripts=r.transcripts,e.officialBulletinTemplates=r.functionTemplates,e.transcriptsLoaded=!0,d();break;case"Businesses":e.businesses=r.businesses,e.businessesLoaded=!0,d();break;case"FirstBusiness":e.firstBusiness=r.firstBusiness,e.firstBusinessLoaded=!0,d();break;case"Meetings":e.meetings=r.meetings,e.meetingsLoaded=!0,d();break;case"PrintingConfigurations":e.printingConfiguration=r.printingConfiguration,e.printingConfigurationLoaded=!0,d();break;default:d()}})}function i(t){e.$applyAsync(function(){switch(t){case"Transcripts":e.transcript=r.transcript,e.transcriptIds=r.transcriptIds,e.officialBulletinTemplates=r.functionTemplates,e.displayType=1===e.transcript.Type&&e.transcript.DisplaySpeaker===!1?3:e.transcript.Type,p(e.transcript.ID),e.transcriptsLoaded=!0,u();break;case"Businesses":e.businesses=r.businesses,e.businessesLoaded=!0,u();break;case"FirstBusiness":e.firstBusiness=r.firstBusiness,e.firstBusinessLoaded=!0,u();break;default:u()}})}function l(t){Pd.Shared.LogToConsoleIfDebug("wsABController.sessionCallbackSync :: "+t,!0),e.$applyAsync(function(){switch(t){case"CurrentSession":Pd.Shared.LogToConsoleIfDebug("wsABController.sessionCallbackSync :: CurrentSession :: setting currentSession & sessionLoaded & sync spinner",!0),e.currentSession=r.currentSession,e.sessionLoaded=!0,g();break;case"Sessions":Pd.Shared.LogToConsoleIfDebug("wsABController.sessionCallbackSync :: Sessions :: setting sessions & sessionsLoaded & sync spinner",!0),e.sessions=r.sessions,e.sessionsLoaded=!0,g();break;default:g()}})}function d(){e.meeting&&e.subjectsLoaded&&e.transcriptsLoaded&&e.businessesLoaded&&e.firstBusinessLoaded&&e.meetingsLoaded&&(e.spinner=!1,o.send("AbDebateRequestsCompleted"))}function u(){e.transcriptsLoaded&&e.businessesLoaded&&e.firstBusinessLoaded&&(e.spinner=!1)}function g(){e.sessionLoaded&&e.sessionsLoaded&&(e.spinner=!1)}function c(){var t=angular.element("div[id*='"+e.angularContainer+"']");t.length>0&&t.show()}e.init=function(t){e.params=t},e.Pd=Pd,e.Res=Res,e.moment=moment,e.firstBusiness="",e.subjectId="",e.previousSubject=0,e.nextSubject=0,e.previousSubjectUrl="#",e.nextSubjectUrl="#",e.firstBusiness=null,e.previousTranscript=0,e.nextTranscript=0,e.previousTranscriptUrl="#",e.nextTranscriptUrl="#",e.transcripts=[],e.subjects=[],e.businesses=[],e.meetings={},e.sessions={},e.years=[],e.currentSession=null,e.pageTitle="",e.meeting=null,e.subjectsLoaded=!1,e.transcriptsLoaded=!1,e.businessesLoaded=!1,e.firstBusinessLoaded=!1,e.meetingsLoaded=!1,e.sessionLoaded=!1,e.sessionsLoaded=!1,e.printingConfigurationLoaded=!1,e.spinner=!0,e.officialBulletinTemplates=r.functionTemplates,e.data_language=Pd.Language.GetCurrentLanguage(),e.urlParameters=Pd.Utility.GetUrlParameters(),e.currentYear=moment().year(),e.trustSrc=function(e){return t.trustAsResourceUrl(e)},e.getVideoEmbeddingCode=function(e){return"<iframe src='{0}' width='768' height='432' allowfullscreen='true' webkitallowfullscreen='true' mozallowfullscreen='true' frameborder='0' scrolling='no'></iframe>".format(Pd.Utility.GetPageUrlFormat(Pd.Config.LiveStreaming.OnDemandUrl,e))},e.getTranscriptOnDemandVideoUrl=function(e,t){if(void 0==e)return"";Pd.Shared.LogToConsoleIfDebug("wsABController :: getTranscriptOnDemandVideoUrl",!0);var n=Pd.Config.LiveStreaming.OnDemandUrl;try{if(n.indexOf("{1}")>0&&t.length>0)return Pd.Utility.GetPageUrlFormat(n,e.ID,encodeURI(t[0].BusinessShortNumber),encodeURI(t[0].Title),encodeURI(e.SpeakerFullName))}catch(s){Pd.Shared.LogToConsoleIfDebug("wsABController :: getTranscriptOnDemandVideoUrl :: unhandled error :: "+s.message)}return Pd.Utility.GetPageUrlFormat(n,e.ID)},e.getOfficialBulletinTemplate=function(n){var s="",r="",o="",a="",i="",l="",d="";try{r="undefined"==typeof n.Function||""===n.Function?"empty":n.Function.toLowerCase(),o=n.LanguageOfText,a=n.SpeakerFirstName,i=n.SpeakerLastName,l="undefined"!=typeof n.ParlGroupAbbreviation&&null!=n.ParlGroupAbbreviation?n.ParlGroupAbbreviation:"",d="undefined"!=typeof n.CantonAbbreviation&&null!=n.CantonAbbreviation?n.CantonAbbreviation:"",angular.forEach(e.officialBulletinTemplates,function(e){if(e.name==r&&e.language==o){var n=e.value,u="";""!=l&&""!=d&&(u="({0}, {1})".format(l,d)),""!=l&&""==d&&(u="({0})".format(l)),""==l&&""!=d&&(u="({0})".format(d)),s=t.trustAsHtml(n.format(i,a,u))}})}catch(u){Pd.Shared.LogToConsoleIfDebug(u.message),Pd.Shared.LogToConsoleIfDebug(u.stack)}return s},e.getEntityRecordMapping=function(t,n,s,r){Pd.EntityMappings.GetEntityRecordMapping(t,n,s).then(function(t){for(var n="",s=0;s<t[0].length;s++)if(t[0][s].language===e.data_language.toLowerCase()){n=t[0][s].url;break}e[r]=n})};var f=function(t){Pd.Shared.LogToConsoleIfDebug("wsABController::setNavigationSubjects");var n=e.subjectIds.indexOf(parseInt(t));return n-1>0&&n+1<e.subjects.length?(e.previousSubject=e.subjectIds[n-1],e.previousSubjectUrl=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.AmtlichesBulletin.Detail,e.previousSubject),e.nextSubject=e.subjectIds[n+1],void(e.nextSubjectUrl=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.AmtlichesBulletin.Detail,e.nextSubject))):(n-1>=0?(e.previousSubject=e.subjectIds[n-1],e.previousSubjectUrl=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.AmtlichesBulletin.Detail,e.previousSubject)):(e.previousSubject=0,e.previousSubjectUrl="#"),void(n+1<e.subjectIds.length?(e.nextSubject=e.subjectIds[n+1],e.nextSubjectUrl=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.AmtlichesBulletin.Detail,e.nextSubject)):(e.nextSubject=0,e.nextSubjectUrl="#")))},p=function(t){Pd.Shared.LogToConsoleIfDebug("wsABController::setNavigationTranscripts");var n=e.transcriptIds.indexOf(parseInt(t));return n-1>0&&n+1<e.transcriptIds.length?(e.previousTranscript=e.transcriptIds[n-1],e.previousTranscriptUrl=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.AmtlichesBulletin.Video,e.previousTranscript),e.nextTranscript=e.transcriptIds[n+1],void(e.nextTranscriptUrl=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.AmtlichesBulletin.Video,e.nextTranscript))):(n-1>=0?(e.previousTranscript=e.transcriptIds[n-1],e.previousTranscriptUrl=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.AmtlichesBulletin.Video,e.previousTranscript)):(e.previousTranscript=0,e.previousTranscriptUrl="#"),void(n+1<e.transcriptIds.length?(e.nextTranscript=e.transcriptIds[n+1],e.nextTranscriptUrl=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.AmtlichesBulletin.Video,e.nextTranscript)):(e.nextTranscript=0,e.nextTranscriptUrl="#")))};e.dateLessOrEqualThan=function(e,t,n){return function(s){var r=moment(s[e]);void 0==n&&(n=!1),n&&(r=r.format("YYYYMMDD"),r=moment(r,"YYYYMMDD"));var o=new Date(t);"Invalid Date"==o&&8===t.length&&(o=moment(t,"YYYYMMDD"));var a=moment(o);return r.diff(a)<=0}},e.Res=Res,e.Pd=Pd,e.data_language=Pd.Language.GetCurrentLanguage(),e.data_current_year=moment().format("YYYY"),e.selectedYear=moment().format("YYYY"),e.minYear=moment().diff("1990-02-05 00:00:00.000","years"),e.currentSessionId=null,e.getYearsSince=function(t){if(e.years.length>0)return e.years;for(var n=(new Date).getYear(),s=new Date(t).getYear(),r=n-s,o=0;r>=o;o++)e.years[o]=moment().format("YYYY")-o;return e.years},e.navigateToDebate=function(e){if(Pd.Shared.LogToConsoleIfDebug("wsABController.$scope.navigateToDebate",!0),"true"!=jQuery("#areaDebates").attr("aria-expanded")&&Pd.Shared.CurrentlyInMobileView())Pd.Shared.LogToConsoleIfDebug("wsABController.$scope.navigateToDebate :: accordion is not expanded, adding classes",!0),jQuery("a#linkHeaderDebates").trigger("click"),setTimeout(function(){Pd.Shared.LogToConsoleIfDebug("wsABController.$scope.navigateToDebate :: accordion is (now) expanded, setting hash",!0),window.location.hash="#votum"+e},500);else{Pd.Shared.LogToConsoleIfDebug("wsABController.$scope.navigateToDebate :: accordion is expanded, setting hash",!0);var t=!1;!Pd.Shared.CurrentlyInMobileView()&&PdCustomJs(window).scrollTop()<=100&&(Pd.Shared.LogToConsoleIfDebug("wsABController.$scope.navigateToDebate :: re-navigation required as window wasn't scrolled but will be",!0),t=!0);var n="#votum"+e;if(window.location.hash==n&&(Pd.Shared.LogToConsoleIfDebug("wsABController.$scope.navigateToDebate :: re-setting hash as user is navigating to same item",!0),window.location.hash=""),window.location.hash=n,t){var s=function(){var e=window.location.hash;""!=e&&(Pd.Shared.LogToConsoleIfDebug("wsABController.$scope.navigateToDebate : re-navigating to the existing hash after making the navigation sticky",!0),window.location.hash="",window.location.hash=e)};setTimeout(s,200),setTimeout(s,400),setTimeout(s,1e3),setTimeout(s,1500)}}},e.navigateToDebateList=function(e){Pd.Shared.LogToConsoleIfDebug("wsABController.$scope.navigateToDebateList",!0),"true"==jQuery("#debate-person-list-content").attr("aria-expanded")?(Pd.Shared.LogToConsoleIfDebug("wsABController.$scope.navigateToDebateList :: accordion is expanded, setting hash",!0),window.location.hash="#speaker"+e):(Pd.Shared.LogToConsoleIfDebug("wsABController.$scope.navigateToDebateList :: accordion is not expanded, adding classes",!0),jQuery("a#debate-person-list-header").trigger("click"),setTimeout(function(){Pd.Shared.LogToConsoleIfDebug("wsABController.$scope.navigateToDebateList :: accordion is (now) expanded, setting hash",!0),window.location.hash="#speaker"+e},500))},e.getMeetingBySubjectId=function(){Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getMeetingBySubjectId",!0),e.data_language=Pd.Language.GetCurrentLanguage(),e.urlParameters=Pd.Utility.GetUrlParameters(),e.subjectId=e.urlParameters.SubjectId,r.getMeetingBySubjectId(e.subjectId,e.data_language,a).then(function(t){e.$applyAsync(function(){e.meeting=t,Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getMeetingBySubjectId : retrieved data",!0)})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)}),setTimeout(function(){e.spinner===!0&&e.$applyAsync(function(){e.spinner=!1,Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getMeetingBySubjectId : 10 second timeout",!0)})},1e4),c()},e.getMeetingByTranscriptId=function(){Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getMeetingByTranscriptId",!0),e.transcriptId=e.urlParameters.TranscriptId,r.getMeetingByTranscriptId(e.transcriptId,e.data_language,i).then(function(t){e.$applyAsync(function(){e.meeting=t,Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getMeetingByTranscriptId : retrieved data",!0)})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)}),setTimeout(function(){e.spinner===!0&&e.$applyAsync(function(){e.spinner=!1,Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getMeetingByTranscriptId : 10 second timeout",!0)})},1e4),c()},e.getCurrentSession=function(){Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getCurrentSession",!0),r.getSessionsByYear(e.currentYear,e.data_language,!0,l).then(function(t){t.length>0?(e.currentSession=t[0],Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getCurrentSession : retrieved data for "+e.currentYear,!0)):(Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getCurrentSession : retrieved data: no data for "+e.currentYear,!0),e.currentYear=e.currentYear-1,e.getCurrentSession())}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)}),setTimeout(function(){e.spinner===!0&&e.$applyAsync(function(){e.spinner=!1,Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getCurrentSession : 10 second timeout",!0)})},1e4),c()},e.getSessionsByYear=function(t){Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getSessionsByYear",!0),r.getSessionsByYear(t,e.data_language,!1,l).then(function(n){n.length>0?(e.sessions=n,Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getSessionsByYear : retrieved data for "+t,!0),Pd.Utility.ExecuteWhenPageReady(function(){Pd.Angular.ExecuteScriptsForTemplate(b)})):(Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getSessionsByYear : retrieved data: no data for "+t,!0),t-=1,e.selectedYear=t,e.getSessionsByYear(t))}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)}),setTimeout(function(){e.spinner===!0&&e.$applyAsync(function(){e.spinner=!1,Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getSessionsByYear : 10 second timeout",!0)})},1e4),c()},e.getDebatePageTitle=function(){e.$watch("spinner",function(t,n){if(1==n&&0==t){if(Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getDebatePageTitle : spinner false"),null==e.firstBusiness)return void Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getDebatePageTitle : no first business retrieved!");r.getBusinessInfo(e.firstBusiness.BusinessNumber).then(function(t){return 0==t.length?void Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getDebatePageTitle : business retrieved by ID is not existing!"):(Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getDebatePageTitle : response from getBusinessInfo"),void e.$applyAsync(function(){Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getDebatePageTitle : about to create page title in applyAsync",!0),e.pageTitle=Pd.Utility.GeneratePageTitleFromArgs(" | ",t[0].BusinessShortNumber,t[0].Title,Res.brandingPageTitleFormatDebate),Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getDebatePageTitle : generated title put into scope var: '"+e.pageTitle+"'",!0),Pd.Utility.SetPageTitle(e.pageTitle),Pd.Utility.SetPageH1Text(Pd.Utility.GenerateH1FromArgs(" - ",t[0].BusinessShortNumber,t[0].Title))}))}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)})}})},e.getSpeechPageTitle=function(){e.$watch("spinner",function(t,n){n===!0&&t===!1&&(Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getSpeechPageTitle : spinner false"),r.getBusinessInfo(e.firstBusiness.BusinessNumber).then(function(t){return 0===t.length?void Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getSpeechPageTitle : business retrieved by ID is not existing!",!0):(Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getSpeechPageTitle : response from getBusinessInfo"),void e.$applyAsync(function(){e.pageTitle=Pd.Utility.GeneratePageTitleFromArgs(" | ",t[0].BusinessShortNumber,t[0].Title,e.transcript.SpeakerFullName,Res.brandingPageTitleFormatSpeech),Pd.Shared.LogToConsoleIfDebug("Pd.wsABController.getSpeechPageTitle : generated title put into scope var: '"+e.pageTitle+"'",!0),Pd.Utility.SetPageTitle(e.pageTitle),Pd.Utility.SetPageH1Text(Pd.Utility.GenerateH1FromArgs(" - ",t[0].BusinessShortNumber,t[0].Title,e.transcript.SpeakerFullName))}))}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)}))})},e.toggleABStructuredNavigationPanel=function(e){e.preventDefault(),PdCustomJs(".structured-nav").toggleClass("show")};var b=e.templatePath;e.$watch("spinner",function(e,t){t===!0&&e===!1&&setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(b)},200)}),e._fullScreenHandled=!1,e._fullScreenMode=!1,window.handleMessageForSpeechVideo=function(t){Pd.Shared.LogToConsoleIfDebug("wsABController.handleMessageForSpeechVideo");var n=JSON.parse(t.data),s=jQuery("html"),r=jQuery("iframe#simplex_player");"on"===n["simplex.fullscreen"]&&0==e._fullScreenMode&&(Pd.Shared.LogToConsoleIfDebug("wsABController.handleMessageForSpeechVideo => going to full screen"),s.addClass("no-scrolling"),r.addClass("pd-iframe-fullscreen-ie"),r.parents(".video").addClass("fullscreen-mode"),e._fullScreenMode=!0),"off"===n["simplex.fullscreen"]&&1==e._fullScreenMode&&(Pd.Shared.LogToConsoleIfDebug("wsABController.handleMessageForSpeechVideo => going to normal view"),s.removeClass("no-scrolling"),r.removeClass("pd-iframe-fullscreen-ie"),r.parents(".video").removeClass("fullscreen-mode"),e._fullScreenMode=!1)},e._fullScreenHandled===!1&&"Smart Data Library/Templates/wsABTranscriptSingle.html"===e.templatePath&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||(Pd.Shared.LogToConsoleIfDebug("wsABController ==> binding handleMessageForSpeechVideo"),window.addEventListener("message",handleMessageForSpeechVideo,!1),e._fullScreenHandled=!0))}]);
/*** End wsABController.min.js ***/
/*** Start wsSearchVotesController.min.js ***/
app.controller("wsSearchVotes",["$scope","$filter","controllerBUS",function($scope,$filter,controllerBUS){"use strict";function getResults(){var e="",t=angular.element("input[type='hidden'][id*='"+$scope.datasource+"']"),l=$scope.datatype?$scope.datatype.toLowerCase():"";if(t.length>0)switch(e=t.val(),l){case"breeze":dataBindWsCall(e);break;case"odata":dataBindODataCall(e)}else jQuery.ajax({url:"/Smart Data Library/Data Sources/"+$scope.datasource,async:!1,cache:!1,contentType:"text/plain"}).always(function(e){switch(l){case"breeze":dataBindWsCall(e);break;case"odata":dataBindODataCall(e)}})}function setUrlParametersInScope(e){for(var t in e)$scope["data_request_"+t]||($scope["data_request_"+t]=e[t])}function replaceValueInRequest(e){var t=Pd.Utility.GetUrlParameters();setUrlParametersInScope(t);for(var l in $scope)if(0==l.toLowerCase().indexOf("data_request_")){var o=l.split("data_request_")[1];o&&""!=o&&t&&t[o]&&(e=Pd.Utility.GloballyReplaceString(e,"{data_"+o+"}",t[o]))}for(var l in $scope)0==l.toLowerCase().indexOf("data_")&&(e=Pd.Utility.GloballyReplaceString(e,"{"+l+"}",$scope[l]));return e}function dataBindWsCall(dataContent){dataContent=replaceValueInRequest(dataContent);var datasource=eval(dataContent);if(datasource){manager.executeQuery(datasource).then(function(e){$scope.results=e.results,populateLegislature(),$scope.$apply()}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e.stack)});var containerAngular=angular.element("div[id*='"+$scope.angularContainer+"']");containerAngular.length>0&&containerAngular.show()}}function dataBindODataCall(e){e=replaceValueInRequest(e),OData.read(e,function(e){$scope.results=e.results,$scope.$apply()});var t=angular.element("div[id*='"+$scope.angularContainer+"']");t.length>0&&t.show()}function getCouncilorNameByPersonNumer(e){var t=$scope.$eval("(lstAllCouncilor | filter: {PersonNumber:"+e+"} : true)")[0];return t.LastName+" "+t.FirstName}function preSelectRequestData(){null!=$scope.data_request_BusinessNumber&&($scope.filter.BusinessNumber=$scope.data_request_BusinessNumber,$scope.performSearchAfterLoad=!0)}function loadData(){var e=breeze.Predicate.create("Language","==",'"'+$scope.data_language+'"'),t=breeze.Predicate.create("DateLeaving","gt","2007/12/3").or("DateLeaving","==",null),l=breeze.Predicate.and(e,t),o=breeze.EntityQuery.from("MemberCouncilHistory").where(l);$scope.executeWsQuery(o,populateCouncilors),preSelectRequestData()}function populateLegislature(){$scope.lstLegislature=$filter("orderBy")($scope.$eval("(results | unique:'LegislativePeriodNumber') "),"ID",!0),$scope.lstAllLegislature=$scope.lstLegislature;for(var e=0;e<$scope.lstLegislature.length;e++)$scope.lstSession=$scope.lstSession.concat($scope.lstLegislature[e].Sessions);$scope.lstAllSession=$filter("orderBy")($scope.lstSession,"ID",!0)}function populateCouncilors(e){$scope.lstCouncilor=e,$scope.lstAllCouncilor=$scope.lstCouncilor;for(var t=0;t<e.length;t++)null!=e[t].ParlGroupName&&""!=e[t].ParlGroupName&&($scope.lstParlGroup=$scope.lstParlGroup.concat(e[t]));$scope.lstAllParlGroup=$scope.lstParlGroup,$scope.lstCanton=e,$scope.lstAllCanton=$scope.lstCanton,null!=$scope.data_request_CouncilorId&&($scope.event_SelectCouncilor($scope.data_request_CouncilorId),$scope.selectedCouncilorOrDefault=getCouncilorNameByPersonNumer($scope.data_request_CouncilorId),$scope.performSearchAfterLoad=!0),performSearchIfNeeded()}function performSearchIfNeeded(){1==$scope.performSearchAfterLoad&&($scope.performSearchAfterLoad=!1,$scope.event_ClickSearch())}function filterCouncilorList(){0==$scope.filter.Councilor.id&&(""==$scope.filter.ParlGroup.abr&&0==$scope.filter.Canton.id&&($scope.lstCouncilor=$scope.lstAllCouncilor),""==$scope.filter.ParlGroup.abr&&0!=$scope.filter.Canton.id&&($scope.lstCouncilor=$scope.$eval("(lstAllCouncilor | filter: {CantonAbbreviation:"+$scope.filter.Canton.id+"})")),""!=$scope.filter.ParlGroup.abr&&0==$scope.filter.Canton.id&&($scope.lstCouncilor=$scope.$eval("(lstAllCouncilor | filter: {ParlGroupAbbreviation:'"+$scope.filter.ParlGroup.abr+"'})")),""!=$scope.filter.ParlGroup.abr&&0!=$scope.filter.Canton.id&&($scope.lstCouncilor=$scope.$eval("(lstAllCouncilor | filter: {ParlGroupAbbreviation:'"+$scope.filter.ParlGroup.abr+"'} | filter: {CantonAbbreviation:"+$scope.filter.Canton.id+"})")))}function resetFilter(){$scope.filter.Legislatur.id=0,$scope.filter.Session.id=0,$scope.filter.StartDate=null,$scope.filter.EndDate=null,$scope.filter.Councilor.id=0,$scope.filter.ParlGroup.abr="",$scope.filter.Canton.id="",$scope.filter.Decision.selectedId=$scope.getAllDecisionIds(),$scope.filter.BusinessNumber="",$scope.filter.SearchText="",$scope.lstddlStartDateDay=$scope.lstAllStartDateDay,Pd.Shared.Dropdown.HandleDropDownSelection(Res.brandingCalendarDayName,"#ddlStartDateDay"),$scope.lstddlStartDateMonth=$scope.lstAllStartDateMonth,Pd.Shared.Dropdown.HandleDropDownSelection(Res.brandingCalendarMonthName,"#ddlStartDateMonth"),$scope.lstddlStartDateYear=$scope.lstAllStartDateYear,Pd.Shared.Dropdown.HandleDropDownSelection(Res.brandingCalendarYearName,"#ddlStartDateYear"),$scope.lstddlEndDateDay=$scope.lstAllEndDateDay,Pd.Shared.Dropdown.HandleDropDownSelection(Res.brandingCalendarDayName,"#ddlEndDateDay"),$scope.lstddlEndDateMonth=$scope.lstAllEndDateMonth,Pd.Shared.Dropdown.HandleDropDownSelection(Res.brandingCalendarMonthName,"#ddlEndDateMonth"),$scope.lstddlEndDateYear=$scope.lstAllEndDateYear,Pd.Shared.Dropdown.HandleDropDownSelection(Res.brandingCalendarYearName,"#ddlEndDateYear")}$scope.init=function(e){$scope.params=e},$scope.getAllDecisionIds=function(){return["1","2","3","5","6","7"]},$scope.results=[],$scope.Res=Res,$scope.Pd=Pd,$scope.data_language=Pd.Language.GetCurrentLanguage(),$scope.performSearchAfterLoad=!1,$scope.filter={Legislatur:{id:0},Session:{id:0},StartDate:null,EndDate:null,Councilor:{id:0},ParlGroup:{abr:""},Canton:{id:""},Decision:{selectedId:$scope.getAllDecisionIds()},BusinessNumber:"",SearchText:""},$scope.lstddlStartDateDay=[],$scope.lstddlStartDateMonth=[],$scope.lstddlStartDateYear=[],$scope.lstddlEndDateDay=[],$scope.lstddlEndDateMonth=[],$scope.lstddlEndDateYear=[],$scope.lstLegislature=[],$scope.lstSession=[],$scope.lstCouncilor=[],$scope.lstParlGroup=[],$scope.lstCanton=[],$scope.lstAllStartDateDay=[],$scope.lstAllStartDateMonth=[],$scope.lstAllStartDateYear=[],$scope.lstAllEndDateDay=[],$scope.lstAllEndDateMonth=[],$scope.lstAllEndDateYear=[],$scope.lstAllLegislature=[],$scope.lstAllSession=[],$scope.lstAllCouncilor=[],$scope.lstAllParlGroup=[],$scope.lstAllCanton=[],$scope.selectedCouncilorOrDefault=Res.searchVotesDropdownAllItems,$scope.lstDecision=[{id:"1",name:Res.searchVotesDecisionYes,selected:!0},{id:"2",name:Res.searchVotesDecisionNo,selected:!0},{id:"3",name:Res.searchVotesDecisionAbstention,selected:!0},{id:"5",name:Res.searchVotesDecisionNotParticipated,selected:!0},{id:"6",name:Res.searchVotesDecisionArt57,selected:!0},{id:"7",name:Res.searchVotesDecisionPresident,selected:!0}],$scope.executeWsQuery=function(dataContent,callbackFunction){var datasource=null,currentTemplate=$scope.templatePath;"string"==typeof dataContent?(dataContent=replaceValueInRequest(dataContent),datasource=eval(dataContent)):datasource=dataContent,datasource&&manager.executeQuery(datasource).then(function(e){callbackFunction(e.results),$scope.$apply(),setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(currentTemplate)},3e3)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e.stack)})},$scope.event_SelectLegislature=function(e){$scope.filter.Legislatur.id=e,0==e?$scope.lstSession=$scope.lstAllSession:$scope.lstSession=$filter("orderBy")($scope.$eval("(lstAllSession | filter: {LegislativePeriodNumber:"+e+"})"),"ID",!0)},$scope.event_SelectSession=function(e){var t=$scope.$eval("(lstAllSession | filter: {ID:"+e+"})")[0];$scope.filter.Session.id=e,0!=e&&(null==$scope.filter.StartDate&&($scope.filter.StartDate=new Date(t.StartDate)),null==$scope.filter.EndDate&&($scope.filter.EndDate=new Date(t.EndDate)),Pd.Shared.Dropdown.HandleDropDownSelection(t.LegislativePeriodNumber,"#ddlLegislature"))},$scope.event_SelectCouncilor=function(e){$scope.$eval("(lstAllCouncilor | filter: {PersonNumber:"+e+"})")[0];$scope.filter.Councilor.id=e,0==e?($scope.lstParlGroup=$scope.lstAllParlGroup,$scope.lstCanton=$scope.lstAllCanton,filterCouncilorList()):($scope.lstParlGroup=$scope.$eval("(lstAllParlGroup | filter: {PersonNumber:"+e+"})"),$scope.lstCanton=$scope.$eval("(lstAllCanton | filter: {PersonNumber:"+e+"})"))},$scope.event_SelectParlGroup=function(e){$scope.filter.ParlGroup.abr=e,filterCouncilorList()},$scope.event_SelectCanton=function(e){$scope.$eval("(lstAllCanton | filter: {CantonAbbreviation:"+e+"})");$scope.filter.Canton.id=e,filterCouncilorList()},$scope.event_InitDecision=function(){$scope.selectedAllDecisions=!0},$scope.event_CheckDecision=function(e,t){var l=$scope.filter.Decision.selectedId.indexOf(e);t&&-1==l&&($scope.filter.Decision.selectedId=$scope.filter.Decision.selectedId.concat(e)),!t&&l>-1&&$scope.filter.Decision.selectedId.splice(l,1)},$scope.event_CheckAllDecision=function(){$scope.selectedAllDecisions=!$scope.selectedAllDecisions,angular.forEach($scope.lstDecision,function(e){e.selected=$scope.selectedAllDecisions}),$scope.selectedAllDecisions?($scope.filter.Decision.selectedId=$scope.getAllDecisionIds(),angular.element("#chkGroupDecisions").find("label").removeClass("checked"),angular.element("#chkGroupDecisions").find("label").addClass("checked"),angular.element("#chkGroupDecisions").find("label input").removeClass("checked"),angular.element("#chkGroupDecisions").find("label input").addClass("checked")):($scope.filter.Decision.selectedId=[],angular.element("#chkGroupDecisions").find("label").removeClass("checked"),angular.element("#chkGroupDecisions").find("label input").removeClass("checked"))},$scope.event_ClickSearch=function(){var e=angular.element("#dpStartDate")[0],t=angular.element(e).val(),l=angular.element("#dpEndDate")[0],o=angular.element(l).val();$scope.filter.StartDate=""!=t?moment(t,"YYYY-MM-DD HH:mm:ss").hours(0).toISOString():null,$scope.filter.EndDate=""!=o?moment(o,"YYYY-MM-DD HH:mm:ss").hours(23).minutes(59).toISOString():null,controllerBUS.setFilter($scope.filter)},$scope.event_ClickReset=function(){$scope.lstLegislature=$scope.lstAllLegislature,Pd.Shared.Dropdown.HandleDropDownSelection(0,"#ddlLegislature"),$scope.lstSession=$scope.lstAllSession,Pd.Shared.Dropdown.HandleDropDownSelection(0,"#ddlSession"),angular.element("#dpStartDate").val(""),angular.element("#dpEndDate").val(""),$scope.lstCouncilor=$scope.lstAllCouncilor,Pd.Shared.Dropdown.HandleDropDownSelection(0,"#ddlCouncilor"),$scope.lstParlGroup=$scope.lstAllParlGroup,Pd.Shared.Dropdown.HandleDropDownSelection(0,"#ddlParlGroup"),$scope.lstCanton=$scope.lstAllCanton,Pd.Shared.Dropdown.HandleDropDownSelection(0,"#ddlCanton");for(var e=0;e<$scope.lstDecision.length;e++)$scope.lstDecision[e].selected=!0;angular.element("#chkGroupDecisions").find("label").removeClass("checked"),angular.element("#chkGroupDecisions").find("label").addClass("checked"),resetFilter(),controllerBUS.broadcastFilterClear()},getResults(),loadData()}]);
/*** End wsSearchVotesController.min.js ***/
/*** Start personListEditorCtrl.min.js ***/
"use strict";angular.module("app").controller("personListEditorCtrl",["$scope",function(e){function t(){try{e.presidentSelected=angular.element("input[type='hidden'][id*='hPresidentList']").val(),e.vicePresidentSelected=angular.element("input[type='hidden'][id*='hVicePresidentList']").val(),e.commissionSelected=angular.element("input[type='hidden'][id*='hCommissionList']").val(),e.personSelected=angular.element("input[type='hidden'][id*='hPersonList']").val(),e.dsodata=window.decodeURIComponent(window.decodeURIComponent(angular.element("input[type='hidden'][id*='hDataSourceOData']").val())),e.personDataMode=angular.element("input[type='hidden'][id*='hPersonListDataMode']").val(),e.compactMobileViewValue=angular.element("input[type='hidden'][id*='hCompactMobileView']").val(),e.compactMobileViewChecked="1"==e.compactMobileViewValue,"urlBuilder"==e.personDataMode?e.showOData=!0:e.showOData=!1}catch(t){Pd.Shared.LogToConsoleIfDebug(t.stack)}}e.init=function(t){e.params=t},e.results=[],e.Res=Res,e.President=Res.personListEditTemplatePresident,e.VicePresident=Res.personListEditTemplateVicePresident,e.Commission=Res.personListEditTemplateCommission,e.Persons=Res.personListEditTemplatePersons,e.TextODataLink=Res.odataBrowserPageLinkTitle,e.CompactMobileView=Res.personListEditTemplateCompactMobileView,e.showOData=!1,e.commissionSelected="",e.presidentSelected="",e.vicePresidentSelected="",e.personSelected="",e.dsodata="",e.personDataMode="",e.compactMobileViewValue="",e.getItemIdOrEmpty=function(e){return angular.isUndefined(e)||null==e||angular.isUndefined(e.Id)||null==e.Id?"":e.Id},t(),e.toggleCompactMobileView=function(t){t.target.checked?e.compactMobileViewValue="1":e.compactMobileViewValue="0"},e.toggleOData=function(){e.showOData?(e.showOData=!1,e.datatype="breeze",e.personDataMode="manual"):(e.showOData=!0,e.datatype="odata",e.personDataMode="urlBuilder")},e.paramChange=function(t,a){if("Commission"==t&&(e.commissionSelected=a),"Person"==t&&(e.personSelected=a),"OData"==t&&(e.dsodata=a),"Commission"==t&&""!=e.personSelected||"Commission"==t&&""!=e.dsodata){var i=confirm(Res.personListEditTemplateDeletePersons);1==i?(e.showOData=!1,e.personSelected="",e.dsodata="",e.datatype="breeze",e.$applyAsinc()):e.commissionSelected=""}if("Person"==t&&""!=e.commissionSelected){var i=confirm(Res.personListEditTemplateDeleteCommission);1==i?(e.commissionSelected="",e.datatype="breeze"):(e.personSelected="",e.dsodata="",e.datatype="breeze")}if("OData"==t&&""!=e.commissionSelected){var i=confirm(Res.personListEditTemplateDeleteCommission);1==i?(e.commissionSelected="",e.datatype="odata"):(e.personSelected="",e.dsodata="",e.datatype="breeze")}}}]);
/*** End personListEditorCtrl.min.js ***/
/*** Start wsAffairAdditionalLinksController.min.js ***/
(function(n){app.controller("wsAffairAdditionalLinksController",["$scope","$sce","affairService","$q",function($scope,t,i,r){"use strict";function o(n,t){var i,r,u,f;Pd.Shared.LogToConsoleIfDebug("wsAffairAdditionalLinksController.getPressReleases",!0);$scope.pressReleaseDataState=$scope.state.loading;i=t.defer();r=i.promise;try{u={querytext:{ContentTypeId:"0x010100C568DB52D9D0A14D9B2FDCC96666E9F2007948130EC3DB064584E219954237AF39000E2549C524FE47D4A5571F07430F89FC00BF772E5580A64433AC9DE56B474B55B3002FE8187536FD4EA998B98EB171429631*",PdLanguage:Pd.Language.GetCurrentLanguage(),Freetext:'"{0}"'.format(n)},rowlimit:1,trimduplicates:!0};f=Pd.Angular.ExecuteSPSearchQuery(u);f.then(function(n){Pd.Shared.LogToConsoleIfDebug("wsAffairAdditionalLinksController.getPressReleases: promise returned, result count? "+n.length,!0);$scope.pressReleaseDataState=n.length>0?$scope.state.loaded:$scope.state.empty;i.resolve()}).fail(function(n){Pd.Shared.LogToConsoleIfDebug(n);$scope.pressReleaseDataState=$scope.state.error;i.reject()})}catch(e){Pd.Shared.LogToConsoleIfDebug(e);i.reject()}return r}function s(n,t){var i,r,u,f;Pd.Shared.LogToConsoleIfDebug("wsAffairAdditionalLinksController.getAmtlichesBulletin",!0);$scope.officialBulletinDataState=$scope.state.loading;i=t.defer();r=i.promise;try{u={querytext:{PdAffairId:n,PdLanguage:Pd.Language.GetCurrentLanguage(),ContentSource:'"External WS SearchSubject"'},rowlimit:1};f=Pd.Angular.ExecuteSPSearchQuery(u);f.then(function(n){Pd.Shared.LogToConsoleIfDebug("wsAffairAdditionalLinksController.getAmtlichesBulletin: promise returned, result count? "+n.length,!0);$scope.officialBulletinDataState=n.length>0?$scope.state.loaded:$scope.state.empty;i.resolve()}).fail(function(n){Pd.Shared.LogToConsoleIfDebug(n);$scope.officialBulletinDataState=$scope.state.error;i.reject()})}catch(e){Pd.Shared.LogToConsoleIfDebug(e);i.reject()}return r}function h(n,t){var i,r,u;Pd.Shared.LogToConsoleIfDebug("wsAffairAdditionalLinksController.getVotes",!0);$scope.voteDataState=$scope.state.loading;i=t.defer();r=i.promise;try{u=breeze.EntityQuery.from("Vote").where("Language","==",Pd.Language.GetCurrentLanguage()).where("BusinessNumber","==",n).take(1).inlineCount(!0).using(manager);u.execute().then(function(n){Pd.Shared.LogToConsoleIfDebug("wsAffairAdditionalLinksController.getVotes: promise returned, result count? "+n.inlineCount,!0);$scope.voteDataState=n.inlineCount>0?$scope.state.loaded:$scope.state.empty;i.resolve()}).fail(function(n){$scope.voteDataState=$scope.state.error;Pd.Shared.LogToConsoleIfDebug(n);i.reject()})}catch(f){Pd.Shared.LogToConsoleIfDebug(f);i.reject()}return r}function c(){Pd.Shared.LogToConsoleIfDebug("wsAffairAdditionalLinksController.getResults",!0);$scope.businessDataState=$scope.state.loading;i.getBusiness($scope.affairId,$scope.data_language,$scope.callbackSync).then(function(n){$scope.$applyAsync(function(){if($scope.businesses=n,$scope.results=n,n.length>0){$scope.business=n[0];$scope.businessType=n[0].BusinessType;$scope.additionalLinkDataState=$scope.state.loading;var t=[],i=n[0].ID,u=n[0].BusinessShortNumber;t.push(s(i,r));t.push(o(u,r));t.push(h(i,r));r.all(t).then(function(){Pd.Shared.LogToConsoleIfDebug("wsAffairAdditionalLinksController.getResults: getAmtlichesBulletin/getPressReleases/getVotes promises resolved",!0);$scope.additionalLinkDataState=$scope.pressReleaseDataState===$scope.state.empty&&$scope.officialBulletinDataState===$scope.state.empty&&$scope.voteDataState===$scope.state.empty&&!$scope.hasLinks&&Pd.Utility.StringIsNullOrEmpty($scope.business.InitialSituation)?$scope.state.empty:$scope.state.loaded},function(){$scope.additionalLinkDataState=$scope.state.error})}})}).fail(function(n){Pd.Shared.LogToConsoleIfDebug(n);$scope.businessDataState=$scope.state.error});var n=angular.element("div[id*='"+$scope.angularContainer+"']");n.length>0&&n.show()}function l(n){$scope.$applyAsync(function(){switch(n){case"ExtendedBusinessRoles":$scope.loadedExtendedBusinessRoles=!0;e();break;case"Objectives":$scope.loadedObjectives=!0;e();break;case"Bills":$scope.loadedBills=!0;e();break;case"BusinessRoles":$scope.loadedBusinessRoles=!0;e()}$scope.hasLinks===!1&&i.hasLinks===!0&&($scope.hasLinks=i.hasLinks,$scope.links=i.billLinks,Pd.Shared.LogToConsoleIfDebug("wsAffairAdditionalLinksController.callbackSync: updating hasLinks from false to true",!0))})}function e(){$scope.loadedBusinessRoles===!0&&$scope.loadedExtendedBusinessRoles===!0&&$scope.businessType!==1&&($scope.businessDataState=$scope.state.loaded);$scope.loadedBusinessRoles===!0&&$scope.loadedExtendedBusinessRoles===!0&&$scope.businessType===1&&$scope.loadedObjectives===!0&&$scope.loadedBills===!0&&($scope.businessDataState=$scope.state.loaded)}if($scope.init=function(n){$scope.params=n},$scope.results=[],$scope.links=[],$scope.Res=Res,$scope.Pd=Pd,$scope.hasLinks=!1,$scope.businessType=0,$scope.callbackSync=l,$scope.data_language=Pd.Language.GetCurrentLanguage(),$scope.state={ready:0,loading:1,loaded:2,empty:3,error:4},$scope.businesses=[],$scope.business=null,$scope.businessDataState=$scope.state.ready,$scope.pressReleaseDataState=$scope.state.ready,$scope.officialBulletinDataState=$scope.state.ready,$scope.voteDataState=$scope.state.ready,typeof Pd.Utility.PageUrlFormats.ParlNet=="undefined"&&(Pd.Utility.PageUrlFormats.ParlNet={},Pd.Utility.PageUrlFormats.ParlNet.Business="https://parlnet.parlament.ch/affairs/{0}"),typeof Res.brandingAffairPageParlNetLink=="undefined"||Rex.brandingAffairPageParlNetLinkTitle=="undefined"){var u,f;switch($scope.data_language.toUpperCase()){default:case"DE":u="ParlNet";f="Unterlagen fÃ¼r Ratsmitglieder";break;case"FR":u="ParlNet";f="Documents pour les membres du conseil";break;case"IT":u="ParlNet";f="Documenti per i membri del consiglio";break;case"RM":u="ParlNet";f="Unterlagen fÃ¼r Ratsmitglieder";break;case"EN":u="ParlNet";f="Documents for council members"}Res.brandingAffairPageParlNetLink=u;Res.brandingAffairPageParlNetLinkTitle=f}$scope.trustSrc=function(n){return t.trustAsResourceUrl(n)};$scope.redirectToParlNet=function(n){var i=function(n){return Pd.Utility.PageUrlFormats.ParlNet.Business.format(n)},t,r;typeof n!="undefined"&&n.preventDefault();t=i($scope.business.ID);r=window.open(t,"_blank")};$scope.redirectToPrintServer=function(t){var r=function(n,t,i){return Pd.Print.GetPrintingConfiguration("Business","Page").Url.format(n,t,i)},u=function(){var t=n.makeArray(n("div#AffairSummary .accordion-group a.btn").map(function(){return n(this).hasClass("active")}));return t.some(function(n){return n===!0})},i,f;typeof t!="undefined"&&t.preventDefault();i=r($scope.business.ID,$scope.data_language,u());f=window.open(i,"_blank")};$scope.getSPSearchQueryResults=function(n,t){var i=Pd.Angular.ExecuteSPSearchQuery(n);i.then(function(n){$scope[t]=n},function(n){Pd.Shared.LogToConsoleIfDebug(n)})};$scope.executeWsQuery=function(dataContent,scopeVar){dataContent=replaceValueInRequest(dataContent);var currentTemplate=$scope.templatePath,datasource=eval(dataContent);datasource&&manager.executeQuery(datasource).then(function(n){$scope[scopeVar]=n.results;setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(currentTemplate)},3e3)}).fail(function(n){Pd.Shared.LogToConsoleIfDebug(n)})};c()}])})(PdCustomJs);
/*** End wsAffairAdditionalLinksController.min.js ***/
/*** Start wsVotesDetailsController.min.js ***/
app.controller("wsVotesDetailsController",["$scope","$timeout","$q","controllerBUS",function($scope,$timeout,$q,controllerBUS){"use strict";function clearSearchFilter(){$scope.filter&&($scope.filter.Legislatur.id=0,$scope.filter.Session.id=0,$scope.filter.StartDate=null,$scope.filter.EndDate=null,$scope.filter.BusinessNumber="",$scope.filter.SearchText="",$scope.filter.Councilor=0,$scope.filter.ParlGroup.abr=null,$scope.filter.Canton.id=0,$scope.filter.Decision.selectedId=null)}function removeBusinessesByIds(e,s){for(var o=s.length-1;o>=0;o--)e.splice(s[o],1)}function shouldRequestFilteredBusinesses(){return 0!=$scope.filter.Councilor.id||""!=$scope.filter.ParlGroup.abr||0!=$scope.filter.Canton.id||$scope.filter.Decision.selectedId.length>0&&$scope.filter.Decision.selectedId.length<6?!0:!1}function initializeBusinessPaging(){$scope.businessAll.length>0&&($scope.businessAll.setBusinessPaging("BusinessNumber","BusinessTitle","BusinessShortNumber","VoteEnd","VoteEndWithTimezone","MeaningYes","MeaningNo","BillTitle","Subject","ID"),$scope.businessAll.setVotesPaging($scope.businesses[$scope.selectedBusiness].id,"ID","BusinessNumber","BusinessShortNumber","VoteEnd","VoteEndWithTimezone","MeaningYes","MeaningNo","BillTitle","Subject"),$scope.businessAll.getAllVoteIds("ID"))}function getBusinessNumberFilter(){var e=0;if(""!=$scope.filter.BusinessNumber)if($scope.filter.BusinessNumber.indexOf(".")>-1)try{e=parseInt(Pd.Utility.ConvertAffairShortNumberToId($scope.filter.BusinessNumber))}catch(s){Pd.Shared.LogToConsoleIfDebug(s.message),Pd.Shared.LogToConsoleIfDebug(s.stack)}else e=parseInt($scope.filter.BusinessNumber)>0?parseInt($scope.filter.BusinessNumber):0;return e}function getBusinesses(){$scope.needsVoteIds=!1;var e=getBusinessNumberFilter(),s=[{name:"Language",operator:{name:"eq",value:Pd.Language.GetCurrentLanguage()}},{name:"IdLegislativePeriod",operator:{name:"==",value:$scope.filter.Legislatur.id>0?$scope.filter.Legislatur.id:null}},{name:"IdSession",operator:{name:"==",value:$scope.filter.Session.id>0?$scope.filter.Session.id:null}},{name:"VoteEnd",operator:{name:">=",value:$scope.filter.StartDate}},{name:"VoteEnd",operator:{name:"<=",value:$scope.filter.EndDate}},{name:"BusinessNumber",operator:{name:"==",value:e}},{name:"BusinessTitle",operator:{name:"contains",value:""!=$scope.filter.SearchText?$scope.filter.SearchText:null}}];(""!=e||""!=$scope.filter.SearchText)&&($scope.needsVoteIds=!0);var o=[];angular.forEach(s,function(e,s){null!=e.operator.value&&0!=e.operator.value&&o.push(breeze.Predicate.create(e.name,e.operator.name,e.operator.value))});var t=breeze.Predicate.and(o),n=breeze.EntityQuery.from("Vote").where(t).using(manager).orderBy("BusinessNumber desc").select("ID, RegistrationNumber, BusinessNumber, BusinessTitle, BillTitle, Subject, BusinessShortNumber, VoteEnd, VoteEndWithTimezone, MeaningYes, MeaningNo");n.execute().then(function(e){$scope.businessAll=[],$scope.businessAll=Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(e.results,"Vote"),$scope.businessAll.length>0&&$scope.businessAll.getAllVoteIds("ID"),$scope.selectedBusiness=0,$scope.selectedVote=0;var s=shouldRequestFilteredBusinesses();if(0==s)return $scope.uniqueBusinesses=$scope.businessAll,$scope.uniqueBusinesses=$scope.$eval("uniqueBusinesses | unique:'BusinessNumber'"),void(null!=$scope.businessAll&&$scope.businessAll.length>0?(initializeBusinessPaging(),$scope.selectedBusiness=0,$scope.selectedVote=0,$scope.businessAll.setVotesPaging($scope.businesses[$scope.selectedBusiness].id,"ID","BusinessNumber","BusinessShortNumber","VoteEnd","VoteEndWithTimezone","MeaningYes","MeaningNo","BillTitle","Subject"),getData(null)):($scope.noResults=!0,$scope.showLoading=!1,$scope.showContent=!0,setTimeout(function(){$scope.$apply(function(){$scope.spinner=!1,$scope.buttonDisabled=!1})},300)));var o=8;if($scope.votesAll.length>o&&1==$scope.needsVoteIds){for(var t=[],n=0,a=[];n<=$scope.votesAll.length-1;){for(var r=0;o>r;r++)n<=$scope.votesAll.length-1&&a.push($scope.votesAll[n]),n++;t.push(getFilteredBusinesses(a)),a=[]}$q.all(t).then(function(e){var s=[].concat.apply([],e);$scope.filteredBusinesses=[],$scope.filteredBusinesses=s,$scope.uniqueBusinesses=$scope.$eval("filteredBusinesses | unique:'BusinessNumber'"),$scope.businessAll.filterBusinessesAgainstData($scope.filteredBusinesses),$scope.businessesToRemove.length>0&&removeBusinessesByIds($scope.businessAll,$scope.businessesToRemove),initializeBusinessPaging(),$scope.selectedBusiness=0,$scope.selectedVote=0,$scope.businessAll.setVotesPaging($scope.businesses[$scope.selectedBusiness].id,"ID","BusinessNumber","BusinessShortNumber","VoteEnd","VoteEndWithTimezone","MeaningYes","MeaningNo","BillTitle","Subject"),getData(null)})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e.message),queryFailed(e,"getFilteredBusinesses",!0)})}else getFilteredBusinesses($scope.votesAll).then(function(e){$scope.uniqueBusinesses=e,$scope.uniqueBusinesses=$scope.$eval("uniqueBusinesses | unique:'BusinessNumber'"),$scope.businessAll.filterBusinessesAgainstData(e),$scope.businessesToRemove.length>0&&removeBusinessesByIds($scope.businessAll,$scope.businessesToRemove),initializeBusinessPaging(),null!=e&&e.length>0?($scope.selectedBusiness=0,$scope.selectedVote=0,$scope.businessAll.setVotesPaging($scope.businesses[$scope.selectedBusiness].id,"ID","BusinessNumber","BusinessShortNumber","VoteEnd","VoteEndWithTimezone","MeaningYes","MeaningNo","BillTitle","Subject"),getData(null)):($scope.noResults=!0,$scope.showLoading=!1,$scope.showContent=!0,setTimeout(function(){$scope.$apply(function(){$scope.spinner=!1,$scope.buttonDisabled=!1})},300))})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e.message),queryFailed(e,"getFilteredBusinesses",!0)})})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e.message),queryFailed(e,"getBusinesses",!0)})}function getFilteredBusinesses(e){var s=$q.defer(),o=function(){var o=$timeout(function(){s.resolve(),Pd.Shared.LogToConsoleIfDebug("getFilteredBusinesses Timed out")},$scope.timeoutAfter),t=[{name:"Language",operator:{name:"eq",value:Pd.Language.GetCurrentLanguage()}},{name:"IdLegislativePeriod",operator:{name:"==",value:$scope.filter.Legislatur.id}},{name:"IdSession",operator:{name:"==",value:$scope.filter.Session.id}},{name:"VoteEnd",operator:{name:">=",value:$scope.filter.StartDate}},{name:"VoteEnd",operator:{name:"<=",value:$scope.filter.EndDate}},{name:"PersonNumber",operator:{name:"==",value:$scope.filter.Councilor.id}},{name:"ParlGroupCode",operator:{name:breeze.FilterQueryOp.Equals,value:$scope.filter.ParlGroup.abr}},{name:"Canton",operator:{name:breeze.FilterQueryOp.Equals,value:$scope.filter.Canton.id}},{name:"Decision",operator:{name:"in",value:$scope.filter.Decision.selectedId.length>0?$scope.filter.Decision.selectedId:[0]}}];$scope.needsVoteIds&&((null==e||0==e.length)&&e.push(-9999),t.push({name:"IdVote",operator:{name:"in",value:e}}));var n=[];angular.forEach(t,function(e,s){null!=e.operator.value&&0!=e.operator.value&&n.push(breeze.Predicate.create(e.name,e.operator.name,e.operator.value))});var a=breeze.Predicate.and(n),r=breeze.EntityQuery.from("Voting").where(a).select("BusinessNumber, IdVote").orderBy("BusinessNumber desc").using(manager);r.execute().then(function(e){s.resolve(Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(e.results,"Voting")),$timeout.cancel(o)})["catch"](function(e){queryFailed(e,"getFilteredBusinesses",!0),s.reject(e)})};return requestQueue.add(o,this),s.promise}function getData(e){var s=[];null==e&&$scope.votes.length>0?angular.forEach($scope.votes,function(e,o){s.push(e.id)}):s.push(e);var o=8;if(s.length>o&&1==$scope.needsVoteIds){for(var t=[],n=[],a=0,r=[];a<=s.length-1;){for(var i=0;o>i;i++)a<=s.length-1&&r.push(s[a]),a++;t.push(getQueryTotals(r)),n.push(getQueryResult(r)),r=[]}$q.all(t).then(function(e){var s=[].concat.apply([],e);$scope.queryTotals=[],$scope.queryTotals=s,$scope.totalByFilterAll={},$scope.totalByFilterAll={Yes:"undefined"!=typeof $scope.queryTotals?$scope.queryTotals.sumVotes(1):0,No:"undefined"!=typeof $scope.queryTotals?$scope.queryTotals.sumVotes(2):0,Abstention:"undefined"!=typeof $scope.queryTotals?$scope.queryTotals.sumVotes(3):0,NotParticipated:"undefined"!=typeof $scope.queryTotals?$scope.queryTotals.sumVotes(5):0,DecisionArt:"undefined"!=typeof $scope.queryTotals?$scope.queryTotals.sumVotes(6):0,DecisionPresident:"undefined"!=typeof $scope.queryTotals?$scope.queryTotals.sumVotes(7):0},$q.all(n).then(function(e){var s=[].concat.apply([],e);$scope.affairs=[],$scope.affairs=s,$scope.totalByFilter={},$scope.totalByFilter={Yes:"undefined"!=typeof $scope.affairs?$scope.affairs.sumVotes(1):0,No:"undefined"!=typeof $scope.affairs?$scope.affairs.sumVotes(2):0,Abstention:"undefined"!=typeof $scope.affairs?$scope.affairs.sumVotes(3):0,NotParticipated:"undefined"!=typeof $scope.affairs?$scope.affairs.sumVotes(5):0,DecisionArt:"undefined"!=typeof $scope.affairs?$scope.affairs.sumVotes(6):0,DecisionPresident:"undefined"!=typeof $scope.affairs?$scope.affairs.sumVotes(7):0},("undefined"==typeof $scope.affairs||0==$scope.affairs.length)&&($scope.noResults=!0),$scope.showLoading=!1,$scope.showContent=!0,setTimeout(function(){$scope.$apply(function(){$scope.spinner=!1,$scope.buttonDisabled=!1})},300)})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e.message),queryFailed(e,"getData",!0)})})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e.message),queryFailed(e,"getData",!0)})}else getQueryTotals(s).then(function(e){$scope.queryTotals=[],$scope.queryTotals=e,$scope.totalByFilterAll={},$scope.totalByFilterAll={Yes:"undefined"!=typeof $scope.queryTotals?$scope.queryTotals.sumVotes(1):0,No:"undefined"!=typeof $scope.queryTotals?$scope.queryTotals.sumVotes(2):0,Abstention:"undefined"!=typeof $scope.queryTotals?$scope.queryTotals.sumVotes(3):0,NotParticipated:"undefined"!=typeof $scope.queryTotals?$scope.queryTotals.sumVotes(5):0,DecisionArt:"undefined"!=typeof $scope.queryTotals?$scope.queryTotals.sumVotes(6):0,DecisionPresident:"undefined"!=typeof $scope.queryTotals?$scope.queryTotals.sumVotes(7):0},getQueryResult(s).then(function(e){$scope.affairs=[],$scope.affairs=e,$scope.totalByFilter={},$scope.totalByFilter={Yes:"undefined"!=typeof $scope.affairs?$scope.affairs.sumVotes(1):0,No:"undefined"!=typeof $scope.affairs?$scope.affairs.sumVotes(2):0,Abstention:"undefined"!=typeof $scope.affairs?$scope.affairs.sumVotes(3):0,NotParticipated:"undefined"!=typeof $scope.affairs?$scope.affairs.sumVotes(5):0,DecisionArt:"undefined"!=typeof $scope.affairs?$scope.affairs.sumVotes(6):0,DecisionPresident:"undefined"!=typeof $scope.affairs?$scope.affairs.sumVotes(7):0},("undefined"==typeof $scope.affairs||0==$scope.affairs.length)&&($scope.noResults=!0),$scope.showLoading=!1,$scope.showContent=!0,setTimeout(function(){$scope.$apply(function(){$scope.spinner=!1,$scope.buttonDisabled=!1})},300)})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e.message),queryFailed(e,"getData",!0)})})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e.message),queryFailed(e,"getData",!0)})}function getPersons(e){var s=$q.defer(),o=function(){var o=$timeout(function(){s.resolve(),Pd.Shared.LogToConsoleIfDebug("getPersons Timed out")},$scope.timeoutAfter),t=[{name:"Language",operator:{name:"eq",value:Pd.Language.GetCurrentLanguage()}},{name:"IdLegislativePeriod",operator:{name:"==",value:$scope.filter.Legislatur.id>0?$scope.filter.Legislatur.id:null}},{name:"IdSession",operator:{name:"==",value:$scope.filter.Session.id>0?$scope.filter.Session.id:null}},{name:"PersonNumber",operator:{name:"==",value:$scope.filter.Councilor.id}},{name:"ParlGroupCode",operator:{name:breeze.FilterQueryOp.Equals,value:$scope.filter.ParlGroup.abr}},{name:"VoteEnd",operator:{name:">=",value:$scope.filter.StartDate}},{name:"VoteEnd",operator:{name:"<=",value:$scope.filter.EndDate}},{name:"Canton",operator:{name:breeze.FilterQueryOp.Equals,value:$scope.filter.Canton.id}},{name:"Decision",operator:{name:"in",value:$scope.filter.Decision.selectedId.length>0?$scope.filter.Decision.selectedId:[0]}},{name:"IdVote",operator:{name:"in",value:e}}],n=[];angular.forEach(t,function(e,s){null!=e.operator.value&&0!=e.operator.value&&n.push(breeze.Predicate.create(e.name,e.operator.name,e.operator.value))});var a=breeze.Predicate.and(n),r=breeze.EntityQuery.from("Voting").where(a).using(manager).orderBy("LastName, FirstName").select("PersonNumber");r.execute().then(function(e){s.resolve(Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(e.results,"Voting")),$timeout.cancel(o)})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e),queryFailed(e,"getPersons",!0),s.reject(e)})};return requestQueue.add(o,this),s.promise}function getPersonData(e){var s=$q.defer(),o=function(){var o=$timeout(function(){s.resolve(),Pd.Shared.LogToConsoleIfDebug("getPersonData Timed out")},$scope.timeoutAfter),t=[{name:"Language",operator:{name:"eq",value:Pd.Language.GetCurrentLanguage()}},{name:"PersonNumber",operator:{name:"eq",value:e}},,{name:"BusinessTitle",operator:{name:"contains",value:""!=$scope.filter.SearchText?$scope.filter.SearchText:null}}],n=[];angular.forEach(t,function(e,s){null!=e.operator.value&&0!=e.operator.value&&n.push(breeze.Predicate.create(e.name,e.operator.name,e.operator.value))});var a=breeze.Predicate.and(n),r=breeze.EntityQuery.from("Voting").where(a).expand("MembersCouncil").using(manager).take(1).select("FirstName, LastName, Canton, CantonName, ParlGroupName, ParlGroupNameAbbreviation, MembersCouncil.PersonIdCode").orderBy("BusinessNumber desc");r.execute().then(function(e){s.resolve(Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(e.results,"Voting")),$timeout.cancel(o)})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e),queryFailed(e,"getPersonData",!0),s.reject(e)})};return requestQueue.add(o,this),s.promise}function getQueryTotals(e){var s=$q.defer(),o=function(){("undefined"==typeof e||null==e||e==[])&&(queryFailed(null,"getQueryTotals",!1),s.reject("getQueryTotals:: voteIds are null or empty, aborting the query"));var o=[{name:"Language",operator:{name:"eq",value:Pd.Language.GetCurrentLanguage()}},{name:"IdLegislativePeriod",operator:{name:"==",value:$scope.filter.Legislatur.id}},{name:"IdSession",operator:{name:"==",value:$scope.filter.Session.id}},{name:"VoteEnd",operator:{name:">=",value:$scope.filter.StartDate}},{name:"VoteEnd",operator:{name:"<=",value:$scope.filter.EndDate}},{name:"IdVote",operator:{name:"in",value:e}}],t=[];angular.forEach(o,function(e,s){null!=e.operator.value&&0!=e.operator.value&&t.push(breeze.Predicate.create(e.name,e.operator.name,e.operator.value))});var n=breeze.Predicate.and(t),a=breeze.EntityQuery.from("Voting").where(n).select("Decision, IdVote").using(manager);a.execute().then(function(e){s.resolve(Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(e.results,"Voting"))})["catch"](function(e){queryFailed(e,"getQueryTotals",!0),s.reject(e)})};return requestQueue.add(o,this),s.promise}function getQueryResult(e){var s=$q.defer(),o=function(){var o=$timeout(function(){s.resolve(),Pd.Shared.LogToConsoleIfDebug("getQueryResult Timed out")},$scope.timeoutAfter);if("undefined"==typeof e||null==typeof e||e==[])return queryFailed(null,"getQueryResult",!1),s.reject("getQueryResult:: voteIds are null or empty, aborting the query"),s.promise;var t=0;if(""!=$scope.filter.BusinessNumber)if($scope.filter.BusinessNumber.indexOf(".")>-1)try{t=parseInt(Pd.Utility.ConvertAffairShortNumberToId($scope.filter.BusinessNumber))}catch(n){Pd.Shared.LogToConsoleIfDebug(n.message),Pd.Shared.LogToConsoleIfDebug(n.stack)}else t=parseInt($scope.filter.BusinessNumber)>0?parseInt($scope.filter.BusinessNumber):0;var a=[{name:"Language",operator:{name:"eq",value:Pd.Language.GetCurrentLanguage()}},{name:"IdLegislativePeriod",operator:{name:"==",value:$scope.filter.Legislatur.id}},{name:"IdSession",operator:{name:"==",value:$scope.filter.Session.id}},{name:"VoteEnd",operator:{name:">=",value:$scope.filter.StartDate}},{name:"VoteEnd",operator:{name:"<=",value:$scope.filter.EndDate}},{name:"PersonNumber",operator:{name:"==",value:$scope.filter.Councilor.id}},{name:"ParlGroupCode",operator:{name:breeze.FilterQueryOp.Equals,value:$scope.filter.ParlGroup.abr}},{name:"Canton",operator:{name:breeze.FilterQueryOp.Equals,value:$scope.filter.Canton.id}},{name:"Decision",operator:{name:"in",value:$scope.filter.Decision.selectedId.length>0?$scope.filter.Decision.selectedId:[0]}},{name:"IdVote",operator:{name:"in",value:e}}],r=[];angular.forEach(a,function(e,s){null!=e.operator.value&&0!=e.operator.value&&r.push(breeze.Predicate.create(e.name,e.operator.name,e.operator.value))});var i=breeze.Predicate.and(r),u=breeze.EntityQuery.from("Voting").where(i).orderBy("LastName, FirstName").using(manager);u.execute().then(function(e){$scope.needsVoteIds=!0,s.resolve(Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(e.results,"Voting")),$timeout.cancel(o)})["catch"](function(e){queryFailed(e,"getQueryResult",!0),s.reject(e)})};return requestQueue.add(o,this),s.promise}function queryFailed(e,s,o){Pd.Shared.LogToConsoleIfDebug("query execution in {0} function failed: {1}".format(s,"undefined"!=typeof e&&"undefined"!=typeof e.message?e.message:"N/A")),o?$scope.queryTimedOut=!0:$scope.noResults=!0,$scope.showLoading=!1,$scope.showContent=!0,setTimeout(function(){$scope.$apply(function(){$scope.spinner=!1,$scope.buttonDisabled=!1})},300)}function getAllCouncilorBusinesses(){var e=[];1==$scope.needsVoteIds&&$scope.votesAll.length>0&&angular.forEach($scope.votesAll,function(s,o){e.push(s)});var s=8;if(e.length>s&&1==$scope.needsVoteIds){for(var o=[],t=0,n=[];t<=e.length-1;){for(var a=0;s>a;a++)t<=e.length-1&&n.push(e[t]),t++;o.push(getCouncilorBusiness(n)),n=[]}$q.all(o).then(function(e){var s=[].concat.apply([],e);return $scope.councilorBusinesses=[],$scope.councilorBusinesses=s,0==$scope.councilorBusinesses.length?void($scope.noResults=!0):($scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.showLoading=!1,$scope.showContent=!0,setTimeout(function(){$scope.$apply(function(){$scope.spinner=!1,$scope.buttonDisabled=!1})},300),void setTimeout(function(){Pd.Shared.RadioButtonSelectUnselect()},3e3))})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e.message),queryFailed(e,"setPersonsPaging",!0)})}else getCouncilorBusiness(e).then(function(e){return $scope.councilorBusinesses=[],$scope.councilorBusinesses=e,0==$scope.councilorBusinesses.length?void($scope.noResults=!0):($scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.buttonDisabled=!1,void setTimeout(function(){Pd.Shared.RadioButtonSelectUnselect()},3e3))})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e.message),queryFailed(e,"getData",!0)})}function getCouncilorBusiness(e){var s=$q.defer(),o=function(){var o=$timeout(function(){s.resolve(),Pd.Shared.LogToConsoleIfDebug("getCouncilorBusiness Timed out")},$scope.timeoutAfter),t=[];t=e;var n=[{name:"Language",operator:{name:"eq",value:Pd.Language.GetCurrentLanguage()}},{name:"IdLegislativePeriod",operator:{name:"==",value:$scope.filter.Legislatur.id}},{name:"IdSession",operator:{name:"==",value:$scope.filter.Session.id}},{name:"VoteEnd",operator:{name:">=",value:$scope.filter.StartDate}},{name:"VoteEnd",operator:{name:"<=",value:$scope.filter.EndDate}},{name:"PersonNumber",operator:{name:"==",value:$scope.persons[$scope.selectedPerson].id>0?$scope.persons[$scope.selectedPerson].id:0}},{name:"ParlGroupCode",operator:{name:breeze.FilterQueryOp.Equals,value:$scope.filter.ParlGroup.abr}},{name:"Canton",operator:{name:breeze.FilterQueryOp.Equals,value:$scope.filter.Canton.id}},{name:"Decision",operator:{name:"in",value:$scope.filter.Decision.selectedId.length>0?$scope.filter.Decision.selectedId:[0]}},{name:"IdVote",operator:{name:"in",value:t}}],a=[];angular.forEach(n,function(e,s){null!=e.operator.value&&0!=e.operator.value&&a.push(breeze.Predicate.create(e.name,e.operator.name,e.operator.value))});var r=breeze.Predicate.and(a),i=breeze.EntityQuery.from("Voting").where(r).using(manager).orderBy("VoteEnd desc");i.execute().then(function(e){s.resolve(Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(e.results,"Voting")),$timeout.cancel(o)})["catch"](function(e){queryFailed(e,"getCouncilorBusiness",!0),s.reject(e)})};return requestQueue.add(o,this),s.promise}function getBusinessExportAllData(e){var s=$q.defer(),o=function(){var o=[{name:"Language",operator:{name:"eq",value:Pd.Language.GetCurrentLanguage()}},{name:"IdLegislativePeriod",operator:{name:"==",value:$scope.filter.Legislatur.id}},{name:"IdSession",operator:{name:"==",value:$scope.filter.Session.id}},{name:"VoteEnd",operator:{name:">=",value:$scope.filter.StartDate}},{name:"VoteEnd",operator:{name:"<=",value:$scope.filter.EndDate}},{name:"PersonNumber",operator:{name:"==",value:$scope.filter.Councilor.id}},{name:"ParlGroupCode",operator:{name:breeze.FilterQueryOp.Equals,value:$scope.filter.ParlGroup.abr}},{name:"Canton",operator:{name:breeze.FilterQueryOp.Equals,value:$scope.filter.Canton.id}},{name:"Decision",operator:{name:"in",value:$scope.filter.Decision.selectedId.length>0?$scope.filter.Decision.selectedId:[0]}},{name:"IdVote",operator:{name:"in",value:e}}],t=[];angular.forEach(o,function(e,s){null!=e.operator.value&&0!=e.operator.value&&t.push(breeze.Predicate.create(e.name,e.operator.name,e.operator.value))});var n=breeze.Predicate.and(t),a=breeze.EntityQuery.from("Voting").where(n).using(manager).orderBy("VoteEnd desc");a.execute().then(function(e){s.resolve(Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(e.results,"Voting"))})["catch"](function(e){queryFailed(e,"getBusinessExportAllData",!0),s.reject(e)})};return requestQueue.add(o,this),s.promise}function getCouncilorExportAllDtata(e,s){var o=$q.defer(),t=function(){var t=[{name:"Language",operator:{name:"eq",value:Pd.Language.GetCurrentLanguage()}},{name:"IdLegislativePeriod",operator:{name:"==",value:$scope.filter.Legislatur.id}},{name:"IdSession",operator:{name:"==",value:$scope.filter.Session.id}},{name:"VoteEnd",operator:{name:">=",value:$scope.filter.StartDate}},{name:"VoteEnd",operator:{name:"<=",value:$scope.filter.EndDate}},{name:"PersonNumber",operator:{name:"in",value:e}},{name:"ParlGroupCode",operator:{name:breeze.FilterQueryOp.Equals,value:$scope.filter.ParlGroup.abr}},{name:"Canton",operator:{name:breeze.FilterQueryOp.Equals,value:$scope.filter.Canton.id}},{name:"Decision",operator:{name:"in",value:$scope.filter.Decision.selectedId.length>0?$scope.filter.Decision.selectedId:[0]}},{name:"IdVote",operator:{name:"==",value:s}}],n=[];angular.forEach(t,function(e,s){null!=e.operator.value&&0!=e.operator.value&&n.push(breeze.Predicate.create(e.name,e.operator.name,e.operator.value))});var a=breeze.Predicate.and(n),r=breeze.EntityQuery.from("Voting").where(a).using(manager).orderBy("LastName, FirstName, VoteEnd desc");r.execute().then(function(e){o.resolve(Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData(e.results,"Voting"))})["catch"](function(e){queryFailed(e,"getCouncilorExportAllDtata",!0),o.reject(e)})};return requestQueue.add(t,this),o.promise}function generateBusinessCSVExportSelection(e){try{var s=["AffairShortId","AffairTitle","VoteRegistrationNumber","VoteDate","VoteMeaningYes","VoteMeaningNo","DivisionText","VoteSubmissionText","VoteTotalYes","VoteTotalNo","VoteTotalAbstain","VoteTotalNotParticipated","VoteTotalExcused","VoteTotalPresident","VoteFilteredYes","VoteFilteredNo","VoteFilteredAbstain","VoteFilteredNotParticipated","VoteFilteredExcused","VoteFilteredPresident","CouncillorId","CouncillorName","CouncillorYes","CouncillorNo","CouncillorAbstain","CouncillorNotParticipated","CouncillorExcused","CouncillorPresident"],o=[];angular.forEach(e,function(e,s){var t=[];switch(t.push(e.BusinessNumber),t.push(e.BusinessTitle),t.push(e.RegistrationNumber),t.push(e.VoteEnd),t.push(e.MeaningYes),t.push(e.MeaningNo),t.push(e.DecisionText),t.push(e.Subject),t.push($scope.totalByFilterAll.Yes),t.push($scope.totalByFilterAll.No),t.push($scope.totalByFilterAll.Abstention),t.push($scope.totalByFilterAll.NotParticipated),t.push($scope.totalByFilterAll.DecisionArt),t.push($scope.totalByFilterAll.DecisionPresident),t.push($scope.totalByFilter.Yes),t.push($scope.totalByFilter.No),t.push($scope.totalByFilter.Abstention),t.push($scope.totalByFilter.NotParticipated),t.push($scope.totalByFilter.DecisionArt),t.push($scope.totalByFilter.DecisionPresident),t.push(e.PersonNumber),t.push(e.LastName+" "+e.FirstName),e.Decision){case 1:t.push(1),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0);break;case 2:t.push(0),t.push(1),t.push(0),t.push(0),t.push(0),t.push(0);break;case 3:t.push(0),t.push(0),t.push(1),t.push(0),t.push(0),t.push(0);break;case 5:t.push(0),t.push(0),t.push(0),t.push(1),t.push(0),t.push(0);break;case 6:t.push(0),t.push(0),t.push(0),t.push(0),t.push(1),t.push(0);break;case 7:t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(1)}o.push(t)});var t="abdb-"+e[0].Language.toLowerCase()+"-affairs-"+e[0].BusinessNumber+"-"+$scope.filter.Legislatur.id.toString()+"-"+$scope.filter.Session.id+".csv";Pd.Export.ToCSV.Export(s,o,t),$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1}catch(n){Pd.Shared.LogToConsoleIfDebug(n.stack),$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1}}function generateCouncilorCSVExportSelection(e){try{var s=["CouncillorId","CouncillorName","AffairId","AffairTitle","VoteRegistrationNumber","VoteDate","VoteMeaningYes","VoteMeaningNo","DivisionText","VoteSubmissionText","CouncillorVoteId","Decision","Yes","No","Abstain","NotParticipated","Excused","President"],o=[];angular.forEach(e,function(e,s){var t=[];switch(t.push(e.PersonNumber),t.push(e.LastName+" "+e.FirstName),t.push(e.BusinessNumber),t.push(e.BusinessTitle),t.push(e.RegistrationNumber),t.push(e.VoteEnd),t.push(e.MeaningYes),t.push(e.MeaningNo),t.push(e.Subject),t.push(e.BillTitle),t.push(e.ID),t.push(e.DecisionText),e.Decision){case 1:t.push(1),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0);break;case 2:t.push(0),t.push(1),t.push(0),t.push(0),t.push(0),t.push(0);break;case 3:t.push(0),t.push(0),t.push(1),t.push(0),t.push(0),t.push(0);break;case 5:t.push(0),t.push(0),t.push(0),t.push(1),t.push(0),t.push(0);break;case 6:t.push(0),t.push(0),t.push(0),t.push(0),t.push(1),t.push(0);break;case 7:t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(1)}o.push(t)});var t="abdb-"+$scope.councilorBusinesses[0].Language.toLowerCase()+"-councillors-"+$scope.councilorBusinesses[0].LastName.toLowerCase()+"_"+$scope.councilorBusinesses[0].FirstName.toLowerCase()+"-"+$scope.filter.Legislatur.id.toString()+"-"+$scope.filter.Session.id+".csv";Pd.Export.ToCSV.Export(s,o,t),$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1}catch(n){Pd.Shared.LogToConsoleIfDebug(n.stack),$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1}}function getFilteredVotes(e,s,o){if(null!=s[o])return s[o];var t=[];t.Yes=0,t.No=0,t.A=0,t.NP=0,t.E=0,t.P=0;for(var n=0;n<e.length;n++)if(e[n].IdVote==o)switch(e[n].Decision){case 1:t.Yes++;break;case 2:t.No++;break;case 3:t.A++;break;case 5:t.NP++;break;case 6:t.E++;break;case 7:t.P++}return s[o]=t,t}function generateBusinessCSVExportAll(e){try{var s=["AffairShortId","AffairTitle","VoteRegistrationNumber","VoteDate","VoteMeaningYes","VoteMeaningNo","DivisionText","VoteSubmissionText","VoteFilteredYes","VoteFilteredNo","VoteFilteredAbstain","VoteFilteredNotParticipated","VoteFilteredExcused","VoteFilteredPresident","CouncillorId","CouncillorName","CouncillorYes","CouncillorNo","CouncillorAbstain","CouncillorNotParticipated","CouncillorExcused","CouncillorPresident"],o=[],t=[];angular.forEach(e,function(s,n){var a=[],r=getFilteredVotes(e,t,s.IdVote);switch(a.push(s.BusinessNumber),a.push(s.BusinessTitle),a.push(s.RegistrationNumber),a.push(s.VoteEnd),a.push(s.MeaningYes),a.push(s.MeaningNo),a.push(s.DecisionText),a.push(s.Subject),a.push(r.Yes),a.push(r.No),a.push(r.A),a.push(r.NP),a.push(r.E),a.push(r.P),a.push(s.PersonNumber),a.push(s.LastName+" "+s.FirstName),s.Decision){case 1:a.push(1),a.push(0),a.push(0),a.push(0),a.push(0),a.push(0);break;case 2:a.push(0),a.push(1),a.push(0),a.push(0),a.push(0),a.push(0);break;case 3:a.push(0),a.push(0),a.push(1),a.push(0),a.push(0),a.push(0);break;case 5:a.push(0),a.push(0),a.push(0),a.push(1),a.push(0),a.push(0);break;case 6:a.push(0),a.push(0),a.push(0),a.push(0),a.push(1),a.push(0);break;case 7:a.push(0),a.push(0),a.push(0),a.push(0),a.push(0),a.push(1)}o.push(a)});var n="abdb-"+e[0].Language.toLowerCase()+"-all-affairs-"+$scope.filter.Legislatur.id.toString()+"-"+$scope.filter.Session.id+".csv";Pd.Export.ToCSV.Export(s,o,n,!1),$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1}catch(a){$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1,Pd.Shared.LogToConsoleIfDebug(a.stack)}}function generateCouncilorCSVExportAll(e){try{var s=["CouncillorId","CouncillorName","AffairId","AffairTitle","VoteRegistrationNumber","VoteDate","VoteMeaningYes","VoteMeaningNo","DivisionText","VoteSubmissionText","CouncillorVoteId","Decision","Yes","No","Abstain","NotParticipated","Excused","President"],o=[];angular.forEach(e,function(e,s){if("undefined"!=typeof e&&null!=e){var t=[];switch(t.push(e.PersonNumber),t.push(e.LastName+" "+e.FirstName),t.push(e.BusinessNumber),t.push(e.BusinessTitle),t.push(e.RegistrationNumber),t.push(e.VoteEnd),t.push(e.MeaningYes),t.push(e.MeaningNo),t.push(e.Subject),t.push(e.BillTitle),t.push(e.ID),t.push(e.DecisionText),e.Decision){case 1:t.push(1),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0);break;case 2:t.push(0),t.push(1),t.push(0),t.push(0),t.push(0),t.push(0);break;case 3:t.push(0),t.push(0),t.push(1),t.push(0),t.push(0),t.push(0);break;case 5:t.push(0),t.push(0),t.push(0),t.push(1),t.push(0),t.push(0);break;case 6:t.push(0),t.push(0),t.push(0),t.push(0),t.push(1),t.push(0);break;case 7:t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(1)}o.push(t)}});var t="abdb-all-councilors-"+$scope.filter.Legislatur.id.toString()+"-"+$scope.filter.Session.id+".csv";Pd.Export.ToCSV.Export(s,o,t,!1)}catch(n){Pd.Shared.LogToConsoleIfDebug(n.stack)}}function generateBusinessXmlExportSelection(e){try{var s=["AffairShortId","AffairTitle","VoteRegistrationNumber","VoteDate","VoteMeaningYes","VoteMeaningNo","DivisionText","VoteSubmissionText","VoteTotalYes","VoteTotalNo","VoteTotalAbstain","VoteTotalNotParticipated","VoteTotalExcused","VoteTotalPresident","VoteFilteredYes","VoteFilteredNo","VoteFilteredAbstain","VoteFilteredNotParticipated","VoteFilteredExcused","VoteFilteredPresident","CouncillorId","CouncillorName","CouncillorYes","CouncillorNo","CouncillorAbstain","CouncillorNotParticipated","CouncillorExcused","CouncillorPresident"],o=[];angular.forEach(e,function(e,s){var t=[];switch(t.push(e.BusinessNumber),t.push(e.BusinessTitle),t.push(e.RegistrationNumber),t.push(e.VoteEnd),t.push(e.MeaningYes),t.push(e.MeaningNo),t.push(e.DecisionText),t.push(e.Subject),t.push($scope.totalByFilterAll.Yes),t.push($scope.totalByFilterAll.No),t.push($scope.totalByFilterAll.Abstention),t.push($scope.totalByFilterAll.NotParticipated),t.push($scope.totalByFilterAll.DecisionArt),t.push($scope.totalByFilterAll.DecisionPresident),t.push($scope.totalByFilter.Yes),t.push($scope.totalByFilter.No),t.push($scope.totalByFilter.Abstention),t.push($scope.totalByFilter.NotParticipated),t.push($scope.totalByFilter.DecisionArt),t.push($scope.totalByFilter.DecisionPresident),t.push(e.PersonNumber),t.push(e.LastName+" "+e.FirstName),e.Decision){case 1:t.push(1),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0);break;case 2:t.push(0),t.push(1),t.push(0),t.push(0),t.push(0),t.push(0);break;case 3:t.push(0),t.push(0),t.push(1),t.push(0),t.push(0),t.push(0);break;case 5:t.push(0),t.push(0),t.push(0),t.push(1),t.push(0),t.push(0);break;case 6:t.push(0),t.push(0),t.push(0),t.push(0),t.push(1),t.push(0);break;case 7:t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(1)}o.push(t);
});var t="abdb-"+e[0].Language.toLowerCase()+"-affairs-"+e[0].BusinessNumber+"-"+$scope.filter.Legislatur.id.toString()+"-"+$scope.filter.Session.id+".xml";Pd.Export.ToCSV.Export(s,o,t,!0,["sum","sumVotes","containsBusiness","containsVotes","containsPerson","setBusinessPaging","setVotesPaging","setPersonsPaging","filterBusinessesAgainstData","containsVoteWithId","getAllVoteIds"]),$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1}catch(n){$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1,Pd.Shared.LogToConsoleIfDebug(n.stack)}}function generateCouncillorXmlExportSelection(e){try{var s=["CouncillorId","CouncillorName","AffairId","AffairTitle","VoteRegistrationNumber","VoteDate","VoteMeaningYes","VoteMeaningNo","DivisionText","VoteSubmissionText","CouncillorVoteId","Decision","Yes","No","Abstain","NotParticipated","Excused","President"],o=[];angular.forEach(e,function(e,s){var t=[];switch(t.push(e.PersonNumber),t.push(e.LastName+" "+e.FirstName),t.push(e.BusinessNumber),t.push(e.BusinessTitle),t.push(e.RegistrationNumber),t.push(e.VoteEnd),t.push(e.MeaningYes),t.push(e.MeaningNo),t.push(e.Subject),t.push(e.BillTitle),t.push(e.ID),t.push(e.DecisionText),e.Decision){case 1:t.push(1),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0);break;case 2:t.push(0),t.push(1),t.push(0),t.push(0),t.push(0),t.push(0);break;case 3:t.push(0),t.push(0),t.push(1),t.push(0),t.push(0),t.push(0);break;case 5:t.push(0),t.push(0),t.push(0),t.push(1),t.push(0),t.push(0);break;case 6:t.push(0),t.push(0),t.push(0),t.push(0),t.push(1),t.push(0);break;case 7:t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(1)}o.push(t)});var t="abdb-"+$scope.councilorBusinesses[0].Language.toLowerCase()+"-councillors-"+$scope.councilorBusinesses[0].LastName.toLowerCase()+"_"+$scope.councilorBusinesses[0].FirstName.toLowerCase()+"-"+$scope.filter.Legislatur.id.toString()+"-"+$scope.filter.Session.id+".xml";Pd.Export.ToCSV.Export(s,o,t,!0,["sum","sumVotes","containsBusiness","containsVotes","containsPerson","setBusinessPaging","setVotesPaging","setPersonsPaging","getAllVoteIds","filterBusinessesAgainstData","containsVoteWithId"]),$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1}catch(n){$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1,Pd.Shared.LogToConsoleIfDebug(n.stack)}}function generateBusinessXmlExportAll(e){try{var s=["AffairShortId","AffairTitle","VoteRegistrationNumber","VoteDate","VoteMeaningYes","VoteMeaningNo","DivisionText","VoteSubmissionText","VoteFilteredYes","VoteFilteredNo","VoteFilteredAbstain","VoteFilteredNotParticipated","VoteFilteredExcused","VoteFilteredPresident","CouncillorId","CouncillorName","CouncillorYes","CouncillorNo","CouncillorAbstain","CouncillorNotParticipated","CouncillorExcused","CouncillorPresident"],o=[],t=[];angular.forEach(e,function(s,n){var a=[],r=getFilteredVotes(e,t,s.IdVote);switch(a.push(s.BusinessNumber),a.push(s.BusinessTitle),a.push(s.RegistrationNumber),a.push(s.VoteEnd),a.push(s.MeaningYes),a.push(s.MeaningNo),a.push(s.DecisionText),a.push(s.Subject),a.push(r.Yes),a.push(r.No),a.push(r.A),a.push(r.NP),a.push(r.E),a.push(r.P),a.push(s.PersonNumber),a.push(s.LastName+" "+s.FirstName),s.Decision){case 1:a.push(1),a.push(0),a.push(0),a.push(0),a.push(0),a.push(0);break;case 2:a.push(0),a.push(1),a.push(0),a.push(0),a.push(0),a.push(0);break;case 3:a.push(0),a.push(0),a.push(1),a.push(0),a.push(0),a.push(0);break;case 5:a.push(0),a.push(0),a.push(0),a.push(1),a.push(0),a.push(0);break;case 6:a.push(0),a.push(0),a.push(0),a.push(0),a.push(1),a.push(0);break;case 7:a.push(0),a.push(0),a.push(0),a.push(0),a.push(0),a.push(1)}o.push(a)});var n="abdb-"+e[0].Language.toLowerCase()+"-all-affairs-"+$scope.filter.Legislatur.id.toString()+"-"+$scope.filter.Session.id+".xml";Pd.Export.ToCSV.Export(s,o,n,!0,["sum","sumVotes","containsBusiness","containsVotes","containsPerson","setBusinessPaging","setVotesPaging","setPersonsPaging","filterBusinessesAgainstData","containsVoteWithId","getAllVoteIds"]),$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1}catch(a){$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1,Pd.Shared.LogToConsoleIfDebug(a.stack)}}function generateCouncillorXmlExportAll(e){try{var s=["CouncillorId","CouncillorName","AffairId","AffairTitle","VoteRegistrationNumber","VoteDate","VoteMeaningYes","VoteMeaningNo","DivisionText","VoteSubmissionText","CouncillorVoteId","Decision","Yes","No","Abstain","NotParticipated","Excused","President"],o=[];angular.forEach(e,function(e,s){if("undefined"!=typeof e&&null!=e){var t=[];switch(t.push(e.PersonNumber),t.push(e.LastName+" "+e.FirstName),t.push(e.BusinessNumber),t.push(e.BusinessTitle),t.push(e.RegistrationNumber),t.push(e.VoteEnd),t.push(e.MeaningYes),t.push(e.MeaningNo),t.push(e.Subject),t.push(e.BillTitle),t.push(e.ID),t.push(e.DecisionText),e.Decision){case 1:t.push(1),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0);break;case 2:t.push(0),t.push(1),t.push(0),t.push(0),t.push(0),t.push(0);break;case 3:t.push(0),t.push(0),t.push(1),t.push(0),t.push(0),t.push(0);break;case 5:t.push(0),t.push(0),t.push(0),t.push(1),t.push(0),t.push(0);break;case 6:t.push(0),t.push(0),t.push(0),t.push(0),t.push(1),t.push(0);break;case 7:t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),t.push(1)}o.push(t)}});var t="abdb-all-councilors-"+$scope.filter.Legislatur.id.toString()+"-"+$scope.filter.Session.id+".xml";Pd.Export.ToCSV.Export(s,o,t,!0,["sum","sumVotes","containsBusiness","containsVotes","containsPerson","setBusinessPaging","setVotesPaging","setPersonsPaging","getAllVoteIds","filterBusinessesAgainstData","containsVoteWithId"]),$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1}catch(n){$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1,Pd.Shared.LogToConsoleIfDebug(n.stack)}}function getResults(){var e="",s=angular.element("input[type='hidden'][id*='"+$scope.datasource+"']"),o=$scope.datatype.toLowerCase();if(s.length>0)switch(e=s.val(),o){case"breeze":dataBindWsCall(e);break;case"odata":dataBindODataCall(e)}else jQuery.ajax({url:"/Smart Data Library/Data Sources/"+$scope.datasource,async:!1,cache:!1,contentType:"text/plain"}).always(function(e){switch(o){case"breeze":dataBindWsCall(e);break;case"odata":dataBindODataCall(e)}})}function setUrlParametersInScope(e){for(var s in e)$scope["data_request_"+s]||($scope["data_request_"+s]=e[s])}function replaceValueInRequest(e){var s=Pd.Utility.GetUrlParameters();setUrlParametersInScope(s);for(var o in $scope)if(0==o.toLowerCase().indexOf("data_request_")){var t=o.split("data_request_")[1];t&&""!=t&&s&&s[t]&&(e=Pd.Utility.GloballyReplaceString(e,"{data_"+t+"}",s[t]))}for(var o in $scope)0==o.toLowerCase().indexOf("data_")&&(e=Pd.Utility.GloballyReplaceString(e,"{"+o+"}",$scope[o]));return e}function dataBindWsCall(dataContent){dataContent=replaceValueInRequest(dataContent);var datasource=eval(dataContent);if(datasource){manager.executeQuery(datasource).then(function(e){$scope.results=e.results})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e.stack)});var containerAngular=angular.element("div[id*='"+$scope.angularContainer+"']");containerAngular.length>0&&containerAngular.show()}}function dataBindODataCall(e){e=replaceValueInRequest(e),OData.read(e,function(e){$scope.results=e.results});var s=angular.element("div[id*='"+$scope.angularContainer+"']");s.length>0&&s.show()}$scope.containerAngular=angular.element("div[id*='"+$scope.angularContainer+"']"),$scope.containerAngular.show(),Array.prototype.sum=function(e,s){for(var o=0,t=0,n=this.length;n>t;t++)this[t][e]==s&&o++;return o},Array.prototype.sumVotes=function(e){var s=0;if(0==$scope.votes.length)return s;for(var o=0,t=this.length;t>o;o++){if("undefined"==typeof this[o].Decision)return;this[o].Decision==e&&this[o].IdVote==$scope.votes[$scope.selectedVote].id&&s++}return s},Array.prototype.containsBusiness=function(e,s){for(var o=0,t=e.length;t>o;o++)if(e[o].id==s)return!0;return!1},Array.prototype.containsVotes=function(e,s,o){for(var t=0,n=e.length;n>t;t++)if(e[t].id==s&&e[t].businessNo==o)return!0;return!1},Array.prototype.containsVoteWithId=function(e,s){for(var o=0,t=e.length;t>o;o++)if(e[o].id==s)return!0;return!1},Array.prototype.containsPerson=function(e,s){for(var o=0,t=e.length;t>o;o++)if(e[o].id==s)return!0;return!1},Array.prototype.setBusinessPaging=function(e,s,o,t,n,a,r,i,u,p){$scope.businesses=[];for(var c=0,l=this.length;l>c;c++){var d={id:this[c][e],business:this[c][s],businessShortNumber:this[c][o],voteEnd:this[c][t],voteEndWithTimezone:this[c][n],meaningYes:this[c][a],meaningNo:this[c][r],billTitle:this[c][i],subject:this[c][u],idVote:this[c][p]};$scope.businesses.push(d)}},Array.prototype.setVotesPaging=function(e,s,o,t,n,a,r,i,u,p){$scope.votes=[];for(var c=0,l=this.length;l>c;c++){var d={id:this[c][s],businessNo:e,registrationNo:this[c].RegistrationNumber,businessShortNumber:this[c][t],voteEnd:this[c][n],voteEndWithTimezone:this[c][a],meaningYes:this[c][r],meaningNo:this[c][i],billTitle:this[c][u],subject:this[c][p]};this[c][o]==e&&1!=this.containsVotes($scope.votes,this[c][s],e)&&$scope.votes.push(d)}},Array.prototype.getAllVoteIds=function(e){$scope.votesAll=[];for(var s=0,o=this.length;o>s;s++)1!=this.containsVoteWithId($scope.votesAll,this[s][e])&&$scope.votesAll.push(this[s][e])},Array.prototype.setPersonsPaging=function(){$scope.persons=[];for(var e=0,s=this.length;s>e;e++){var o={id:this[e].PersonNumber};1!=this.containsPerson($scope.persons,this[e].PersonNumber)&&$scope.persons.push(o)}if($scope.persons.length>0){if("undefined"==typeof $scope.persons[$scope.selectedPerson].id)return $scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.showContent=!0,void Pd.Shared.LogToConsoleIfDebug("setPersonsPaging: no $scope.persons[$scope.selectedPerson].id ... aborting");getPersonData($scope.persons[$scope.selectedPerson].id).then(function(e){return $scope.personData=[],$scope.personData=e,0==$scope.personData.length?void($scope.noResults=!0):void getAllCouncilorBusinesses()})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e),$scope.buttonDisabled=!1})}},Array.prototype.filterBusinessesAgainstData=function(e){$scope.businessesToRemove=[];for(var s=0,o=this.length;o>s;s++){var t=!1,n=this[s].ID;if(null!=e&&e.length>0)for(var a=0;a<e.length;a++)if(n==e[a].IdVote){t=!0;break}t||$scope.businessesToRemove.push(s)}},$scope.businessFilter=function(e){return $scope.votes.length>0?e.BusinessNumber===$scope.businesses[$scope.selectedBusinessPageIndex].id&&e.IdVote===$scope.votes[$scope.selectedVote].id:e.BusinessNumber===$scope.businesses[$scope.selectedBusinessPageIndex].id},$scope.councilorFilter=function(e){return $scope.persons.length>0?e.PersonNumber===$scope.persons[$scope.selectedPerson].id:void 0},$scope.init=function(e){$scope.params=e},$scope.queryTimedOut=!1,$scope.noResults=!1,$scope.showLoading=!1,$scope.showContent=!1,$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1,$scope.businessRow=!0,$scope.councilorRow=!1,$scope.results=[],$scope.affairs=[],$scope.businesses=[],$scope.persons=[],$scope.votes=[],$scope.links=[],$scope.selectedBusiness=0,$scope.selectedVote=0,$scope.selectedPerson=0,$scope.currentPage=0,$scope.pageSize=25,$scope.Res=Res,$scope.Pd=Pd,$scope.data_language=Pd.Language.GetCurrentLanguage(),$scope.business="active",$scope.councilor="",$scope.councilorPicture="",$scope.cantonPicture="",$scope.timeoutAfter=9e4,$scope.buttonDisabled=!1,$scope.needsVoteIds=!1,$scope.showBusinessDetails={checked:!1},$scope.showBlock={},$scope["export"]=[{option:""},{option:"Xml"},{option:"Csv"},{option:"Xml-All"},{option:"Csv-All"}],$scope.exportOptions=[{value:"",label:Res.votesDetailsDisplayTemplateExportFormat},{value:"Xml",label:Res.votesDetailsDisplayTemplateXMLCurrentSearchResults},{value:"Csv",label:Res.votesDetailsDisplayTemplateCSVCurrentSearchResults},{value:"Xml-All",label:Res.votesDetailsDisplayTemplateXMLAllSearchResults},{value:"Csv-All",label:Res.votesDetailsDisplayTemplateCSVAllSearchResults}],$scope["export"].option=$scope.exportOptions[0].value,$scope.getEntityRecordMapping=function(e,s,o,t){Pd.EntityMappings.GetEntityRecordMapping(e,s,o).then(function(e){for(var s="",o=0;o<e[0].length;o++)if(e[0][o].language==$scope.data_language.toLowerCase()){s=e[0][o].url;break}$scope[t]=s})},$scope.numberOfPages=function(){return Math.ceil($scope.councilorBusinesses.length/$scope.pageSize)},$scope.selectedBusinessPageIndex=0,$scope.getNextBusinessPage=function(e){for(var s=$scope.businesses[$scope.selectedBusinessPageIndex].id,o=$scope.selectedBusinessPageIndex;o>=0&&o<$scope.businesses.length&&s==$scope.businesses[o].id;)o+=e;return o},$scope.setShowBlock=function(e,s){$scope.showBlock[e]=s},$scope.showBusinesses=function(){$scope.spinner="true",$scope.business="active",$scope.councilor="",$scope.businessRow=!0,$scope.councilorRow=!1,$timeout(function(){$scope.showTabLoading=!1,$scope.spinner=!1,$scope.showTabContent=!0,$scope.buttonDisabled=!1},500)},$scope.showCouncilors=function(){$scope.spinner="true",$scope.needsVoteIds=!1;var e=getBusinessNumberFilter();(""!=e||""!=$scope.filter.SearchText)&&($scope.needsVoteIds=!0);var s=8;if($scope.votesAll.length>s&&1==$scope.needsVoteIds){for(var o=[],t=0,n=[];t<=$scope.votesAll.length-1;){for(var a=0;s>a;a++)t<=$scope.votesAll.length-1&&n.push($scope.votesAll[t]),t++;o.push(getPersons(n)),n=[]}$q.all(o).then(function(e){var s=[].concat.apply([],e);return $scope.personsAll=[],$scope.personsAll=s,0==$scope.personsAll.length?void($scope.noResults=!0):void $scope.personsAll.setPersonsPaging()})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e.message),queryFailed(e,"showCouncilors",!0)})}else{var r=null;1==$scope.needsVoteIds&&(r=$scope.votesAll),getPersons(r).then(function(e){return $scope.personsAll=[],$scope.personsAll=e,0==$scope.personsAll.length?void($scope.noResults=!0):void $scope.personsAll.setPersonsPaging()})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e),$scope.buttonDisabled=!1})}$scope.getEntityRecordMapping("Councilor","SmallPicture",0,"councilorPicture"),$scope.getEntityRecordMapping("Canton","SmallPicture",0,"cantonPicture"),$scope.business="",$scope.councilor="active",$scope.businessRow=!1,$scope.councilorRow=!0,$scope.showTabLoading=!0,$scope.showTabContent=!1},$scope.previousBusiness=function(){$scope.selectedBusiness>=1&&0==$scope.buttonDisabled&&($scope.spinner="true",$scope.buttonDisabled=!0,$scope.selectedBusiness--,$scope.selectedBusinessPageIndex=$scope.getNextBusinessPage(-1),$scope.selectedVote=0,$scope.businessAll.setVotesPaging($scope.businesses[$scope.selectedBusinessPageIndex].id,"ID","BusinessNumber","BusinessShortNumber","VoteEnd","VoteEndWithTimezone","MeaningYes","MeaningNo","BillTitle","Subject"),getData(null))},$scope.nextBusiness=function(){$scope.selectedBusiness<$scope.uniqueBusinesses.length-1&&0==$scope.buttonDisabled&&($scope.spinner="true",$scope.buttonDisabled=!0,$scope.selectedBusiness++,$scope.selectedBusinessPageIndex=$scope.getNextBusinessPage(1),$scope.selectedVote=0,$scope.businessAll.setVotesPaging($scope.businesses[$scope.selectedBusinessPageIndex].id,"ID","BusinessNumber","BusinessShortNumber","VoteEnd","VoteEndWithTimezone","MeaningYes","MeaningNo","BillTitle","Subject"),getData(null))},$scope.previousVote=function(){$scope.selectedVote>=1&&0==$scope.buttonDisabled&&($scope.spinner="true",1==$scope.buttonDisabled,$scope.selectedVote--,$scope.spinner=!1,getData($scope.votes[$scope.selectedVote].id))},$scope.nextVote=function(){$scope.selectedVote<$scope.votes.length-1&&0==$scope.buttonDisabled&&($scope.spinner="true",1==$scope.buttonDisabled,$scope.selectedVote++,$scope.spinner=!1,getData($scope.votes[$scope.selectedVote].id))},$scope.exportBusiness=function(){switch($scope["export"].option){case"":break;case"Pdf":break;case"Xml":$scope.spinner="true",$scope.showTabLoading=!0,$scope.showTabContent=!1,generateBusinessXmlExportSelection($scope.affairs);break;case"Csv":$scope.spinner="true",$scope.showTabLoading=!0,$scope.showTabContent=!1,generateBusinessCSVExportSelection($scope.affairs);break;case"Xml-All":$scope.spinner="true",$scope.showTabLoading=!0,$scope.showTabContent=!1;var e=[],s=[],o=30;if(angular.forEach($scope.businesses,function(s,o){e.push(s.idVote)}),e.length>0)for(var t=0,n=[];t<=e.length-1;){for(var a=0;o>a;a++)t<=e.length-1&&n.push(e[t]),t++;s.push(getBusinessExportAllData(n)),n=[]}$q.all(s).then(function(e){var s=[].concat.apply([],e);$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1,generateBusinessXmlExportAll(s)},function(e){Pd.Shared.LogToConsoleIfDebug(e.stack),$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1});break;case"Csv-All":$scope.spinner="true",$scope.showTabLoading=!0,$scope.showTabContent=!1;var e=[],s=[],o=30;if(angular.forEach($scope.businesses,function(s,o){e.push(s.idVote)}),e.length>0)for(var t=0,n=[];t<=e.length-1;){for(var a=0;o>a;a++)t<=e.length-1&&n.push(e[t]),t++;s.push(getBusinessExportAllData(n)),n=[]}$q.all(s).then(function(e){var s=[].concat.apply([],e);$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1,generateBusinessCSVExportAll(s)},function(e){Pd.Shared.LogToConsoleIfDebug(e.stack),$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1})}},$scope.previousCouncilor=function(){$scope.selectedPerson>=1&&0==$scope.buttonDisabled&&($scope.spinner="true",$scope.showTabLoading=!0,$scope.showTabContent=!1,$scope.buttonDisabled=!0,$scope.selectedPerson--,$scope.currentPage=0,$scope.getEntityRecordMapping("Councilor","SmallPicture",0,"councilorPicture"),$scope.getEntityRecordMapping("Canton","SmallPicture",0,"cantonPicture"),getPersonData($scope.persons[$scope.selectedPerson].id).then(function(e){$scope.personData=[],$scope.personData=e,getAllCouncilorBusinesses()})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e),$scope.buttonDisabled=!1}))},$scope.nextCouncilor=function(){$scope.selectedPerson<$scope.persons.length-1&&0==$scope.buttonDisabled&&($scope.spinner="true",$scope.showTabLoading=!0,$scope.showTabContent=!1,$scope.buttonDisabled=!0,$scope.currentPage=0,$scope.selectedPerson++,$scope.getEntityRecordMapping("Councilor","SmallPicture",0,"councilorPicture"),$scope.getEntityRecordMapping("Canton","SmallPicture",0,"cantonPicture"),getPersonData($scope.persons[$scope.selectedPerson].id).then(function(e){$scope.personData=[],$scope.personData=e,getAllCouncilorBusinesses()})["catch"](function(e){Pd.Shared.LogToConsoleIfDebug(e),$scope.buttonDisabled=!1}))},$scope.previousPage=function(){$scope.currentPage>=1&&$scope.currentPage--},$scope.nextPage=function(){$scope.currentPage<$scope.numberOfPages()-1&&$scope.currentPage++},$scope.exportCouncilor=function(){switch($scope["export"].option){case"":break;case"Pdf":break;case"Xml":$scope.spinner="true",$scope.showTabLoading=!0,$scope.showTabContent=!1,generateCouncillorXmlExportSelection($scope.councilorBusinesses);break;case"Csv":$scope.spinner="true",$scope.showTabLoading=!0,$scope.showTabContent=!1,generateCouncilorCSVExportSelection($scope.councilorBusinesses);break;case"Xml-All":$scope.spinner="true",$scope.showTabLoading=!0,$scope.showTabContent=!1;var e=[],s=[],o=30;if(angular.forEach($scope.persons,function(s,o){e.push(s.id)}),e.length>0)for(var t=0,n=[];t<=e.length-1;){for(var a=0;o>a;a++)t<=e.length-1&&n.push(e[t]),t++;if($scope.needsVoteIds&&$scope.votesAll.length>0)for(var r=0;r<$scope.votesAll.length;r++)s.push(getCouncilorExportAllDtata(n,$scope.votesAll[r]));else s.push(getCouncilorExportAllDtata(n,null));n=[]}$q.all(s).then(function(e){$scope.dataToExportXml=[].concat.apply([],e);var s=$scope.$eval("dataToExportXml | orderBy:['LastName','FirstName','-VoteEnd']");$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1,generateCouncillorXmlExportAll(s)},function(e){Pd.Shared.LogToConsoleIfDebug(e.stack),$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1});break;case"Csv-All":$scope.spinner="true",$scope.showTabLoading=!0,$scope.showTabContent=!1;var e=[],s=[],o=30;if(angular.forEach($scope.persons,function(s,o){e.push(s.id)}),e.length>0)for(var t=0,n=[];t<=e.length-1;){for(var a=0;o>a;a++)t<=e.length-1&&n.push(e[t]),t++;if($scope.needsVoteIds&&$scope.votesAll.length>0)for(var r=0;r<$scope.votesAll.length;r++)s.push(getCouncilorExportAllDtata(n,$scope.votesAll[r]));else s.push(getCouncilorExportAllDtata(n,null));n=[]}$q.all(s).then(function(e){$scope.dataToExportCsv=[].concat.apply([],e);var s=$scope.$eval("dataToExportCsv | orderBy:['LastName','FirstName','-VoteEnd']");$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1,generateCouncilorCSVExportAll(s)},function(e){Pd.Shared.LogToConsoleIfDebug(e.stack),$scope.showTabLoading=!1,$scope.showTabContent=!0,$scope.spinner=!1})}},$scope.exportToCSV=function(){},$scope.$on("handleBroadcast",function(){$scope.message=controllerBUS.message}),$scope.$on("filterClear",function(){$scope.noResults=!1,$scope.showLoading=!1,$scope.showContent=!1}),$scope.$on("filterChanged",function(){clearSearchFilter(),$scope.selectedBusiness=0,$scope.selectedVote=0,$scope.selectedPerson=0,$scope.currentPage=0,$scope.businesses=[],$scope.votesAll=[],$scope.votes=[],$scope.noResults=!1,$scope.queryTimedOut=!1,$scope.showBusinesses(),$scope.spinner="true",$scope.filter=angular.copy(controllerBUS.filter);var e=[];$scope.filter.Decision.selectedId.length>0&&angular.forEach($scope.filter.Decision.selectedId,function(s){e.push(parseInt(s))}),$scope.filter.Decision.selectedId=e,$scope.showLoading=!0,$scope.showContent=!1,$scope.selectedBusinessPageIndex=0,getBusinesses()});var requestQueue={_timer:null,_queue:[],add:function(e,s,o){var t=function(e){requestQueue._timer=setTimeout(function(){e=requestQueue.add(),requestQueue._queue.length&&t(e)},e||5)};if(e)return requestQueue._queue.push([e,s,o]),void(1==requestQueue._queue.length&&t(o));var n=requestQueue._queue.shift();return n?(n[0].call(n[1]||window),n[2]):0},clear:function(){clearTimeout(requestQueue._timer),requestQueue._queue=[]}}}]),app.filter("startFrom",function(){return function(e,s){return s=+s,e.slice(s)}});
/*** End wsVotesDetailsController.min.js ***/
/*** Start wsAffairTeaserController.min.js ***/
app.controller("wsAffairTeaserController",["$scope","$q",function($scope,$q){"use strict";function onSuccess(e){var a=[];angular.forEach(e,function(e){this.push(e.ID)},a);var t=breeze.EntityQuery.from("Business").where("ID","in",a).where("Language","==",Pd.Language.GetCurrentLanguage()).expand("BusinessRoles, BusinessRoles.MembersCouncil, BusinessRoles.Committees, BusinessRoles.ParlGroups, BusinessRoles.Externals, BusinessRoles.Cantons").using(manager);t.execute().then(function(e){var t=syncSortOrder(e.results,a);$scope.results=t,$scope.$apply()}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e.stack)})}function onError(e){Pd.Shared.LogToConsoleIfDebug(e.stack)}function getResults(e,a){var t="",n=angular.element("input[type='hidden'][id*='"+$scope.datasource+"']"),o=$scope.datatype.toLowerCase();if(n.length>0)switch(t=n.val(),o){case"breeze":dataBindWsCall(t).then(function(a){e(a)},function(e){a(e)});break;case"odata":dataBindODataCall(t).then(function(a){e(a)},function(e){a(e)})}else jQuery.ajax({url:"/Smart Data Library/Data Sources/"+$scope.datasource,async:!1,cache:!1,contentType:"text/plain"}).always(function(t){switch(o){case"breeze":dataBindWsCall(t).then(function(a){e(a)},function(e){a(e)});break;case"odata":dataBindODataCall(t).then(function(a){e(a)},function(e){a(e)})}})}function setUrlParametersInScope(e){for(var a in e)$scope["data_request_"+a]||($scope["data_request_"+a]=decodeURIComponent(e[a]))}function replaceValueInRequest(e){var a=Pd.Utility.GetUrlParameters();setUrlParametersInScope(a);for(var t in $scope)if(0==t.toLowerCase().indexOf("data_request_")){var n=t.split("data_request_")[1];n&&""!=n&&a&&a[n]&&(e=Pd.Utility.GloballyReplaceString(e,"{data_"+n+"}",a[n]))}for(var t in $scope)0==t.toLowerCase().indexOf("data_")&&(e=Pd.Utility.GloballyReplaceString(e,"{"+t+"}",$scope[t]));return e}function dataBindWsCall(dataContent){return $q(function(resolve,reject){dataContent=replaceValueInRequest(dataContent);var datasource=eval(dataContent);if(datasource){manager.executeQuery(datasource).then(function(e){resolve(e.results)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e.stack),reject(e)});var containerAngular=angular.element("div[id*='"+$scope.angularContainer+"']");containerAngular.length>0&&containerAngular.show()}})}function dataBindODataCall(e){return $q(function(a,t){e=replaceValueInRequest(e),OData.read(e,function(e){a(e.results)},function(e){Pd.Shared.LogToConsoleIfDebug(e.stack),t(e)});var n=angular.element("div[id*='"+$scope.angularContainer+"']");n.length>0&&n.show()})}function syncSortOrder(e,a){var t=[];return angular.forEach(a,function(a){angular.forEach(e,function(e){e.ID===a&&this.push(e)},t)}),t}$scope.init=function(e){$scope.params=e},$scope.results=[],$scope.Res=Res,$scope.Pd=Pd,$scope.moment=moment,$scope.data_language=Pd.Language.GetCurrentLanguage(),$scope.getEntityRecordMapping=function(e,a,t,n,o){Pd.EntityMappings.GetEntityRecordMapping(e,a,t).then(function(e){for(var a="",t=0;t<e[0].length;t++)if(e[0][t].language==$scope.data_language.toLowerCase()){a=e[0][t].url;break}$scope[n]=a,o&&$scope.$eval(o)})},$scope.executeWsQuery=function(dataContent,scopeVar,callbackCode){dataContent=replaceValueInRequest(dataContent);var currentTemplate=$scope.templatePath,datasource=eval(dataContent);datasource&&manager.executeQuery(datasource).then(function(e){$scope[scopeVar]=e.results,setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(currentTemplate)},3e3),callbackCode&&$scope.$eval(callbackCode),$scope.$apply()}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)})},getResults(onSuccess,onError)}]);
/*** End wsAffairTeaserController.min.js ***/
/*** Start notificationController.min.js ***/
!function(){app.controller("notificationController",["$scope","$http",function(e,t){"use strict";var a={};a.SearchBusiness=1,a.SearchNews=2,a.SearchAgenda=3,a.BusinessDetail=4,a.SearchSubject=5,a.SearchInitiative=6,a.SearchAgendaChange=7,a.SearchSession=8,a.SearchBlog=9;var r=0,n=function(t,a){e.statusText=t,e.haveStatusError=a},i=function(t,a){e.statusText.length>0&&(e.statusText+="<br />"),e.statusText+=t,a&&(e.haveStatusError=a)},o=function(e,a,r,n){var i="/_layouts/15/itsystems.Pd.Internet/Notifications/NotificationWebService.aspx",o="";for(var c in e)o+=0==o.length?"?":"&",o+=c+"="+encodeURI(e[c]);o=i+o;var s=n;t({method:"GET",url:o}).then(function(e){a(e,s)},function(e){r(e,s)})},c=function(t){e.showLoadingIcon=!1;var a=d(t.data);n(a.OutputText,a.IsError)},s=function(t,a){if(1==a.TotalNumberOfRequests)return void c(t);r++,r==a.TotalNumberOfRequests&&(e.showLoadingIcon=!1);var n=d(t.data);i("<strong>"+a.RequestTitle+"</strong>: "+n.OutputText,n.IsError)},u=function(t){e.showLoadingIcon=!1,Pd.Shared.LogToConsoleIfDebug("Notification Module: Web Service Request failed :"+t),n(Res.brandingNotificationErrorGeneric,!0)},l=function(t,a){return 1==a.TotalNumberOfRequests?void u(data):(r++,r==a.TotalNumberOfRequests&&(e.showLoadingIcon=!1),Pd.Shared.LogToConsoleIfDebug("Notification Module: Web Service Request failed :"+t),void i(a.RequestTitle+": "+Res.brandingNotificationErrorGeneric,!0))},d=function(e){var t={OutputText:"",IsError:!1},a=e.ServiceResponseStatusCode;switch(a+=""){case"0":case"1":case"2":case"3":t.OutputText=Res.brandingNotificationErrorGeneric,t.IsError=!0;break;case"4":t.OutputText=Res.brandingNotificationSuccessSubscriber;break;case"5":t.OutputText=Res.brandingNotificationSuccessSubscription;break;case"6":t.OutputText=Res.brandingNotificationErrorDuplicateSubscription,t.IsError=!0;break;case"7":t.OutputText=Res.brandingNotificationSuccessSubscriber;break;case"8":t.OutputText=Res.brandingNotificationSuccessSubscription;break;case"9":t.OutputText=Res.brandingNotificationErrorGeneric,t.IsError=!0;break;case"10":t.OutputText=Res.brandingNotificationSuccessActivation;break;case"11":t.OutputText=Res.brandingNotificationSuccessActivation;break;case"12":t.OutputText=Res.brandingNotificationSuccessUnsubscribeAll;break;case"13":t.OutputText=Res.brandingNotificationErrorUnsubscribedAlready,t.IsError=!0;break;case"14":t.OutputText=Res.brandingNotificationSuccessUnsubscribe;break;case"15":t.OutputText=Res.brandingNotificationErrorUnsubscribedAlready,t.IsError=!0;break;case"16":t.OutputText=Res.brandingNotificationErrorGeneric+" (E)",t.IsError=!0;break;default:Pd.Shared.LogToConsoleIfDebug("Web Service returned error that was not able to be output as resource string: "+a+"."),t.OutputText=Res.brandingNotificationErrorGeneric,t.IsError=!0}return t.IsError&&Pd.Shared.LogToConsoleIfDebug("Web Service returned error response code "+a+"."),void 0!=e.ExceptionInfo&&(t.OutputText+=" ({0})".format(e.ExceptionInfo)),t},g=function(){var t=1e3,i=function(e){var t=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;return t.test(e)},d=function(){var a={};if(null==e.pageTypeId)return Pd.Shared.LogToConsoleIfDebug("Unable to extract page type for further mandatory logic."),n(Res.brandingNotificationErrorGeneric,!0),null;if(a.Email=angular.element("#notificationEmail").val(),!i(a.Email))return n(Res.brandingNotificationErrorEmailInvalid,!0),null;if(a.IdNotificationType=angular.element(".pd-sm-options input[type='radio'][name='NotificationType']:checked").val(),void 0==a.IdNotificationType)return n(Res.brandingNotificationErrorNotificationType,!0),null;switch(a.Language=Pd.Language.GetCurrentLanguage(),e.pageTypeId){case Pd.Shared.NotificationPanelPageType.SearchBusiness:case Pd.Shared.NotificationPanelPageType.BusinessDetail:case Pd.Shared.NotificationPanelPageType.SessionDetail:a.IdSubscriptionType=e.pageTypeId}switch(e.pageTypeId){case Pd.Shared.NotificationPanelPageType.SearchBusiness:if(a.EntityParameters=encodeURI(Pd.Search.ConvertSearchPageRefinementUrlToKqlFormat()),0==a.EntityParameters.trim().length)return n(Res.brandingNotificationErrorNoFilters,!0),null;var r=-1;try{var o=angular.element(".result-count");1==o.length&&void 0!=o.attr("data-row-count")&&(r=Number(o.attr("data-row-count")),NaN==r&&(r=-1,Pd.Shared.LogToConsoleIfDebug("Unable to parse search result count in Notification Controller.")))}catch(c){Pd.Shared.LogToConsoleIfDebug("Error to retrieve search result count in Notification Controller.")}if(0>r||r>t)return n(Res.brandingNotificationErrorTooManyResults,!0),null;break;case Pd.Shared.NotificationPanelPageType.SearchNews:if(0==angular.element("#SearchNews:checked").length&&0==angular.element("#SearchSession:checked").length)return n(Res.brandingNotificationErrorNotificationOption,!0),null;a.EntityParameters=encodeURI(Pd.Search.ConvertSearchPageRefinementUrlToKqlFormat());break;case Pd.Shared.NotificationPanelPageType.SearchAgenda:if(0==angular.element("#SearchAgenda:checked").length&&0==angular.element("#SearchAgendaChange:checked").length)return n(Res.brandingNotificationErrorNotificationOption,!0),null;a.EntityParameters=encodeURI(Pd.Search.ConvertSearchPageRefinementUrlToKqlFormat());break;case Pd.Shared.NotificationPanelPageType.BusinessDetail:if(a.EntityParameters=Pd.Utility.GetUrlParameters().AffairId,void 0==a.EntityParameters)return Pd.Shared.LogToConsoleIfDebug("Unable to extract AffairId from QS to pass to Web Service call."),n(Res.brandingNotificationErrorGeneric,!0),null;break;case Pd.Shared.NotificationPanelPageType.CouncillorDetail:if(a.EntityParameters=Pd.Utility.GetRewrittenUrlParameter("CouncillorId"),void 0==a.EntityParameters)return Pd.Shared.LogToConsoleIfDebug("Unable to extract CouncillorId from QS to pass to Web Service call."),n(Res.brandingNotificationErrorGeneric,!0),null;break;case Pd.Shared.NotificationPanelPageType.SearchBlog:if(0==angular.element("#SearchBlog:checked").length)return n(Res.brandingNotificationErrorNotificationOption,!0),null;a.EntityParameters=encodeURI(Pd.Search.ConvertSearchPageRefinementUrlToKqlFormat())}return e.pageTypeId==Pd.Shared.NotificationPanelPageType.CouncillorDetail&&0==angular.element(".pd-sm-options input[type='checkbox'][name='CouncillorActivity']:checked").length?(n(Res.brandingNotificationErrorNotificationActivity,!0),null):a},g=function(t){var n=0;switch(e.pageTypeId){case Pd.Shared.NotificationPanelPageType.SearchNews:e.haveStatusError=!1,r=0,n=angular.element("#SearchNews:checked").length+angular.element("#SearchSession:checked").length,1==angular.element("#SearchNews:checked").length&&(t.IdSubscriptionType=a.SearchNews,o(t,s,l,{RequestTitle:Res.brandingNotificationPanelTextOptionNews,RequestNumber:1,TotalNumberOfRequests:n})),1==angular.element("#SearchSession:checked").length&&(t.IdSubscriptionType=a.SearchSession,t.EntityParameters="",o(t,s,l,{RequestTitle:Res.brandingNotificationPanelTextOptionSessionsProgramme,RequestNumber:2,TotalNumberOfRequests:n}));break;case Pd.Shared.NotificationPanelPageType.SearchAgenda:e.haveStatusError=!1,r=0,n=angular.element("#SearchAgenda:checked").length+angular.element("#SearchAgendaChange:checked").length,1==angular.element("#SearchAgenda:checked").length&&(t.IdSubscriptionType=a.SearchAgenda,o(t,s,l,{RequestTitle:Res.brandingNotificationPanelTextOptionAgenda,RequestNumber:1,TotalNumberOfRequests:n})),1==angular.element("#SearchAgendaChange:checked").length&&(t.IdSubscriptionType=a.SearchAgendaChange,o(t,s,l,{RequestTitle:Res.brandingNotificationPanelTextOptionAgendaChanges,RequestNumber:2,TotalNumberOfRequests:n}));break;case Pd.Shared.NotificationPanelPageType.CouncillorDetail:var i=angular.element(".pd-sm-options input[type='checkbox'][name='CouncillorActivity']:checked");n=i.length,e.haveStatusError=!1,r=0;var d=t.EntityParameters;angular.forEach(i,function(e,r){switch(angular.element(e).val()){case"1":t.IdSubscriptionType=a.SearchInitiative,t.EntityParameters="PdBusinessCouncilorPersonNumber:"+d,o(t,s,l,{RequestTitle:Res.brandingNotificationPanelTextOptionCouncillorInitiatives,RequestNumber:1,TotalNumberOfRequests:n});break;case"2":t.IdSubscriptionType=a.SearchSubject,t.EntityParameters="PdSubjectSpeakerPersonNumbers:"+d,o(t,s,l,{RequestTitle:Res.brandingNotificationPanelTextOptionCouncillorSpeeches,RequestNumber:2,TotalNumberOfRequests:n})}});break;case Pd.Shared.NotificationPanelPageType.SearchBlog:e.haveStatusError=!1,r=0,n=1,1==angular.element("#SearchBlog:checked").length&&(t.IdSubscriptionType=a.SearchBlog,o(t,s,l,{RequestTitle:Res.brandingNotificationPanelTextOptionBlog,RequestNumber:1,TotalNumberOfRequests:n}));break;default:o(t,c,u,null)}};e.showStatusMessage=!0;var b=d();null!=b&&(e.statusText="",e.showLoadingIcon=!0,b.RequestMethod="AddSubscription",g(b))},b=function(){var t=function(){var e={};if(e.RequestMethod=Pd.Utility.GetUrlParameters().Action,void 0==e.RequestMethod)return Pd.Shared.LogToConsoleIfDebug("Unable to extract the action (request method) from QS to pass to Web Service call."),n(Res.brandingNotificationErrorGeneric,!0),null;if(e.ActivationId=Pd.Utility.GetUrlParameters().ActivationId,void 0==e.ActivationId)return Pd.Shared.LogToConsoleIfDebug("Unable to extract ActivationId from QS to pass to Web Service call."),n(Res.brandingNotificationErrorGeneric,!0),null;switch(e.RequestMethod){case"Unsubscribe":case"UnsubscribeAll":case"ActivateSubscriber":break;default:return Pd.Shared.LogToConsoleIfDebug("Unable to validate the action (request method) from QS to pass to Web Service call."),n(Res.brandingNotificationErrorGeneric,!0),null}return"Unsubscribe"==e.RequestMethod&&(e.IdSubscription=Pd.Utility.GetUrlParameters().IdSubscription,void 0==e.IdSubscription)?(Pd.Shared.LogToConsoleIfDebug("Unable to extract IdSubscription from QS to pass to Web Service call."),n(Res.brandingNotificationErrorGeneric,!0),null):e};switch(Pd.Utility.GetUrlParameters().Action){case"ActivateSubscriber":e.templateHeading=Res.brandingNotificationPanelTextEmailVerification;break;case"Unsubscribe":case"UnsubscribeAll":e.templateHeading=Res.brandingNotificationPanelTextUnsubscription;break;default:e.templateHeading=Res.brandingNotificationErrorGeneric}e.showStatusMessage=!0;var a=t();null!=a&&(e.statusText="",e.showLoadingIcon=!0,o(a,c,u,null))},h=function(){var e=null;try{var t=angular.element("#pdc"),a=t.attr("data-page-type");if(void 0!=a)try{e=Pd.Shared.NotificationPanelPageType[a],void 0==e&&(e=null)}catch(r){Pd.Shared.LogToConsoleIfDebug("Unable to extract pageTypeId from object ('"+a+"') in Notification Controller.")}}catch(r){Pd.Shared.LogToConsoleIfDebug("Error retrieving pageTypeId in Notification Controller.")}return e},f=function(){var t="";for(var a in Pd.Shared.NotificationPanelPageType)Pd.Shared.NotificationPanelPageType[a]==e.pageTypeId&&(t=a);return t};e.Res=Res,e.Pd=Pd,e.SP=SP,e.showStatusMessage=!1,e.statusText="",e.haveStatusError=!0,e.showLoadingIcon=!1,e.pageTypeId=h(),e.pageTypeName=f(),e.subscriptionPanelSubmitButtonClick=g,"Smart Data Library/Templates/wsNotificationInteraction.html"==e.templatePath&&b();var S=jQuery("div[id*='"+e.angularContainer+"']");S.length>0&&S.show()}])}();
/*** End notificationController.min.js ***/
/*** Start spSessionProgramController.min.js ***/
!function(){app.controller("SessionProgramController",["$scope","$location","parseDocIdUrlFilter",function(e,t,i){function n(){var t=Pd.Utility.GetUrlParameters();r(t);var n=decodeURIComponent(e.data_request_CouncilId),o=decodeURIComponent(e.data_request_SessionId);if(!Pd.Utility.StringIsNullOrEmpty(n)&&!Pd.Utility.StringIsNullOrEmpty(o)){Pd.Angular.ExecuteSPSearchQuery(a(n,o)).then(function(t){var r=[],a=Pd.Utility.ManagedProperties.PdTitle,o=-1;angular.forEach(t,function(t){Pd.Utility.StringIsNullOrEmpty(e.CouncilName)&&(e.CouncilName="1"===n.toString()?Res.brandingSessionProgramCouncilNR:Res.brandingSessionProgramCouncilSR),!Pd.Utility.StringIsNullOrEmpty(e.SessionName)||Pd.Utility.StringIsNullOrEmpty(t[Pd.Utility.ManagedProperties.PdEParlSession])||Pd.Utility.StringIsNullOrEmpty(t[Pd.Utility.ManagedProperties.PdEParlSessionTitle])||(e.SessionName="{0} {1}".format(t[Pd.Utility.ManagedProperties.PdEParlSession],t[Pd.Utility.ManagedProperties.PdEParlSessionTitle])),t.DisplayName=t.Filename,t.Group=t[Pd.Utility.ManagedProperties.PdEParlDoctype];var r=t.Filename.charAt(0);"9">=r&&r>="0"&&(o=t.Filename.indexOf("-"),o>=0&&1>=o&&(t.DisplayName=t.Filename.slice(o+1).trim()),t.Group=Res.brandingSessionProgramCategoryActual),t.PdTitle=t[a],t.DocIdUrl=i(t.dlcDocIdUrlOWSURLH),o=t.OriginalPath.lastIndexOf("."),o>0&&o<t.OriginalPath.length&&(t.FileType=t.OriginalPath.slice(o+1).toLowerCase()),Pd.Utility.StringIsNullOrEmpty(t.Group)?Pd.Shared.LogToConsoleIfDebug("WARNING: document '{0}' does not contain a value for '{1}'! skipping...".format(t.OriginalPath,Pd.Utility.ManagedProperties.PdEParlDoctype)):this.push(t)},r),e.results=r,e.spinner=!1,e.$apply()},function(t){Pd.Shared.LogToConsoleIfDebug(t.message+"\n"+t.stack,!0),e.spinner=!1,e.$apply()}),setTimeout(function(){1==e.spinner&&e.$applyAsync(function(){e.spinner=!1})},1e4);var l=angular.element("div[id*='"+e.angularContainer+"']");l.length>0&&l.show()}}function r(t){for(var i in t)t.hasOwnProperty(i)&&(e["data_request_"+i]||(e["data_request_"+i]=t[i]))}function a(e,t){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getEParlSessionDocumentsQueryInternal");var i={querytext:'PdSession="{0}" ContentTypeId:0x010100BB107401AD8E49D7A7C6601610D2B26D*'.format(t),rowlimit:500,trimduplicates:!1,selectproperties:[Pd.Utility.ManagedProperties.PdEParlSession,Pd.Utility.ManagedProperties.PdEParlSessionTitle,Pd.Utility.ManagedProperties.PdEParlDoctype,Pd.Utility.ManagedProperties.PdTitle,"Path","Filename","Title","LastModifiedTime","dlcDocIdUrlOWSURLH"]};switch(e.toString()){case"1":i.querytext+=" {0}={1}".format(Pd.Utility.ManagedProperties.PdEParlCouncilN,!0);break;case"2":i.querytext+=" {0}={1}".format(Pd.Utility.ManagedProperties.PdEParlCouncilS,!0);break;default:return Pd.Shared.LogToConsoleIfDebug("getEParlSessionDocumentsQueryInternal: unsupported councilId".format(e)),null}return i.querytext+=" {0}={1}".format(Pd.Utility.ManagedProperties.PdEParlLanguage,!0),i}e.init=function(t){e.params=t},e.results=[],e.Res=Res,e.Pd=Pd,e.data_language=Pd.Language.GetCurrentLanguage(),e.showBlock={},e.filetypes={pdf:!0,docx:!1},e.CouncilName="",e.SessionName="",e.checkboxSelection="pdf",e.spinner=!0,e.setShowBlock=function(t,i){e.showBlock[t]=i},e.selectedButtonIs=function(t){return t===e.checkboxSelection},n();var o=e.templatePath;e.$watch("spinner",function(e,t){1==t&&0==e&&setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(o)},200)})}]),app.directive("hideAccordionIfEmpty",function(){return{restrict:"A",link:function(e,t,i){e.$watch(function(){return t.children(".accordion-body").find(i.hideAccordionIfEmpty).length>0},function(e){e?t.show():t.hide()})}}})}();
/*** End spSessionProgramController.min.js ***/
/*** Start twitterController.min.js ***/
!function(){app.controller("twitterController",["$scope","$http",function(e,t){"use strict";function n(){var n=a(),i=function(t){e.$applyAsync(function(){e.results=t,r(n),setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(e.data_persisted_templatePath)},3e3)});var a=jQuery("div[id*='"+e.data_persisted_angularContainer+"']");a.length>0&&a.show(),PdCustomJs(".twitter-container").parents(".col-lg-6.rte-cell.hidden").removeClass("hidden")},s=Pd.Utility.lscacheGet("pd_latest_tweets_"+Pd.Language.GetCurrentLanguage());return null!=s?i(s):void t({method:"GET",timeout:2e3,url:"/_layouts/15/itsystems.Pd.Internet/Twitter/GetLatestTweets.aspx"}).then(function(e){Pd.Utility.lscacheSet("pd_latest_tweets_"+Pd.Language.GetCurrentLanguage(),e.data,10),i(e.data)},function(t){Pd.Shared.LogToConsoleIfDebug(t);var n=jQuery("div[id*='"+e.data_persisted_angularContainer+"']");n.length>0&&n.show(),PdCustomJs(".twitter-container").parents(".col-lg-6.rte-cell.hidden").removeClass("hidden")})}function a(){var t={};for(var n in e)0==n.toLowerCase().indexOf("data_persisted_")&&(t[n]=e[n]);return t}function r(t){for(var n in t)e[n]=t[n]}function i(e){var t=function(e,t){return e.indexStart<t.indexStart?-1:e.indexStart>t.indexStart?1:0},n=e.text,a=[];e.entities.urls.length>0&&angular.forEach(e.entities.urls,function(e){var t={};t.indexStart=e.indices[0],t.indexEnd=e.indices[1],t.replacementText='<a href="{0}" target="_blank">{1}</a>'.format(e.expanded_url,e.display_url),a.push(t)}),e.entities.user_mentions.length>0&&angular.forEach(e.entities.user_mentions,function(e){var t={};t.indexStart=e.indices[0],t.indexEnd=e.indices[1],t.replacementText='<a href="https://twitter.com/{0}" target="_blank">@{1}</a>'.format(e.screen_name,e.screen_name),a.push(t)}),e.entities.hashtags.length>0&&angular.forEach(e.entities.hashtags,function(e){var t={};t.indexStart=e.indices[0],t.indexEnd=e.indices[1],t.replacementText='<a href="https://twitter.com/hashtag/{0}?src=hash" target="_blank">#{0}</a>'.format(e.text),a.push(t)}),void 0!=e.entities.media&&e.entities.media.length>0&&angular.forEach(e.entities.media,function(e){var t={};t.indexStart=e.indices[0],t.indexEnd=e.indices[1];var n="",r=e.media_url.toLowerCase();(-1!==r.indexOf(".jpg",r.length-4)||-1!==r.indexOf(".png",r.length-4))&&(n=' class="fancybox"'),t.replacementText='<a href="'+e.media_url+'"'+n+">"+e.display_url+"</a>",a.push(t)}),a.sort(t);for(var r=0;r<a.length;r++){var i=n.length-e.text.length,s=a[r].indexStart+i,d=a[r].indexEnd+i,l=n.substring(0,s),o=n.substring(d);n=l+a[r].replacementText+o}return n}e.Res=Res,e.Pd=Pd,e.SP=SP,e.results=[],e.data_persisted_angularContainer=e.angularContainer,e.data_persisted_templatePath=e.templatePath,e.formatTweet=i,n()}])}();
/*** End twitterController.min.js ***/
/*** Start wsAffairController.min.js ***/
!function(e){app.controller("AffairController",["$scope","$sce","$timeout","affairService",function(e,n,s,t){"use strict";function i(){t.getBusiness(e.affairId,e.data_language,e.callbackSync).then(function(n){e.$applyAsync(function(){e.businesses=n,e.tagNames=u(n),e.results=n,o("Businesses")})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)}),setTimeout(function(){1==e.spinner&&e.$applyAsync(function(){e.spinner=!1,Pd.Shared.LogToConsoleIfDebug("wsAffairController.getResults: hid spinner after 10 seconds")})},1e4),r()}function o(n){e.$applyAsync(function(){switch(Pd.Shared.LogToConsoleIfDebug("wsAffairController.callbackSync: fired with '"+n+"'",!0),n){case"Businesses":a();break;case"Cosigners":0==e.cosigners.length&&t.cosigners.length>0&&(e.cosigners=t.cosigners);break;case"Objectives":Pd.Shared.AffairChronologyBlockSpecificInformationLinking(),e.loadedObjectives=!0,a();break;case"Bills":e.businesses.length>0?e.expandChronology=l(e.businesses[0]):e.expandChronology=!1,e.loadedBills=!0,a();break;case"ExtendedBusinessRoles":e.loadedExtendedBusinessRoles=!0,a();break;case"BusinessRoles":e.loadedBusinessRoles=!0,a()}})}function a(){var n=e.businesses.length>0&&1==e.loadedBusinessRoles&&1==e.loadedExtendedBusinessRoles&&1!=e.businesses[0].BusinessType,s=e.businesses.length>0&&1==e.businesses[0].BusinessType&&1==e.loadedObjectives&&1==e.loadedBills;Pd.Shared.LogToConsoleIfDebug("wsAffairController.syncSpinner: nonParliamentaryInitiativeReady: ["+n+"]:  ("+(e.businesses.length>0)+", "+(1==e.loadedBusinessRoles)+", "+(1==e.loadedExtendedBusinessRoles)+", "+(e.businesses.length>0&&1!=e.businesses[0].BusinessType)+") ",!0),Pd.Shared.LogToConsoleIfDebug("wsAffairController.syncSpinner: parliamentaryInitiativeReady: ["+s+"]:  ("+(e.businesses.length>0)+", "+(e.businesses.length>0&&1==e.businesses[0].BusinessType)+", "+(1==e.loadedObjectives)+", "+(1==e.loadedBills)+") ",!0),(n||s)&&(e.spinner=!1)}function r(){var n=angular.element("div[id*='"+e.angularContainer+"']");n.length>0&&n.show()}function l(e){if(null==e||null==e.Bills)return!1;var n=[];return angular.forEach(e.Bills,function(e){e.BillNumber>0&&this.push(e)},n),1==n.length}e.init=function(n){e.params=n},e.trustSrc=function(e){return n.trustAsResourceUrl(e)},e.businesses=[],e.results=[],e.cosigners=[],e.tagNames=[],e.spinner=!0,e.alSpinner=!1,e.links=[],e.Res=Res,e.Pd=Pd,e.moment=moment,e.data_language=Pd.Language.GetCurrentLanguage(),e.reqParams=Pd.Utility.GetUrlParameters(),e.affairId=e.reqParams.AffairId,e.showBlock={},e.disableExecution=!1,e.callbackSync=o,e.loadedObjectives=!1,e.loadedBusinessRoles=!1,e.loadedExtendedBusinessRoles=!1,e.loadedBills=!1,e.expandChronology=!1;var u=function(e){var n=e[0];return Pd.Utility.StringIsNullOrEmpty(n.TagNames)?[]:n.TagNames.split("|")};e.setShowBlock=function(n,s){e.showBlock[n]=s},e.getEntityRecordMapping=function(n,s,t,i,o){(null==e.disableExecution||1!=e.disableExecution)&&Pd.EntityMappings.GetEntityRecordMapping(n,s,t).then(function(n){e.$applyAsync(function(){for(var s="",t=0;t<n[0].length;t++)if(n[0][t].language==e.data_language.toLowerCase()){s=n[0][t].url;break}e[i]=s,o&&e.$eval(o)})})},e.getRatsunterlagenQuery=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getRatsunterlagenQueryInternal");var n="0x010100E124ACA3FE894F93AFA3B443EE4CB9AF*",s='{0}:"{1}"'.format(Pd.Utility.ManagedProperties.PdEParlLanguage,!0),t='-{0}:"{1}"'.format(Pd.Utility.ManagedProperties.PdDoctype,Res.documentTypePreliminaryPublicationPAIV.replace(/'/g," ")),i='-{0}:"{1}"'.format(Pd.Utility.ManagedProperties.PdDoctype,Res.documentTypePreliminaryPublication.replace(/'/g," ")),o='-{0}:"{1}"'.format(Pd.Utility.ManagedProperties.PdDoctype,Res.documentTypeInitiativeFulfillmentReport.replace(/'/g," ")),a={querytext:{ContentTypeId:n,PdAffairId:e,freetext:"{0} AND {1} AND {2} AND {3}".format(s,t,i,o)},trimduplicates:!1,selectproperties:["Title"],rowlimit:1};return a},e.getSPSearchQueryResults=function(n,s){var t=Pd.Angular.ExecuteSPSearchQuery(n);t.then(function(n){e[s]=n,e.$applyAsync(function(){})},function(e){Pd.Shared.LogToConsoleIfDebug(e)})},e.greaterThan=function(e,n){return function(s){return s[e]>n}},e.lowerThan=function(e,n){return function(s){return s[e]<n}},e.getSPSearchQueryResultsToArray=function(n,s,t){var i=Pd.Angular.ExecuteSPSearchQuery(n);i.then(function(n){"undefined"==typeof e[s]&&(e[s]=new Array),e[s][t]=n},function(e){Pd.Shared.LogToConsoleIfDebug(e)})},e.setNotificationSubscriptionButtonVisibility=function(e){Pd.Shared.LogToConsoleIfDebug("wsAffairController.setNotificationSubscriptionButtonVisibility",!0);var n=!1;14===e.BusinessType&&(n=!0),-1!==[25,26,27].indexOf(e.BusinessStatus)&&(n=!0),n&&Pd.Shared.HideNotificationSubscriptionButton()},i();var d=e.templatePath;e.$watch("spinner",function(e,n){n===!0&&e===!1&&setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(d)},200)})}])}(PdCustomJs);
/*** End wsAffairController.min.js ***/
/*** Start wsCouncilorController.min.js ***/
!function(e){app.controller("CouncilorController",["$scope","$sce","councilorService","$filter",function(e,t,n,r){"use strict";function i(){return a(),Pd.Utility.StringIsNullOrEmpty(e.councilorId)||isNaN(e.councilorId)?(Pd.Shared.LogToConsoleIfDebug("CouncilorController.getResults: councilorId not valid, not processing further "),void e.$applyAsync(function(){e.spinner=!1,l()})):(n.getCouncilor(e.councilorId,e.data_language,e.callbackSync).then(function(t){e.$applyAsync(function(){e.councilors=t,e.results=t,e.spinner=!1,Pd.Utility.ExecuteWhenPageReady(function(){d()})})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)}),s(e.councilorId,"#ngLatestSubjects","subjects"),void setTimeout(function(){1==e.spinner&&e.$applyAsync(function(){e.spinner=!1})},1e4))}function o(t){e.$applyAsync(function(){})}function a(){var t=angular.element("div[id*='"+e.angularContainer+"']");t.length>0&&t.show()}e.init=function(t){e.params=t},e.trustSrc=function(e){return t.trustAsResourceUrl(e)},e.councilors=[],e.results=[],e.spinner=!0,e.Res=Res,e.Pd=Pd,e.moment=moment,e.data_language=Pd.Language.GetCurrentLanguage(),e.reqParams=Pd.Utility.GetUrlParameters(),e.councilorId=e.reqParams.CouncillorId,e.historicalLexiconYear=Pd.Config.Metagrid.HistoricalLexiconYear,e.historicalLexiconUrl="",Pd.Utility.StringIsNullOrEmpty(e.councilorId)&&(e.councilorId=Pd.Utility.GetRewrittenUrlParameter("CouncillorId")),e.showBlock={},e.disableExecution=!1,e.callbackSync=o,e.redirectToPrintServer=function(t){var n=function(e,t){return Pd.Print.GetPrintingConfiguration("MemberCouncil","Page").Url.format(e,t)};"undefined"!=typeof t&&t.preventDefault();var r=n(e.councilorId,e.data_language);window.open(r,"_blank")},e.getEntityRecordMapping=function(t,n,r,i,o){(null==e.disableExecution||1!=e.disableExecution)&&Pd.EntityMappings.GetEntityRecordMapping(t,n,r).then(function(t){e.$applyAsync(function(){for(var n="",r=0;r<t[0].length;r++)if(t[0][r].language==e.data_language.toLowerCase()){n=t[0][r].url;break}e[i]=n,o&&e.$eval(o)})})},e.getSPSearchQueryResults=function(t,n){var r=Pd.Angular.ExecuteSPSearchQuery(t);r.then(function(t){e[n]=t,e.$applyAsync(function(){})},function(e){Pd.Shared.LogToConsoleIfDebug(e)})},e.getCuriaVistaExplainedLink=function(){var e=Pd.Language.GetCurrentLanguage().toLowerCase(),t="/{0}/ratsbetrieb/curia-vista/curia-vista-erklaert".format(e);switch(e){case"de":t="/de/ratsbetrieb/curia-vista/curia-vista-erklaert";break;case"fr":t="/fr/ratsbetrieb/curia-vista/curia-vista-expliquee";break;case"it":t="/it/ratsbetrieb/curia-vista/curia-vista-spiegata";break;case"rm":t="/rm/ratsbetrieb/curia-vista/curia-vista-declera";break;case"en":t="/en/ratsbetrieb/curia-vista/curia-vista-explained"}return t},e.getHistoricalLexiconLink=function(t){t.Persons.length<=0||!t.Persons[0].DateOfBirth||t.Persons[0].DateOfBirth.getFullYear()>e.historicalLexiconYear||n.getHistoricalLexicon(t.PersonNumber).then(function(t){e.$applyAsync(function(){e.historicalLexiconUrl=t.HLS})},function(e){Pd.Shared.LogToConsoleIfDebug(e)})};var s=function(t,n,r){Pd.Shared.LogToConsoleIfDebug("CouncilorController.getLatestSubjectsByCouncilorId");var i={querytext:{PdLanguage:Pd.Language.GetCurrentLanguage()},sortlist:{PdSubjectMeetingDate:"descending",PdSubjectMeetingTime:"descending"},trimduplicates:!1,selectproperties:[Pd.Utility.ManagedProperties.PdAffairIdFormatted,Pd.Utility.ManagedProperties.PdSubjectId,Pd.Utility.ManagedProperties.PdSubjectMeetingDate,Pd.Utility.ManagedProperties.PdSubjectMeetingTime,Pd.Utility.ManagedProperties.PdAffairTypeName,"Title"],rowlimit:4};i.querytext[Pd.Utility.ManagedProperties.PdSubjectSpeakerPersonNumbers]=t;var o=Pd.Angular.ExecuteSPSearchQuery(i);o.then(function(t){e.$applyAsync(function(){e[r]=t})},function(e){Pd.Shared.LogToConsoleIfDebug(e)})};e.setShowBlock=function(t,n){e.showBlock[t]=n},e.greaterThan=function(e,t){return function(n){return n[e]>t}},e.lowerThan=function(e,t){return function(n){return n[e]<t}},e.groupByDateRangeWhere=function(t,n,r,i,o,a){if(e[a])return e[a].length>0?!0:!1;var s=[],c=null,u=null;return angular.forEach(t,function(e,a){var s=null;if(0===a?(c=e[i],u=e[o],1===t.length&&this.push({start:c,end:u})):s=t[a-1],s){var l=moment(s[r]),d=moment(e[n]);d.diff(l,"days")<=1?u=e[o]:(this.push({start:c,end:u}),c=e[i],u=e[o]),a===t.length-1&&this.push({start:c,end:u})}},s),e[a]=s,e[a].length>0?!0:!1},i();var c=e.templatePath;e.$watch("spinner",function(e,t){t===!0&&e===!1&&l()});var u=function(){Pd.Shared.HideNotificationSubscriptionButton()},l=function(){setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(c)},200),0===e.councilors.length&&u(),1===e.councilors.length&&e.councilors[0].Active===!1&&u()},d=function(){if(Pd.Shared.LogToConsoleIfDebug("CouncilorController.generateCouncillorJsonLinkedData"),0==e.councilors.length)return void Pd.Shared.LogToConsoleIfDebug("CouncilorController.generateCouncillorJsonLinkedData: no data");var t=e.councilors[0],n=Pd.Utility.JsonLinkedData.CreateJsonObject("Person");if(Pd.Utility.JsonLinkedData.SetPropertyIfValueExists(n,"familyName",t.LastName),Pd.Utility.JsonLinkedData.SetPropertyIfValueExists(n,"givenName",t.FirstName),Pd.Utility.JsonLinkedData.FilterSortConcat(n,"jobTitle",t.Persons[0].PersonOccupations,r,{EndDate:""},!1,"StartDate",!0,"OccupationName"),Pd.Utility.JsonLinkedData.FilterSortConcat(n,"email",t.Persons[0].PersonCommunications,r,{CommunicationType:3},!0,"Address",!0,"Address"),Pd.Utility.JsonLinkedData.FilterSortConcat(n,"url",t.Persons[0].PersonCommunications,r,{CommunicationType:2},!0,"Address",!0,"Address"),Pd.Utility.JsonLinkedData.PushMemberOfProperty(n,"memberOf","Organization",t.ParlGroupName,t.ParlGroupAbbreviation),Pd.Utility.JsonLinkedData.PushMemberOfProperty(n,"memberOf","Organization",t.PartyName,t.PartyAbbreviation),Pd.Utility.StringIsNullOrEmpty(t.CantonName)||(n.address={"@type":"PostalAddress",addressLocality:t.CantonName}),Pd.Utility.JsonLinkedData.AddPersonAddress(n,"homeLocation",r("filter")(t.Persons[0].PersonAddresses,{AddressType:1},!0)),Pd.Utility.JsonLinkedData.AddPersonAddress(n,"workLocation",r("filter")(t.Persons[0].PersonAddresses,{AddressType:2},!0)),!Pd.Utility.StringIsNullOrEmpty(e.councilorSmallImageLink)){var i=e.councilorSmallImageLink.format(t.PersonIdCode);i=Pd.Config.Urls.WwwUrl+i,n.image=i}Pd.Utility.JsonLinkedData.AddScriptToPage(n)}}])}(PdCustomJs);
/*** End wsCouncilorController.min.js ***/
/*** Start wsLiveStreamingController.min.js ***/
!function(){app.controller("LiveStreamingController",["$scope","$sce","$q","SessionsMeetingsService",function($scope,$sce,$q,$sessionMeetingService){"use strict";function liveStreamingInit(){var e=Pd.Utility.GetUrlParameters();setUrlParametersInScope(e),angular.element(".video-description-area").hide(),angular.element(".play-pause").hide(),angular.element(".au-dropdown").hide(),angular.element("#"+$scope.angularContainer).show(),0!=$scope._fullScreenHandled||document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||(window.addEventListener("message",handleMessageForLiveStreaming,!1),$scope._fullScreenHandled=!0),$scope.currentDate=$scope.calculateLiveStreamingIntervalDate($scope.data_request_currentDate),$scope.initialDate=$scope.calculateLiveStreamingIntervalDate(),$scope.initialCurrentDate=moment($scope.currentDate),$scope.syncLiveStreamingInfo(.45),$scope.checkLiveStreamingInfoChanged(.5),spManager.executeQuery(breeze.EntityQuery.from(liveStreamingSpeakersType.defaultResourceName).top(5)).then(function(e){$scope.$applyAsync(function(){$scope.liveStreamingInfo=e.results,$scope.liveStreamingProcessInfo()})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.liveStreamingInit: Error: "+e)}),$scope.getEntityRecordMapping("LiveStreaming","DetailUrl","NR","programNrLink"),$scope.getEntityRecordMapping("LiveStreaming","DetailUrl","SR","programSrLink"),$scope.getEntityRecordMapping("Councilor","SmallPicture","0","councilorSmallImageLink")}function disableExecutionSessionMode(){if($scope.angularContainer&&angular.element("#"+$scope.angularContainer).length>0&&angular.element("#"+$scope.angularContainer).children().length>0){var e=angular.element("#"+$scope.angularContainer).children().first().attr("data-session-mode");(e&&"true"==e&&0==Pd.Angular.IsSessionMode()||e&&"false"==e&&1==Pd.Angular.IsSessionMode())&&($scope.disableExecution=!0)}}function getResults(){if(null==$scope.disableExecution||1!=$scope.disableExecution){var e="",n=angular.element("input[type='hidden'][id*='"+$scope.datasource+"']"),o=$scope.datatype.toLowerCase();if(n.length>0)switch(e=n.val(),o){case"breeze":dataBindWsCall(e);break;case"odata":dataBindODataCall(e)}else jQuery.ajax({url:"/Smart Data Library/Data Sources/"+$scope.datasource,async:!1,cache:!1,contentType:"text/plain"}).always(function(e){switch(o){case"breeze":dataBindWsCall(e);break;case"odata":dataBindODataCall(e)}})}}function setUrlParametersInScope(e){for(var n in e)$scope["data_request_"+n]||($scope["data_request_"+n]=decodeURIComponent(e[n]))}function replaceValueInRequest(e){var n=Pd.Utility.GetUrlParameters();setUrlParametersInScope(n);for(var o in $scope)if(0==o.toLowerCase().indexOf("data_request_")){var r=o.split("data_request_")[1];r&&""!=r&&n&&n[r]&&(e=Pd.Utility.GloballyReplaceString(e,"{data_"+r+"}",n[r]))}for(var o in $scope)0==o.toLowerCase().indexOf("data_")&&(e=Pd.Utility.GloballyReplaceString(e,"{"+o+"}",$scope[o]));return e}function savePersistedVariables(){var e={};for(var n in $scope)0==n.toLowerCase().indexOf("data_persisted_")&&(e[n]=$scope[n]);return e}function restorePersistedVariables(e){for(var n in e)$scope[n]=e[n]}function dataBindWsCall(dataContent){var currentTemplate=$scope.templatePath,persistedVariables=savePersistedVariables();dataContent=replaceValueInRequest(dataContent);var datasource=eval(dataContent);datasource&&(manager.executeQuery(datasource).then(function(e){$scope.$applyAsync(function(){$scope.results=e.results,$scope.infoLoaded=!0}),restorePersistedVariables(persistedVariables),setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(currentTemplate)},3e3)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)}),showAngularContainer())}function dataBindODataCall(e){var n=savePersistedVariables();e=replaceValueInRequest(e),OData.read(e,function(e){$scope.$applyAsync(function(){$scope.results=e.results,$scope.infoLoaded=!0}),restorePersistedVariables(n)}),showAngularContainer()}function showAngularContainer(){var e=angular.element("div[id*='"+$scope.angularContainer+"']");e.length>0&&e.show(),"Smart Data Library/Templates/wsSessionsLiveStreaming.html"==$scope.templatePath&&(angular.element(".video-description-area").css("display",""),angular.element(".play-pause").css("display",""),angular.element(".au-dropdown").css("display",""))}$scope.init=function(e){$scope.params=e},$scope.trustSrc=function(e){return $sce.trustAsResourceUrl(e)},$scope.state={init:0,loading:1,loaded:2,empty:3,error:4},$scope.results=[],$scope.links=[],$scope.Res=Res,$scope.Pd=Pd,$scope.moment=moment,$scope.showBlock={},$scope.disableExecution=!1,$scope._fullScreenHandled=!1,$scope.delayLoad=!0,$scope.infoLoaded=!1,$scope.currentDate=null,$scope.initialDate=null,$scope.initialCurrentDate=null,$scope.showSessions=!0,$scope.loadedSr=!1,$scope.loadedNr=!1,$scope.nrDisplyMode="init",$scope.srDisplyMode="init",$scope.showNr=!0,$scope.showSr=!0,$scope.nrSelectedAudio=0,$scope.nrNeedsUpdate=!1,$scope.srNeedsUpdate=!1,$scope.nrResetMode=!1,$scope.srResetMode=!1,$scope.playingModeNr=!1,$scope.playingModeSr=!1,$scope.data_language=Pd.Language.GetCurrentLanguage(),$scope.nrNextMeeting={state:$scope.state.init,data:null},$scope.srNextMeeting={state:$scope.state.init,data:null};var populateProfileUrl=function(e){var n=$q.defer();if(0===e.results.length)return n.resolve(e),n.promise;var o="",r=e.results[0];switch(r.MembersCouncil.Council){default:o=Pd.Utility.GetCouncillorFriendlyUrl(r.FirstName,r.LastName,r.PersonNumber),e.results[0].ProfileUrl=o,n.resolve(e);break;case 99:Pd.EntityMappings.GetEntityRecordMapping("FederalCouncil","DetailUrl",r.PersonNumber).then(function(r){for(var t=0;t<r[0].length;t++)if(r[0][t].language==$scope.data_language.toLowerCase()){o=r[0][t].url;break}e.results[0].ProfileUrl=o,n.resolve(e)})}return n.promise};$scope.setShowBlock=function(e,n){$scope.showBlock[e]=n},$scope.getSPSearchQueryResults=function(e,n){var o=Pd.Angular.ExecuteSPSearchQuery(e);o.then(function(e){$scope[n]=e},function(e){Pd.Shared.LogToConsoleIfDebug(e)})},$scope.getSPSearchQueryResultsToArray=function(e,n,o){var r=Pd.Angular.ExecuteSPSearchQuery(e);r.then(function(e){"undefined"==typeof $scope[n]&&($scope[n]=new Array),$scope[n][o]=e},function(e){Pd.Shared.LogToConsoleIfDebug(e)})},$scope.getEntityRecordMapping=function(e,n,o,r,t){(null==$scope.disableExecution||1!=$scope.disableExecution)&&Pd.EntityMappings.GetEntityRecordMapping(e,n,o).then(function(e){$scope.$applyAsync(function(){for(var n="",o=0;o<e[0].length;o++)if(e[0][o].language==$scope.data_language.toLowerCase()){n=e[0][o].url;break}$scope[r]=n,t&&$scope.$eval(t)})})},$scope.greaterThan=function(e,n){return function(o){return o[e]>n}},$scope.lowerThan=function(e,n){return function(o){return o[e]<n}},$scope.groupByDateRangeWhere=function(e,n,o,r,t,a){if($scope[a])return $scope[a].length>0?!0:!1;var s=[],i=null,c=null;return angular.forEach(e,function(a,s){var l=null;if(0===s?(i=a[r],c=a[t],1===e.length&&this.push({start:i,end:c})):l=e[s-1],l){var p=moment(l[o]),u=moment(a[n]);u.diff(p,"days")<=1?c=a[t]:(this.push({start:i,end:c}),i=a[r],c=a[t]),s===e.length-1&&this.push({start:i,end:c})}},s),$scope[a]=s,$scope[a].length>0?!0:!1},$scope.getItemIdOrEmpty=function(e){return angular.isUndefined(e)||null==e||angular.isUndefined(e.ID)||null==e.ID?"":e.ID},$scope.executeWsQuery=function(dataContent,scopeVar,callbackCode){if(null==$scope.disableExecution||1!=$scope.disableExecution){var currentTemplate=$scope.templatePath;dataContent=replaceValueInRequest(dataContent);var datasource=eval(dataContent);datasource&&manager.executeQuery(datasource).then(function(e){$scope.$applyAsync(function(){$scope[scopeVar]=e.results,callbackCode&&$scope.$eval(callbackCode)}),setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(currentTemplate)},3e3)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)})}},$scope.executeSpQuery=function(dataContent,scopeVar,callbackCode){if(null==$scope.disableExecution||1!=$scope.disableExecution){dataContent=replaceValueInRequest(dataContent);var currentTemplate=$scope.templatePath,datasource=eval(dataContent);datasource&&spManager.executeQuery(datasource).then(function(e){$scope.$applyAsync(function(){$scope[scopeVar]=e.results,callbackCode&&$scope.$eval(callbackCode)}),Pd.Angular.ExecuteScriptsForTemplate(currentTemplate)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e)})}},disableExecutionSessionMode(),$scope.liveStreamingExtractPlayerUrl=function(e){var n;return n=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],n=n.split(":")[0],"https://"+n},window.handleMessageForLiveStreaming=function(e){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.handleMessageForLiveStreaming");var n=document.getElementsByTagName("html")[0],o=JSON.parse(e.data),r=jQuery("iframe[src*='http']",jQuery(".video").parents(".video-player"));"on"===o["simplex.fullscreen"]&&r.length>0?(r[0].classList.add("pd-iframe-fullscreen-ie"),n.classList.add("no-scrolling"),r.parents(".video")[0].classList.add("fullscreen-mode")):(r[0].classList.remove("pd-iframe-fullscreen-ie"),n.classList.remove("no-scrolling"),r.parents(".video")[0].classList.remove("fullscreen-mode"))},$scope.setLiveStreamingUrlParams=function(e,n,o,r){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.setLiveStreamingUrlParams");var t=!1;if(angular.element(e).attr("src")&&-1!=angular.element(e).attr("src").toLowerCase().indexOf(n.toLowerCase())&&""!=n||(angular.element(e).attr("src",n),t=!0),null!=r&&r.length>0&&null!=o&&o.length>0){var a=angular.element(e)[0].contentWindow,s="";if(null!=r[0].MembersCouncil){var i=null!=r[0].MembersCouncil.CouncilName?r[0].MembersCouncil.CouncilName:"",c=null!=r[0].MembersCouncil.CantonName&&99!=r[0].MembersCouncil.Council?r[0].MembersCouncil.CantonName:"",l=null!=r[0].MembersCouncil.ParlGroupName?r[0].MembersCouncil.ParlGroupName:"";s=" ("+i+(""!=c?", "+c:"")+(""!=l?", "+l:"")+")"}var p={businessId:o[0].BusinessShortNumber,businessTitle:o[0].Title,member:r[0].LastName+" "+r[0].FirstName+s},u=JSON.stringify(p),d=$scope.liveStreamingExtractPlayerUrl(n.toString());if("#simplex_player_sr"==e&&($scope.playingModeSr=!0),"#simplex_player_nr"==e&&($scope.playingModeNr=!0),t)setTimeout(function(){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.setLiveStreamingUrlParams :: player loaded, 5 second delay, posting data");try{a.postMessage(u,d)}catch(e){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.setLiveStreamingUrlParams : Error while posting data: "+e)}},5e3);else{Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.setLiveStreamingUrlParams :: posting data");try{a.postMessage(u,d)}catch(g){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.setLiveStreamingUrlParams : Error while posting data: "+g)}}}},$scope.liveStreamingProcessInfo=function(){$scope.isNrLiveStreaming=null,$scope.isSrLiveStreaming=null;for(var e=0;e<$scope.liveStreamingInfo.length;e++)"1"==$scope.liveStreamingInfo[e].Council&&($scope.isNrLiveStreaming=$scope.liveStreamingInfo[e]),"2"==$scope.liveStreamingInfo[e].Council&&($scope.isSrLiveStreaming=$scope.liveStreamingInfo[e]);$scope.liveStreamingRefreshWindow($scope)},$scope.syncLiveStreamingProcessInfo=function(){for(var e=!1,n=!1,o=0;o<$scope.liveStreamingInfoToSync.length;o++)"1"==$scope.liveStreamingInfoToSync[o].Council&&(1!=$scope.playingModeNr||null!=$scope.isNewNrLiveStreaming&&$scope.liveStreamingInfoToSync[o].Modified==$scope.isNewNrLiveStreaming.Modified||($scope.isNewNrLiveStreaming=$scope.liveStreamingInfoToSync[o],$scope.nrNeedsUpdate=!0,$scope.isNrLiveStreaming=$scope.isNewNrLiveStreaming,$scope.loadedNr=!1,$scope.requestStreamingInfo("NR")),e=!0),"2"==$scope.liveStreamingInfoToSync[o].Council&&(1!=$scope.playingModeSr||null!=$scope.isNewSrLiveStreaming&&$scope.liveStreamingInfoToSync[o].Modified==$scope.isNewSrLiveStreaming.Modified||($scope.isNewSrLiveStreaming=$scope.liveStreamingInfoToSync[o],$scope.srNeedsUpdate=!0,$scope.isSrLiveStreaming=$scope.isNewSrLiveStreaming,$scope.loadedSr=!1,$scope.requestStreamingInfo("SR")),n=!0);e||null==$scope.isNrLiveStreaming||($scope.isNewNrLiveStreaming=null,$scope.nrNeedsUpdate=!0,$scope.isNrLiveStreaming=null),n||null==$scope.isSrLiveStreaming||($scope.isNewSrLiveStreaming=null,$scope.srNeedsUpdate=!0,$scope.isSrLiveStreaming=null),$scope.liveStreamingRefreshWindow($scope)},$scope.liveStreamingRefreshWindow=function(){$scope.playNr!==!0&&($scope.nrDisplyMode=null==$scope.isNrLiveStreaming?"init":"play",$scope.showSessions=!0),$scope.playSr!==!0&&($scope.srDisplyMode=null==$scope.isSrLiveStreaming?"init":"play",$scope.showSessions=!0)},$scope.loadStreamingInfo=function(e){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.loadStreamingInfo({0})".format(e)),"NR"==e&&$scope.playNr&&1==$scope.loadedMCNr&&1==$scope.loadedANr&&($scope.setLiveStreamingUrlParams("#simplex_player_nr",$scope.getAudioLiveaStreamingUrl(),$scope.affairNr,$scope.memberCouncilNr,!1),null!=$scope.memberCouncilNr&&$scope.memberCouncilNr.length>0&&$scope.setImageSource("#currentNrImageProfile",$scope.councilorSmallImageLink.format($scope.memberCouncilNr[0].PersonIdCode),!0),$scope.loadedNr=!0,$scope.playNr=!0,$scope.showNr=!0),"SR"==e&&$scope.playSr&&1==$scope.loadedMCSr&&1==$scope.loadedASr&&($scope.setLiveStreamingUrlParams("#simplex_player_sr",Pd.Config.LiveStreaming.SrLiveUrlOriginal,$scope.affairSr,$scope.memberCouncilSr,!1),null!=$scope.memberCouncilSr&&$scope.memberCouncilSr.length>0&&$scope.setImageSource("#currentSrImageProfile",$scope.councilorSmallImageLink.format($scope.memberCouncilSr[0].PersonIdCode),!0),$scope.loadedSr=!0,$scope.playSr=!0,$scope.showSr=!0)},$scope.requestStreamingInfo=function(e){"NR"==e&&($scope.playingModeNr||($scope.showNr=!1),$scope.loadedNr?$scope.showNr=!0:($scope.memberCouncilNr=null,null!=$scope.isNrLiveStreaming&&null!=$scope.isNrLiveStreaming.MemberCouncilId?($scope.loadedMCNr=!1,manager.executeQuery(breeze.EntityQuery.from("Person").where("ID","==",$scope.isNrLiveStreaming.MemberCouncilId).where("Language","==",$scope.data_language).expand("MembersCouncil")).then(function(e){populateProfileUrl(e).then(function(e){$scope.$applyAsync(function(){$scope.memberCouncilNr=e.results,$scope.loadedMCNr=!0,$scope.loadStreamingInfo("NR")})})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.requestStreamingInfo: Error: "+e)})):$scope.loadedMCNr=!0,$scope.affairNr=null,null!=$scope.isNrLiveStreaming&&null!=$scope.isNrLiveStreaming.AffairId?($scope.loadedANr=!1,manager.executeQuery(breeze.EntityQuery.from("Business").where("ID","==",$scope.isNrLiveStreaming.AffairId).where("Language","==",$scope.data_language)).then(function(e){$scope.$applyAsync(function(){$scope.affairNr=e.results,$scope.loadedANr=!0,$scope.loadStreamingInfo("NR")})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.requestStreamingInfo: Error: "+e)})):$scope.loadedANr=!0)),"SR"==e&&($scope.playingModeSr||($scope.showSr=!1),$scope.loadedSr?$scope.showSr=!0:($scope.memberCouncilSr=null,null!=$scope.isSrLiveStreaming&&null!=$scope.isSrLiveStreaming.MemberCouncilId?($scope.loadedMCSr=!1,manager.executeQuery(breeze.EntityQuery.from("Person").where("ID","==",$scope.isSrLiveStreaming.MemberCouncilId).where("Language","==",$scope.data_language).expand("MembersCouncil")).then(function(e){populateProfileUrl(e).then(function(e){$scope.$applyAsync(function(){$scope.memberCouncilSr=e.results,$scope.loadedMCSr=!0,$scope.loadStreamingInfo("SR")})})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.requestStreamingInfo: Error: "+e)})):$scope.loadedMCSr=!0,$scope.affairSr=null,null!=$scope.isSrLiveStreaming&&null!=$scope.isSrLiveStreaming.AffairId?($scope.loadedASr=!1,manager.executeQuery(breeze.EntityQuery.from("Business").where("ID","==",$scope.isSrLiveStreaming.AffairId).where("Language","==",$scope.data_language)).then(function(e){$scope.$applyAsync(function(){$scope.affairSr=e.results,$scope.loadedASr=!0,$scope.loadStreamingInfo("SR")})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.requestStreamingInfo: Error: "+e)})):$scope.loadedASr=!0))},$scope.setImageSource=function(e,n,o){angular.element(e).attr("src",n),o&&angular.element(e).show()},$scope.syncLiveStreamingInfo=function(e){$scope&&($scope.liveStreamingCalculateCurrentDate($scope),$scope.nrNeedsUpdate&&(spManager.executeQuery(breeze.EntityQuery.from(liveStreamingSpeakersType.defaultResourceName).top(5)).then(function(e){$scope.$applyAsync(function(){$scope.liveStreamingInfo=e.results,$scope.liveStreamingProcessInfo()})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.syncLiveStreamingInfo: Error: "+e)}),$scope.$applyAsync(function(){$scope.isNrLiveStreaming=$scope.isNewNrLiveStreaming,$scope.nrNeedsUpdate=!1})),$scope.srNeedsUpdate&&(spManager.executeQuery(breeze.EntityQuery.from(liveStreamingSpeakersType.defaultResourceName).top(5)).then(function(e){$scope.$applyAsync(function(){$scope.liveStreamingInfo=e.results,$scope.liveStreamingProcessInfo()})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.syncLiveStreamingInfo: Error: "+e)}),$scope.$applyAsync(function(){$scope.isSrLiveStreaming=$scope.isNewSrLiveStreaming,$scope.srNeedsUpdate=!1}))),setTimeout(function(){$scope.syncLiveStreamingInfo(e)},6e4*e)},$scope.refreshMainLiveStreaming=function(e){$scope.liveStreamingCalculateCurrentDate(),spManager.executeQuery(breeze.EntityQuery.from(liveStreamingSpeakersType.defaultResourceName).top(5)).then(function(e){$scope.$applyAsync(function(){$scope.liveStreamingInfo=e.results,$scope.liveStreamingProcessInfo()})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.refreshMainLiveStreaming: Error: "+e)}),$scope.loadedNr||$scope.loadedSr||setTimeout(function(){$scope.refreshMainLiveStreaming(e)},6e4*e)},$scope.liveStreamingCalculateCurrentDate=function(){var e=moment(),n=e.seconds(10*Math.floor(e.seconds()/10)).utc("+0100"),o=moment.duration(n.diff($scope.initialDate)),r=o.asSeconds();$scope.currentDate=$scope.initialCurrentDate.clone(),$scope.currentDate.add(r,"seconds"),$scope.currentDate.seconds(10*Math.floor($scope.currentDate.seconds()/10)).toISOString()},$scope.getAudioLiveaStreamingUrl=function(){var e=Pd.Config.LiveStreaming.NrLiveUrlOriginal;switch($scope.nrSelectedAudio){case 1:e=Pd.Config.LiveStreaming.NrLiveUrlDe;break;case 2:e=Pd.Config.LiveStreaming.NrLiveUrlFr;break;case 3:e=Pd.Config.LiveStreaming.NrLiveUrlIt}return e},$scope.calculateLiveStreamingIntervalDate=function(e){var n=moment();return e?(n=moment(e,"YYYY-MM-DD HH:mm:ss"),n.seconds(10*Math.floor(n.seconds()/10))):n.seconds(10*Math.floor(n.seconds()/10)),n.utc("+0100").toISOString()},$scope.checkLiveStreamingInfoChanged=function(e){$scope&&!$scope.delayLoad&&($scope.liveStreamingCalculateCurrentDate(),($scope.loadedNr||$scope.loadedSr)&&spManager.executeQuery(breeze.EntityQuery.from(liveStreamingSpeakersType.defaultResourceName).top(5)).then(function(e){$scope.$applyAsync(function(){$scope.liveStreamingInfoToSync=e.results,$scope.syncLiveStreamingProcessInfo()})}).fail(function(e){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.requestStreamingInfo: Error: "+e)})),$scope.delayLoad=!1,setTimeout(function(){$scope.checkLiveStreamingInfoChanged(e)},6e4*e)},Pd.Angular.IsSessionMode()&&liveStreamingInit(),$scope.infoLoaded=!0,showAngularContainer(),$scope.$on("$includeContentLoaded",function(e,n){setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(n)},3e3)}),$scope.getSessionHeader=function(){return Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.getSessionHeader",!0),window.sessionHeader[Pd.Language.GetCurrentLanguage().toLowerCase()]},$scope.getSessionTime=function(){return Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.getSessionTime",!0),window.sessionTime[Pd.Language.GetCurrentLanguage().toLowerCase()]},$scope.nrGetNextMeeting=function(){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.nrGetNextMeeting",!0),$sessionMeetingService.getNextMeeting("Nationalrat").then(function(e){$scope.$applyAsync(function(){0===e.results.length||Pd.Utility.StringIsNullOrEmpty(e.results[0].MeetingDate)?$scope.nrNextMeeting.state=$scope.state.empty:($scope.nrNextMeeting.state=$scope.state.loaded,$scope.nrNextMeeting.data=e.results[0].MeetingDate)})})["catch"](function(e){$scope.$applyAsync(function(){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.nrGetNextMeeting: Error: "+e),$scope.nrNextMeeting.state=$scope.state.error})})},$scope.srGetNextMeeting=function(){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.srGetNextMeeting",!0),$sessionMeetingService.getNextMeeting("StÃ¤nderat").then(function(e){$scope.$applyAsync(function(){0===e.results.length||Pd.Utility.StringIsNullOrEmpty(e.results[0].MeetingDate)?$scope.srNextMeeting.state=$scope.state.empty:($scope.srNextMeeting.state=$scope.state.loaded,$scope.srNextMeeting.data=e.results[0].MeetingDate)})})["catch"](function(e){$scope.$applyAsync(function(){Pd.Shared.LogToConsoleIfDebug("LiveStreamingController.srGetNextMeeting: Error: "+e),$scope.srNextMeeting.state=$scope.state.error})})}}])}();
/*** End wsLiveStreamingController.min.js ***/
/*** Start wsABStructuredNavigationController.min.js ***/
!function(e){app.controller("wsABStructuredNavigationController",["$scope","$q","$timeout","abStructuredNavigationService",function(t,n,a,o){"use strict";t.init=function(e){t.params=e};var s=0,r=function(n){return t.NavigationOpen?void a(function(){var t=e("#structured-nav .list-container"+n+" li a.active");if(1==t.length){var a=t.parent("li").height(),o=t.parents("div.mCustomScrollBox").height(),s=t[0].offsetTop,r=o-s-a,i=r-Math.round(o/2);if(0>r||0>i){var u=t.parents(".mCSB_container").height();0>i&&Math.abs(i)<=u&&(r=i,Pd.Shared.LogToConsoleIfDebug("wsABStructuredNavigationController.scrollListToActiveNode: scrolling list to active node, centered;",!0)),Pd.Shared.LogToConsoleIfDebug("wsABStructuredNavigationController.scrollListToActiveNode: scrolling list to active node and updating scrollbar",!0),t.parents("div.mCSB_container").animate({top:r+"px"},0),t.parents(".list-container").mCustomScrollbar("update")}}},200):void Pd.Shared.LogToConsoleIfDebug("wsABStructuredNavigationController.scrollListToActiveNode: navigation not open, not proceeding",!0)},i=function(){Pd.Shared.LogToConsoleIfDebug("wsABStructuredNavigationController :: resizeFancyboxContentOnScreenResize",!0);var t=Pd.Shared.CurrentSiteActualViewportWidth();t!=s&&(s=t,992>t?(Pd.Shared.LogToConsoleIfDebug("wsABStructuredNavigationController :: resizeFancyboxContentOnScreenResize :: width too small, closing",!0),e.fancybox.close()):(t>=1280?t=1240:t-=60,Pd.Shared.LogToConsoleIfDebug("wsABStructuredNavigationController :: resizeFancyboxContentOnScreenResize :: newWidth :: "+t,!0),e("#structured-nav").css("width",t+"px"),e.fancybox.update()))},u=e("a.ab-structured-nav-link");if(0!==u.length){u.addClass("no-link"),t.$on("dataloaded",function(){u.removeClass("no-link")});var c;e(window).resize(function(){clearTimeout(c),c=setTimeout(i,150)});var l=document.forms[MSOWebPartPageFormName].MSOLayout_InDesignMode.value;l?u.on("click",function(){e(".ab-search-structured-nav-container").show()}):u.fancybox({parent:"#pdc",transitionIn:"none",transitionOut:"none",padding:0,afterShow:function(){t.NavigationOpen=!0,r(".meeting"),r(".business"),e("body").addClass("fancybox-css-z-index")},afterClose:function(){t.NavigationOpen=!1,e("body").removeClass("fancybox-css-z-index")},helpers:{overlay:{locked:!1,focusOnOriginElement:!1}}}),u.removeClass("hidden"),u.parent("div.hidden").removeClass("hidden")}var d=jQuery("div[id*='"+t.angularContainer+"']");d.length>0&&d.show(),t.Pd=Pd,t.Res=Res,t.moment=moment,t.language=Pd.Language.GetCurrentLanguage(),t.visible=!1,t.isMobileView=Pd.Shared.CurrentlyInMobileView(),t.selectedSession={},t.sessions=[],t.selectedCouncil={},t.allCouncils=[],t.councils=[],t.selectedMeeting={},t.meetings=[],t.selectedSubject={},t.subjects=[],t.transcripts=[],t.ready=!1,t.NavigationOpen=!1,t.state={ready:0,loading:1,loaded:2,empty:3,error:4},t.sessionDataState=t.state.ready,t.councilDataState=t.state.ready,t.meetingDataState=t.state.ready,t.subjectDataState=t.state.ready,t.transcriptDataState=t.state.ready,t.transcriptExpandedDataState=t.state.ready;var g=function(){return JSRequest.QueryString.SubjectId||null},f=function(e,t){return o.getSubjectById(e,t)},S=function(e){return o.getSessions(e)},p=function(e){return o.getCouncils(e)},y=function(e,t){return o.getMeetingsBySession(e.ID,t)},b=function(e,t,n){return o.getMeetingsByCouncil(e.ID,t.ID,n)},D=function(e,t){return o.getSubjectsByMeeting(e,t)},h=function(e,t,n){return o.getTranscriptsBySubjectId(e,t,n)},C=function(){t.transcripts=[],t.transcriptDataState=t.state.ready,t.transcriptExpandedDataState=t.state.ready},v=function(){C(),t.selectedSubject={},t.subjects=[],t.subjectDataState=t.state.ready},m=function(){C(),v(),t.selectedMeeting={},t.meetings=[],t.meetingDataState=t.state.ready},I=function(){C(),v(),m(),t.selectedCouncil={},t.councils=[],t.councilDataState=t.state.ready},P=function(e,t){var n="abStructuredNavigationService::"+t+": unhandled exception: ";return e.message&&(n+=e.message),e.stack&&(n+=" | stack: "+e.stack),n},T=function(e){var n=e.Meetings||null;if(null!=n){var a=n.Council,s=n.IdSession,r=o.firstOrDefault(t.sessions,function(e){return e.ID===s}),i=o.firstOrDefault(t.allCouncils,function(e){return e.ID===a});t.selectedSession=r,t.setSession(r),t.selectedCouncil=i,t.setCouncil(null,i),t.selectedMeeting=n,t.setMeeting(null,n),t.selectedSubject=e,t.setSubject(null,e)}};t.checkTranscriptLink=function(t){g()==t&&e(".fancybox-opened").length>0&&e.fancybox.close()},t.pad=function(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n},t.dateLessOrEqualThan=function(e,t){return function(n){var a=new Date(t);Pd.Utility.IsValidDateObject(a)||8!==t.length||(a=moment(t,"YYYYMMDD"));var o=moment(n[e]),s=moment(a);return o.diff(s)<=0}},t.getData=function(o){var s="wsABStructuredNavigationController::getData";if(Pd.Shared.LogToConsoleIfDebug(s),"undefined"!=typeof o&&o!==!1){var r=function(e){Pd.Shared.LogToConsoleIfDebug(e),t.sessionDataState=t.state.error},i=function(n){Pd.Shared.LogToConsoleIfDebug(s+": processing query results",!0);var o=n.sessions,r=n.sessions[0],i=n.councils,u="undefined"!=typeof n.subject&&n.subject.length>0?n.subject[0]:null;t.$applyAsync(function(){t.sessions=o,t.allCouncils=i,null!=u?T(u):(t.selectedSession=r,t.setSession(r)),t.sessionDataState=t.sessions.length>0?t.state.loaded:t.state.empty,t.$broadcast("dataloaded"),Pd.Shared.LogToConsoleIfDebug(s+": successfully applied data changes",!0)}),a(function(){e("#structured-nav .pd-dropdown.wired").removeClass("wired"),Pd.Shared.TryCatch(Pd.Shared.Dropdown.WireUpDropdownMenus),e(".list-container").mCustomScrollbar({theme:"minimal-pd",autoDraggerLength:!1,scrollbarPosition:"outside",mouseWheel:{scrollAmount:200,preventDefault:!0}})})};try{t.sessionDataState=t.state.loading;var c={sessions:S(t.language),councils:p(t.language)},l=g();null!=l&&(c.subject=f(l,t.language)),Pd.Shared.LogToConsoleIfDebug(s+": execution queries",!0),n.all(c).then(i,r)}catch(d){var y=P(d,"getData");Pd.Shared.LogToConsoleIfDebug(y),t.$applyAsync(function(){t.sessionDataState=t.state.error}),u.removeClass("no-link")}}},t.setSession=function(e){var n="wsABStructuredNavigationController::setSession";Pd.Shared.LogToConsoleIfDebug(n);var a=function(e){Pd.Shared.LogToConsoleIfDebug(n+": processing query results",!0);var a=o.getUniqueValuesOfKey(e,"Council");t.$applyAsync(function(){t.councils=t.allCouncils.filter(function(e){return a.indexOf(e.ID)>=0}),t.councilDataState=t.councils.length>0?t.state.loaded:t.state.empty,Pd.Shared.LogToConsoleIfDebug(n+": successfully applied data changes",!0)})},s=function(e){Pd.Shared.LogToConsoleIfDebug(e),t.$applyAsync(function(){t.councilDataState=t.state.error})};try{t.$applyAsync(function(){I(),t.councilDataState=t.state.loading,t.selectedSession=e}),Pd.Shared.LogToConsoleIfDebug(n+": executing query",!0),y(e,t.language).then(a,s)}catch(r){var i=P(r,"setSession");Pd.Shared.LogToConsoleIfDebug(i),t.$applyAsync(function(){t.councilDataState=t.state.error})}},t.setCouncil=function(e,n){null!=e&&e.preventDefault();var a="wsABStructuredNavigationController::setCouncil";Pd.Shared.LogToConsoleIfDebug(a);var o=function(e){Pd.Shared.LogToConsoleIfDebug(a+": processing query results",!0),t.$applyAsync(function(){t.meetings=e,t.meetingDataState=t.meetings.length>0?t.state.loaded:t.state.empty,Pd.Shared.LogToConsoleIfDebug(a+": successfully applied data changes",!0),r(".meeting")})},s=function(e){Pd.Shared.LogToConsoleIfDebug(e),t.$applyAsync(function(){t.meetingDataState=t.state.error})};try{t.$applyAsync(function(){m(),t.meetingDataState=t.state.loading,t.selectedCouncil=n}),Pd.Shared.LogToConsoleIfDebug(a+": executing query",!0),b(t.selectedSession,n,t.language).then(o,s)}catch(i){var u=P(i,"setCouncil");Pd.Shared.LogToConsoleIfDebug(u),t.$applyAsync(function(){t.meetingDataState=t.state.error})}},t.setMeeting=function(e,n){null!=e&&e.preventDefault();var a="wsABStructuredNavigationController::setMeeting";Pd.Shared.LogToConsoleIfDebug(a);var o=function(e){Pd.Shared.LogToConsoleIfDebug(a+": processing query results",!0),t.$applyAsync(function(){var n=e.sort(function(e,t){return e.SortOrder.localeCompare(t.SortOrder)});t.subjects=n,t.subjectDataState=t.subjects.length>0?t.state.loaded:t.state.empty,Pd.Shared.LogToConsoleIfDebug(a+": successfully applied data changes",!0),r(".business")})},s=function(e){Pd.Shared.LogToConsoleIfDebug(e),t.$applyAsync(function(){t.subjectDataState=t.state.error})};try{t.$applyAsync(function(){v(),t.subjectDataState=t.state.loading,t.selectedMeeting=n}),Pd.Shared.LogToConsoleIfDebug(a+": executing query",!0),D(n.ID,t.language).then(o,s)}catch(i){var u=P(i,"setMeeting");Pd.Shared.LogToConsoleIfDebug(u),t.$applyAsync(function(){t.subjectDataState=t.state.error})}},t.setSubject=function(e,n){null!=e&&e.preventDefault();var a="wsABStructuredNavigationController::setSubject";Pd.Shared.LogToConsoleIfDebug(a),t.$applyAsync(function(){t.currentSubject=n});var s=function(e){Pd.Shared.LogToConsoleIfDebug(e),t.$applyAsync(function(){t.transcriptDataState=t.state.error})},r=function(e){Pd.Shared.LogToConsoleIfDebug(a+": processing query results",!0),t.$applyAsync(function(){t.transcripts=e,t.transcriptDataState=e.length>0?t.state.loaded:t.state.empty,Pd.Shared.LogToConsoleIfDebug(a+": successfully applied data changes (no expand)",!0)});var n=null!==o.firstOrDefault(e,function(e){return 1===e.Type&&e.DisplaySpeaker!==!1})};try{t.$applyAsync(function(){C(),t.transcriptDataState=t.state.loading,t.selectedSubject=n}),Pd.Shared.LogToConsoleIfDebug("wsABStructuredNavigationController::setSubject: executing query",!0),h(n.ID,t.language,!1).then(r,s)}catch(i){var u=P(i,"setSubject");Pd.Shared.LogToConsoleIfDebug(u),t.$applyAsync(function(){t.transcriptDataState=t.state.error})}};var L=jQuery("#ab-detail-subject-navigation");0==L.length&&(t.ready=!0,Pd.Shared.LogToConsoleIfDebug("wsABStructuredNavigationController ==> Not on AB page, ready to start getting data"),t.getData(!t.isMobileView)),t.$on("AbDebateRequestsCompleted",function(){0==t.ready&&(t.ready=!0,Pd.Shared.LogToConsoleIfDebug("wsABStructuredNavigationController ==> ABRequestsCompleted event intercepted, ready to start getting data"),t.getData(!t.isMobileView))})}])}(PdCustomJs);
/*** End wsABStructuredNavigationController.min.js ***/
/*** Start ParliamentHistoryController.min.js ***/
!function(){app.controller("parliamentHistoryController",["$scope","$timeout","parliamentHistoryService",function(e,n,t){"use strict";e.Res=Res,e.Pd=Pd,e.showMainLoadingSpinner=!0,e.showPartialLoadingSpinner=!1,e.results=[],e.listingDecades=[],e.listingDecadesYears=[],e.data_persisted_templatePath=e.templatePath,e.prepareListingPage=function(){Pd.Shared.LogToConsoleIfDebug("parliamentHistoryController.prepareListingPage",!0),t.getBasicListingData().then(function(a){e.$applyAsync(function(){e.results=a.ListingResults,e.listingDecades=a.ListingDecades,e.listingDecadesYears=a.ListingDecadesYears,e.showMainLoadingSpinner=!1,void 0==a.CompleteDataSet&&(a.CompleteDataSet=!1),a.CompleteDataSet===!1&&(e.showPartialLoadingSpinner=!0,n(function(){t.getFullListingData().then(function(n){e.$applyAsync(function(){e.results=n.ListingResults,e.listingDecades=n.ListingDecades,e.listingDecadesYears=n.ListingDecadesYears,e.showPartialLoadingSpinner=!1})}).fail(function(n){e.$applyAsync(function(){e.showPartialLoadingSpinner=!1}),Pd.Shared.LogToConsoleIfDebug(n)})}))})}).fail(function(n){e.$applyAsync(function(){e.showMainLoadingSpinner=!1}),Pd.Shared.LogToConsoleIfDebug(n)})},e.prepareDetailPage=function(){Pd.Shared.LogToConsoleIfDebug("parliamentHistoryController.prepareDetailPage",!0);var n=Pd.Utility.GetUrlParameters().historyId;return void 0==n?void e.$applyAsync(function(){e.showMainLoadingSpinner=!1}):void t.getDetailData(n).then(function(n){e.$applyAsync(function(){e.results=n,e.showMainLoadingSpinner=!1,setTimeout(function(){Pd.Angular.ExecuteScriptsForTemplate(e.data_persisted_templatePath)},3e3)})}).fail(function(n){e.$applyAsync(function(){e.showMainLoadingSpinner=!1}),Pd.Shared.LogToConsoleIfDebug(n)})},e.formatListingTeaserText=function(e){return Pd.Utility.ShortenText(e,240,!0,!0)},e.getDecadeLabel=function(e){Pd.Shared.LogToConsoleIfDebug("parliamentHistoryController.getDecadeLabel",!0);var n,t,a=parseInt(e);if(isNaN(a)){var i="Error: '{0}' is not a number".format(e);return Pd.Shared.LogToConsoleIfDebug(i,!0),e}return n=10*Math.floor(a/10),t=n+9,1840===n&&(n=1848,t=1849),"{0}-{1}".format(n,t)};var a=jQuery("div[id*='"+e.angularContainer+"']");a.length>0&&a.show()}])}();
/*** End ParliamentHistoryController.min.js ***/
/*** Start SeatOrganisationController.min.js ***/
!function(e){app.controller("seatOrganisationController",["$scope","$timeout","seatOrganisationService",function(o,t,r){"use strict";o.Res=Res,o.Pd=Pd,o.seats=[],o.seatNumbers=[],o.groups=[],o.searchResults=[],o.data_language=Pd.Language.GetCurrentLanguage(),o.searchQuery={text:"",setBySystem:!1},o.displaySearchResults=!1,o.showZeroSearchResultsMessage=!1,o.seatInactiveColour="transparent",o.allGroupsShown=!0,o.popupVisible=!1,o.popupStyle="",o.popupCouncilorName="",o.popupCouncilorPhotoUrl="";var a="",s="",n=860,l=565,i=null,u=null,c=[],d=!1,g=r.constants;o.council=r.council,o.currentCouncil=o.council.NR,o.state={init:0,loading:1,loaded:2,empty:3,error:4},o.currentState=o.state.init,o.startSeatOrganisation=function(){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.startSeatOrganisation",!0);try{o.currentState=o.state.loading,o.currentCouncil=o.council.NR;var e=angular.element("input[type='hidden'][id*='"+o.datasource+"']");e.length>0&&"SR"==e.val()&&(o.currentCouncil=o.council.SR),p(),h()}catch(t){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.startSeatOrganisation: unhandled exception: "+t.message),o.currentState=o.state.error}};var h=function(){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.initialiseCouncillorProfile",!0),o.profileVisible=!1,o.profileCouncilorName="",o.profileCouncilorPhotoUrl="/_layouts/15/itsystems.Pd.Internet/Branding/images/broken-images/person-260.png",o.profileCouncilorCanton="",o.profileCouncilorUrl="",o.profileParlGroupName=""},p=function(){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.prepareSeatOrganisation",!0),a="SeatOrganisationPreloadedImages_{0}".format(o.currentCouncil),s="SeatOrganisationDataNr_{0}_{1}".format(o.currentCouncil,o.data_language);var e=Pd.Utility.lscacheGet(s);return null!=e?(o.seats=e.seats,o.seatNumbers=e.seatNumbers,o.groups=e.groups,o.currentState=o.state.loaded,void v()):void r.getSeatOrganisationData(o.currentCouncil).then(function(e){o.$applyAsync(function(){try{o.seats=e.seats,o.seatNumbers=e.seatNumbers,o.groups=e.groups,o.currentState=o.state.loaded,v(),Pd.Utility.lscacheSet(s,{seats:o.seats,seatNumbers:o.seatNumbers,groups:o.groups},60),Pd.Shared.CurrentlyInMobileView()||null!=Pd.Utility.lscacheGet(a)?Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.prepareSeatOrganisation: not preloading councillor images as mobile or already cached"):m()}catch(t){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.prepareSeatOrganisation: unhandled exception: "+t.message),o.currentState=o.state.error}})}).fail(function(e){o.$applyAsync(function(){o.currentState=o.state.error}),Pd.Shared.LogToConsoleIfDebug(e)})};o.handleSeatMouseover=function(e){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.handleSeatMouseover",!0);try{if(e.disabled)return;e.isHighlighted||(e.opacity=d?1:.2,null!=e.seatNumber&&(e.seatNumber.fillColour=d?g.seatNumberFillDefaultColour:g.seatNumberFillInactiveColour)),t.cancel(i),t.cancel(u),i=t(function(){C(e)},300)}catch(r){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.handleSeatMouseover: unhandled exception: "+r.message),o.currentState=o.state.error}},o.handleSeatNumberMouseover=function(e){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.handleSeatNumberMouseover",!0);var t=r.getSeatBySeatNumber(o.seats,e.number);null!=t&&o.handleSeatMouseover(t)},o.handleSeatMouseleave=function(e){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.handleSeatMouseleave",!0);try{if(e.disabled)return;e.isHighlighted||(e.opacity=d?.2:1,null!=e.seatNumber&&(e.seatNumber.fillColour=d?g.seatNumberFillInactiveColour:g.seatNumberFillDefaultColour)),t.cancel(i),t.cancel(u),u=t(function(){o.popupVisible=!1},300)}catch(r){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.handleSeatMouseleave: unhandled exception: "+r.message),o.currentState=o.state.error}},o.handleSeatNumberMouseleave=function(e){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.handleSeatNumberMouseleave",!0);var t=r.getSeatBySeatNumber(o.seats,e.number);null!=t&&o.handleSeatMouseleave(t)},o.showSeatCouncilor=function(e){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.showSeatCouncilor",!0),f(e)},o.showSeatNumberCouncilor=function(e){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.showSeatNumberCouncilor",!0);var t=r.getSeatBySeatNumber(o.seats,e.number);null!=t&&o.showSeatCouncilor(t)},o.dehighlightSeats=function(t){if(Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.dehighlightSeats",!0),void 0!=t){var r=t.target.tagName.toLowerCase();if("path"===r){if(void 0===e(t.target).attr("data-action"))return;if("no-highlight"!==e(t.target).attr("data-action"))return}else if("svg"!==r)return}Pd.Utility.ProcessArrayItems(o.seats,function(e){e.opacity=1,e.isHighlighted=!1}),Pd.Utility.ProcessArrayItems(o.seatNumbers,function(e){e.fillColour=g.seatNumberFillDefaultColour}),d=!1};var S=function(e){Pd.Utility.ProcessArrayItems(o.seats,function(e){e.opacity=.2}),Pd.Utility.ProcessArrayItems(o.seatNumbers,function(e){e.fillColour=g.seatNumberFillInactiveColour}),e.opacity=1,e.isHighlighted=!0,null!=e.seatNumber&&(e.seatNumber.fillColour=g.seatNumberFillDefaultColour),d=!0},f=function(e){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.showProfileForSeat",!0);try{if(e.disabled)return void Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.showProfileForSeat: seat is disabled",!0);o.profileVisible=!0,o.profileCouncilorName=e.councilorName,o.profileCouncilorPhotoUrl=e.councilorPhotoUrl,o.profileCouncilorCanton=e.councilorCanton,o.profileParlGroupName=e.parlGroupName,o.profileCouncilorUrl=e.councilorDetailUrl,o.searchQuery={text:e.councilorName,setBySystem:!0},y(),S(e)}catch(t){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.showProfileForSeat: unhandled exception: "+t.message),o.currentState=o.state.error}},C=function(t){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.showSeatPopup",!0);try{var r=parseInt(t.popupX,0),a=parseInt(t.popupY,0);Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.showSeatPopup: seat SVG x,y position is "+r+","+a,!0);var s=e("#seat-svg").width();if(s!==n&&n>s){var l=s/n;r=Math.round(r*l),a=Math.round(a*l),Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.showSeatPopup: seat SVG x,y scaled position is "+r+","+a,!0)}a+=e("#seat-svg").offset().top-e(".seat-org").offset().top,r+=e("#seat-svg").offset().left-e(".seat-org").offset().left,Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.showSeatPopup: calculated position is "+r+","+a,!0),o.popupCouncilorName=t.councilorName,o.popupCouncilorPhotoUrl=t.councilorPhotoUrl,o.popupVisible=!0,o.popupStyle={left:r+"px",top:a+"px"}}catch(i){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.showSeatPopup: unhandled exception: "+i.message),o.popupVisible=!1}};o.toggleParlGroups=function(e){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.toggleParlGroups: showAllGroups? "+e,!0);try{Pd.Utility.ProcessArrayItems(o.groups,function(o){o.showGroup=e}),Pd.Utility.ProcessArrayItems(o.seats,function(o){o.isActive=e}),o.allGroupsShown=e}catch(t){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.toggleParlGroups: unhandled exception: "+t.message),o.currentState=o.state.error}},o.toggleParlGroup=function(e){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.toggleParlGroup",!0);try{e.showGroup=!e.showGroup,Pd.Utility.ProcessArrayItems(o.seats,function(o){o.isActive=o.parlGroupNumber===e.parlGroupNumber?e.showGroup:o.isActive});var t=0;Pd.Utility.ProcessArrayItems(o.groups,function(e){e.showGroup&&t++}),0===t&&o.allGroupsShown?o.allGroupsShown=!1:t!==o.groups.length||o.allGroupsShown||(o.allGroupsShown=!0),y()}catch(r){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.toggleParlGroup: unhandled exception: "+r.message),o.currentState=o.state.error}};var m=function(){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.getCouncilorImagesForPreload",!0),Pd.Utility.ProcessArrayItems(o.seats,function(e){c.push(e.councilorPhotoUrl)}),P()},P=function(){if(Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.preloadCouncilorImage",!0),0==c.length)return void Pd.Utility.lscacheSet(a,"1",60);for(var e=0;5>e;e++){var o=new Image;o.src=c.pop()}setTimeout(function(){P()},100)};o.handleNameSearchKeyPress=function(e){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.handleNameSearchKeyPress",!0);try{var t=e.keyCode||e.which;if(27==t)return Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.handleNameSearchKeyPress: ESC pressed",!0),o.searchQuery={text:"",setBySystem:!1},void y();if(o.searchResults=[],o.searchQuery.text.length>0){for(var r=0;r<o.seats.length;r++){var a=o.seats[r];if(a.councilorName.toLowerCase().indexOf(o.searchQuery.text.toLowerCase())>=0){var s={};s.number=a.number;try{var n=new RegExp("("+o.searchQuery.text.toLowerCase()+")","gi");s.matchedName=a.councilorName.replace(n,"<strong>$1</strong>")}catch(l){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.handleNameSearchKeyPress: unexpected exception with regular expressions; query: '"+o.searchQuery.text+"'"),s.matchedName=a.councilorName}o.searchResults.push(s)}}0==o.searchResults.length?o.showZeroSearchResultsMessage=!0:o.showZeroSearchResultsMessage=!1,o.searchQuery.setBySystem=!1}0==o.searchResults.length?y():b()}catch(l){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.handleNameSearchKeyPress: unhandled exception: "+l.message),o.currentState=o.state.error}},o.showAZCouncillors=function(e){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.showAZCouncillors",!0),void 0!=e&&(e.preventDefault(),e.stopPropagation());try{if(o.searchResults.length===o.seats.length&&o.displaySearchResults)return void y();o.searchResults=[],Pd.Utility.ProcessArrayItems(o.seats,function(e){o.searchResults.push({number:e.number,matchedName:e.councilorName})}),o.showZeroSearchResultsMessage=!1,b()}catch(t){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.showAZCouncillors: unhandled exception: "+t.message),o.currentState=o.state.error}},o.handleSearchResultClick=function(e){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.handleSearchResultClick",!0);try{var t=r.getSeatBySeatNumber(o.seats,e.number);if(null==t)return void y();f(t),o.searchQuery={text:t.councilorName,setBySystem:!0}}catch(a){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.handleSearchResultClick: unhandled exception: "+a.message),o.currentState=o.state.error}};var b=function(){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.showSearchResults",!0);var r=e("div.results dl.pd-dropdown.no-heading");return o.displaySearchResults?void t(function(){var e=r.find("dd div.scrollbar"),o=r.find("dd ul")[0];Pd.Shared.Dropdown.ShowScrollbar(e,o)},0):(t(function(){o.displaySearchResults=!0,Pd.Shared.Dropdown.TitleAnchorInvoked(null,r,!1,!1,!1)},0),void e(document).bind("click",I))},y=function(){if(Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.hideSearchResults",!0),o.displaySearchResults){o.displaySearchResults=!1;var t=e("div.results dl.pd-dropdown.no-heading");Pd.Shared.Dropdown.HideDropdown(t),e(document).unbind("click",I)}};o.resetInput=function(){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.resetInput",!0);try{o.searchQuery.setBySystem===!0&&(h(),o.dehighlightSeats(),o.popupVisible=!1),o.searchQuery={text:"",setBySystem:!1},o.showZeroSearchResultsMessage=!1,y()}catch(e){Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.resetInput: unhandled exception: "+e.message),o.currentState=o.state.error}};var v=function(){t(function(){e("body").hasClass("msie")&&e("#seat-svg").attr("width",n).attr("height",l),Pd.Angular.ExecuteScriptsForTemplate("")},0)},I=function(o){return Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.documentClickHandler",!0),1==e("#pdc .seat-org .wrapper div.results").has(o.target).length?void Pd.Shared.LogToConsoleIfDebug("seatOrganisationController.documentClickHandler: clicked item was results",!0):void y()},N=jQuery("div[id*='"+o.angularContainer+"']");N.length>0&&N.show()}])}(PdCustomJs);
/*** End SeatOrganisationController.min.js ***/
/*** Start BlogSearchController.min.js ***/
!function(){app.controller("blogSearchController",["$scope","$timeout","blogService",function(e,t,o){"use strict";e.Res=Res,e.Pd=Pd,e.results=[],e.categories=[];var n=function(e){if(!Pd.Utility.StringIsNullOrEmpty(e.PublishingRollupImage))return e.PublishingRollupImage;if(!Pd.Utility.StringIsNullOrEmpty(e.HeaderImage)){var t=e.HeaderImage;return t.replace("RenditionID=117","RenditionID=116"),t}return Res.blogContentBySearchTeaserImageFallbackUrl},l=function(){t(function(){Pd.Shared.ApplyDotDotDot(),Pd.Angular.ExecuteScriptsForTemplate("")},0)};e.getLatestBlogs=function(){Pd.Shared.LogToConsoleIfDebug("blogSearchController.getLatestBlogs",!0),o.getLatestBlogs(4).then(function(t){e.$applyAsync(function(){const o=[];angular.forEach(t.RelevantResults,function(e){e.TeaserImage=n(e),this.push(e)},o),e.results=o,e.categories=[];const r=Pd.Utility.FirstOrDefault(t.RefinementResults,function(e){return e.Name===Pd.Utility.ManagedProperties.PdBlogCategory});r&&(e.categories=r.Values),l()})})},e.getBlogsByCategory=function(t){Pd.Shared.LogToConsoleIfDebug("blogSearchController.getBlogsByCategory",!0),o.getBlogsByCategory(t,4).then(function(t){e.$applyAsync(function(){e.results=t.RelevantResults,l()}),function(t){e.$applyAsync(function(){l()}),Pd.Shared.LogToConsoleIfDebug(t)}})};const r=jQuery("div[id*='"+e.angularContainer+"']");r.length>0&&r.show()}])}();
/*** End BlogSearchController.min.js ***/
/*** Start ElectionResultsController.min.js ***/
(function(){app.controller("electionResultsController",["$scope","$timeout","electionResultsService",function(n,t,i){"use strict";n.Res=Res;n.Pd=Pd;n.showLoadingSpinner=!0;n.memberResults=[];n.cantonResults=[];n.cantonName="";n.data_persisted_templatePath=n.templatePath;n.council=i.council;n.currentCouncilId=n.council.NR;n.dataLastUpdated=null;n.datasourceContent="";n.preparePage=function(){var r,t,u;if((Pd.Shared.LogToConsoleIfDebug("electionResultsController.preparePage",!0),n.currentCouncilId=null,r=angular.element("input[type='hidden'][id*='"+n.datasource+"']"),r.length!==0)&&(n.datasourceContent=r.val(),!Pd.Utility.StringIsNullOrEmpty(n.datasourceContent))){t=Pd.Utility.GloballyReplaceString(n.dataSourceTemplateUrl,"Smart Data Library/Data Sources/","");switch(t){case"ElectionResultsNrElectedAllCantons.js":case"ElectionResultsNrElectedAllMembers.js":case"ElectionResultsNrElectedByCanton.js":case"ElectionResultsNrElectedNewMembers.js":case"ElectionResultsNrNotElectedPreviousMembers.js":n.currentCouncilId=n.council.NR;break;case"ElectionResultsSrElectedAllCantons.js":case"ElectionResultsSrElectedAllMembers.js":case"ElectionResultsSrElectedByCanton.js":case"ElectionResultsSrElectedNewMembers.js":case"ElectionResultsSrNotElectedPreviousMembers.js":n.currentCouncilId=n.council.SR}(n.showingByCanton=t==="ElectionResultsNrElectedByCanton.js"||t==="ElectionResultsSrElectedByCanton.js",Pd.Utility.StringIsNullOrEmpty(n.currentCouncilId))||(u=Pd.Utility.GetObjectPropertyByValue(n.council,n.currentCouncilId),i.getAllData(n.datasourceContent,u).then(function(t){n.$applyAsync(function(){n.memberResults=t.MemberResults;n.cantonResults=t.CantonResults;n.cantonName=t.CantonName;Pd.Shared.ApplyDotDotDot();Pd.Utility.ExecuteWhenPageReady(function(){Pd.Angular.ExecuteScriptsForTemplate(n.data_persisted_templatePath)});n.dataLastUpdated=new Date;n.showLoadingSpinner=!1})}).fail(function(t){n.$applyAsync(function(){n.showLoadingSpinner=!1});Pd.Shared.LogToConsoleIfDebug(t)}))}};n.intervalFunction=function(){t(function(){n.preparePage();n.dataLastUpdated=new Date;n.intervalFunction()},6e4)};var r=jQuery("div[id*='"+n.angularContainer+"']");r.length>0&&r.show();n.intervalFunction()}])})();
/*** End ElectionResultsController.min.js ***/

angular.element(document).ready(function(){angular.bootstrap(document,["app"])});
Pd.Shared=function($){"use strict";var intMobileHeaderHeight=68,intDesktopHeaderHeight=173,intPreviousSiteWidth=-1,intScrollbarWidth=17,intMobileRenderingMaxSize=768,intBackToTopFadeTime=250,intMediaViewportWidth=-1,strSiteOverlaySelector="#pdc div.container-fluid.overlay",blnOverlayShowingBusy=!1,blnOverlayHidingBusy=!1,notificationPanelPageTypeInternal={};notificationPanelPageTypeInternal.NotificationHandler=0,notificationPanelPageTypeInternal.SearchBusiness=1,notificationPanelPageTypeInternal.SearchNews=2,notificationPanelPageTypeInternal.SearchAgenda=3,notificationPanelPageTypeInternal.BusinessDetail=4,notificationPanelPageTypeInternal.CouncillorDetail=5,notificationPanelPageTypeInternal.SessionDetail=8,notificationPanelPageTypeInternal.SearchBlog=9;var isDebugModeInternal=function(){return"-1"==PdDebugMode&&(Pd.Shared.CheckForExtraLogging(),PdDebugMode="1"==$("input#IsDebugMode").val()),PdDebugMode},isVerboseModeInternal=function(){return"-1"==PdVerboseMode&&(PdVerboseMode="1"==$("input#IsVerboseMode").val(),PdVerboseMode&&$("body").addClass("verbose")),PdVerboseMode},checkForExtraLoggingInternal=function(){"1"==Pd.Utility.GetUrlParameter("dbgits")&&"1"!=$("input#IsDebugMode").val()&&$("input#IsDebugMode").val("1"),"1"==Pd.Utility.GetUrlParameter("verbose")&&"1"!=$("input#IsVerboseMode").val()&&$("input#IsVerboseMode").val("1"),"1"==Pd.Utility.GetUrlParameter("textarealogging")&&0==$("#consoleLogContainer").length&&($("#pdc").append('<div class="container-fluid full-width-panel" id="consoleLogContainer"></div>'),$("#consoleLogContainer").append('<textarea id="consoleLog"></textarea>'),$("#consoleLogContainer").append('<input type="button" id="clearConsoleLog" value="Clear" />'),$("#clearConsoleLog").click(function(){$("#consoleLog").val("")}))},logToConsoleIfDebugInternal=function(e,t){if(Pd.Shared.IsDebugMode()&&window.console&&(void 0==t&&(t=!1),!t||t&&Pd.Shared.IsVerboseMode())){console.log(e);var a=$("#consoleLog");1==a.length&&a.val(a.val()+(0==a.val().length?"":"\n")+e)}},logErrorToStatusDialogInternal=function(e,t){try{var a=function(){var e=$("#statusDialog");if(0==e.length&&($("#pdc").append('<div id="statusDialog"></div>'),e=$("#statusDialog"),e.on("click","> a",function(t){e.hide()}),e.on("click","ul li a",function(e){$(this).siblings("div.extra-info").toggle()})),0!=PdStatusMessages.length){var t='<a href="#" class="close-dialog">x</a>';t+="<ul>";for(var a=0;a<PdStatusMessages.length;a++)t+="<li>",PdStatusMessages[a].ExtraInformation.length>0?(t+='<a href="#">'+PdStatusMessages[a].DialogMessage+"</a>",t+='<div class="extra-info">'+PdStatusMessages[a].ExtraInformation+"</div>"):t+=PdStatusMessages[a].DialogMessage,t+="</li>";t+="</ul>",e.html(t),e.show()}};Pd.Shared.IsDebugMode()&&(Pd.Shared.LogToConsoleIfDebug(e),void 0==t&&(t=""),PdStatusMessages.push({DialogMessage:e,ExtraInformation:t})),a()}catch(n){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.logErrorToStatusDialogInternal :: unhandled exception :: "+n.message)}},tryCatchInternal=function(e,t){var a=function(){try{var a;return a="function"==typeof t?t.name:e.name,void 0==a?null:0==a.length?null:a}catch(n){return null}},n=function(){try{var a;a="function"==typeof t?t.toString():e.toString();for(var n=a.split(/\r\n|\r|\n/g),r=0,o=0;o<n.length;o++){var i=n[o].search(/\t/);r>i&&(r=i)}for(var d=0;d<n.length;d++){var l=n[d];n[d]=l.substring(r,l.length)}return a=a.replace(/(?:\r\n|\r|\n)/g,"<br />").replace(/\t/g,"&nbsp;&nbsp;&nbsp;").replace(/  /g,"&nbsp;&nbsp;")}catch(s){return"(Error occurred getting function contents)"}};if("function"==typeof e)try{e()}catch(r){var o=a();null!=o?Pd.Shared.LogErrorToStatusDialog("Unhandled exception in function '"+o+"' :: "+r):Pd.Shared.LogErrorToStatusDialog("Unhandled exception in function :: "+r,n())}else Pd.Shared.LogErrorToStatusDialog("Pd.Shared.TryCatch :: Supplied function not a function")},currentPageRawRequestFilenameInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.currentPageFilename");var t=function(){var e="Unknown";try{e=_spPageContextInfo.serverRequestPath,e=e.substr(e.lastIndexOf("/")+1)}catch(t){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.currentPageFilename :: Error getting filename :: "+t)}PdFilename=e};""==PdFilename&&(void 0==SP.ClientContext?SP.SOD.executeFunc("sp.js","SP.ClientContext",t()):t()),e(PdFilename)},performBasicBrowserDetectionInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performBasicBrowserDetectionInternal"),null!=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/)?$("body").addClass("msie"):$("body").addClass("notmsie"),$("body").addClass("lang-{0}".format(Pd.Language.GetCurrentLanguage().toLowerCase()))},insertSharedResourceTextInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.insertSharedResourceTextInternal"),$("nav a.current-page span").text(Res.brandingNavigationCurrentNode),$("div#pdc div#breadcrumb ul.bread-crumb li span.current").parent().prepend('<span class="invisible-all">{0}</span>'.format(Res.brandingNavigationCurrentNode)),$("div#pdc div.final-level-nav ul li.active a").prepend('<span class="invisible-all">{0}</span>'.format(Res.brandingNavigationCurrentNode)),$("div#pdc ul#languageswitch.language-bar li a.active").parent().prepend('<span class="invisible-all">{0}</span>'.format(Res.brandingNavigationCurrentOption))},createSiteOverlayInternal=function(e,t,a){return blnOverlayShowingBusy||blnOverlayHidingBusy?!1:(blnOverlayShowingBusy=!0,0==$(strSiteOverlaySelector).length?$("#pdc").append('<div class="container-fluid overlay"></div>'):$(strSiteOverlaySelector).addClass(t),e?($(strSiteOverlaySelector).css("height",$("#pdc").height()-intMobileHeaderHeight+"px").css("top",intMobileHeaderHeight+"px"),$(strSiteOverlaySelector).click(function(){$("nav").hasClass("active")&&Pd.Shared.Navigation.CloseMobileMenu()})):$(strSiteOverlaySelector).css("height",$("#pdc").height()-intDesktopHeaderHeight+"px").css("top",intDesktopHeaderHeight+"px"),$(strSiteOverlaySelector).fadeIn(a,function(){blnOverlayShowingBusy=!1}),void $(strSiteOverlaySelector).removeClass(t))},removeSiteOverlayInternal=function(e,t){return blnOverlayShowingBusy||blnOverlayHidingBusy?!1:(0!=$(strSiteOverlaySelector).length&&(blnOverlayHidingBusy=!0),void $(strSiteOverlaySelector).fadeOut(t,function(){blnOverlayHidingBusy=!1}))},wireUpWindowResizeEventInternal=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpWindowResizeEventInternal");var e;$(window).resize(function(){clearTimeout(e),e=setTimeout(onWindowResizeInternal,250)})}},onWindowResizeInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.onWindowResizeInternal",!0);var e=function(){0==$(".container-fluid.live-search div.long-button a.subscribe.show").length&&$(".container-fluid.live-search").addClass("hidden-xs")},t=function(){$(".container-fluid.live-search").removeClass("hidden-xs")},a=Pd.Shared.CurrentSiteActualViewportWidth();if(Pd.Shared.IsDebugMode()&&Pd.Shared.IsVerboseMode())if(0==$("input#viewport").length)$("body").append('<input type="text" readonly id="viewport" value="" class="debug" />');else{var n=$("input#viewport");n.val("Viewport: "+a+"px")}a>intPreviousSiteWidth&&intMobileRenderingMaxSize>=intPreviousSiteWidth&&a>intMobileRenderingMaxSize&&(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.onWindowResizeInternal :: going from mobile to desktop over cuttoff point",!0),Pd.Shared.Navigation.ResetMobileNavigation(),Pd.Shared.CloseLiveSearchPopup(null,!0),t()),intPreviousSiteWidth>a&&intPreviousSiteWidth>intMobileRenderingMaxSize&&intMobileRenderingMaxSize>=a&&(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.onWindowResizeInternal :: going from desktop to mobile over cuttoff point",!0),Pd.Shared.CloseLiveSearchPopup(null,!1),e(),Pd.Shared.PerformMiscellaneousHtmlCleanup(),Pd.Shared.Navigation.CloseDesktopNavigationFlyout()),-1==intPreviousSiteWidth&&Pd.Shared.CurrentlyInMobileView()&&e(),intPreviousSiteWidth=a},setupPageResponsivenessInternal=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.setupPageResponsivenessInternal"),"1"==Cookies.get("disableResponsive")?$("footer div.alternate-view").append('<a href="#" class="mobile">'+Res.brandingFooterMobileVersion+"</a>"):$("footer div.alternate-view").append('<a href="#" class="desktop">'+Res.brandingFooterDesktopVersion+"</a>"),$("footer div.alternate-view a").click(function(){$(this).text()==Res.brandingFooterMobileVersion?Cookies.set("disableResponsive","0",{expires:30,path:"/"}):Cookies.set("disableResponsive","1",{expires:30,path:"/"}),location.reload()}))},wireUpBackToTopLinkInternal=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpBackToTopLinkInternal");var e,t=function(){var e=function(e){e.fadeIn(intBackToTopFadeTime)},t=function(e){e.fadeOut(intBackToTopFadeTime)},a=$("div.back-to-top.floating");$(this).scrollTop()>300&&!a.is(":visible")&&!Pd.Shared.ElementIsVisibleInViewport(".pd-static")&&$(document).scrollTop()<$("div.back-to-top.pd-static").offset().top&&e(a),$(this).scrollTop()<=300&&a.is(":visible")&&t(a),Pd.Shared.ElementIsVisibleInViewport(".pd-static")&&a.is(":visible")&&t(a)};$(window).resize(function(){clearTimeout(e),e=setTimeout(a,150)});var a=function(){Pd.Shared.CurrentlyInMobileView()?$("div.back-to-top.floating").remove():0==$("div.back-to-top.floating").length&&$("div.back-to-top").clone().hide().appendTo("#pdc").addClass("floating").removeClass("pd-static")};$(document).on("click","div.back-to-top a",function(e){return $("html,body").animate({scrollTop:0},800),e.preventDefault(),!1});var n;$(window).scroll(function(){clearTimeout(n),n=setTimeout(t,150)})}},getElementLocationAndWindowLocationPropertiesInternal=function(e){if(0==$(e).length)return{};var t=$(window).scrollTop(),a=$(window).height(),n=t+a,r=$(e).offset().top,o=$(e).height(),i=r+o;return{windowOffsetTop:t,windowOffsetBottom:n,windowHeight:a,itemOffsetTop:r,itemOffsetBottom:i,itemHeight:o}},elementIsVisibleInViewportInternal=function(e){if(0==$(e+":visible").length)return!1;var t=Pd.Shared.GetElementLocationAndWindowLocationProperties(e);return t.itemOffsetTop>=t.windowOffsetTop&&t.itemOffsetTop<t.windowOffsetBottom||t.itemOffsetBottom>t.windowOffsetTop&&t.itemOffsetBottom<=t.windowOffsetBottom||t.itemHeight>t.windowHeight&&t.itemOffsetTop<=t.windowOffsetTop&&t.itemOffsetBottom>=t.windowOffsetBottom},howMuchOfElementIsVisibleInViewportInternal=function(e){var t,a=Pd.Shared.GetElementLocationAndWindowLocationProperties(e),n=a.itemOffsetTop>=a.windowOffsetTop&&a.itemOffsetTop<a.windowOffsetBottom,r=a.itemOffsetBottom>a.windowOffsetTop&&a.itemOffsetBottom<=a.windowOffsetBottom;return t=n&&r?a.itemHeight:n?Math.round(a.windowOffsetBottom-a.itemOffsetTop):r?Math.round(a.itemOffsetBottom-a.windowOffsetTop):0,Pd.Shared.LogToConsoleIfDebug("Pd.Shared.howMuchOfElementIsVisibleInViewportInternal :: "+e+" ==> "+t+"px",!0),t},prepareMobileLanguageBarInternal=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.prepareMobileLanguageBarInternal"),$("header ul.language-bar").clone().prependTo("footer"))},wireUpLiveSearchInternal=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpLiveSearchInternal"),Pd.Shared.ApplyClassesOnSearchBoxFocusIe(".msie .live-search-splash > input"),Pd.Shared.ApplyClassesOnSearchBoxFocusIe(".msie .live-search .ms-srch-sbLarge > input"),$("div.search-button a").click(function(e){$(this).hasClass("active")?Pd.Shared.CloseLiveSearchPopup(e):Pd.Shared.OpenLiveSearchPopup(e)}),$(".live-search-splash > a.back").click(function(e){Pd.Shared.CloseLiveSearchPopup(e)}))},openLiveSearchPopupInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.openLiveSearchPopupInternal"),$("nav").hasClass("active")&&Pd.Shared.CurrentlyInMobileView()&&Pd.Shared.Navigation.CloseMobileMenu(),$("nav > ul.main-nav > li.active").length>0&&Pd.Shared.Navigation.CloseDesktopNavigationFlyout(),0==$("div.search-button a.active").length&&(Pd.Shared.CurrentlyInMobileView()?Pd.Shared.CreateSiteOverlay(Pd.Shared.CurrentlyInMobileView(),"search",0):0==$("div.live-search-popup.show-search").length&&Pd.LiveSearch.CreateSearchUnderlay(),$("div.live-search-popup").show(),$("div.search-button a").addClass("active")),Pd.Shared.FocusOnSearchInputBox($("#liveSearchInputBox")),e.preventDefault()},focusOnSearchInputBoxInternal=function(e){if(Pd.Shared.CurrentlyInMobileView()){var t=e[0],a=jQuery.Event("touchend",{currentTarget:t,delegateTarget:t,srcElement:t,target:t,type:"touchend",originator:"manual"});e.trigger(a)}else e.trigger("focus")},closeLiveSearchPopupInternal=function(e,t){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.closeLiveSearchPopupInternal"),(1==$("div.search-button a.active").length||1==$("div.live-search-popup.show-search").length)&&(void 0==t&&(t=Pd.Shared.CurrentlyInMobileView()),t?(Pd.Shared.RemoveSiteOverlay("search",0),$("div.live-search-popup").removeAttr("style")):(Pd.LiveSearch.RemoveSearchUnderlay(),$("div.live-search-popup:not(.show-search)").hide()),$("div.live-search-splash").removeClass("opened"),$("div.search-button a").removeClass("active")),$(".ui-autocomplete").hide(),Pd.LiveSearch.EmptyLiveSearchPlaceholder(),Pd.LiveSearch.DeactivateLiveSearchBox(),void 0!=e&&null!=e&&e.preventDefault()},applyClassesOnSearchBoxFocusIeInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyClassesOnSearchBoxFocusIeInternal");var t=$(e);1==t.length&&(t.focus(function(){setTimeout(function(){var e=$(this);e.prop("readonly",!1)},20)}),t.focusout(function(){setTimeout(function(){var e=$(this);e.prop("readonly",!0)},20)}))},setBodyClassBasedOnCurrentPageLayoutInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.setBodyClassBasedOnCurrentPageLayoutInternal");var e,t={PdWelcomePage:0,PdNewsPage:1,PdDetailPage:2,PdSearchPage:3,PdAgendaPage:4,PdPressReleasePage:5,PdSdaNewsPage:6},a=parseInt($("input#PdPageLayout").val());switch(a){case t.PdWelcomePage:e="welcome";break;case t.PdNewsPage:e="news";break;case t.PdDetailPage:e="detail";break;case t.PdSearchPage:e="search";break;case t.PdAgendaPage:e="agenda";break;case t.PdPressReleasePage:e="press-release";break;case t.PdSdaNewsPage:e="sda-news";break;default:e="unknown"}$("body").hasClass(e)||$("body").addClass(e),"unknown"!=e&&$("body").addClass("hasPageLayout")},pageIsInEditModeInternal=function(){return"-1"==PdEditMode&&(PdEditMode="1"==$("input#MSOLayout_InDesignMode").val()),PdEditMode},setHtmlClassWhenInEditModeInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.setHtmlClassWhenInEditModeInternal"),Pd.Shared.PageIsInEditMode()&&($("body").addClass("editmode"),$("body").removeClass("publishmode"))},intialiseImageViewerInternal=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.intialiseImageViewerInternal"),$("#pdc div.ms-rtestate-field img").each(function(){var e=$(this);if("A"!=e.parent().prop("tagName")){Pd.Shared.MatchImageSourceAndWrapImageInLightBox(/RenditionID=(\d)+/i,e),Pd.Shared.MatchImageSourceAndWrapImageInLightBox(/Width=(\d)+/i,e),Pd.Shared.MatchImageSourceAndWrapImageInLightBox(/Height=(\d)+/i,e);try{if(e.hasClass("lightboxed")||e.hasClass("no-lightbox"))return;if(e.parents("div.container-fluid.full-width-panel.splash").length>0)return void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.intialiseImageViewerInternal: skipping header image");if(void 0==e[0].naturalWidth)return;e[0].naturalWidth>e[0].clientWidth&&e[0].naturalWidth/e[0].clientWidth>1.2&&(e.addClass("lightboxed"),e.wrap('<a class="fancybox" href="{0}" title="{1}" rel="content-image">'.format(e.attr("src"),e.attr("alt"))))}catch(t){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.intialiseImageViewerInternal: exception determining naturalWidth: "+t.message)}}});var e=Pd.Shared.CurrentlyInMobileView();$("#pdc .fancybox").fancybox({parent:"#pdc",padding:0,arrows:!0,helpers:{title:{type:"outside"}},afterLoad:function(){var t=this.href;void 0!=this.element.attr("data-original-image-url")&&(t=this.element.attr("data-original-image-url"));var a,n=t;a=n.match(/\?RenditionID=(\d)+/i)?n.replace(/\?RenditionID=(\d)+/i,""):n;var r="";e||(r+='<a href="'+a+'" target="_blank" title="'+Res.lightboxViewOriginalSize+'">',r+='	<img src="/_layouts/15/itsystems.Pd.Internet/Branding/images/new-window-icon.png" border="0" height="25" width="25" alt="'+Res.lightboxViewOriginalSize+'" />',r+="</a>"),this.title=this.title+r}})}},matchImageSourceAndWrapImageInLightBoxInternal=function(e,t){if(!t.hasClass("lightboxed")&&!t.hasClass("no-lightbox")){var a=t.attr("src"),n=a.match(e);if(null!=n&&2==n.length){var r=a.replace(n[0],"Param=Removed").trim();t.addClass("lightboxed"),t.wrap('<a class="fancybox" href="{0}" title="{1}" rel="content-image">'.format(r,t.attr("alt")))}}},wireUpTabsInternalInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpTabsInternalInternal");var e=1;$(".tabs:not(.wired)").each(function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpTabsInternalInternal :: processing tabs group",!0);var t=$(this),a=!1;t.find("ul.tab-links li a").each(function(t){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpTabsInternalInternal :: processing tabs",!0);var n=$(this),r="tab-panel-{0}".format(e),o=n.parents(".tabs").find(".tab-content > div.tab:eq("+t+")");1==o.length?(a=!0,o.attr("id",r),o.attr("role","tabpanel"),o.attr("aria-expanded",o.hasClass("active"))):Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpTabsInternalInternal :: processing tabs => did not find tabpanel",!0),a&&(n.attr("role","tab"),n.attr("aria-controls",r),n.attr("href","#"+r),n.attr("aria-expanded",n.parent().hasClass("active")),n.attr("aria-pressed",n.parent().hasClass("active"))),e++}),t.find("ul.tab-links li a").each(function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpTabsInternalInternal :: wiring up clicks of tab :: "+e,!0);var a=$(this);a.on("click",function(a){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpTabsInternalInternal :: click of tab",!0);var n=$(this);n.tab("show"),t.find("ul.tab-links li a").attr("aria-expanded","false"),t.find("ul.tab-links li a").attr("aria-pressed","false"),n.attr("aria-expanded","true"),n.attr("aria-pressed","true"),t.find(".tab-content > div.tab").attr("aria-expanded","false"),t.find(".tab-content > div.tab:eq("+e+")").attr("aria-expanded","true"),a.preventDefault()})}),t.attr("role","tablist"),t.addClass("wired")})},radioButtonSelectUnselectInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.radioButtonSelectUnselectInternal");var e=$(".radio-inline:not(.wired) input[type='radio'], .checkbox-inline:not(.wired) input[type='checkbox']");e.click(function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.radioButtonSelectUnselectInternal :: radio/checkbox click",!0),$(this).hasClass("checked")?$(this).is(":radio")||($(this).removeClass("checked"),$(this).attr("aria-checked","false")):($("input[name="+$(this).attr("name")+"]:radio").removeClass("checked"),$(this).addClass("checked"),$(this).attr("aria-checked","true")),e.each(function(){$(this).parent().toggleClass("checked",$(this).hasClass("checked"))});var t=$(this).parents(".pd-dropdown.dd-only-mobile-filter:not(.multi-select-enabled)");1==t.length&&(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.radioButtonSelectUnselectInternal :: radio/checkbox click :: in special dropdown",!0),Pd.Shared.Dropdown.HideDropdown(t))}),$(".radio-inline").addClass("wired"),$(".checkbox-inline").addClass("wired")},wireUpDatePickerWithAllControlsInternal=function(){function e(e){var t=e.data.picker,a=t.getDate(),n=e.keyCode,r=e.target;if($(r).hasClass("datepicker"))switch(n){case 33:e.preventDefault();var o=moment(a).add(1,"years").toDate();t.setDate(o);break;case 34:e.preventDefault();var i=moment(a).subtract(1,"years").toDate();t.setDate(i);break;case 36:e.preventDefault();var d=moment(a).add(1,"months").toDate();t.setDate(d);break;case 35:e.preventDefault();var l=moment(a).subtract(1,"months").toDate();t.setDate(l);break;case 37:e.preventDefault();var s=moment(a).subtract(1,"days").toDate();t.setDate(s);break;case 39:e.preventDefault();var c=moment(a).add(1,"days").toDate();t.setDate(c);break;case 38:e.preventDefault();var h=moment(a).subtract(1,"weeks").toDate();t.setDate(h);break;case 40:e.preventDefault();var u=moment(a).add(1,"weeks").toDate();t.setDate(u);break;case 13:case 27:e.preventDefault(),t.hide()}}Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpDatePickerWithAllControlsInternal"),$("div.datepicker:not(.wired)").each(function(t,a){var n=Res.brandingCalendarDayName,r=Res.brandingCalendarMonthName,o=Res.brandingCalendarYearName;$(a).find(".dd-day dt a span").text(n),$(a).find(".dd-month dt a span").text(r),$(a).find(".dd-year dt a span").text(o);var i=$(a).find("dl.dd-year").attr("data-min-year"),d=$(a).find("dl.dd-year").attr("data-max-year");if(i=void 0==i||""==i?(new Date).getFullYear()-100:parseInt(i),void 0==d||""==d)d=(new Date).getFullYear()+20;else if(d.startsWith("+")){var l=parseInt(d.substr(1));d=(new Date).getFullYear()+l}else if(d.startsWith("-")){var l=parseInt(d.substr(1));d=(new Date).getFullYear()-l}else d=parseInt(d);var s=Pd.Language.GetCurrentLanguage().toLowerCase(),c="pd-{0}".format(s);moment.locale(c),$(a).find("ul.day").append('<li><a href="#"><span class="value">'+n+'</span></a> <input type="hidden" value="'+n+'"/></li>');for(var h=1;31>=h;h++)$(a).find("ul.day").append('<li><a href="#"><span class="value">'+h+"</span></a></li>");$(a).find("ul.month").append('<li><a href="#"><span class="value">'+r+'</span></a> <input type="hidden" value="'+r+'"/></li>');for(var h=0;12>h;h++)$(a).find("ul.month").append('<li><a href="#"><span class="value" data-number="'+h+'">'+moment.months()[h]+"</span></a></li>");$(a).find("ul.year").append('<li><a href="#"><span class="value">'+o+'</span></a> <input type="hidden" value="'+o+'"/></li>');for(var h=d;h>=i;h--)$(a).find("ul.year").append('<li><a href="#"><span class="value">'+h+"</span></a></li>");var u=function(e,t,i){var d=0==e.length?$(a).find(".pd-dropdown.dd-day dt span").html():e,l=0==t.length?$(a).find(".pd-dropdown.dd-month dt span").html():t,s=0==i.length?$(a).find(".pd-dropdown.dd-year dt span").html():i,c=-1;if($(a).find("ul.month li a span").each(function(){return-1!=c?!1:$(this).text()==l?(c=$(this).attr("data-number"),!1):void 0}),d!=n&&l!=r&&s!=o){var h=moment(s+"--"+(1*c+1)+"-"+d,"YYYY-MM-DD").format("YYYY-MM-DD");p.setDate(h.toString())}else p._o.field.value=""};$(a).find(".dd-day ul li a").on("click",function(e){u($(e.target).closest("li").find("span").html(),"","")}),$(a).find(".dd-month ul li a").on("click",function(e){u("",$(e.target).closest("li").find("span").html(),"")}),$(a).find(".dd-year ul li a").on("click",function(e){u("","",$(e.target).closest("li").find("span").html())});var p=new Pikaday({field:$(a).find("input.datepicker")[0],firstDay:1,setDefaultDate:!1,keepFieldBlank:!0,yearRange:[i,d],onSelect:function(){var e=moment(p.getDate()).format("D-MMMM-YYYY").split("-");$(a).find(".dd-day.secondary dt span").html(e[0]),$(a).find(".dd-month.secondary dt span").html(e[1]),$(a).find(".dd-year.secondary dt span").html(e[2])},onOpen:function(){$(document).bind("keydown.pikaday",{picker:p},e)},onClose:function(){$(document).unbind("keydown.pikaday",e)},i18n:{months:moment.localeData()._months,weekdays:moment.localeData()._weekdays,weekdaysShort:moment.localeData()._weekdaysShort}});p._o.field.value=""}),$("div.datepicker").addClass("wired"))},setLanguageCookieInternal=function(e,t,a,n){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.setLanguageCookieInternal"),Cookies.set(e,a,{domain:t,path:"/",expires:n})},sidebarLinksActiveStateInternal=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.sidebarLinksActiveStateInternal");var e=$(".list-area ul li a");e.focus(function(){$(this).closest("li").addClass("pd-active")}),e.blur(function(){$(this).closest("li").removeClass("pd-active")}),e.hover(function(){$(this).closest("li").addClass("pd-hover")},function(){$(this).closest("li").removeClass("pd-hover")})}},applyDotDotDotInternal=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyDotDotDotInternal",!0),$.fn.cssValue=function(e){var t;return isNaN(t=parseFloat(this.css(e)))?0:t},$(".dotdotdot:not(.dotted)").each(function(){var e=$(this),t=e.text();if(""==t||""!=t&&t.indexOf("{{")>-1)Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyDotDotDotInternal: skip dotdotdot for text "+t,!0);else{var a=e.attr("data-parent-container");if(void 0==a){var n=e.cssValue("height");try{Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyDotDotDotInternal: apply dotdotdot for text: "+(t.trim().length>100?t.trim().substring(0,100)+"...":t.trim()),!0)}catch(r){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyDotDotDotInternal: exception")}e.dotdotdot({height:n,wrap:"word",watch:!0}),e.addClass("dotted")}else{var o=e.parent(a);if(1==o.length){var i=o.height();Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyDotDotDotInternal: Parent element '{0}' has a height of '{1}'".format(a,i),!0),o.children().each(function(){var t=$(this);t.is(e)||(i-=t.cssValue("height"))}),0>i&&(i=0),Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyDotDotDotInternal: Calculated available height is '{0}'".format(i),!0),e.dotdotdot({height:i,wrap:"word",watch:!1}),e.addClass("dotted")}}}}))},pushGreyBackgroundToContainerInternal=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.pushGreyBackgroundToContainerInternal"),$(".container-grey-bg:not(.pushed)").each(function(){$(this).parents(".container-fluid").removeClass("grey-bg").addClass("grey-bg"),$(this).addClass("pushed")}))},currentSiteActualViewportWidthInternal=function(){if(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.currentSiteActualViewportWidthInternal",!0),void 0==window.matchMedia||null==window.matchMedia){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.currentSiteActualViewportWidthInternal :: window.matchMedia is undefined, using old method");var e=document.body.scrollHeight>document.documentElement.clientHeight,t=e?intScrollbarWidth:0;return document.documentElement.clientWidth+t}try{var a=function(e,t){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.currentSiteActualViewportWidthInternal.searchForViewportWidth :: pixelShift "+t,!0);for(var a=0;e>a;){var n,r;if(n=e-a,Pd.Shared.CheckMediaQueryViewportWidth(n,n+t))return Pd.Shared.LogToConsoleIfDebug("Pd.Shared.currentSiteActualViewportWidthInternal :: media width == below window width",!0),n;if(r=e+a,Pd.Shared.CheckMediaQueryViewportWidth(r,r+t))return Pd.Shared.LogToConsoleIfDebug("Pd.Shared.currentSiteActualViewportWidthInternal :: media width == above window width",!0),r;a++}return e};if(intMediaViewportWidth>0&&Pd.Shared.CheckMediaQueryViewportWidth(intMediaViewportWidth,intMediaViewportWidth))return Pd.Shared.LogToConsoleIfDebug("Pd.Shared.currentSiteActualViewportWidthInternal :: media width == intMediaViewportWidth",!0),intMediaViewportWidth;if(intMediaViewportWidth>0&&Pd.Shared.CheckMediaQueryViewportWidth(intMediaViewportWidth,intMediaViewportWidth+1))return Pd.Shared.LogToConsoleIfDebug("Pd.Shared.currentSiteActualViewportWidthInternal :: media width == intMediaViewportWidth (+1)",!0),intMediaViewportWidth;var n=document.documentElement.clientWidth,r=n+intScrollbarWidth;if(Pd.Shared.CheckMediaQueryViewportWidth(r,r))return Pd.Shared.LogToConsoleIfDebug("Pd.Shared.currentSiteActualViewportWidthInternal :: media width == window + scrollbar",!0),intMediaViewportWidth=r;if(Pd.Shared.CheckMediaQueryViewportWidth(n,n))return Pd.Shared.LogToConsoleIfDebug("Pd.Shared.currentSiteActualViewportWidthInternal :: media width == window",!0),intMediaViewportWidth=n;var o=0;navigator.userAgent.indexOf("WebKit")>0&&(o=1);var i=a(n,o);return intMediaViewportWidth=i}catch(d){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.currentSiteActualViewportWidthInternal :: unhandled exception :: "+d.message)}return Pd.Shared.LogToConsoleIfDebug("Pd.Shared.currentSiteActualViewportWidthInternal :: nothing matches; severe problem"),intMediaViewportWidth},checkMediaQueryViewportWidthInternal=function(e,t){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.checkMediaQueryViewportWidthInternal :: "+e+","+t,!0);var a="(min-width: {0}px) and (max-width: {1}px)";if(void 0==window.matchMedia||null==window.matchMedia){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.checkMediaQueryViewportWidthInternal :: window.matchMedia is undefined");var n=document.body.scrollHeight>document.documentElement.clientHeight,r=n?intScrollbarWidth:0,o=document.documentElement.clientWidth+r;return o>=e&&t>=o?!0:!1}return window.matchMedia(a.format(e,t)).matches},currentlyInMobileViewInternal=function(){return Pd.Shared.CheckMediaQueryViewportWidth(0,intMobileRenderingMaxSize)},performMiscellaneousHtmlCleanupInternal=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal");var e=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal.removeInvalidWhitespaceCharacters");var e=function(t){var a=$(t).text();if(Pd.Shared.TextContainsInvalidSharePointWhitespace(a)){$(t).contents().filter(function(){return 3===this.nodeType}).each(function(){var e=this.nodeValue;Pd.Shared.TextContainsInvalidSharePointWhitespace(e)&&Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal.removeInvalidWhitespaceCharacters.processElement :: Looking for whitespace and found SP chars",!0),e.length>0&&(e=Pd.Shared.RemoveInvalidSharePointWhitespace(e),0==e.trim().length&&(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal.removeInvalidWhitespaceCharacters.processElement :: trimming standard whitespace :: "+Pd.Shared.GetElementAsText($(t)),!0),this.nodeValue=e.trim()))});var n=Pd.Shared.GetElementDirectText($(t));if(Pd.Shared.TextContainsInvalidSharePointWhitespace(n)){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal.removeInvalidWhitespaceCharacters.processElement :: Sub RTE element with bad text :: "+Pd.Shared.GetElementAsText($(t)),!0);var r=$(t).html();-1!=r.indexOf("ms-WPBody")&&Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal.removeInvalidWhitespaceCharacters.processElement :: Sub RTE element with bad text :: item contains webpart");var o=Pd.Shared.RemoveInvalidSharePointWhitespace(r);$(t).html(o)}else $(t).children().each(function(){e(this)})}};$(".ms-rtestate-field:not(.ws-removed)").each(function(){if(void 0!=$(this).attr("id")){var t=$(this).html(),a=(new Date).getTime();Pd.Shared.ContainerHasVisibleContent($(this))&&Pd.Shared.TextContainsInvalidSharePointWhitespace(t)&&(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal.removeInvalidWhitespaceCharacters :: RTE has visible content and contains invalid characters, processing '"+Pd.Shared.GetElementAsText($(this))+"'",!0),e(this));var n=(new Date).getTime(),r=n-a;Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal.removeInvalidWhitespaceCharacters :: processing time required for RTE: "+r+"ms",!0),$(this).addClass("ws-removed")}})};if(e(),$("body.agenda #pdc p.event-info:not(.wired), body.press-release #pdc p.event-info:not(.wired), body.sda-news #pdc p.event-info:not(.wired)").each(function(){var e=$(this),t=e.children("span.event-title"),a=e.children("span.article-abstract-text"),n=!0;if(1==t.length&&1==a.length){var r=a.text().trim();0==r.length&&(n=!1),n||(a.hide(),e.addClass("only-event-title"))}e.addClass("wired")}),$(".ms-rtestate-field:not(.invisible-bullets-done)").each(function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal: found rte that hasn't been processed for invisible bullets",!0);var e=$(this);e.find("ul:not(.invisible-bullets)").each(function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal: found ul that hasn't been processed for invisible bullets",!0);var e=$(this);e.find(".pd-rteStyle-InvisibleBullets").length>0&&(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal: found ul to be made invisible",!0),
e.addClass("invisible-bullets"))}),e.addClass("invisible-bullets-done")}),Pd.Shared.CurrentlyInMobileView()){if($(".tiles-single.hidden-xs:not(.parents-hidden)").each(function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal :: found a tile hidden on mobile to process",!0);var e=$(this);e.addClass("parents-hidden");for(var t=!0;t;)0==e.parent().children(":visible").text().trim().length&&(e.parent().addClass("hidden-xs"),Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal :: adding class of hidden-xs to parent",!0)),e=e.parent(),void 0!=e.attr("id")&&"pdc"==e.attr("id")&&(t=!1)}),$("body").hasClass("detail")){var t=$(".pd-affair-detail-nav-panel.hidden-xs");t.length>0&&(Pd.Shared.ContainerHasVisibleContent(t.parents(".container-fluid"))||t.parents(".container-fluid").addClass("hidden-xs"))}if($("body").hasClass("welcome")){var a=PdCustomJs("#wsAffairsTeaserNew");a.length>0&&(Pd.Shared.ContainerHasVisibleContent(a.parents(".col-lg-6.col-sm-12.clearfix"))||a.parents(".col-lg-6.col-sm-12.clearfix").addClass("hidden-xs"))}}var n=function(){var e=function(t){void 0===t&&(t=1);var a=PdCustomJs(".row.user-struct:not(.hidden) > .ms-rtestate-field");Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal :: looking for empty RTE's. RteCount: "+a.length+", execution count: "+t,!0);var n=!1;a.each(function(){var e=$(this);0!=e.find(".angular-container").length?"ready"!==$("body").attr("data-page-status")?20>t?(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal :: found RTE with angular and page not ready, running in short while",!0),n=!0):Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal :: found RTE with angular and page not ready but hit max count of 20, not setting timer",!0):Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal :: found RTE with angular and page is ready, running checks",!0):Pd.Shared.ContainerHasVisibleContent(e)||(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.performMiscellaneousHtmlCleanupInternal :: found empty, hiding",!0),e.parents(".row.user-struct").addClass("hidden"))}),n&&setTimeout(function(){e(t+1)},1e3)};if($("body").hasClass("welcome")){e();var t=PdCustomJs(".row.footer-zone");t.length>0&&(Pd.Shared.ContainerHasVisibleContent(t)||t.addClass("hidden"));var a=PdCustomJs(".rte-cell");a.each(function(){Pd.Shared.ContainerHasVisibleContent($(this))||$(this).addClass("hidden"),Pd.Shared.ApplyMissingBootstrapColumnClasses($(this))}),$(".content.links-with-bg.tiles-single.alternate.pd-teaser").parents(".row.rte-row").each(function(){void 0!=$(this).css("margin-top")&&"-20px"==$(this).css("margin-top")&&$(this).css("margin-top","0").addClass("margin-top-js-adjusted")})}};n();var r=$("footer h4");r.length>0&&r.each(function(){var e=$(this);e.replaceWith($("<h2/>").text(e.text()).attr("class",e.attr("class")))})}},applyMissingBootstrapColumnClassesInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMissingBootstrapColumnClassesInternal: processing elem: "+Pd.Shared.GetElementAsText(e));try{if(e.hasClass("pushed-12-cols"))return;var t=e.attr("class"),a=t.split(" "),n=[],r=!1,o=!1,i=!1,d=!1,l=!1;a.forEach(function(e){e.startsWith("col-lg")&&(r=!0),e.startsWith("col-md")&&(o=!0),e.startsWith("col-sm")&&(i=!0),e.startsWith("col-xs")&&(d=!0),e.startsWith("col-tn")&&(l=!0)}),r?(o||n.push("col-sm-12"),i||n.push("col-md-12"),d||n.push("col-xs-12"),l||n.push("col-tn-12"),o&&i&&d&&l?Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMissingBootstrapColumnClassesInternal: already have all classes, adding nothing to: "+Pd.Shared.GetElementAsText(e),!0):(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMissingBootstrapColumnClassesInternal: added extra bootstrap classes dynamically to: "+Pd.Shared.GetElementAsText(e),!0),n.push("pushed-12-cols"))):Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMissingBootstrapColumnClassesInternal: large doesn't exist, stopping on: "+Pd.Shared.GetElementAsText(e),!0),n.forEach(function(t){e.addClass(t)})}catch(s){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMissingBootstrapColumnClassesInternal: unexpected exception: "+s.message)}},textContainsInvalidSharePointWhitespaceInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.textContainsInvalidSharePointWhitespaceInternal",!0);for(var t=0;t<e.length;t++)if(8203==e.charCodeAt(t))return!0;return!1},removeInvalidSharePointWhitespaceInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.removeInvalidSharePointWhitespaceInternal",!0);for(var t="",a=0;a<e.length;a++)8203!=e.charCodeAt(a)&&(t+=e.charAt(a));return t},containerHasVisibleContentInternal=function(e,t){void 0==t&&(t=!1);var a=function(e,n){var r=Pd.Shared.GetElementDirectText(e);if(t){Pd.Shared.RemoveInvalidSharePointWhitespace(r)}if(r.length>0){var o=10;return r.length<o&&(o=r.length),Pd.Shared.LogToConsoleIfDebug("Pd.Shared.containerHasVisibleContentInternal.elementHasVisibleContent :: true :: len '"+r.length+"', '"+r.substring(0,o)+"'",!0),!0}var i=!1;return e.children(":visible").each(function(){return a(PdCustomJs(this),n+1)?(i=!0,!1):void 0}),i};return 0==e.length?void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.containerHasVisibleContentInternal :: Supplied element doesn't exist?",!1):a(e,0)},wireupCouncilorsAdvancedSearchInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireupCouncilorsAdvancedSearchInternal"),$("#cas_search:not(.wired)").click(function(e){e.preventDefault();var t=Pd.Shared.GetPropertiesFromFormControls(),a=buildCustomQueryAdvancedSearch(t),n=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.Councilor.Search.CustomQuery,a);window.location.assign(n)}),$("#cas_search").addClass("wired");var e=$("#cas_deleteentries:not(.wired)");e.length&&(e.attr("href","javascript:window.location.reload()"),$("#cas_deleteentries").addClass("wired")),$("#cas_gender").find("label:first").addClass("checked"),$("#cas_functions").find("label:first").addClass("checked")},wireupAffarirAdvancedSearchInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireupAffarirAdvancedSearchInternal"),$("#aas_search:not(.wired)").click(function(e){e.preventDefault();var t=Pd.Shared.GetPropertiesFromFormControlsAffair(),a=buildCustomQueryAdvancedSearch(t),n=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.Affair.Search.CustomQuery,a);window.location.assign(n)}),$("#aas_search").addClass("wired");var e=$("#aas_deleteentries:not(.wired)");e.length&&(e.attr("href","javascript:window.location.reload()"),$("#aas_deleteentries").addClass("wired")),Pd.Shared.WiredSelectAllDeselectLink($("#aas_businessType:not(.wired)")),Pd.Shared.WiredSelectAllDeselectLink($("#aas_approachanswered:not(.wired)")),Pd.Shared.WiredSelectAllDeselectLink($("#aas_businessTags:not(.wired)")),$("#aas_approachanswered").find("a, label, input").addClass("checked"),Pd.Shared.WiredSelectionSubCheckBoxes()},wiredSelectAllDeselectLinkInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wiredSelectAllDeselectLinkInternal"),e&&(e.find("a.toggleselected").click(function(e){e.preventDefault(),Pd.Shared.SelectAllCheckboxes(this)}),e.addClass("wired"))},wiredSelectionSubCheckBoxesInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wiredSelectionSubCheckBoxesInternal");var e=$(".sub-checkbox:not(.wired)");e.each(function(e,t){$(t).find("a.toggleselected").click(function(e){e.preventDefault(),Pd.Shared.SelectAllCheckboxes(t)}),$(t).find(">ul>li>label input").click(function(e){Pd.Shared.SelectAllSubCheckboxes(e.target.parentElement)}),$(t).find(">ul ul li label input").click(function(e){Pd.Shared.SelectAllParentCheckboxes(e.target.parentElement)})}),e.addClass("wired")},selectAllCheckboxesInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.selectAllCheckboxesInternal",!0),$(e).toggleClass("checked"),$(e).parent().parent().find("input").toggleClass("checked",$(e).hasClass("checked")),$(e).parent().parent().find("input").parent().toggleClass("checked",$(e).hasClass("checked"))},selectAllSubCheckboxesInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.selectAllSubCheckboxesInternal",!0),$(e).parent().find("input").toggleClass("checked",$(e).hasClass("checked")),$(e).parent().find("input").parent().toggleClass("checked",$(e).hasClass("checked"))},selectAllParentCheckboxesInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.selectAllParentCheckboxesInternal",!0);var t=$(e).parent().parent().parent();$(t).find(">label input").toggleClass("checked",t.find("ul input").hasClass("checked")),$(t).find(">label input").parent().toggleClass("checked",t.find("ul input").hasClass("checked"))},getDatefromDatepickerInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.getDatefromDatepickerInternal",!0);var t=!0;if($(e).find("dt span").each(function(e,a){0==e?$(a).text().toUpperCase()==Res.brandingCalendarDayName.toUpperCase()&&(t=!1):1==e?$(a).text().toUpperCase()==Res.brandingCalendarMonthName.toUpperCase()&&(t=!1):2==e&&$(a).text().toUpperCase()==Res.brandingCalendarYearName.toUpperCase()&&(t=!1)}),t){var a=$(e).find("input[type=radio]").val();return new Date(a).format("yyyy-MM-dd")}return""},getDateforSearchQueryInternal=function(e,t){var a="";return void 0!==e&&""!==e?a+=void 0!==t&&""!==t?e+".."+t:">="+e:void 0!==t&&""!==t&&(a+="<="+t),a},getPropertiesFromFormControlsInternal=function(){var e={};e.PdMemberCouncilLastName=$("#cas_lastname").val(),e.PdMemberCouncilFirstName=$("#cas_firstname").val(),e.PdMemberCouncilGender=$("#cas_gender").find("label .checked").val();var t=Pd.Shared.GetDatefromDatepicker($("#cas_dateofbirthfrom")),a=Pd.Shared.GetDatefromDatepicker($("#cas_dateofbirthto"));e.PdMemberCouncilDateOfBirth=Pd.Shared.GetDateforSearchQuery(t,a),t=Pd.Shared.GetDatefromDatepicker($("#cas_diedfrom")),a=Pd.Shared.GetDatefromDatepicker($("#cas_diedto")),e.PdMemberCouncilDateOfDeath=Pd.Shared.GetDateforSearchQuery(t,a),e.PdMemberCouncilDateOfDeath&&(e.PdMemberCouncilDateOfDeath=e.PdMemberCouncilDateOfDeath+" -PdMemberCouncilDateOfDeath=1900-01-01"),e.PdMemberCouncilCanton=[],$("#cas_cantons").find("label .checked").each(function(t,a){e.PdMemberCouncilCanton.push($(a).val())}),e.noFieldPdMemberCouncilPresidentCouncil=$("#cas_functions").find("label .checked").val(),e.noFieldPdMemberCouncilPresidentCouncil&&("member"==e.noFieldPdMemberCouncilPresidentCouncil.toLowerCase()?e.noFieldPdMemberCouncilPresidentCouncil="NOT(PdMemberCouncilPresidentCouncil:1 OR PdMemberCouncilPresidentCouncil:2 OR PdMemberCouncilPresidentCouncil:99)":"president"==e.noFieldPdMemberCouncilPresidentCouncil.toLowerCase()&&(e.noFieldPdMemberCouncilPresidentCouncil="(PdMemberCouncilPresidentCouncil:1 OR PdMemberCouncilPresidentCouncil:2 OR PdMemberCouncilPresidentCouncil:99)")),e.PdMemberCouncilCouncil=[],$("#cas_councils").find("label .checked").each(function(t,a){e.PdMemberCouncilCouncil.push($(a).val())}),$("#cas_infunction input").hasClass("checked")&&(t=Pd.Shared.GetDatefromDatepicker($("#cas_takenonfrom")),a=Pd.Shared.GetDatefromDatepicker($("#cas_takenonto")),e.PdMemberCouncilStartDate=Pd.Shared.GetDateforSearchQuery(t,a),t=Pd.Shared.GetDatefromDatepicker($("#cas_leftfrom")),a=Pd.Shared.GetDatefromDatepicker($("#cas_leftto")),e.PdMemberCouncilEndDate=Pd.Shared.GetDateforSearchQuery(t,a),e.PdMemberCouncilActive=$("#cas_infunction input").hasClass("checked")),e.PdMemberCouncilParty=[],$("#cas_parties").find("label .checked").each(function(t,a){e.PdMemberCouncilParty.push($(a).val())}),e.PdMemberCouncilCurrentParlGroup=[],$("#cas_parlgroups").find("label .checked").each(function(t,a){e.PdMemberCouncilCurrentParlGroup.push($(a).val())});var n=getValueAttrFromDropDown("#cas_committee");return Pd.Utility.StringIsNullOrEmpty(n)||(e.noFieldCommittee="(PdMemberCouncilCommittee:"+n+" OR PdMemberCouncilHistoricCommittee:"+n+")"),e},getPropertiesFromFormControlsAffairInternal=function(){var e=function(e){var t=$(e).find("dt a span").html().trim();return $("#aas_submittedby").find("dd ul li:first-child a span").html().trim()!=t?$(e).find("dd li a span:contains("+t+")").attr("value"):""},t={};t.noField=$("#aas_searchintext").val(),t.title=$("#aas_searchintitle").val(),t.PdBusinessCouncilorPersonNumber=e("#aas_submittedby");var a=$("#aas_itemno").val();a&&""!=a&&(t.noField1="(PdAffairId:"+a+" OR PdAffairIdFormatted:"+a+")"),t.PdBusinessCommittee=e("#aas_committee"),t.PdBusinessCanton=e("#aas_canton"),t.PdBusinessParlGroup=e("#aas_faction"),t.PdBusinessCouncilorParlGroup=e("#aas_memberoffraction"),t.PdBusinessCouncil=e("#aas_submittedtothecouncil"),t.PdBusinessResponsibleDepartments=e("#aas_responsibledepartment"),t.PdBusinessResponsibleCommittees=e("#aas_committeeresponsible"),t.PdAffairTypeId=[],$("#aas_businessType").find("label .checked").each(function(e,a){var n=$(a).val();0!=n.indexOf(";")?t.PdAffairTypeId.push.apply(t.PdAffairTypeId,n.split(";")):t.PdAffairTypeId.push(n)}),t.PdBusinessTags=[],$("#aas_businessTags").find("label .checked").each(function(e,a){var n=$(a).val();0!=n.indexOf(";")?t.PdBusinessTags.push.apply(t.PdBusinessTags,n.split(";")):t.PdBusinessTags.push(n)}),t.PdAffairStateId=[],$("#aas_businessStatus").find("label .checked").each(function(e,a){""!=$(a).val()&&t.PdAffairStateId.push($(a).val())}),t.PdBusinessFederalCouncilProposalDate=[],2!=$("#aas_approachanswered").find("label input.checked").length&&$("#aas_approachanswered").find("label input.checked").each(function(e,a){""!=$(a).val()&&t.PdBusinessFederalCouncilProposalDate.push($(a).val())}),t.PdBusinessDepositYear=e("#aas_deposityear");var n=Pd.Shared.GetDatefromDatepicker($("#aas_datefromdeposit")),r=Pd.Shared.GetDatefromDatepicker($("#aas_datetodeposit"));return t.PdBusinessDepositDate=Pd.Shared.GetDateforSearchQuery(n,r),t.PdBusinessDepositSession=e("#aas_depositsession"),t.PdBusinessDepositLegislatur=e("#aas_depositlegislature"),t.PdBusinessHandlingYear=e("#aas_handlingyear"),n=Pd.Shared.GetDatefromDatepicker($("#aas_datefromhandling")),r=Pd.Shared.GetDatefromDatepicker($("#aas_datetohandling")),t.PdBusinessHandlingDate=Pd.Shared.GetDateforSearchQuery(n,r),t.PdBusinessHandlingSession=e("#aas_handlingsession"),t.PdBusinessHandlingLegislatur=e("#aas_handlinglegislature"),(t.PdBusinessHandlingYear||t.PdBusinessHandlingDate||t.PdBusinessHandlingSession||t.PdBusinessHandlingLegislatur)&&(t.PdBusinessStateDone=1),t},getValueAttrFromDropDown=function(e){var t=$(e).find("dt a span").html().trim();return $(e).find("ul li:first-child a span").html().trim()!=t?$(e).find("li a span:contains("+t+")").attr("value"):""},buildCustomQueryAdvancedSearch=function(e){var t="";for(var a in e)if(e[a]&&(e[a].length||""!=e[a]))if($.isArray(e[a]))if(1==e[a].length)t+=a==Pd.Utility.ManagedProperties.PdMemberCouncilCurrentParlGroup?"{0}:{2} OR {1}:{2}".format(Pd.Utility.ManagedProperties.PdMemberCouncilCurrentParlGroup,Pd.Utility.ManagedProperties.PdMemberCouncilHistoricParlGroup,e[a][0]):a+preAppendOperatorIfNeeded(e[a][0])+" ";else{if(a==Pd.Utility.ManagedProperties.PdMemberCouncilCurrentParlGroup)for(var n=0;n<e[a].length;n++)t+=0===n?"({0}:{2} OR {1}:{2}".format(Pd.Utility.ManagedProperties.PdMemberCouncilCurrentParlGroup,Pd.Utility.ManagedProperties.PdMemberCouncilHistoricParlGroup,e[a][0]):" OR {0}:{2} OR {1}:{2}".format(Pd.Utility.ManagedProperties.PdMemberCouncilCurrentParlGroup,Pd.Utility.ManagedProperties.PdMemberCouncilHistoricParlGroup,e[a][0]);else for(var n=0;n<e[a].length;n++)t+=0===n?"("+a+preAppendOperatorIfNeeded(e[a][n]):" OR "+a+preAppendOperatorIfNeeded(e[a][n]);t+=") "}else t+=a.indexOf("noField")>=0?e[a]+" ":a+preAppendOperatorIfNeeded(e[a])+" ";return encodeURIComponent(t.trim())},preAppendOperatorIfNeeded=function(e){return e.toString().indexOf("<")>=0||e.toString().indexOf(">")>=0||e.toString().indexOf("=")>=0?e:":"+e},disableClickEventInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.disableClickEventInternal"),$(document).on("click",".no-link",function(e){e.preventDefault()})},setAttributesToLogoInternal=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.setAttributesToLogoInternal");var e=Res.brandingSiteHeaderLogoText;$(".logo-text a").attr("title",e),$(".logo-text img").attr("alt",e)}},hideExampleBrandingMarkupInternal=function(){Pd.Shared.IsDebugMode()||$(".branding-begins").each(function(){var e=$(this);for(e.hide();1==e.next().length;)e=e.next(),e.hasClass("back-to-top")||"FOOTER"==e.prop("nodeName")||e.hide()})},wireUpRefinerResetControlInternal=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpRefinerResetControlInternal"),$(".refinements .reset").click(function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpRefinerResetControlInternal :: .refinements .reset",!0),e.preventDefault();var t=window.location.hash;if(1==t.indexOf("Default")&&(t=unescape(t),t.indexOf('"r":')>0)){var t=t.replace(/,"r".*?].*"m":.*?}]/,"");t=escape(t.replace("#Default=","")),window.location.href=window.location.pathname+window.location.search+"#Default="+t}}))},affairChronologyBlockSpecificInformationLinkingInternal=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.affairChronologyBlockSpecificInformationLinkingInternal"),$(".pd-curia-vista").find(".last ~ .featured").prev().addClass("before-featured"))},setupNotificationSubscriptionPanelInternal=function(){if(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.setupNotificationSubscriptionPanelInternal"),void 0!=$("#pdc").attr("data-page-type"))try{var e=notificationPanelPageTypeInternal[$("#pdc").attr("data-page-type")];if(void 0!=e){switch(e){case notificationPanelPageTypeInternal.NotificationHandler:$(".subscribe-module").removeClass("hidden"),$(".subscribe-module").addClass("show");break;case notificationPanelPageTypeInternal.BusinessDetail:case notificationPanelPageTypeInternal.CouncillorDetail:case notificationPanelPageTypeInternal.SessionDetail:$(".back-to-page").addClass("sub-link"),$(".back-to-page.sub-only").show();break;case notificationPanelPageTypeInternal.SearchBusiness:case notificationPanelPageTypeInternal.SearchNews:case notificationPanelPageTypeInternal.SearchAgenda:case notificationPanelPageTypeInternal.SearchBlog:$(".live-search .subscribe").addClass("show")}switch(e){case notificationPanelPageTypeInternal.BusinessDetail:$("div.long-button a.subscribe").text(Res.brandingAffairDetailSubscribe);break;case notificationPanelPageTypeInternal.CouncillorDetail:$("div.long-button a.subscribe").text(Res.brandingCouncillorProfileSubscribe);break;case notificationPanelPageTypeInternal.SessionDetail:$("div.long-button a.subscribe").text(Res.brandingSessionDetailSubscribe)}}}catch(t){Pd.Shared.LogToConsoleIfDebug("Unable to extract notification Panel Page Type from #pdc (for preparing notification panel).")}$(".live-search .subscribe, .back-to-page .subscribe").click(function(e){e.preventDefault(),$(this).hasClass("active")?($(this).toggleClass("active"),$(".subscribe-module").toggleClass("show"),setTimeout(function(){$(".subscribe-module").addClass("hidden")},500)):($(this).toggleClass("active"),$(".subscribe-module").removeClass("hidden"),setTimeout(function(){$(".subscribe-module").toggleClass("show")},50))}),$(".subscribe-module .pd-sm-close-button span").click(function(){$(".subscribe-module").removeClass("show"),setTimeout(function(){$(".subscribe-module").addClass("hidden")},500),$(".live-search .subscribe, .back-to-page .subscribe").removeClass("active"),$(".subscribe-module .status-text").hide()})},hideNotificationSubscriptionButtonInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.hideNotificationSubscriptionButton");var e=$("a.subscribe");if(0===e.length)return void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.hideNotificationSubscriptionButton: no subscribe button",!0);var t=e.parents(".container-fluid");return 0===t.length?void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.hideNotificationSubscriptionButton: no subscription bar",!0):void(t.hasClass("sub-only")?(t.addClass("hidden hideNotificationSubscriptionButton"),Pd.Shared.LogToConsoleIfDebug("Pd.Shared.hideNotificationSubscriptionButton: hiding whole bar",!0)):(e.parent().addClass("hidden hideNotificationSubscriptionButton"),t.removeClass("sub-link").addClass("sub-link-removed-hideNotificationSubscriptionButton"),Pd.Shared.LogToConsoleIfDebug("Pd.Shared.hideNotificationSubscriptionButton: hiding just button and fixing styles",!0)))},addOptionToClearInputBoxesInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.addOptionToClearInputBoxesInternal");var e="button.search-box-input-reset";if(!($(e).length>0)){var t=$("#SearchBox input");t.addClass("needsDeleteButton");var a=$("input.needsDeleteButton"),n=$("#SearchBox input").attr("title"),r=$("input.smartphone-live-search-input"),o=$("#liveSearchInputBox");if($(a.length>0)&&$(a).each(function(){$(this).parent().append('<button class="search-box-input-reset"></button>')}),$(e).on("click",function(n){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.addOptionToClearInputBoxesInternal :: searchBoxResetInput clicked",!0),n.preventDefault();var r=Pd.Search.GetSearchBoxPlaceholder();a.val(""),t.attr("placeholder",r),a.parent().removeClass("ms-srch-sb-borderFocused"),a.removeClass("is-filled"),Pd.Shared.FocusOnSearchInputBox($(n.target).parent().find(a)),$(e).removeClass("is-open")}),a.on("paste",function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.addOptionToClearInputBoxesInternal :: searchbox input paste event fired",!0);var n=$(t[0]);Pd.Shared.LogToConsoleIfDebug("Pd.Shared.addOptionToClearInputBoxesInternal :: searchbox input/propertychange/paste event fired :: input not empty, adding cross",!0),n.parent().find($(e)).addClass("is-open"),n.parent().find(a).addClass("is-filled")}),a.on("keyup",function(){if(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.addOptionToClearInputBoxesInternal :: searchbox input event fired",!0),$(this)[0]!=t[0]&&$(this)[0]!=r[0]&&$(this)[0]!=o[0])return void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.addOptionToClearInputBoxesInternal :: event source not the search box, exiting",!0);var n=$.trim($(this).val());""!==n?(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.addOptionToClearInputBoxesInternal :: searchbox input/propertychange/paste event fired :: input not empty, adding cross",!0),$(this).parent().find($(e)).addClass("is-open"),$(this).parent().find(a).addClass("is-filled")):(n==$(this).attr("placeholder")||0==n.length)&&(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.addOptionToClearInputBoxesInternal :: searchbox input/propertychange/paste event fired :: input empty or equal to placeholder, removing cross",!0),$(e).parent().find($(e)).removeClass("is-open"),$(e).parent().find($(a)).removeClass("is-filled"))}),$("body").hasClass("search")&&"undefined"!=typeof n){var i=$.trim(t.val());i!=t.attr("title")&&(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.addOptionToClearInputBoxesInternal :: search input value doesn't match the title attribute, adding cross"),$(a).addClass("no-placeholder is-filled"),$(a).siblings(e).addClass("is-open"))}}},setupPageAccessibilityInternal=function(){Pd.Shared.PageIsInEditMode()||($("#imgPrefetch").remove(),Pd.Shared.SetupFocusbox())},setupFocusboxInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.setupFocusboxInternal");var e=function(e){var t=e.target,a=Pd.Shared.GetElementAsText($(t));Pd.Shared.LogToConsoleIfDebug("Pd.Shared.setupFocusboxInternal :: onElementFocusLogging :: "+a,!0)};$("#pdc").focusbox({boxOutlineMarginPx:7,onFocusCallback:e,trackFocussedElement:!0,zIndex:375,debugMode:Pd.Shared.IsVerboseMode()})},getElementAsTextInternal=function(e){if(1!=e.length)return void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.getElementAsTextInternal :: target empty, exiting",!0);e=e.clone(!1);var t=e[0];e.attr("data-ng-href")===e.attr("href")&&e.attr("data-ng-href","(removed)");for(var a="",n=0;n<t.attributes.length;n++){var r=t.attributes[n];if(r.specified){var o=r.value;o.length>0&&(o.length>50&&(o=o.substring(0,50)+"..."),a+=" "+r.name+'="'+o+'"')}}var i=Pd.Shared.GetElementDirectText(e);return 0==i.length?i="...":i.length>50&&(i=i.substring(0,50)+"..."),"<{0}{1}>{2}</{0}>".format(t.tagName.toLowerCase(),a,i)},getElementDirectTextInternal=function(e){return e&&0!=e.length?e.clone().children().remove().end().text().trim():(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.getElementDirectTextInternal :: $targetElement doesn't exist",!0),"")},applyMobileSearchBoxZoomControllerInternal=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMobileSearchBoxZoomControllerInternal");try{if("1"==Cookies.get("disableResponsive"))return void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMobileSearchBoxZoomControllerInternal :: responsive, exiting",!0);if(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMobileSearchBoxZoomControllerInternal :: not responsive",!0),!Pd.Shared.CurrentlyInMobileView())return void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMobileSearchBoxZoomControllerInternal :: are not mobile, exiting",!0);Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMobileSearchBoxZoomControllerInternal :: are mobile",!0),$("input#liveSearchInputBox, input.smartphone-live-search-input").on("touchend",function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMobileSearchBoxZoomControllerInternal :: on focus/touchend",!0);var t="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale={0}";Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMobileSearchBoxZoomControllerInternal :: setting zoom to 100%",!0),$("html head meta[name=viewport]").attr("content",t.format("1")),void 0!=e.originator&&(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMobileSearchBoxZoomControllerInternal :: focussing on box programatically",!0),$(e.target).trigger("focus")),setTimeout(function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMobileSearchBoxZoomControllerInternal :: setting zoom to 200%",!0),$("html head meta[name=viewport]").attr("content",t.format("2"))},500)})}catch(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.applyMobileSearchBoxZoomControllerInternal :: unhandled exception :: "+e)}}},makePageFullWidthInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.makePageFullWidthInternal");try{var e=$("div.container-fluid div.col-sm-9.left"),t=$("div.container-fluid div.col-sm-3.right");if(1!=e.length||1!=t.length)return void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.makePageFullWidthInternal :: column check failed, exiting");t.addClass("hidden"),e.removeClass("col-sm-9").addClass("col-sm-12")}catch(a){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.makePageFullWidthInternal :: unhandled exception :: "+a)}},wireUpToolTipsInternal=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpToolTipsInternal");try{$("a.pd-tooltip-icon:not(.wired)").each(function(){var $toolTip=$(this);$toolTip.attr("role","tooltip");var $pdTooltip=$toolTip.find(".pd-tooltip");if(Pd.Utility.StringIsNullOrEmpty($pdTooltip.attr("data-tooltip-resource"))&&Pd.Utility.StringIsNullOrEmpty($pdTooltip.attr("data-tooltip")))return $toolTip.hide(),!0;try{$pdTooltip.attr("data-tooltip",eval($pdTooltip.attr("data-tooltip-resource")))}catch(internalErr){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpToolTipsInternal :: problem evaluating resource :: "+internalErr),$toolTip.hide()}$pdTooltip.attr("aria-hidden","true"),$toolTip.on("focus mouseover",function(e){$pdTooltip.attr("aria-hidden","false")}).on("blur mouseout",function(e){$pdTooltip.attr("aria-hidden","true")}),$toolTip.on("click",function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpToolTipsInternal :: tooltip clicked",!0),$toolTip.hasClass("allow-click")||(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpToolTipsInternal :: tooltip click stopped",!0),e.preventDefault())}),$toolTip.addClass("wired")})}catch(err){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpToolTipsInternal :: unhandled exception :: "+err)}}},setupSkipLinkFunctionalityInternal=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.setupSkipLinkFunctionalityInternal");try{$("ul#skip-links li a").on("focus",function(){var e=$(this),t=$("<a />");t.attr("id","visible-skip-link"),t.attr("href",e.attr("href")),t.attr("title",e.attr("title")),t.attr("accesskey",e.attr("accesskey")),t.text(Pd.Shared.GetElementDirectText(e)),$("#pdc > header").prepend(t)}).on("blur",function(){$("#pdc #visible-skip-link").remove()})}catch(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.setupSkipLinkFunctionalityInternal :: unhandled exception :: "+e)}}},ensureAccessibleAnchorsInternal=function(e){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.ensureAccessibleAnchorsInternal");var t=function(e){var t=["pdf","docx","doc","pptx","ppt","xlsx","xls"],a=null;return $.each(t,function(t,n){return e.endsWith("."+n)?(a=n,!1):void 0}),a};if(0==$(e).length)return void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.ensureAccessibleAnchorsInternal :: dom selector doesn't exist, exiting",!0);$(e).find("a:not(.inspected)").each(function(){var e=$(this),a="Pd.Shared.ensureAccessibleAnchorsInternal :: "+Pd.Shared.GetElementAsText(e),n=e.attr("href");if(void 0==n||"#"==n)return!0;n=n.trim().toLowerCase();var r=t(n);if(null==r&&n.indexOf("docidredir.aspx")>0&&(r=Res.brandingAccessibilityLabelFormatChange,a+="; extension not known but is DocIDRedir"),null!=r){var o=$("<span />").addClass("invisible-all").text(r);e.append(o),a+="; added span"}Pd.Shared.LogToConsoleIfDebug(a,!0),e.addClass("inspected")}),Pd.Shared.AddPiwikDownloadTracker(e)}},addPiwikDownloadTrackerInternal=function(e){if(!Pd.Shared.PageIsInEditMode()){if(0===$(e).length)return void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.addPiwikDownloadTrackerInternal :: dom selector doesn't exist, exiting",!0);$(e).find("a:not(.inspected-piwik)").each(function(){var e=$(this),t="Pd.Shared.addPiwikDownloadTrackerInternal :: "+Pd.Shared.GetElementAsText(e),a=e.attr("href");return void 0==a||"#"===a?!0:(a=a.trim().toLowerCase(),a.indexOf("docidredir.aspx")>0&&(e.addClass("piwik-download"),t+="; added PIWIK"),Pd.Shared.LogToConsoleIfDebug(t,!0),void e.addClass("inspected-piwik"))}),_paq.push(["enableLinkTracking"])}},showElementInFancyboxInternal=function(e,t){return Pd.Shared.LogToConsoleIfDebug("Pd.Shared.showElementInFancyboxInternal"),0==$(e).length?void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.showElementInFancyboxInternal :: element not existing '"+e+"'"):(void 0==t&&(t={parent:"#pdc",autoSize:!1,width:800,height:"auto"}),void $.fancybox.open($(e),t))},setUpWebTransitionForMobileInternal=function(){document.body.addEventListener("touchstart",function(){},!1)},removeEmptyHtmlElementsInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.removeEmptyHtmlElementsInternal",!0);try{var t=$("<div />");return t.append(e),t.find(":empty").filter(function(){return $(this).is(":not(br)")}).remove(),e!=t.html()&&Pd.Shared.LogToConsoleIfDebug("Pd.Shared.removeEmptyHtmlElementsInternal: html was modified",!1),t.html()}catch(a){return Pd.Shared.LogToConsoleIfDebug("Pd.Shared.removeEmptyHtmlElementsInternal :: unhandled exception :: "+a.message),e}},onHashChangeInternal=function(e){if(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.onHashChangeInternal",!0),!Pd.Utility.StringIsNullOrEmpty(location.hash)){e&&e.preventDefault();var t,a=location.hash.replace("#/","#").slice(1);if(a.indexOf("AffairSummary")>-1)return void Pd.Angular.GotoAffairSummary();a.indexOf("TopOfDebate")>-1&&(t=Pd.Shared.CurrentlyInMobileView()?$(".row.business-info-container:first"):$("div#ab-detail-subject-navigation").parents(".row:first"),Pd.Angular.ScrollIntoView(t,!0));var n="[{0}='{1}']",r=n.format("id",a),o=$(r);r=n.format("name",a);var i=$(r);if(0!==o.length||0!==i.length){t=o.length>0?o:i;var d=t.closest(".accordion-group").find("a:first");if(0===d.length)return void Pd.Angular.ScrollIntoView(t,!0);var l=d.attr("aria-expanded");("undefined"==typeof l||"false"===l)&&d.trigger("click"),Pd.Angular.ScrollIntoView(t,!0);for(var s=$(document).height(),c=1;10>c;c++)setTimeout(function(){
var e=$(document).height();e>s?($("html, body").animate({scrollTop:d.offset().top},500),s=e):Pd.Shared.LogToConsoleIfDebug("Pd.Angular.onHashChangeInternal :: timeout :: height same, doing nothing",!0)},300*c)}}},bindOnHashChangeInternal=function(){$(window).on("hashchange",Pd.Shared.OnHashChange)},wireUpLinksWithHashInternal=function(){if(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.wireUpLinksWithHashInternal",!0),!Pd.Shared.PageIsInEditMode()){var e=/\[#(.*?)\]/,t=$(".ms-rtestate-field a").filter(function(){var t=$(this).text();return t.length>1&&t.match(e)}),a=$(".ms-rtestate-field a").filter(function(){var e=$(this).attr("data-bookmark");return!Pd.Utility.StringIsNullOrEmpty(e)});$.each(a,function(e,t){var a="#",n=$(this).attr("data-bookmark");n&&(a+=n.startsWith("#")?n.slice(1):n);var r=$(t).attr("href")+a;$(t).attr("href",r)}),$.each(t,function(t,a){var n=$(a).text(),r=n.match(e),o="#";r&&(o+=r[1]);var i=$(a).attr("href")+o,d=$(a).html().replace(e,"");$(a).html(d),$(a).attr("href",i)})}};return{NotificationPanelPageType:notificationPanelPageTypeInternal,IsDebugMode:isDebugModeInternal,IsVerboseMode:isVerboseModeInternal,LogToConsoleIfDebug:logToConsoleIfDebugInternal,LogErrorToStatusDialog:logErrorToStatusDialogInternal,TryCatch:tryCatchInternal,CurrentPageRawRequestFilename:currentPageRawRequestFilenameInternal,PerformBasicBrowserDetection:performBasicBrowserDetectionInternal,PageIsInEditMode:pageIsInEditModeInternal,InsertSharedResourceText:insertSharedResourceTextInternal,CreateSiteOverlay:createSiteOverlayInternal,RemoveSiteOverlay:removeSiteOverlayInternal,WireUpWindowResizeEvent:wireUpWindowResizeEventInternal,SetupPageResponsiveness:setupPageResponsivenessInternal,WireUpBackToTopLink:wireUpBackToTopLinkInternal,GetElementLocationAndWindowLocationProperties:getElementLocationAndWindowLocationPropertiesInternal,ElementIsVisibleInViewport:elementIsVisibleInViewportInternal,HowMuchOfElementIsVisibleInViewport:howMuchOfElementIsVisibleInViewportInternal,CloseLiveSearchPopup:closeLiveSearchPopupInternal,PrepareMobileLanguageBar:prepareMobileLanguageBarInternal,WireUpLiveSearch:wireUpLiveSearchInternal,SetBodyClassBasedOnCurrentPageLayout:setBodyClassBasedOnCurrentPageLayoutInternal,SetHtmlClassWhenInEditMode:setHtmlClassWhenInEditModeInternal,SetLanguageCookie:setLanguageCookieInternal,IntialiseImageViewer:intialiseImageViewerInternal,WireUpTabs:wireUpTabsInternalInternal,RadioButtonSelectUnselect:radioButtonSelectUnselectInternal,SidebarLinksActiveState:sidebarLinksActiveStateInternal,ApplyDotDotDot:applyDotDotDotInternal,PushGreyBackgroundToContainer:pushGreyBackgroundToContainerInternal,PerformMiscellaneousHtmlCleanup:performMiscellaneousHtmlCleanupInternal,ApplyMissingBootstrapColumnClasses:applyMissingBootstrapColumnClassesInternal,TextContainsInvalidSharePointWhitespace:textContainsInvalidSharePointWhitespaceInternal,RemoveInvalidSharePointWhitespace:removeInvalidSharePointWhitespaceInternal,DisableClickEvent:disableClickEventInternal,CurrentlyInMobileView:currentlyInMobileViewInternal,SetAttributesToLogo:setAttributesToLogoInternal,HideExampleBrandingMarkup:hideExampleBrandingMarkupInternal,WireupCouncilorsAdvancedSearch:wireupCouncilorsAdvancedSearchInternal,WireUpDatePickerWithAllControls:wireUpDatePickerWithAllControlsInternal,WireUpRefinerResetControl:wireUpRefinerResetControlInternal,WireupAffarirAdvancedSearch:wireupAffarirAdvancedSearchInternal,AffairChronologyBlockSpecificInformationLinking:affairChronologyBlockSpecificInformationLinkingInternal,SetupNotificationSubscriptionPanel:setupNotificationSubscriptionPanelInternal,HideNotificationSubscriptionButton:hideNotificationSubscriptionButtonInternal,AddOptionToClearInputBoxes:addOptionToClearInputBoxesInternal,CurrentSiteActualViewportWidth:currentSiteActualViewportWidthInternal,SetupPageAccessibility:setupPageAccessibilityInternal,ApplyMobileSearchBoxZoomController:applyMobileSearchBoxZoomControllerInternal,FocusOnSearchInputBox:focusOnSearchInputBoxInternal,SetupFocusbox:setupFocusboxInternal,MakePageFullWidth:makePageFullWidthInternal,GetElementAsText:getElementAsTextInternal,GetElementDirectText:getElementDirectTextInternal,WireUpToolTips:wireUpToolTipsInternal,SetupSkipLinkFunctionality:setupSkipLinkFunctionalityInternal,EnsureAccessibleAnchors:ensureAccessibleAnchorsInternal,CheckForExtraLogging:checkForExtraLoggingInternal,ApplyClassesOnSearchBoxFocusIe:applyClassesOnSearchBoxFocusIeInternal,OpenLiveSearchPopup:openLiveSearchPopupInternal,CheckMediaQueryViewportWidth:checkMediaQueryViewportWidthInternal,ContainerHasVisibleContent:containerHasVisibleContentInternal,GetPropertiesFromFormControls:getPropertiesFromFormControlsInternal,GetPropertiesFromFormControlsAffair:getPropertiesFromFormControlsAffairInternal,WiredSelectionSubCheckBoxes:wiredSelectionSubCheckBoxesInternal,WiredSelectAllDeselectLink:wiredSelectAllDeselectLinkInternal,SelectAllCheckboxes:selectAllCheckboxesInternal,SelectAllSubCheckboxes:selectAllSubCheckboxesInternal,SelectAllParentCheckboxes:selectAllParentCheckboxesInternal,GetDatefromDatepicker:getDatefromDatepickerInternal,GetDateforSearchQuery:getDateforSearchQueryInternal,MatchImageSourceAndWrapImageInLightBox:matchImageSourceAndWrapImageInLightBoxInternal,ShowElementInFancybox:showElementInFancyboxInternal,SetUpWebTransitionForMobile:setUpWebTransitionForMobileInternal,RemoveEmptyHtmlElements:removeEmptyHtmlElementsInternal,OnHashChange:onHashChangeInternal,BindOnHashChange:bindOnHashChangeInternal,WireUpLinksWithHash:wireUpLinksWithHashInternal,AddPiwikDownloadTracker:addPiwikDownloadTrackerInternal}}(PdCustomJs),function(e){e(document).ready(function(){try{Pd.Shared.TryCatch(Pd.Shared.PerformBasicBrowserDetection),Pd.Shared.TryCatch(Pd.Shared.InsertSharedResourceText),Pd.Shared.TryCatch(Pd.Shared.WireUpWindowResizeEvent),Pd.Shared.TryCatch(Pd.Shared.SetupPageResponsiveness),Pd.Shared.TryCatch(Pd.Shared.WireUpBackToTopLink),Pd.Shared.TryCatch(Pd.Shared.PrepareMobileLanguageBar),Pd.Shared.TryCatch(Pd.Shared.WireUpLiveSearch),Pd.Shared.TryCatch(Pd.Shared.SetBodyClassBasedOnCurrentPageLayout),Pd.Shared.TryCatch(Pd.Shared.SetHtmlClassWhenInEditMode),Pd.Shared.TryCatch(Pd.Shared.IntialiseImageViewer),Pd.Shared.TryCatch(Pd.Shared.WireUpTabs),Pd.Shared.TryCatch(Pd.Shared.RadioButtonSelectUnselect),Pd.Shared.TryCatch(Pd.Shared.WireUpDatePickerWithAllControls),Pd.Shared.TryCatch(Pd.Shared.SidebarLinksActiveState),Pd.Shared.TryCatch(Pd.Shared.ApplyDotDotDot),Pd.Shared.TryCatch(Pd.Shared.PushGreyBackgroundToContainer),Pd.Shared.TryCatch(Pd.Shared.DisableClickEvent),Pd.Shared.TryCatch(Pd.Shared.SetAttributesToLogo),Pd.Shared.TryCatch(Pd.Shared.HideExampleBrandingMarkup),Pd.Shared.TryCatch(Pd.Shared.WireUpRefinerResetControl),Pd.Shared.TryCatch(Pd.Shared.AffairChronologyBlockSpecificInformationLinking),Pd.Shared.TryCatch(Pd.Shared.SetupNotificationSubscriptionPanel),Pd.Shared.TryCatch(Pd.Shared.AddOptionToClearInputBoxes),Pd.Shared.TryCatch(Pd.Shared.ApplyMobileSearchBoxZoomController),Pd.Shared.TryCatch(Pd.Shared.SetupPageAccessibility),Pd.Shared.TryCatch(Pd.Shared.WireUpToolTips),Pd.Shared.TryCatch(Pd.Shared.SetupSkipLinkFunctionality),Pd.Shared.TryCatch(function(){Pd.Shared.EnsureAccessibleAnchors("div.ms-rtestate-field")},Pd.Shared.EnsureAccessibleAnchors),Pd.Shared.TryCatch(Pd.Shared.PerformMiscellaneousHtmlCleanup),Pd.Shared.TryCatch(Pd.Shared.SetUpWebTransitionForMobile),Pd.Shared.TryCatch(Pd.Shared.BindOnHashChange),Pd.Shared.TryCatch(Pd.Shared.WireUpLinksWithHash)}catch(e){Pd.Shared.LogErrorToStatusDialog("Pd.Shared :: Unhandled exception on initialisation :: "+e)}})}(PdCustomJs);
Pd.Shared.Navigation=function(e){"use strict";var a=500,n=5,i=!1,t=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.wireUpMobileMenuInternal"),Pd.Shared.Navigation.SetupAccessibleMenu(),e(".mobile-menu-button").click(function(a){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.wireUpMobileMenuInternal :: mobile-menu-button clicked",!0),e(this).hasClass("active")?Pd.Shared.Navigation.CloseMobileMenu():Pd.Shared.Navigation.OpenMobileMenu(),a.preventDefault()}),e("nav ul a").each(function(){e(this).siblings("ul").prepend('<li class="parent-link"><a class="parent-link" href="'+e(this).attr("href")+'">'+Pd.Shared.GetElementDirectText(e(this))+"</a></li>"),e(this).siblings("ul").prepend('<li class="mobile-menu-back"><a href="#" class="mobile-menu-back">'+Res.brandingNavigationBack+"</a></li>"),0==e(this).siblings("ul").length&&e(this).addClass("no-children")}),e("nav > ul > li > a").each(function(){var a=e('<div class="mobile-back" />');a.append('<a class="overview" href="'+e(this).attr("href")+'" tabindex="-1">'+Pd.Shared.GetElementDirectText(e(this))+" "+Res.brandingNavigationOverview+"</a>"),a.append('<a class="close-bar" href="#" tabindex="-1">'+Res.brandingNavigationCloseFlyoutNavigation+"</a>"),a.insertAfter(this)}),e("nav:not(.active) > ul > li > a").on("click touchend",function(a){e(a.target).is("nav:not(.active) > ul > li > a:not(.overview):not(.close-bar)")&&(Pd.Shared.Navigation.OpenDesktopNavigationFlyout(e(this).parent()),a.preventDefault())}),e("nav ul a").on("click",function(){return Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.wireUpMobileMenuInternal :: nav ul a clicked (any)",!0),Pd.Shared.Navigation.NavigateMobileMenu(e(this))}),e("nav > ul > li > a").on("touchend",function(a){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.wireUpMobileMenuInternal :: nav > ul > li > a touchend",!0),0==e("nav.active").length?(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.wireUpMobileMenuInternal :: nav > ul > li > a touchend :: nav is open, preventDefault",!0),a.preventDefault()):Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.wireUpMobileMenuInternal :: nav > ul > li > a touchend :: nav is not open, default behaviour",!0)}),Pd.Shared.CurrentlyInMobileView()&&1==e("nav a.current-page").length&&Pd.Shared.Navigation.AutoNavigateMobileMenu(),e(".mobile-back a.close-bar").on("click touchend",function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.wireUpMobileMenuInternal :: mobile-back click/touch",!0),Pd.Shared.Navigation.CloseDesktopNavigationFlyout(),e.preventDefault()}))},o=function(a){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.openDesktopNavigationFlyoutInternal",!0),0!=e("div.search-button a.active").length&&Pd.Shared.CloseLiveSearchPopup();var n=e(a).hasClass("active");e("nav > ul.main-nav > li.active").length>0&&Pd.Shared.Navigation.CloseDesktopNavigationFlyout(),n||(e(a).addClass("active"),e(a).children("ul").attr("aria-hidden","false"))},r=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.closeDesktopNavigationFlyoutInternal",!0);var a=e("nav > ul.main-nav > li.active");a.removeClass("active"),a.children("ul").attr("aria-hidden","true")},l=function(n,t){if(0==e("nav.active").length&&!t)return Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.navigateMobileMenuInternal :: ("+(0==e("nav.active").length)+" && "+!t+") :: returning true at start"),!0;if(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.navigateMobileMenuInternal"),i)return!1;var o=e("nav > ul.main-nav"),r=e("nav").width();if(0!=n.siblings("ul").length){var l,s=n.parent(),d=s.parent().parent();switch(l="NAV"!=d.prop("tagName")?d:s.parent(),Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.navigateMobileMenuInternal :: setting UL :: left:"+r+"px",!0),n.siblings("ul").css("left",r+"px"),o.css("left")){case"0px":case"auto":break;case"-"+r+"px":r=2*r;break;case"-"+2*r+"px":r=3*r;break;case"-"+3*r+"px":r=4*r;break;case"-"+4*r+"px":r=5*r;break;default:return Pd.Shared.LogToConsoleIfDebug("Window has been resized, resetting navigation."),Pd.Shared.Navigation.ResetMobileNavigation(),Pd.Shared.Navigation.OpenMobileMenu(),!1}s.addClass("current"),l.addClass("child-expanded").removeClass("current"),i=!0,o.animate({left:"-"+r+"px"},a,function(){i=!1});var u=0;return s.find("ul > li").each(function(){u+=e(this).height()}),s.parents("nav.active").css({minHeight:u+175}),!1}if(n.hasClass("mobile-menu-back")){var c=n;switch(o.css("left")){case"-"+r+"px":break;case"-"+2*r+"px":r=e("nav").width();break;case"-"+3*r+"px":r=2*e("nav").width();break;case"-"+4*r+"px":r=3*e("nav").width();break;case"-"+5*r+"px":r=4*e("nav").width();break;default:return Pd.Shared.LogToConsoleIfDebug("Window has been resized, resetting navigation."),Pd.Shared.Navigation.ResetMobileNavigation(),Pd.Shared.Navigation.OpenMobileMenu(),!1}return o.css("left")=="-"+r+"px"&&(r=0),i=!0,o.animate({left:"-"+r+"px"},a,function(){c.parent("li").parent("ul").parent("li").removeClass("current"),c.parent("li").parent("ul").parent("li").parent("ul").parent("li").removeClass("child-expanded").addClass("current"),i=!1}),!1}return!0},s=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.autoNavigateMobileMenuInternal");var i=e("nav a.current-page");if(0==i.length)return void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.autoNavigateMobileMenuInternal :: no current item found in nav",!0);var t=[];t.push(i);for(var o=0;n>o;o++)1==i.parent("li").parent("ul").siblings("a").length?(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.autoNavigateMobileMenuInternal :: have found parent A",!0),i=i.parent("li").parent("ul").siblings("a:first"),i.hasClass("mobile-menu-button")||(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.autoNavigateMobileMenuInternal :: pushing A onto array",!0),t.push(i))):Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.autoNavigateMobileMenuInternal :: could not find parent A",!0);for(var r=t.length-1;r>=0;r--){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.autoNavigateMobileMenuInternal :: adding timer command to click found link and auto navigate",!0);var l=1.3*a*(t.length-r-1)+200;!function(a,n){setTimeout(function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.autoNavigateMobileMenuInternal :: clicking item '"+e(t[a]).text()+"'",!0),Pd.Shared.Navigation.NavigateMobileMenu(e(t[a]),!0),e(t[a]).addClass("auto-clicked")},n)}(r,l)}},d=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.closeMobileMenuInternal"),e(".mobile-menu-button").removeClass("active"),Pd.Shared.CloseLiveSearchPopup(),e("nav").removeClass("active"),e("nav").css("min-height",""),Pd.Shared.RemoveSiteOverlay("menu",0)},u=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.openMobileMenuInternal"),e(".mobile-menu-button").addClass("active"),e("nav").addClass("active"),Pd.Shared.CreateSiteOverlay(!0,"menu",0)},c=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.setupAccessibleMenuInternal");var a={ESC:27,DOWN:40,LEFT:37,RIGHT:39,UP:38,SPACE:32,ENTER:13,TAB:9};Pd.Shared.Navigation.ApplyMenuAttributes(e("nav > ul"),"",1),e("#pdc header nav").attr("role","application"),e("nav > ul").on("keydown","a",function(n){var i=e(this),t=n.keyCode||n.which;if(n.ctrlKey||n.altKey)return void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.setupAccessibleMenuInternal : ctrl or alt pressed, returning",!0);var o=0;if(i.hasClass("overview"))(t==a.DOWN||t==a.RIGHT||t==a.TAB&&!n.shiftKey)&&i.siblings("a").focus(),(t==a.UP||t==a.LEFT||t==a.ESC||t==a.TAB&&n.shiftKey)&&(i.parent().siblings("a").focus(),Pd.Shared.Navigation.CloseDesktopNavigationFlyout());else if(i.hasClass("close-bar"))(t==a.DOWN||t==a.RIGHT||t==a.TAB&&!n.shiftKey)&&i.parent().siblings("ul").find("> li:not(.mobile-menu-back):not(.parent-link):first > a").focus(),(t==a.UP||t==a.LEFT||t==a.TAB&&n.shiftKey)&&i.siblings("a").focus(),(t==a.ENTER||t==a.ESC)&&(i.parent().siblings("a").focus(),Pd.Shared.Navigation.CloseDesktopNavigationFlyout(),n.preventDefault());else{var r=e(this).parent();o=parseInt(r.attr("aria-level"));var l=i.siblings("ul");if(1==o)switch(t){case a.SPACE:case a.ENTER:Pd.Shared.Navigation.OpenDesktopNavigationFlyout(i.parent("li")),l.attr("aria-hidden","false"),i.siblings("div.mobile-back").find(".overview").focus();break;case a.ESC:e("nav > ul > li:first-child > a").focus(),Pd.Shared.Navigation.CloseDesktopNavigationFlyout()}else if(2==o){switch(t){case a.SPACE:l.find("> li:not(.mobile-menu-back):not(.parent-link):first > a").focus();break;case a.ESC:Pd.Shared.Navigation.CloseDesktopNavigationFlyout(),i.parent("li").parent("ul").parent("li").children("a").focus(),i.parent("li").parent("ul").attr("aria-hidden","true")}"1"==r.attr("aria-posinset")&&(t==a.UP||t==a.LEFT||t==a.TAB&&n.shiftKey)&&i.parents("li.active").find("div.mobile-back a.close-bar").focus()}else if(3==o)switch(t){case a.SPACE:location.href=i.attr("href");break;case a.ESC:i.parent("li").parent("ul").siblings("a").focus()}switch(t){case a.DOWN:case a.RIGHT:case a.TAB:n.shiftKey?i.parent("li").prev().children("a").focus():i.parent("li").next().children("a").focus();break;case a.LEFT:case a.UP:i.parent("li").prev().children("a").focus()}if((t==a.TAB||t==a.LEFT||t==a.DOWN)&&1==o&&r.attr("aria-posinset")==r.attr("aria-setsize"))if(0==e("ul.main-nav li.active").length){e("nav ul > li > a").attr("tabindex",0);var s=e(":tabbable"),d=s.index(i[0]);s[d+1].focus(),e("nav ul > li > a").attr("tabindex",-1),e("nav ul > li > a:first").attr("tabindex",0)}else e("ul.main-nav li.active .mobile-back .overview").focus();if(t==a.TAB&&1==o&&"1"==r.attr("aria-posinset")&&n.shiftKey)return;1==o&&t==a.ENTER&&n.preventDefault()}switch(t){case a.DOWN:case a.RIGHT:case a.LEFT:case a.UP:case a.SPACE:case a.ESC:case a.TAB:n.preventDefault()}})},v=function(a,n,i){1==i?a.attr("role","menubar"):a.attr("role","menu"),n.length>0&&a.attr("aria-hidden","true");var t=1;a.children("li").each(function(){var o=e(this);o.attr("role","menuitem"),o.attr("aria-posinset",t),o.attr("aria-setsize",a.children("li").length),o.attr("aria-level",i),1==i&&o.attr("aria-haspopup","true"),o.find(">a").each(function(){var a=e(this);a.attr("tabindex","-1"),a.siblings("ul").length>0&&(2==i&&a.append('<span class="invisible-all">'+Res.brandingNavigationSpaceKeyInstruction+"</span>"),0==n.length&&1==t&&a.attr("tabindex","0"),Pd.Shared.Navigation.ApplyMenuAttributes(a.siblings("ul"),n+"-"+t,i+1))}),t++})},h=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Navigation.resetMobileNavigationInternal"),e("nav ul").css("left","").removeClass("child-expanded"),e("nav ul li").css("left","").removeClass("current").removeClass("child-expanded"),e("nav").removeClass("active"),Pd.Shared.Navigation.CloseMobileMenu(),i=!1};return{WireUpMobileMenu:t,OpenMobileMenu:u,CloseMobileMenu:d,ResetMobileNavigation:h,CloseDesktopNavigationFlyout:r,SetupAccessibleMenu:c,OpenDesktopNavigationFlyout:o,NavigateMobileMenu:l,AutoNavigateMobileMenu:s,ApplyMenuAttributes:v}}(PdCustomJs),function(e){e(document).ready(function(){try{Pd.Shared.TryCatch(Pd.Shared.Navigation.WireUpMobileMenu)}catch(e){Pd.Shared.LogErrorToStatusDialog("Pd.Shared.Navigation :: Unhandled exception on initialisation :: "+e)}}),e(window).on("orientationchange",function(){try{Pd.Shared.TryCatch(Pd.Shared.Navigation.ResetMobileNavigation),Pd.Shared.TryCatch(Pd.Shared.Navigation.CloseDesktopNavigationFlyout)}catch(e){Pd.Shared.LogErrorToStatusDialog("Pd.Shared.Navigation :: Unhandled exception on orientationchange :: "+e)}})}(PdCustomJs);
Pd.Shared.Dropdown=function($){"use strict";var dropdownTargetClass=".pd-dropdown",multipleKeyStrokeTimer=null,noKeyStrokeTimer=null,keyStrokeCodes=[],scrollBarTopBottomMargin=5,$dropdownTimer=null,openDropdownKeyMonitorList={ESC:27,DOWN:40,LEFT:37,RIGHT:39,UP:38,ENTER:13,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,SPACE:32},openDropdownKeyMonitorSkipList={TAB:9},wireUpDropdownMenusInternal=function(delayBindCount){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal"),void 0===delayBindCount&&(delayBindCount=1),$(dropdownTargetClass+":not(.wired):not(.native-link)").each(function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal: wiring up not wired ones",!0);var e=this;return Pd.Shared.Dropdown.DelayDropdownWireUp($(e),delayBindCount)?!0:($(e).find("dt a").on("focus",function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal :: focus",!0),Pd.Shared.Dropdown.BindClosedDropdownKeystrokeHandler(e)}),$(e).find("dt a").on("blur",function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal :: blur",!0),Pd.Shared.Dropdown.UnbindClosedDropdownKeystrokeHandler()}),$(e).find("dt a").click(function(o){Pd.Shared.Dropdown.TitleAnchorInvoked(o,e,!1)}),$(e).on("click","dd ul li a",function(o){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal :: dropdown item clicked",!0),o.preventDefault(),Pd.Shared.Dropdown.ItemAnchorInvoked(this,e,!1)}),$(e).hasClass("dd-year-range")&&Pd.Shared.Dropdown.WireUpDropdownWithYearValues(e),$(e).hasClass("dd-only-mobile-filter")?(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal :: dropdown only on mobile, disabling tabbing",!0),$(e).find("dt a").attr("tabindex","-1")):$(e).hasClass("dd-search-filters")?(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal :: dropdown special search filter, disabling tabbing on nearby heading",!0),$(e).siblings("a.ms-ref-refinername").attr("tabindex","-1")):(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal :: dropdown not mobile, setting accessibility attributes",!0),$(e).find("dt a").attr("aria-pressed","false").attr("aria-expanded","false").attr("role","listbox"),$(e).find("dd ul li a").attr("role","option")),void $(e).addClass("wired").addClass("code-wired"))}),$(dropdownTargetClass+".native-link:not(.native-link-wired)").each(function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal: wiring up ones with native-link-wired",!0);var dropdownElem=this;if($(dropdownElem).hasClass("code-wired")&&Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal: WARNING: wiring up mobile and already has code-wired class"),Pd.Shared.Dropdown.DelayDropdownWireUp($(dropdownElem),delayBindCount))return!0;if($(dropdownElem).find("dd ul li a").click(function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal :: dropdown item clicked",!0),e.preventDefault(),Pd.Shared.Dropdown.ItemAnchorInvoked(this,dropdownElem,!1)}),$(dropdownElem).hasClass("generate-native")&&Pd.Utility.IsSmallAppleDevice()){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal: generating native ios one",!0);var dynamicId="dynamic-"+Date.now(),$div=$("<div />");$div.addClass("refiner-native"),navigator.platform&&"iPhone"!=navigator.platform&&($div.addClass("emulator"),Pd.Shared.IsDebugMode()&&$div.addClass("debug"));var $select=$("<select />");$select.attr("id",dynamicId),$(dropdownElem).find("dd ul li a").each(function(e,o){var n=$("<option />");$(o).hasClass("active")&&n.attr("selected","selected"),n.text($(o).text()),$select.append(n)}),$div.append($select),$(dropdownElem).after($div),$(dropdownElem).attr("data-related-native-dd",dynamicId)}var dropdownRef=$(dropdownElem).attr("data-related-native-dd");if(Pd.Utility.StringIsNullOrEmpty(dropdownRef))return!0;var $relatedDropdown=$("#"+dropdownRef);1==$relatedDropdown.length&&$relatedDropdown.on("change",function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal: native item changed",!0);var $selectedItem=$relatedDropdown.children("option:selected"),callBackOnOption=$selectedItem.attr("data-eval-on-select");if(Pd.Utility.StringIsNullOrEmpty(callBackOnOption))return void $(dropdownElem).find("dd ul li a").each(function(e,o){$(o).text()===$selectedItem.text()&&(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal: found related item in main dropdown",!0),$(o).trigger("click"))});try{var status=eval(callBackOnOption)}catch(err){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal :: Failure executing callback function on item: "+err.message)}}),$(dropdownElem).find("dt a").click(function(e){e.preventDefault(),Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.wireUpDropdownMenusInternal: have special native dropdown click",!0);var o=$(dropdownElem).attr("data-related-native-dd");if(!Pd.Utility.StringIsNullOrEmpty(o)){var n=$("#"+o);1==n.length&&n.focus()}}),$(dropdownElem).addClass("native-link-wired")})},delayDropdownWireUpInternal=function(e,o){if(e.hasClass("delay-bind"))if(e.hasClass("delay-bind-ready"))Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.delayDropdownWireUpInternal: encountered delay bind dropdown; with data   (#"+o+") => "+Pd.Shared.GetElementAsText(e),!0);else{if(20>o)return Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.delayDropdownWireUpInternal: encountered delay bind dropdown; without data (#"+o+") => "+Pd.Shared.GetElementAsText(e),!0),clearTimeout($dropdownTimer),$dropdownTimer=setTimeout(function(){Pd.Shared.Dropdown.WireUpDropdownMenus(o+1)},150),!0;Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.delayDropdownWireUpInternal: encountered delay bind dropdown without data, timer has reached max. Not re-running. "+Pd.Shared.GetElementAsText(e))}return!1},itemAnchorInvokedInternal=function(target,$dd,keydown){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.itemAnchorInvokedInternal",!0);var itemAnchorInvokedCallback=function(target,$dd){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.itemAnchorInvokedCallback",!0),$($dd).attr("data-call-back-func");var callBackOnDropdown=$($dd).attr("data-call-back-func"),callBackOnItem=$(target).attr("data-eval-on-select");if(void 0==callBackOnDropdown&&(callBackOnDropdown=""),void 0==callBackOnItem&&(callBackOnItem=""),0===callBackOnDropdown.length&&0===callBackOnItem.length)Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.itemAnchorInvokedCallback :: No callback found on dropdown.",!0);else if(0!==callBackOnItem.length){var $clickedAnchor=$(target),$clickedAnchorText=$(target).text(),$currentDropdown=$($dd);try{var status=eval(callBackOnItem)}catch(err){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.itemAnchorInvokedCallback :: Failure executing callback function on item: "+err.message)}}else{var selectedValue=$(target).find("span").text();try{var callBackFunc=eval(callBackOnDropdown);"function"==typeof callBackFunc&&callBackFunc(selectedValue)}catch(err){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.itemAnchorInvokedCallback :: Failure executing callback function on dropdown: "+err.message)}}};$($dd).hasClass("no-item-click")||($($dd).find("dd ul li a.active").removeClass("active"),$(target).addClass("active"),Pd.Shared.Dropdown.SetSelectedText($dd,$(target).find(".value").html(),$(target).attr("id")),Pd.Shared.Dropdown.HideDropdown($($dd)),itemAnchorInvokedCallback(target,$dd),keydown&&$($dd).find("dt a").focus())},titleAnchorInvokedInternal=function(e,o,n,r,d){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.titleAnchorInvokedInternal :: dropdown title anchor invoked (click, enter, arrow)",!0),void 0==r&&(r=!0),void 0==d&&(d=!0);var a=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.showOrHideDropdown",!0),e.hasClass("active")?Pd.Shared.Dropdown.HideDropdown(e):Pd.Shared.Dropdown.ShowDropdown(e,r,d)};$(o).hasClass("has-scrollbar")||Pd.Shared.Dropdown.ApplyScrollbar(o),null!=e&&e.preventDefault(),a($(o)),Pd.Shared.Dropdown.UnbindClosedDropdownKeystrokeHandler(),n||$(o).find("dt a").addClass("no-focus-line");var t=$(o).find("dd div.scrollbar")[0],l=$(o).find("dd ul")[0];Pd.Shared.Dropdown.MoveScrollbarWhenContentScrolls(l,t)},closedDropdownKeystrokeHandlerInternal=function(e){try{Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.closedDropdownKeystrokeHandlerInternal",!0);var o=e.keyCode||e.which,n={DOWN:40,SPACE:32};switch(o){case n.DOWN:case n.SPACE:Pd.Shared.Dropdown.TitleAnchorInvoked(e,e.data.dropdown,!0)}}catch(r){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.closedDropdownKeystrokeHandlerInternal :: unhandled exception :: "+r.message)}},bindClosedDropdownKeystrokeHandlerInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.bindClosedDropdownKeystrokeHandlerInternal :: closed keydown event bind",!0),$(document).bind("keydown",{dropdown:e},Pd.Shared.Dropdown.ClosedDropdownKeystrokeHandler)},unbindClosedDropdownKeystrokeHandlerInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.unbindClosedDropdownKeystrokeHandlerInternal :: closed keydown event unbind",!0),$(document).unbind("keydown",Pd.Shared.Dropdown.ClosedDropdownKeystrokeHandler)},wireUpDropdownWithYearValuesInternal=function(e){var o=$(e).attr("data-min-year"),n=$(e).attr("data-max-year");if(o=void 0==o||""==o?(new Date).getFullYear()-100:parseInt(o),void 0==n||""==n)n=(new Date).getFullYear()+20;else if(n.startsWith("+")){var r=parseInt(n.substr(1));n=(new Date).getFullYear()+r}else if(n.startsWith("-")){var r=parseInt(n.substr(1));n=(new Date).getFullYear()-r}else n=parseInt(n);$(e).find("dd ul").append('<li><a href="#"><span class="value" value="">'+Res.brandingCalendarYearName+"</span></a><li>");for(var d=n;d>=o;d--)$(e).find("ul.year").append('<li><a href="#"><span class="value" value="'+d+'">'+d+"</span></a><li>");$(e).find("dd ul li a").click(function(e){e.preventDefault(),Pd.Shared.Dropdown.HandleDropDownAnchorClick(e)})},hideDropdownInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.hideDropdownInternal",!0);var o=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.dropdownClosed",!0),$(document).unbind("click",documentClickHandlerInternal),Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.dropdownOpenedInternal :: unbind openDropdownKeystrokeHandlerInternal ",!0),$(document).unbind("keydown",openDropdownKeystrokeHandlerInternal)};e.removeClass("active"),e.find("dt a").attr("aria-pressed","false").attr("aria-expanded","false"),o(),e.find("dt a").removeClass("no-focus-line"),e.find(".scrollbar").hide(),e.find(".scrollbar").removeClass("show"),setTimeout(function(){e.find(".scrollbar").show()},500)},showDropdownInternal=function(e,o,n){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.showDropdownInternal",!0),void 0==o&&(o=!0),void 0==n&&(n=!0);var r=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.dropdownOpened",!0),n&&setTimeout(function(){$(document).bind("click",documentClickHandlerInternal)},50),o&&(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.dropdownOpened :: bind openDropdownKeystrokeHandlerInternal ",!0),$(document).bind("keydown",openDropdownKeystrokeHandlerInternal))};e.addClass("active"),e.find("dt a").attr("aria-pressed","true").attr("aria-expanded","true"),r()},openDropdownKeystrokeHandlerInternal=function(e){try{Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.openDropdownKeystrokeHandlerInternal",!0);var o=e.keyCode||e.which;if(o>=112&&123>=o||e.ctrlKey||e.altKey||e.shiftKey||o==openDropdownKeyMonitorSkipList.TAB)return void Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.openDropdownKeystrokeHandlerInternal :: key is F1-F12 or ctrl/alt/shift, returning",!0);switch(e.preventDefault(),o){case openDropdownKeyMonitorList.ESC:case openDropdownKeyMonitorList.DOWN:case openDropdownKeyMonitorList.LEFT:case openDropdownKeyMonitorList.RIGHT:case openDropdownKeyMonitorList.UP:case openDropdownKeyMonitorList.ENTER:case openDropdownKeyMonitorList.PAGEUP:case openDropdownKeyMonitorList.PAGEDOWN:case openDropdownKeyMonitorList.END:case openDropdownKeyMonitorList.HOME:return Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.openDropdownKeystrokeHandlerInternal :: found special character",!0),resetDropdownAfterNoKeystrokes(),void scrollDropdownBasedOnKeystrokes(o)}clearTimeout(multipleKeyStrokeTimer),multipleKeyStrokeTimer=setTimeout(scrollDropdownBasedOnKeystrokes,300),keyStrokeCodes.push(o),clearTimeout(noKeyStrokeTimer),noKeyStrokeTimer=setTimeout(resetDropdownAfterNoKeystrokes,1e3)}catch(n){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.openDropdownKeystrokeHandlerInternal :: unhandled exception :: "+n.message)}},scrollDropdownBasedOnKeystrokes=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.scrollDropdownBasedOnKeystrokes",!0);try{if(1==keyStrokeCodes.length&&keyStrokeCodes[0]==openDropdownKeyMonitorList.SPACE&&(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.scrollDropdownBasedOnKeystrokes :: have encountered a single space",!0),e=openDropdownKeyMonitorList.SPACE),void 0!=e){switch(e){case openDropdownKeyMonitorList.ESC:Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.scrollDropdownBasedOnKeystrokes :: ESC pressed",!0),$(dropdownTargetClass+".active").find("dt a").focus(),Pd.Shared.Dropdown.HideDropdown($(dropdownTargetClass+".active"));break;case openDropdownKeyMonitorList.DOWN:case openDropdownKeyMonitorList.RIGHT:Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.scrollDropdownBasedOnKeystrokes :: DOWN,RIGHT pressed",!0),1==$(dropdownTargetClass+".active dd ul li a:focus").length?$(dropdownTargetClass+".active dd ul li a:focus").parent("li").next().children("a").focus():1==$(dropdownTargetClass+".active dd ul li a:hover").length?$(dropdownTargetClass+".active dd ul li a:hover").parent("li").next().children("a").focus():1==$(dropdownTargetClass+".active dd ul li a.active").length?$(dropdownTargetClass+".active dd ul li a.active").parent("li").next().children("a").focus():$(dropdownTargetClass+".active dd ul li:first a").focus();break;case openDropdownKeyMonitorList.UP:case openDropdownKeyMonitorList.LEFT:Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.scrollDropdownBasedOnKeystrokes :: UP,LEFT pressed",!0),1==$(dropdownTargetClass+".active dd ul li a:focus").length?$(dropdownTargetClass+".active dd ul li a:focus").parent("li").prev().children("a").focus():1==$(dropdownTargetClass+".active dd ul li a:hover").length?$(dropdownTargetClass+".active dd ul li a:hover").parent("li").prev().children("a").focus():1==$(dropdownTargetClass+".active dd ul li a.active").length&&$(dropdownTargetClass+".active dd ul li a.active").parent("li").prev().children("a").focus();break;case openDropdownKeyMonitorList.PAGEUP:Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.scrollDropdownBasedOnKeystrokes :: PAGEUP pressed",!0);var o;if(1==$(dropdownTargetClass+".active dd ul li a:focus").length?o=$(dropdownTargetClass+".active dd ul li a:focus"):1==$(dropdownTargetClass+".active dd ul li a:hover").length&&(o=$(dropdownTargetClass+".active dd ul li a:hover")),void 0!=o)for(var n=0;5>n;n++)o.parent("li").prev().children("a").focus(),o=$(dropdownTargetClass+".active dd ul li a:focus");break;case openDropdownKeyMonitorList.PAGEDOWN:Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.scrollDropdownBasedOnKeystrokes :: PAGEDOWN pressed",!0);var o;1==$(dropdownTargetClass+".active dd ul li a:focus").length?o=$(dropdownTargetClass+".active dd ul li a:focus"):1==$(dropdownTargetClass+".active dd ul li a:hover").length?o=$(dropdownTargetClass+".active dd ul li a:hover"):($(dropdownTargetClass+".active dd ul li:first a").focus(),o=$(dropdownTargetClass+".active dd ul li a:focus"));for(var n=0;5>n;n++)o.parent("li").next().children("a").focus(),o=$(dropdownTargetClass+".active dd ul li a:focus");break;case openDropdownKeyMonitorList.END:Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.scrollDropdownBasedOnKeystrokes :: END pressed",!0),$(dropdownTargetClass+".active dd ul li a:last").focus();break;case openDropdownKeyMonitorList.HOME:Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.scrollDropdownBasedOnKeystrokes :: HOME pressed",!0),$(dropdownTargetClass+".active dd ul li:first a").focus();break;case openDropdownKeyMonitorList.ENTER:case openDropdownKeyMonitorList.SPACE:Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.scrollDropdownBasedOnKeystrokes :: ENTER pressed",!0),1==$(dropdownTargetClass+".active dd ul li a:focus").length&&Pd.Shared.Dropdown.ItemAnchorInvoked($(dropdownTargetClass+".active dd ul li a:focus"),$(dropdownTargetClass+".active")[0],!0)}switch(e){case openDropdownKeyMonitorList.DOWN:case openDropdownKeyMonitorList.RIGHT:case openDropdownKeyMonitorList.UP:case openDropdownKeyMonitorList.LEFT:case openDropdownKeyMonitorList.PAGEUP:case openDropdownKeyMonitorList.PAGEDOWN:case openDropdownKeyMonitorList.END:case openDropdownKeyMonitorList.HOME:var r=$(dropdownTargetClass+".active > dd > div.scrollbar")[0],d=$(dropdownTargetClass+".active > dd > ul")[0];Pd.Shared.Dropdown.MoveScrollbarWhenContentScrolls(d,r)}return}for(var a="",n=0;n<keyStrokeCodes.length;n++){var t=String.fromCharCode(keyStrokeCodes[n]);a+=t}a=a.toLowerCase(),Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.scrollDropdownBasedOnKeystrokes :: '"+a+"'",!0);var l=null;if($(dropdownTargetClass+".active > dd > ul > li > a > span").each(function(e){var o=$(this).text().toLowerCase().trim();return o.substring(0,a.length)==a?(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.scrollDropdownBasedOnKeystrokes :: found match with '"+o+"'",!0),l=$(this),!1):void 0}),null!=l){var s=$(dropdownTargetClass+".active > dd > ul"),i=l.parent().parent(),p=i.offset().top-s.offset().top+s.scrollTop();p-=14,s.animate({scrollTop:p},400,"swing",function(){l.parent("a").focus()});var r=$(dropdownTargetClass+".active > dd > div.scrollbar")[0],d=$(dropdownTargetClass+".active > dd > ul")[0];Pd.Shared.Dropdown.MoveScrollbarWhenContentScrolls(d,r)}if(null==l){var c=50,s=$(dropdownTargetClass+".active"),h=s.attr("style");s.css("position","relative"),s.animate({left:"-5px"},c,"swing",function(){s.animate({left:"5px"},c,"swing",function(){s.animate({left:"-5px"},c,"swing",function(){s.animate({left:"0"},c,"swing",function(){void 0==h?s.removeAttr("style"):s.attr("style",h)})})})})}}catch(w){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.scrollDropdownBasedOnKeystrokes :: unhandled exception :: "+w.message)}},resetDropdownAfterNoKeystrokes=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.resetDropdownAfterNoKeystrokes",!0),keyStrokeCodes=[]},documentClickHandlerInternal=function(e){var o=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.hideEveryDropdown",!0),$(dropdownTargetClass+".active").each(function(){Pd.Shared.Dropdown.HideDropdown($(this))})},n=$(e.target).closest(dropdownTargetClass);0===n.length?(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.documentClickHandlerInternal",!0),o()):$(dropdownTargetClass+".active").length>0&&(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.documentClickHandlerInternal",!0),o(),Pd.Shared.Dropdown.ShowDropdown(n))},setSelectedTextInternal=function(e,o,n){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.setSelectedTextInternal",!0),$(e).find("dt a span").html(o),void 0!=n&&$(e).find("dt a").attr("id",n)},handleDropDownAnchorClickInteral=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.handleDropDownAnchorClickInteral");var o=$(e.currentTarget),n=o.find("span").html(),r=o.parents(".pd-dropdown");Pd.Shared.Dropdown.SetSelectedText(r,n,o.attr("id")),Pd.Shared.Dropdown.HideDropdown($(r))},handleDropDownSelectionInteral=function(e,o){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.handleDropDownSelectionInteral");var n=$(o),r=n.find("input[type='hidden'][value='"+e+"']"),d=r.parents("li"),a=d.find("span").html();Pd.Shared.Dropdown.SetSelectedText(n,a,d.find("a").attr("id")),Pd.Shared.Dropdown.HideDropdown($(n))},applyScrollbarInternal=function(e){var o,n,r,d,a,t=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.initialise",!0);try{$(e).find("dd").append('<div class="scrollbar"></div>'),r=$(e).find("dd div.scrollbar"),d=r[0],a=$(e).find("dd ul")[0],Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.initialise :: binding list listeners",!0),a.addEventListener("mouseover",l),a.addEventListener("mouseout",s),a.addEventListener("wheel",i),a.addEventListener("touchstart",w),a.addEventListener("touchmove",u),a.addEventListener("touchend",D),Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.initialise :: binding scrollbar listeners",!0),d.addEventListener("mouseover",l),d.addEventListener("wheel",i),d.addEventListener("mousedown",p),d.style.top="0px",$(e).addClass("has-scrollbar")}catch(o){v(o)}},l=function(){g()},s=function(){f()},i=function(e){try{e.preventDefault(),a.scrollTop+=e.deltaY>0?30:-30,Pd.Shared.Dropdown.MoveScrollbarWhenContentScrolls(a,d),$("#focusbox").hide()}catch(o){v(o)}},p=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.onMouseDownPrepareForDrag",!0);try{o=n=e.clientY,r.addClass("mouse-press"),document.addEventListener("mousemove",c),document.addEventListener("mouseup",h)}catch(d){v(d)}},c=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.onMouseMoveScrollContent",!0);try{var o=parseFloat(d.style.top)+e.clientY-n;o=Math.max(o,scrollBarTopBottomMargin),o=Math.min(o,a.offsetHeight-d.offsetHeight-2*scrollBarTopBottomMargin),d.style.top=o+"px",n=e.clientY,S()}catch(r){v(r)}},h=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.onMouseUpDetachMoveEvents",!0);try{r.removeClass("mouse-press"),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",h)}catch(e){v(e)}},w=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.onTouchStart",!0);try{var r=e.changedTouches[0];o=n=parseFloat(r.clientY);var d=!1;if(void 0!=e.currentTarget&&null!=e.currentTarget){var a=$(e.currentTarget);1==a.length&&a.hasClass("allow-touch")&&(d=!0)}d||e.preventDefault(),g()}catch(t){v(t)}},u=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.onTouchMove",!0);try{var o=e.changedTouches[0];a.scrollTop-=parseFloat(o.clientY)-n,n=parseFloat(o.clientY),e.preventDefault(),Pd.Shared.Dropdown.MoveScrollbarWhenContentScrolls(a,d)}catch(r){v(r)}},D=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.onTouchEnd",!0);try{e.changedTouches[0];if(o==n){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.onTouchEnd :: Start and end coordinates match",!0);var r;"A"==e.target.tagName?(r=$(e.target),Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.onTouchEnd :: Imitating click on anchor",!0)):"INPUT"==e.target.tagName?(r=$(e.target),Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.onTouchEnd :: Imitating click on input",!0)):"SPAN"==e.target.tagName&&(r=$(e.target).parent(),Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.onTouchEnd :: Imitating click on span (anchor)",!0)),void 0!=r&&r.trigger("click")}f()}catch(d){v(d)}},g=function(){try{Pd.Shared.Dropdown.ShowScrollbar(r,a)}catch(e){v(e)}},f=function(){r.removeClass("show")},S=function(){try{var e=parseFloat(d.style.top);e-=scrollBarTopBottomMargin;var o=a.offsetHeight;o-=2*scrollBarTopBottomMargin;var n=d.offsetHeight,r=o-n,t=e/r,l=a.scrollHeight,s=t*l;a.scrollTop=s}catch(i){v(i)}},v=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.handleError :: unhandled exception :: "+e.message);try{$(".pd-dropdown").removeClass("has-scrollbar"),$(".pd-dropdown div.scrollbar").remove(),a.removeEventListener("mouseover",l),a.removeEventListener("mouseout",s),a.removeEventListener("wheel",i),a.removeEventListener("touchstart",w),a.removeEventListener("touchmove",u),a.removeEventListener("touchend",D),d.removeEventListener("mouseover",l),d.removeEventListener("wheel",i),d.removeEventListener("mousedown",p),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",h)}catch(e){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.applyScrollbarInternal.handleError :: unhandled exception (in handleError!) :: "+e.message)}};t(e)},moveScrollbarWhenContentScrollsInternal=function(e,o){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.moveScrollbarWhenContentScrolls",!0);try{var n=scrollBarTopBottomMargin+(e.offsetHeight-2*scrollBarTopBottomMargin-o.offsetHeight)*(e.scrollTop/(e.scrollHeight-e.offsetHeight));n+o.offsetHeight>e.offsetHeight-scrollBarTopBottomMargin&&(n=e.offsetHeight-scrollBarTopBottomMargin-o.offsetHeight),o.style.top=n+"px"}catch(r){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.moveScrollbarWhenContentScrolls :: unhandled exception :: "+r.message)}},showScrollbarInternal=function(e,o){Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.showScrollbarInternal",!0),o.scrollHeight>o.offsetHeight?(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.showScrollbarInternal: showing",!0),e.addClass("show")):(Pd.Shared.LogToConsoleIfDebug("Pd.Shared.Dropdown.showScrollbarInternal: hiding",!0),e.removeClass("show"))};return{WireUpDropdownMenus:wireUpDropdownMenusInternal,DelayDropdownWireUp:delayDropdownWireUpInternal,HandleDropDownAnchorClick:handleDropDownAnchorClickInteral,HandleDropDownSelection:handleDropDownSelectionInteral,ClosedDropdownKeystrokeHandler:closedDropdownKeystrokeHandlerInternal,BindClosedDropdownKeystrokeHandler:bindClosedDropdownKeystrokeHandlerInternal,UnbindClosedDropdownKeystrokeHandler:unbindClosedDropdownKeystrokeHandlerInternal,TitleAnchorInvoked:titleAnchorInvokedInternal,ItemAnchorInvoked:itemAnchorInvokedInternal,WireUpDropdownWithYearValues:wireUpDropdownWithYearValuesInternal,ApplyScrollbar:applyScrollbarInternal,SetSelectedText:setSelectedTextInternal,HideDropdown:hideDropdownInternal,ShowDropdown:showDropdownInternal,MoveScrollbarWhenContentScrolls:moveScrollbarWhenContentScrollsInternal,ShowScrollbar:showScrollbarInternal}}(PdCustomJs),function(e){e(document).ready(function(){try{Pd.Shared.TryCatch(Pd.Shared.Dropdown.WireUpDropdownMenus)}catch(e){Pd.Shared.LogErrorToStatusDialog("Pd.Shared.Dropdown :: Unhandled exception on initialisation :: "+e)}})}(PdCustomJs);
Pd.Angular=function(e){"use strict";function t(e){var t=[];try{angular.forEach(e.query.PrimaryQueryResult.RelevantResults.Table.Rows.results,function(e){var t={};angular.forEach(e.Cells.results,function(e){this[e.Key]=e.Value},t),this.push(t)},t)}catch(r){Pd.Shared.LogToConsoleIfDebug(r.message+"\n"+r.stack)}return t}function r(e){var t={};try{var r=[];angular.forEach(e.query.PrimaryQueryResult.RelevantResults.Table.Rows.results,function(e){var t={};angular.forEach(e.Cells.results,function(e){this[e.Key]=e.Value},t),this.push(t)},r),t.RelevantResults=r;var a=[];angular.forEach(e.query.PrimaryQueryResult.RefinementResults.Refiners.results.entries().next().value,function(e){if(e.hasOwnProperty("Entries")){var t={};t.Name=e.Name,t.Values=e.Entries.results,this.push(t)}},a),t.RefinementResults=a}catch(n){Pd.Shared.LogToConsoleIfDebug(n.message+"\n"+n.stack)}return t}var a={},n=function(t,r){if(void 0===r&&(r=!1),"/"==t.charAt(0)&&(t=t.substring(1)),Pd.Shared.LogToConsoleIfDebug("Pd.Angular.executeScriptsForTemplateInternal :: "+t),!r)return Pd.Shared.LogToConsoleIfDebug("Pd.Angular.executeScriptsForTemplateInternal :: "+t+" :: not yet ready, executing again when ready",!0),void Pd.Utility.ExecuteWhenPageReady(function(){Pd.Angular.ExecuteScriptsForTemplate(t,!0)});switch(Pd.Shared.LogToConsoleIfDebug("Pd.Angular.executeScriptsForTemplateInternal :: "+t+" :: looks to be ready, allowing execution",!0),t){case"Smart Data Library/Templates/wsAffairChronology.html":Pd.Shared.AffairChronologyBlockSpecificInformationLinking();break;case"Smart Data Library/Templates/spAffairsTeaserImportant.html":Pd.Welcome.PrepareImportantAffairsCarousels(),Pd.Shared.ApplyDotDotDot();break;case"Smart Data Library/Templates/wsAffairsTeaserNew.html":e(".dotted",e("#wsAffairsTeaserNew")).removeClass("dotted"),Pd.Shared.ApplyDotDotDot();break;case"Smart Data Library/Templates/wsSearchCouncilorsAdvancedMain.html":Pd.Shared.RadioButtonSelectUnselect(),Pd.Shared.WireupCouncilorsAdvancedSearch(),Pd.Shared.WireUpDatePickerWithAllControls();break;case"Smart Data Library/Templates/wsSearchAffairAdvancedMain.html":Pd.Shared.RadioButtonSelectUnselect(),Pd.Shared.WireupAffarirAdvancedSearch(),Pd.Shared.WireUpDatePickerWithAllControls();break;case"Smart Data Library/Templates/wsABAffairInfo.html":Pd.Detail.WireUpCustomAccordionsOnABDetailPage();break;case"Smart Data Library/Templates/wsABTranscriptInfo.html":Pd.Detail.WireUpCustomAccordionsOnABDetailPage();break;case"Smart Data Library/Templates/TwitterFeed.html":Pd.Shared.IntialiseImageViewer(),Pd.Shared.ApplyDotDotDot();break;case"Smart Data Library/Templates/wsABTranscriptNavigation.html":e("ul.speakers-list li a").attr("tabindex","-1");break;case"Smart Data Library/Templates/wsCouncilorPage.html":case"Smart Data Library/Templates/wsAffairPage.html":case"Smart Data Library/Templates/wsABDetailMeetingInfo.html":case"Smart Data Library/Templates/wsABTranscriptTitle.html":if(!e("html").hasClass("set-title")){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.executeScriptsForTemplateInternal :: "+t+" :: html elem doesn't have set-title tag",!0);var a=e("div.angular-container .page-title").attr("data-page-title");Pd.Shared.LogToConsoleIfDebug("Pd.Angular.executeScriptsForTemplateInternal :: "+t+" :: title retrieved from 'data-page-title' is '"+a+"'",!0),Pd.Utility.SetPageTitle(a)&&(Pd.Shared.LogToConsoleIfDebug("Pd.Angular.executeScriptsForTemplateInternal :: "+t+" :: Pd.Utility.SetPageTitle returned true, adding set-title to html elem",!0),e("html").addClass("set-title"))}if(!e("html").hasClass("set-meta-desc"))if(void 0==e(".meta-desc").attr("data-meta-desc"))Pd.Angular.GenerateMetaDescriptionFromPage();else{var n=e(".meta-desc.page-title").attr("data-meta-desc");Pd.Utility.SetMetaDesc(n)}break;case"Smart Data Library/Templates/ParliamentHistoryDetail.html":Pd.Angular.GenerateMetaDescriptionFromPage();break;case"Smart Data Library/Templates/angularPerson.html":break;case"Smart Data Library/Templates/ElectionResultsMember.html":Pd.Shared.ApplyDotDotDot()}Pd.Detail.SetUpAccessibleAccordions(),Pd.Shared.EnsureAccessibleAnchors(".accessible-anchors"),Pd.Utility.StringIsNullOrEmpty(location.hash)||Pd.Shared.OnHashChange(null)},i=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.createBBlLinkInternal");var t=e.PublicationType,r=e.PublicationTypeAbbreviation,a=parseInt(e.PublicationYear),n=e.PublicationVolume,i=parseInt(e.PublicationNumber),o=e.IsOldPublicationFormat,l="{0}Â {1}Â {2}",s="{0}Â {1}Â {2}Â {3}",d={};if(isNaN(a)||isNaN(i))return null;switch(t){case 1:if(o){var u=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.FederalGazzette.Folder,a,i);1999===a&&4894>=i&&(u=u.replace("index.html","index_bar.html")),d.href=u,d.title=s.format(r,a,n,i)}else d.href=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.FederalGazzette.Pdf,a,i),d.title=l.format(r,a,i);break;case 2:null!=i?(d.href=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.OfficialCompilation.Pdf,a,i),d.title=l.format(r,a,i)):(d.href=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.OfficialCompilation.Folder,a,i),d.title=l.format(r,a,""))}return d},o=function(r){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.executeSPSearchQueryInternal");var a,n=Q.defer();if("undefined"!=typeof r.querytext)if("string"==typeof r.querytext)a="querytext='{0}'".format(Pd.Utility.EncodeUriQuery(r.querytext));else{var i=[];angular.forEach(r.querytext,function(e,t){"freetext"===t.toLowerCase()?this.push(e):this.push("{0}:{1}".format(t,e))},i),i.length>0&&(a="querytext='{0}'".format(Pd.Utility.EncodeUriQuery(i.join(" "))))}var o;if("undefined"!=typeof r.properties){var i=[];angular.forEach(r.properties,function(e,t){this.push("{0}:{1}".format(t,e))},i),i.length>0&&(o="properties='{0}'".format(Pd.Utility.EncodeUriQuery(i.join(","))))}var l;if("undefined"!=typeof r.sortlist){var i=[];angular.forEach(r.sortlist,function(e,t){this.push("{0}:{1}".format(t,e))},i),i.length>0&&(l="sortlist='{0}'".format(Pd.Utility.EncodeUriQuery(i.join(","))))}var s;"undefined"!=typeof r.selectproperties&&r.selectproperties.length>0&&(s="selectproperties='{0}'".format(Pd.Utility.EncodeUriQuery(r.selectproperties.join(","))));var d;"undefined"!=typeof r.rowlimit&&(d="rowlimit={0}".format(Pd.Utility.EncodeUriQuery(r.rowlimit)));var u;"undefined"!=typeof r.trimduplicates&&(u="trimduplicates={0}".format(Pd.Utility.EncodeUriQuery(r.trimduplicates)));var c=e.grep([a,o,l,s,d,u],Boolean).join("&"),g="/_api/search/query?".concat(c).concat("&QueryTemplatePropertiesUrl='spfile://webroot/queryparametertemplate.xml'");return Pd.Shared.LogToConsoleIfDebug("Pd.Angular.executeSPSearchQueryInternal: requestUri = '{0}'".format(g)),OData.read({requestUri:g,headers:{accept:"application/json;odata=verbose"}},function(e){n.resolve(t(e))},function(e){n.reject(new Error("API request failed: "+e.message))}),n.promise},l=function(t){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.executeSPSearchQueryExInternal");var a,n=Q.defer();if("undefined"!=typeof t.querytext)if("string"==typeof t.querytext)a="querytext='{0}'".format(Pd.Utility.EncodeUriQuery(t.querytext));else{var i=[];angular.forEach(t.querytext,function(e,t){"freetext"===t.toLowerCase()?this.push(e):this.push("{0}:{1}".format(t,e))},i),i.length>0&&(a="querytext='{0}'".format(Pd.Utility.EncodeUriQuery(i.join(" "))))}var o;if("undefined"!=typeof t.properties){var i=[];angular.forEach(t.properties,function(e,t){this.push("{0}:{1}".format(t,e))},i),i.length>0&&(o="properties='{0}'".format(Pd.Utility.EncodeUriQuery(i.join(","))))}var l;if("undefined"!=typeof t.sortlist){var i=[];angular.forEach(t.sortlist,function(e,t){this.push("{0}:{1}".format(t,e))},i),i.length>0&&(l="sortlist='{0}'".format(Pd.Utility.EncodeUriQuery(i.join(","))))}var s;"undefined"!=typeof t.selectproperties&&t.selectproperties.length>0&&(s="selectproperties='{0}'".format(Pd.Utility.EncodeUriQuery(t.selectproperties.join(","))));var d;"undefined"!=typeof t.rowlimit&&(d="rowlimit={0}".format(Pd.Utility.EncodeUriQuery(t.rowlimit)));var u;"undefined"!=typeof t.trimduplicates&&(u="trimduplicates={0}".format(Pd.Utility.EncodeUriQuery(t.trimduplicates)));var c;"undefined"!=typeof t.refiners&&t.refiners.length>0&&(c="refiners='{0}'".format(Pd.Utility.EncodeUriQuery(t.refiners.join(","))));var g;"undefined"!=typeof t.refinementFilters&&t.refinementFilters.length>0&&(g="refinementfilters='{0}'".format(Pd.Utility.EncodeUriQuery(t.refinementFilters.join(","))));var P=e.grep([a,c,g,o,l,s,d,u],Boolean).join("&"),f="/_api/search/query?".concat(P).concat("&QueryTemplatePropertiesUrl='spfile://webroot/queryparametertemplate.xml'");return Pd.Shared.LogToConsoleIfDebug("Pd.Angular.executeSPSearchQueryExInternal: requestUri = '{0}'".format(f)),OData.read({requestUri:f,headers:{accept:"application/json;odata=verbose"}},function(e){n.resolve(r(e))},function(e){n.reject(new Error("API request failed: "+e.message))}),n.promise},s=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getRatsunterlagenSearchUrlInternal");var t=Pd.Utility.PageUrlFormats.EParl.Search.Default;return t=Pd.Utility.UpdateUrlParameter(t,"AffairId",e),t=Pd.Utility.UpdateUrlParameter(t,"k",Pd.Utility.ManagedProperties.PdAffairId+":"+e)},d=function(e,t,r){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getABSearchUrlInternal");var a={BusinessShortNumber:e,MeetingDate:t,CouncilName:r,Url:"",Target:"_self"};if(new Date(t)>=new Date("1999-12-06")){var n=[];n.push('{0}="{1}"'.format(Pd.Utility.ManagedProperties.PdAffairIdFormatted,e)),n.push('{0}="{1}"'.format(Pd.Utility.ManagedProperties.PdSubjectMeetingDate,new Date(t).toISOString())),n.push('{0}="{1}"'.format(Pd.Utility.ManagedProperties.PdSubjectCouncilName,r));var i={k:n.join(" AND "),o:[{d:1,p:Pd.Utility.ManagedProperties.PdSubjectSortOrder}]};a.Url=Pd.Angular.GetSearchPageUrlWithParameters(Pd.Utility.PageUrlFormats.AmtlichesBulletin.Search.Default,i)}else a.Url=Res.urlFederalArchivesSearchByBusinessShortNumber.format(e,t.localeFormat(Pd.Language.CultureInfo.CurrentCulture.dateTimeFormat.ShortDatePattern)),a.Target="_blank";return Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getABSearchUrlInternal :: returnValue.Url :: "+a.Url,!0),a},u=function(e,t){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getABByCouncilAndSessionSearchUrlInternal");var r=[];r.push('{0}="{1}"'.format(Pd.Utility.ManagedProperties.PdSubjectCouncil,e)),r.push('{0}="{1}"'.format(Pd.Utility.ManagedProperties.PdSubjectSession,t));var a={k:r.join(" AND "),o:[{d:1,p:Pd.Utility.ManagedProperties.PdSubjectSortOrder}]},n=Pd.Angular.GetSearchPageUrlWithParameters(Pd.Utility.PageUrlFormats.AmtlichesBulletin.Search.Default,a);return n},c=function(e,t){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getSearchPageUrlWithParametersInternal");var r="#Default={0}".format(encodeURI(angular.toJson(t))),a=e.concat(r);return a},g=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getCommitteeReportQueryInternal");var t=Pd.Language.GetCurrentLanguage(),r=[];switch(t){default:r.push("{0}:{1}".format(Pd.Utility.ManagedProperties.PdLanguage,t));break;case"RM":r.push("{0}:{1}".format(Pd.Utility.ManagedProperties.PdLanguage,"DE")),r.push("{0}:{1}".format(Pd.Utility.ManagedProperties.PdLanguage,t));break;case"EN":r.push("{0}:{1}".format(Pd.Utility.ManagedProperties.PdLanguage,"FR")),r.push("{0}:{1}".format(Pd.Utility.ManagedProperties.PdLanguage,t))}var a={querytext:"ContentTypeId:0x0101008E648BFF3BE04649A4D70E80E876A698* {0}:{1} ({2})".format(Pd.Utility.ManagedProperties.PdAffairId,e,r.join(" OR ")),sortlist:{LastModifiedTime:"descending"},trimduplicates:!1,selectproperties:[Pd.Utility.ManagedProperties.PdAffairId,Pd.Utility.ManagedProperties.PdReportDate,"LastModifiedTime","Path","Filename","Title","dlcDocIdUrlOWSURLH"]};return a},P=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getCommitteeReportAndDraftQueryInternal");var t={querytext:{ContentTypeId:"0x010100E124ACA3FE894F93AFA3B443EE4CB9AF*",PdLanguage:Pd.Language.GetCurrentLanguage(),PdAffairId:e,freetext:'({0}:"{1}" OR {0}:"{2}")'.format(Pd.Utility.ManagedProperties.PdDoctype,Res.documentTypePreliminaryPublication.replace(/'/g," "),Res.documentTypePreliminaryPublicationPAIV.replace(/'/g," "))},sortlist:{LastModifiedTime:"descending"},trimduplicates:!1,selectproperties:[Pd.Utility.ManagedProperties.PdAffairId,Pd.Utility.ManagedProperties.PdReportDate,Pd.Utility.ManagedProperties.PdDraft,"LastModifiedTime","Path","Filename","Title","dlcDocIdUrlOWSURLH"]};return t},f=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getFulfillmentReportQueryInternal");var t={querytext:{ContentTypeId:"0x010100E124ACA3FE894F93AFA3B443EE4CB9AF*",PdLanguage:Pd.Language.GetCurrentLanguage(),PdAffairId:e},sortlist:{LastModifiedTime:"descending"},trimduplicates:!1,selectproperties:[Pd.Utility.ManagedProperties.PdAffairId,Pd.Utility.ManagedProperties.PdTitle,Pd.Utility.ManagedProperties.PdDocumentDate,"LastModifiedTime","Path","Filename","dlcDocIdUrlOWSURLH"],rowlimit:1};return t.querytext[Pd.Utility.ManagedProperties.PdDoctype]=Res.documentTypeFulfillmentReport.replace(/'/g," "),t},m=function(e,t){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getPreliminaryPublicationQuery");var r={querytext:{ContentTypeId:"0x010100E124ACA3FE894F93AFA3B443EE4CB9AF*",PdLanguage:Pd.Language.GetCurrentLanguage(),PdAffairId:e,PdDraft:t},sortlist:{PdDocumentDate:"descending"},trimduplicates:!1,selectproperties:[Pd.Utility.ManagedProperties.PdAffairId,Pd.Utility.ManagedProperties.PdDocumentDate,Pd.Utility.ManagedProperties.PdDraft,"LastModifiedTime","Path","Filename","Title","dlcDocIdUrlOWSURLH"],rowlimit:1};return r.querytext[Pd.Utility.ManagedProperties.PdDoctype]='"{0}"'.format(Res.documentTypePreliminaryPublication.replace(/'/g," ")),r},p=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getSubmittedBusinessByMemberCouncilSearchUrlInternal");var t={k:"{0}:{1}".format(Pd.Utility.ManagedProperties.PdBusinessCouncilorPersonNumber,e),o:[{d:1,p:Pd.Utility.ManagedProperties.PdSortDateTime}]},r=Pd.Angular.GetSearchPageUrlWithParameters(Pd.Utility.PageUrlFormats.Affair.Search.Default,t);return r},h=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getAdoptedBusinessByMemberCouncilSearchUrlInternal");var t={k:"{0}:{1} ({2}:{3} OR {2}:{4})".format(Pd.Utility.ManagedProperties.PdBusinessCouncilorPersonNumber,e,Pd.Utility.ManagedProperties.PdAffairStateId,25,26),o:[{d:1,p:Pd.Utility.ManagedProperties.PdSortDateTime}]},r=Pd.Angular.GetSearchPageUrlWithParameters(Pd.Utility.PageUrlFormats.Affair.Search.Default,t);return r},y=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getBusinessBySpokesmanSearchUrlInternal");var t={k:"{0}:{1}".format(Pd.Utility.ManagedProperties.PdBusinessSpeakerId,e),o:[{d:1,p:Pd.Utility.ManagedProperties.PdSortDateTime}]},r=Pd.Angular.GetSearchPageUrlWithParameters(Pd.Utility.PageUrlFormats.Affair.Search.Default,t);return r},S=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getVotesByMemberCouncilSearchUrlInternal");var t={k:"{0}:{1}".format(Pd.Utility.ManagedProperties.PdSubjectSpeakerPersonNumbers,e)},r=Pd.Angular.GetSearchPageUrlWithParameters(Pd.Utility.PageUrlFormats.AmtlichesBulletin.Search.Default,t);return r},U=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getVotesByBusinessSearchUrlInternal");var t={k:'PdAffairId:"{0}"'.format(e),o:[{d:1,p:Pd.Utility.ManagedProperties.PdSortDateTime}]},r=Pd.Angular.GetSearchPageUrlWithParameters(Pd.Utility.PageUrlFormats.AmtlichesBulletin.Search.Default,t);return r},A=function(e){return Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getVotingsByMemberCouncilSearchUrlInternal"),Pd.Utility.PageUrlFormats.Votes.Search.ByMemberCouncilId.format(e)},b=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getVotingsByBusinessSearchUrlInternal");var t=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.Votes.Search.ByBusinessId,e);return t},D=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getPressReleaseByBusinessSearchUrlInternal");var t=Pd.Utility.PageUrlFormats.News.ByPressRelease+' "'+e+'"';return t},I=function(e,t){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getEParlSessionDocumentsQueryInternal");var r={querytext:'PdSession="{0}" ContentTypeId:0x010100BB107401AD8E49D7A7C6601610D2B26D*'.format(t),rowlimit:500,trimduplicates:!1,selectproperties:[Pd.Utility.ManagedProperties.PdEParlSession,Pd.Utility.ManagedProperties.PdEParlSessionTitle,Pd.Utility.ManagedProperties.PdEParlDoctype,Pd.Utility.ManagedProperties.PdTitle,"Path","Filename","Title","dlcDocIdUrlOWSURLH"]};switch(e.toString()){case"1":r.querytext+=" {0}={1}".format(Pd.Utility.ManagedProperties.PdEParlCouncilN,!0);break;case"2":r.querytext+=" {0}={1}".format(Pd.Utility.ManagedProperties.PdEParlCouncilS,!0);break;default:return Pd.Shared.LogToConsoleIfDebug("getEParlSessionDocumentsQueryInternal: unsupported councilId".format(e)),null}return r.querytext+=" {0}={1}".format(Pd.Utility.ManagedProperties.PdEParlLanguage,!0),r},T=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getMeetingStartTimeFormattedInternal",!0);var t=e;return e&&4===e.length&&(t="{0}h{1}".format(e.substr(0,2),e.substr(2,2))),t},C=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getPublicationStatusTextInternal");var t;switch(e){case"draft":t=Res.brandingABPublicationStatusDraft;break;case"final":t=Res.brandingABPublicationStatusFinal;break;default:t=e}return t},L=function(){return[1,2,3,4,5,6,7,8,9,10,11,12,14,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,76,315,333,536,582,707,709,710,711,712,940]},v=function(){return[1,2,3,4,5,6,7,8,11,99,102,136,137]},F=function(){var e=null;try{e=jQuery.get("_layouts/15/itsystems.Pd.Internet/Branding/officialBulletins/functionStrings.js",function(e,t){return"undefined"!=typeof e&&null!=e&&"success"==t?e:null},"json")}catch(t){Pd.Shared.LogToConsoleIfDebug(t.message),Pd.Shared.LogToConsoleIfDebug(t.stack)}return e},B=function(t){var r=e.Deferred(),a=breeze.EntityQuery.from("SubjectBusiness").where("IdSubject","==",t).where("Language","==",Pd.Language.GetCurrentLanguage()).orderBy("SortOrder").top(1).using(manager);return a.execute().then(function(e){r.resolve(e.results[0])}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),r.reject()}),r.promise()},M=function(t,r){var a=e.Deferred(),n=breeze.EntityQuery.from("Vote").where("RegistrationNumber","==",t).where("IdSession","==",r).where("Language","==",Pd.Language.GetCurrentLanguage()).top(1).using(manager);return n.execute().then(function(e){a.resolve(e.results[0])}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),a.reject()}),a.promise()},E=[],x=function(e){var t="",r={},a="",n="";if(0==E.length){for(var i=0;i<e.length;i++){var o=e[i].Title.charAt(0).toUpperCase();o!=t?(""==n?r.title=t+" â "+a:r.title=t+" â "+a+" ... "+n,r={name:e[i].Title.charAt(0).toUpperCase(),lexicons:[]},E.push(r),r.lexicons.push(e[i]),t=o,a=e[i].Title,n=""):(r.lexicons.push(e[i]),n=e[i].Title)}""==n?r.title=t+" â "+a:r.title=t+" â "+a+" ... "+n}return E},R=function(){var e=angular.element("#isSessionMode").length>0&&"True"==angular.element("#isSessionMode").val();return e},w=function(e,t){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.createAndSetPageTitleFromResultInternal");var r=angular.element("#"+e).scope();if(!r)return"";if(!r.results)return"";if(0==r.results.length)return"";var a,n=r.results[0];switch(t){case"Councilor":return a=Pd.Utility.GeneratePageTitleFromArgs(" | ",n.LastName+" "+n.FirstName,n.CouncilName,Res.brandingPageTitleFormatCouncilor),Pd.Shared.LogToConsoleIfDebug("Pd.Angular.createAndSetPageTitleFromResultInternal: generated title for '"+t+"': '"+a+"'",!0),Pd.Utility.SetPageTitle(a),Pd.Utility.SetPageH1Text(Pd.Utility.GenerateH1FromArgs(" - ",n.LastName+" "+n.FirstName,n.CouncilName)),a;case"Business":return a=Pd.Utility.GeneratePageTitleFromArgs(" | ",n.BusinessShortNumber,n.Title,Res.brandingPageTitleFormatBusiness),Pd.Shared.LogToConsoleIfDebug("Pd.Angular.createAndSetPageTitleFromResultInternal: generated title for '"+t+"': '"+a+"'",!0),Pd.Utility.SetPageTitle(a),Pd.Utility.SetPageH1Text(Pd.Utility.GenerateH1FromArgs(" - ",n.BusinessShortNumber,n.Title)),a;case"ParliamentHistory":return a=Pd.Utility.GeneratePageTitleFromArgs(" | ",n.Title,Pd.Utility.FormatDate(n.HistoricDate.toDate(),"llll"),Res.brandingPageTitleFormatParliamentHistory),Pd.Shared.LogToConsoleIfDebug("Pd.Angular.createAndSetPageTitleFromResultInternal: generated title for '"+t+"': '"+a+"'",!0),Pd.Utility.SetPageTitle(a),Pd.Utility.SetPageH1Text(Pd.Utility.GenerateH1FromArgs(" - ",n.Title,Pd.Utility.FormatDate(n.HistoricDate.toDate(),"llll"))),a}return""},G=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.generateMetaDescriptionFromPageInternal");var t="",r=function(e){Pd.Utility.StringIsNullOrEmpty(e)||(Pd.Utility.StringIsNullOrEmpty(t)||(t+=", "),t+=e)};e(".meta-desc-group:visible").each(function(){e(this).find(".meta-data:visible").each(function(){r(e(this).text().trim())});var t=e(this).find(".meta-key:visible:first").text().trim(),a=e(this).find(".meta-value:visible:first").text().trim();Pd.Utility.StringIsNullOrEmpty(t)||Pd.Utility.StringIsNullOrEmpty(a)||r(t+" "+a)}),e(".meta-desc.page-title").attr("data-meta-desc",t),Pd.Utility.SetMetaDesc(t)},k=function(e){return Pd.Utility.FormatDate(e,"LLL")},j=function(e,t,r,n){var i=0,o=n+"_"+t+"_"+r;try{void 0!=a[o]?i=a[o]:(angular.forEach(e,function(e){e[t]==r&&i++}),a[o]=i)}catch(l){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.countOccurrencesOfFieldMatchInResultsInternal :: Exception occurred :: "+l)}return i},N=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.performPostAngularTemplateCachingWorkInternal",!0);try{e(".angular-container").each(function(){"True"==e(this).attr("data-cached")&&Pd.Angular.ExecuteScriptsForTemplate(e(this).attr("data-template-path"))})}catch(t){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.performPostAngularTemplateCachingWorkInternal :: unexpected error :: "+t.message)}},O=function(e,t){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getOpponentSortedInternal");var r=e.filter(function(e){return 1==e.Role&&0==e.ReturnType}).sort(function(e,r){var a=e.MembersCouncil.MemberCouncilHistories.filter(function(e){return e.DateJoining<=t}).sort(function(e,t){return e.DateJoining<t.DateJoining?-1:e.DateJoining>t.DateJoining?1:0})[0],n=r.MembersCouncil.MemberCouncilHistories.filter(function(e){return e.DateJoining<=t}).sort(function(e,t){return e.DateJoining<t.DateJoining?-1:e.DateJoining>t.DateJoining?1:0})[0];return a.LastName.localeCompare(n.LastName)});return r},q=function(e){var t={serverRelativeUrl:e,thumbnailImageUrl:e,weboptimizedImageUrl:e},r=e.replace(/\.([^\.]+)$/,"_$1");return r+=".jpg",t.thumbnailImageUrl=r.replace(/\/([^\/]+)$/,"/_t/$1"),t.weboptimizedImageUrl=r.replace(/\/([^\/]+)$/,"/_w/$1"),t},W=function(e,t,r){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getABUrlByMeetingInternal");var a=Q.defer();try{if(new Date(t)>=new Date("1999-12-06")){var n={querytext:{PdLanguage:Pd.Language.GetCurrentLanguage(),PdAffairIdFormatted:e,PdSubjectMeetingDate:new Date(t).toISOString(),PdSubjectCouncilName:r},rowlimit:1,trimduplicates:!1,selectproperties:[Pd.Utility.ManagedProperties.PdSubjectId,Pd.Utility.ManagedProperties.PdSubjectSortOrder],sortlist:{PdSubjectSortOrder:"ascending"}};Pd.Angular.ExecuteSPSearchQuery(n).then(function(n){if(0==n.length)a.resolve(Pd.Angular.GetABSearchUrl(e,t,r));else{var i=n[0].PdSubjectId,o=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.AmtlichesBulletin.Detail,i),l={BusinessShortNumber:e,MeetingDate:t,CouncilName:r,Url:o,Target:"_self"};a.resolve(l)}}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),a.reject(e)})}else{var i={Url:Res.urlFederalArchivesSearchByBusinessShortNumber.format(e,t.localeFormat(Pd.Language.CultureInfo.CurrentCulture.dateTimeFormat.ShortDatePattern)),Target:"_blank"};a.resolve(i)}}catch(o){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.getABUrlByMeetingInternal :: Unhandled exception :: "+o)}return a.promise},V=function(t){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.redirectInternal"),e("body").css("cursor","progress");var r="function"==typeof t.then;r?t.then(function(t){e("body").css("cursor","default"),window.open(t.Url,t.Target)}).fail(function(t){e("body").css("cursor","default"),Pd.Shared.LogToConsoleIfDebug(t)}):(e("body").css("cursor","default"),Pd.Shared.LogToConsoleIfDebug("Pd.Angular.redirectInternal: Error: urlFactory is not a promise!"))},H=function(t,r){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.scrollIntoViewInternal");var a;a=t instanceof jQuery?t:e(t),a&&a.each(function(){var e=this;e.scrollIntoView(r)})},J=function(t){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.openAccordionInternal");var r=e(t).attr("aria-expanded");("undefined"==typeof r||"false"===r)&&(Pd.Shared.LogToConsoleIfDebug("Pd.Angular.openAccordionInternal:: opening"),e(t).trigger("click"))},_=function(t){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.gotoAffairSummaryInternal"),"undefined"!=typeof t&&t.preventDefault(),Pd.Angular.OpenAccordion("div#AffairSummary .accordion-group a.all");var r="div#AffairSummary .pd-curia-chronologie-bottom.pd-accordion-group";Pd.Angular.ScrollIntoView(r,!0);for(var a=e(document).height(),n=1;10>n;n++)setTimeout(function(){Pd.Shared.LogToConsoleIfDebug("Pd.Angular.gotoAffairSummaryInternal :: timeout",!0);var t=e(document).height();t>a?(e("html, body").animate({scrollTop:e(r).offset().top},500),Pd.Shared.LogToConsoleIfDebug("Pd.Angular.gotoAffairSummaryInternal :: timeout :: height diff, scroll",!0),a=t):Pd.Shared.LogToConsoleIfDebug("Pd.Angular.gotoAffairSummaryInternal :: timeout :: height same, doing nothing",!0)},300*n)},z=function(e,t,r,a,n,i){return e(t)(r,a,n,i)},$=function(t,r){var a=e(t),n=a.parents(r);return 0===a.length||0===n.length?void Pd.Shared.LogToConsoleIfDebug("Pd.Angular.scrollToParentInternal :: current or parent element not found"):(Pd.Shared.LogToConsoleIfDebug("Pd.Angular.scrollToParentInternal :: current and parent element found"),void e("html,body").animate({scrollTop:n.offset().top},"slow"))};return{ExecuteScriptsForTemplate:n,CreateBBlLink:i,ExecuteSPSearchQuery:o,ExecuteSPSearchQueryEx:l,GetRatsunterlagenSearchUrl:s,GetABSearchUrl:d,GetABByCouncilAndSessionSearchUrl:u,GetSearchPageUrlWithParameters:c,GetCommitteeReportQuery:g,GetCommitteeReportAndDraftQuery:P,GetPreliminaryPublicationQuery:m,GetFulfillmentReportQuery:f,GetSubmittedBusinessByMemberCouncilSearchUrl:p,GetAdoptedBusinessByMemberCouncilSearchUrl:h,GetBusinessBySpokesmanSearchUrl:y,GetVotesByMemberCouncilSearchUrl:S,GetVotesByBusinessSearchUrl:U,GetVotingsByMemberCouncilSearchUrl:A,GetVotingsByBusinessSearchUrl:b,GetPressReleaseByBusinessSearchUrl:D,date19951201:function(){return new Date("1995/01/12")},CreateLexiconGroups:x,GetMeetingStartTimeFormatted:T,GetPublicationStatusText:C,GetCommitteeIds:L,GetFractionIds:v,GetOfficialBulletinFunctions:F,GetFirstBusinessBySubject:B,GetVoteByRegistrationNumber:M,IsSessionMode:R,CreateAndSetPageTitleFromResult:w,GenerateMetaDescriptionFromPage:G,FormatVotingDate:k,CountOccurrencesOfFieldMatchInResults:j,GetEParlSessionDocumentsQuery:I,PerformPostAngularTemplateCachingWork:N,GetOpponentSorted:O,GetSharePointImageUrl:q,GetABRedirectUrlByMeeting:W,Redirect:V,ScrollIntoView:H,OpenAccordion:J,GotoAffairSummary:_,Filter:z,ScrollToParent:$}}(PdCustomJs),function(e){e(document).ready(function(){try{Pd.Shared.TryCatch(Pd.Angular.PerformPostAngularTemplateCachingWork)}catch(e){Pd.Shared.LogErrorToStatusDialog("Pd.Angular :: Unhandled exception on initialisation :: "+e)}})}(PdCustomJs);
Pd.Affairs=function(e){"use strict";var t=/([0-9]{2}\.[0-9]{3,4})/,a=function(a){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.findAffairsIdsOnPageInternal");var n=function(a){if(e(a).is("a"))return!0;var i=e(a).text();if(Pd.Affairs.ContentContainsRegExpPattern(i,t)){var r=Pd.Shared.GetElementDirectText(e(a));if(Pd.Affairs.ContentContainsRegExpPattern(r,t)){var f=e(a).html(),s=Pd.Affairs.GetAffairMatches(f),d=Pd.Affairs.ValidateMatches(f,s);Pd.Affairs.VerifyMatches(a,d)}else e(a).children().each(function(){n(this)})}};e(a+":not(.affairId-searched)").each(function(){e(this).text().trim().length>0?(n(this),e(this).addClass("affairId-searched")):Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.findAffairsIdsOnPageInternal :: parent target was empty, not processed/flagged",!0)})}},n=function(e){var t=/([0-9]{2}\.[0-9]{3,4})/g;Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.getAffairMatches",!0);for(var a,n=[];a=t.exec(e);){var i={value:a[1],index:a.index,validated:!1,verified:!1,replacementHtml:""};n.push(i)}return n},i=function(t,a){Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.validateMatches",!0);var n=function(e,t,a){var n=/[0-9]{1,2}\.[0-9]{1,2}\.[0-9]{4}/;if(a.matchStartIndex<3)return!1;var i=e.substring(a.matchStartIndex-3,a.matchEndIndex);return Pd.Affairs.ContentContainsRegExpPattern(i,n)},i=function(e,t,a){if(!(e.length-a.matchEndIndex>8))return!1;var n=e.substring(a.matchStartIndex+t.value.length,a.matchEndIndex+7);return"</span>"!=n.toLowerCase()?!1:!0},r=function(e,t,a){var n=!1;if(e.length-a.matchEndIndex>1){var i=e.substring(a.matchStartIndex+t.value.length,a.matchEndIndex+1);Pd.Affairs.ContentContainsRegExpPattern(i,/[0-9]/)&&(n=!0)}if(a.matchStartIndex>0){var r=e.substring(a.matchStartIndex-1,a.matchStartIndex);Pd.Affairs.ContentContainsRegExpPattern(r,/[0-9]/)&&(n=!0)}return n};return e.each(a,function(e,a){var f=Pd.Affairs.GetAdditionalMatchInfo(t,a,0),s=n(t,a,f),d=i(t,a,f),o=r(t,a,f);s||d||o||(a.validated=!0)}),a},r=function(e,t){return t.test(e)},f=function(e,t,a){Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.getAdditionalMatchInfo",!0);var n=t.index+a,i=t.index+t.value.length+a,r=e.substring(0,n),f=e.substring(i);return{matchStartIndex:n,matchEndIndex:i,htmlBeforeMatch:r,htmlAfterMatch:f}},s=function(e){if(Pd.Affairs.ContentContainsRegExpPattern(e,t)){var a=Pd.Affairs.GetAffairMatches(e),n=Pd.Affairs.ValidateMatches(e,a);e=Pd.Affairs.InsertTokensInText(e,n)}return e},d=function(t,a){var n='<span class="affair-token">{0}</span>',i=function(e){return n.format(e)},r=0;return e.each(a,function(e,a){if(!a.validated)return!0;var n=Pd.Affairs.GetAdditionalMatchInfo(t,a,r),f=i(a.value);r+=f.length-a.value.length,t=n.htmlBeforeMatch+f+n.htmlAfterMatch}),t},o=function(t,a,n){Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.verifyMatches",!0),void 0==n&&(n=!1);var i=Pd.Config.Urls.WSUrl,r=Pd.Language.GetCurrentLanguage(),f=0,s=0;e.each(a,function(e,t){return t.validated?void s++:!0});var d=function(e,t){t.verified=1==e},o=function(){f++,f==s&&(Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.verifyMatches: processed count reached, ready to go ("+f+")",!0),n?Pd.Affairs.ReplaceSingleTokenMatchInContent(t,a):Pd.Affairs.ReplaceMatchesInContent(t,a))};e.each(a,function(t,a){if(!a.validated)return!0;var n=Pd.Utility.lscacheGet("Affair_"+a.value+"_"+r);return null!=n?(d(n,a),o(),!0):void e.ajax(i+"/Business/$count?$filter=Language eq '"+r+"' and BusinessShortNumber eq '"+a.value+"'").done(function(e){d(e,a),Pd.Utility.lscacheSet("Affair_"+a.value+"_"+r,e,60)}).fail(function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.verifyMatches :: failure accessing web service :: '"+e+"'")}).always(function(){o()})})},l=function(e){var t='<a class="no-border" href="{0}"><span class="no wired">{1}</span></a>',a=Pd.Utility.PageUrlFormats.Affair.Detail,n=Pd.Utility.ConvertAffairShortNumberToId(e),i=Pd.Utility.GetPageUrlFormat(a,n),r=t.format(i,e);return r},u=function(t,a){Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.replaceMatchesInContent",!0);var n=0,i=e(t).html();e.each(a,function(e,t){if(!t.validated||!t.verified)return!0;var a=Pd.Affairs.GetAdditionalMatchInfo(i,t,n),r=Pd.Affairs.GetAffairReplacementHtmlStructure(t.value);n+=r.length-t.value.length,i=a.htmlBeforeMatch+r+a.htmlAfterMatch}),e(t).html(i),e(t).addClass("pd-affairs-processed")},c=function(e,t){Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData for Entity '"+t+"'",!0);var a=function(e,t){for(var a=0;a<i.length;a++){var n=i[a];if(n.Entity==e)for(var r=0;r<n.Fields.length;r++)if(n.Fields[r]==t)return!0}return!1},n=!1,i=[];return i.push({Entity:"Business",Fields:["Description","FederalCouncilProposalText","FederalCouncilResponseText","InitialSituation","Proceedings","ReasonText","SubmittedText","Title"]}),i.push({Entity:"BusinessRole",Fields:["BusinessTitle"]}),i.push({Entity:"Objective",Fields:["PublicationText"]}),i.push({Entity:"Preconsultation",Fields:["Abbreviation","BusinessTitle"]}),i.push({Entity:"RelatedBusiness",Fields:["RelatedBusinessTitle"]}),i.push({Entity:"Resolution",Fields:["ResolutionText"]}),i.push({Entity:"Transcript",Fields:["Text"]}),i.push({Entity:"Vote",Fields:["BillTitle","MeaningNo","MeaningYes","Subject"]}),i.push({Entity:"Voting",Fields:["BillTitle","MeaningNo","MeaningYes","Subject"]}),void 0==e?void Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData: supplied records were undefined"):(angular.forEach(e,function(e){for(var i in e)if(a(t,i)){var r=e[i];Pd.Utility.StringIsNullOrEmpty(r)||(r.search("affair-token")>=0?(Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData: field '{0}' already had token in entity '{1}'".format(i,t),!0),n=!0):(r=Pd.Affairs.FlagAffairNumbersInText(e[i]),e[i]!=r&&(Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.FindAndReplaceAffairShortNumbersInEntityData: updated field '{0}' in entity '{1}'".format(i,t),!0),n=!0,e[i]=r)))}}),n&&Pd.Affairs.ValidateAffairTokens(),e)},h=function(t){void 0==t&&(t=0),Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.ValidateAffairTokens("+t+")",!0);var a=e(".affair-token:not(.processing):not(.processed)");if(a.addClass("processing"),0==a.length){if(t>15)return;return void setTimeout(function(){Pd.Affairs.ValidateAffairTokens(t+1)},250)}a.each(function(){var a=e(this),n=a.text();Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.ValidateAffairTokens("+t+"): have token for processing '"+n+"'",!0),Pd.Affairs.VerifyMatches(a[0],[{value:n,index:0,validated:!0,verified:!1,replacementHtml:""}],!0)})},g=function(t,a){Pd.Shared.LogToConsoleIfDebug("Pd.Affairs.replaceSingleTokenMatchInContentInternal",!0);var n=a[0];if(!n.validated||!n.verified)return!0;var i=Pd.Affairs.GetAffairReplacementHtmlStructure(n.value);e(t).replaceWith(i)};return{FindAffairsIdsOnPage:a,FindAndReplaceAffairShortNumbersInEntityData:c,VerifyMatches:o,GetAffairReplacementHtmlStructure:l,ReplaceMatchesInContent:u,GetAffairMatches:n,ValidateMatches:i,ContentContainsRegExpPattern:r,InsertTokensInText:d,GetAdditionalMatchInfo:f,FlagAffairNumbersInText:s,ValidateAffairTokens:h,ReplaceSingleTokenMatchInContent:g}}(PdCustomJs),function(e){e(document).ready(function(){try{Pd.Shared.TryCatch(function(){Pd.Affairs.FindAffairsIdsOnPage("div.ms-rtestate-field")},Pd.Affairs.FindAffairsIdsOnPage),Pd.Shared.TryCatch(function(){Pd.Affairs.FindAffairsIdsOnPage(".affair-short-number")},Pd.Affairs.FindAffairsIdsOnPage)}catch(e){Pd.Shared.LogErrorToStatusDialog("Pd.Affairs :: Unhandled exception on initialisation :: "+e)}})}(PdCustomJs);
Pd.EntityMappings=function(e){"use strict";var t="/_api/Lists/getByTitle('Entity Mappings')/Items?";t+="$filter=startswith(FileRef,'/Lists/Entity Mappings/{entity}/')",t+="and ERMExternalId eq '{externalId}'",t+="and ERMCategory eq '{category}'",t+="&$select=Id,Title,ERMCategory,ERMExternalId,FileRef,ERMUrl_en,ERMUrl_de,ERMUrl_fr,ERMUrl_it,ERMUrl_rm";var r=function(e,t,r,n,a){if(a[n+"cached"])return!0;a[n]="",a[n+"cached"]=!0;var s=Pd.EntityMappings.GetEntityRecordMapping(e,t,r);return s.then(function(e){try{e[0].length>0?(a[n]=Pd.Language.GetMultilingualTextForCurrentLanguage(e[0][1].url,e[0][0].url,e[0][2].url,e[0][3].url,e[0][4].url,e[0][0].url),a.$apply()):a[n]=""}catch(t){a[n]=""}}),!0},n=function(e,r,n){Pd.Shared.LogToConsoleIfDebug("Pd.EntityMappings.getEntityRecordMappingInternal ({0},{1},{2})".format(e,r,n),!0);var a=t;a=a.replace("{entity}",e),a=a.replace("{category}",r),a=a.replace("{externalId}",n),Pd.Shared.LogToConsoleIfDebug(a,!0);var s=Q.defer();try{OData.read({requestUri:a,contentType:"application/json;odata=verbose",headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}},function(e){s.resolve(Pd.EntityMappings.ProcessEntityRecordMappingData(e))},function(e){s.reject(new Error("API request failed: "+e.message))})}catch(i){s.reject(new Error("Fatal Unhandled Error: "+i.message))}return s.promise},a=function(e,t){Pd.Shared.LogToConsoleIfDebug("Pd.EntityMappings.getSessionEntityRecordMappingInternal ({0},{1}".format(e,t));var r="/_api/Lists/getByTitle('Entity Mappings')/Items?$filter=startswith(FileRef,'/Lists/Entity Mappings/{0}/') and substringof('{1}',ERMExternalId)&$select=Id,Title,ERMCategory,ERMExternalId,FileRef,ERMUrl_en,ERMUrl_de,ERMUrl_fr,ERMUrl_it,ERMUrl_rm".format(e,t);Pd.Shared.LogToConsoleIfDebug(r);var n=Q.defer();try{OData.read({requestUri:r,contentType:"application/json;odata=verbose",headers:{"Content-Type":"application/json",Accept:"application/json; odata=verbose"}},function(e){n.resolve(e)},function(e){n.reject(new Error("API request failed: "+e.message))})}catch(a){n.reject(new Error("Fatal Unhandled Error: "+a.message))}return n.promise},s=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.EntityMappings.processEntityRecordMappingDataInternal");var t="",r=[];try{e&&e.results&&(1==e.results.length?(r.push({language:"en",url:e.results[0].ERMUrl_en}),r.push({language:"de",url:e.results[0].ERMUrl_de}),r.push({language:"fr",url:e.results[0].ERMUrl_fr}),r.push({language:"it",url:e.results[0].ERMUrl_it}),r.push({language:"rm",url:e.results[0].ERMUrl_rm}),t="200 OK"):e.results.length>1&&(t="Too many resources found.")),0==t.length&&(t="Resource not found.")}catch(n){t="Unhandled exception: "+n.message}return[r,t]};return{GetEntityRecordMapping:n,GetAllEntityRecordMappings:a,GetEntityMappingsPromiseResultUrlAsScopeVar:r,ProcessEntityRecordMappingData:s}}(PdCustomJs);
Pd.Language=function(e){"use strict";function a(e){for(var a=[],t=e.length,r=0;t>r;r++){var n=e[r],u=n.charAt(0).toUpperCase()+n.slice(1);a.push(u)}return a}var t=Sys.CultureInfo,r=(Sys.CultureInfo.CurrentCulture,function(){Pd.Shared.LogToConsoleIfDebug("Pd.Language.getCurrentLcidInternal",!0);var e=[1031,1036,1040,1047,1033],a=e[0],t=Cookies.get("PdInternet_UserLanguage");return Pd.Utility.IsNumeric(t)&&e.indexOf(parseInt(t))>=0&&(a=t),a}),n=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Language.getCurrentLanguageInternal",!0);var e="";switch(Pd.Language.GetCurrentLcid()){case"1031":e="DE";break;case"1033":e="EN";break;case"1036":e="FR";break;case"1040":e="IT";break;case"1047":e="RM";break;default:e="EN"}return e},u=function(e,a,t,r,n,u){Pd.Shared.LogToConsoleIfDebug("Pd.Language.getMultilingualTextForCurrentLanguageInternal",!0);var d;switch(Pd.Language.GetCurrentLanguage()){case"DE":d=e;break;case"EN":d=a;break;case"FR":d=t;break;case"IT":d=r;break;case"RM":d=n;break;default:d=u}return d},d=function(){return Pd.Shared.LogToConsoleIfDebug("Pd.Language.getCurrentLanguageLcid"),Pd.Language.GetCurrentLcid()},M=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Language.getMomentLocaleInternal",!0);var e="pd-{0}".format(Pd.Language.GetCurrentLanguage().toLowerCase());return e},y=function(){var e=Pd.Language.GetCurrentLanguage().toLowerCase(),t=Sys.CultureInfo.CurrentCulture,r=t.name,n=t.dateTimeFormat;switch(n.OriginalCultureName=r,n.CultureName="pd-"+r.substr(0,2).toLowerCase(),e){case"de":n.DayNames=a(n.DayNames),n.ShortMonthDayPattern="d. MMM",n.MediumDayMonthYearPattern="dd. MMM. yyyy",n.MediumDatePattern="dd. MMMM yyyy",n.MediumDatePatternAgenda="dd. MMM",n.DateSeparator=".",n.ShortDatePattern="dd.MM.yyyy";break;case"fr":n.DayNames=a(n.DayNames),n.ShortMonthDayPattern="d MMM",n.MediumDayMonthYearPattern="dd MMM. yyyy",n.MediumDatePattern="dd MMMM yyyy",n.MediumDatePatternAgenda="dd MMM",n.DateSeparator=".",n.ShortDatePattern="dd.MM.yyyy";break;case"it":n.DayNames=a(n.DayNames),n.ShortMonthDayPattern="d MMM",n.MediumDayMonthYearPattern="dd MMM. yyyy",n.MediumDatePattern="dd MMMM yyyy",n.MediumDatePatternAgenda="dd MMM",n.DateSeparator=".",n.ShortDatePattern="dd.MM.yyyy";break;case"rm":n.DayNames=a(n.DayNames),n.ShortMonthDayPattern="d MMM",n.MediumDayMonthYearPattern="dd MMM. yyyy",n.MediumDatePattern="dd MMMM yyyy",n.MediumDatePatternAgenda="dd MMM",n.DateSeparator=".",n.ShortDatePattern="dd.MM.yyyy";break;case"en":n.DayNames=a(n.DayNames),n.AMDesignator="",n.PMDesignator="",n.LongDatePattern="dddd, d MMMM, yyyy",n.FullDateTimePattern="dddd, d MMMM, yyyy h:mm:ss tt",n.ShortMonthDayPattern="d MMM",n.MediumDayMonthYearPattern="dd MMM. yyyy",n.MediumDatePattern="dd MMMM yyyy",n.MediumDatePatternAgenda="dd MMM",n.DateSeparator=".",n.ShortDatePattern="dd.MM.yyyy";break;default:throw"unsupported language!"}return n},o=function(){var e=Sys.CultureInfo,a=Sys.CultureInfo.CurrentCulture,t=Pd.Language.GetDateTimeFormat();a.dateTimeFormat=t,e.CurrentCulture=a};return{SetCurrentCultureInfo:o,GetCurrentLanguage:n,GetMultilingualTextForCurrentLanguage:u,GetCurrentLanguageLcid:d,GetMomentLocale:M,CultureInfo:t,GetCurrentLcid:r,GetDateTimeFormat:y}}(PdCustomJs);
Pd.BackToPage=function(a){"use strict";var o=function(){if(!Pd.Shared.PageIsInEditMode()){if(Pd.Shared.LogToConsoleIfDebug("Pd.BackToPage.setBackToSeachUrlInternal"),!a("body").hasClass("search"))return void Cookies.remove("BackToSearchUrl",{path:"/"});var o=location.href,e="{0}//{1}".format(location.protocol,location.host),c=o.replace(e,"");Cookies.set("BackToSearchUrl",c,{path:"/"},1)}},e=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.BackToPage.watchForSearchPageHashChangesInternal"),a("body").hasClass("search")&&a(window).hashchange(function(){Pd.BackToPage.SetBackToSeachUrl()}))};return{SetBackToSeachUrl:o,WatchForSearchPageHashChanges:e}}(PdCustomJs),function(a){a(document).ready(function(){try{Pd.BackToPage.SetBackToSeachUrl(),Pd.BackToPage.WatchForSearchPageHashChanges()}catch(a){Pd.Shared.LogErrorToStatusDialog("Pd.BackToPage :: Unhandled exception on initialisation :: "+a)}})}(PdCustomJs);
Pd.Welcome=function(e){"use strict";var a=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Welcome.liveStreamAreaInternal");e("#simplex_player_nr");e(".video-area .play-pause .play").length>0&&(e(".video-area .left-play").click(function(){e(".video-area .left-play").hide(),e(".video-area .left-pause ").css("display","block"),e(".pd-video-stream-panel").addClass("pd-playing pd-playing-left"),e(".video-area-play").removeClass("col-lg-6 col-md-6"),e(".video-area-play").addClass("col-lg-12 col-md-12")}),e(".video-area .right-play").click(function(){e(".video-area .right-play").hide(),e(".video-area  .right-pause").css("display","block"),e(".pd-video-stream-panel").addClass("pd-playing pd-playing-right"),e(".video-area-play").removeClass("col-lg-6 col-md-6"),e(".video-area-play").addClass("col-lg-12 col-md-12")})),e(window).on("resize",function(){e(window).width()<=PdTabletScreenSize&&e(".video-area-play .video-info article .right-side p.title").remove().prependTo(".video-area-play .video-info article .left-side")}).resize(),e(".close-button").length>0&&e(".close-button").click(function(){e(".video-area .play").css("display","block"),e(".video-area .pause").hide(),e(".pd-video-stream-panel").removeClass("pd-playing pd-playing-right"),e(".pd-video-stream-panel").removeClass("pd-playing pd-playing-left"),e(".video-area-play").removeClass("col-lg-12 col-md-12"),e(".video-area-play").addClass("col-lg-6 col-md-6"),e(".video-area .accordion-details").removeClass("in"),e(".video-area .accordion-details").attr("aria-expanded","false"),e(".video-area .btn-pd").removeClass("active"),e(".video-area .btn-pd").attr("aria-expanded","false")})}},d=function(a){if(Pd.Shared.LogToConsoleIfDebug("Pd.Welcome.prepareCarouselInternal"),0==a.length)return!1;var d,r,o,l,i=".carousel-data",t=".carousel-inner",n=".carousel-indicators",s=".pd-slider-nav",c=3,p=3,v=function(){var e=a;return d=e.find(i),r=e.find(t),o=e.find(n),l=e.siblings(s),0==d.length||0==r.length||0==o.length||0==l.length?(Pd.Shared.LogToConsoleIfDebug("Pd.Welcome.prepareCarouselInternal :: child/ren container/s could not be found."),!1):!0},u=function(a){return e("<div />").append(a.clone()).html()},f=function(){var a,o=0,l=0;d.children().each(function(){var d=this;return 0==o&&(a=e('<div class="item"></div>'),0==l&&a.addClass("active")),a.append(u(e(d))),o++,o==c&&(l++,r.append(u(a)),o=0,l==p)?!1:void 0}),o>0&&r.append(u(a))},g=function(){if(0!=r.children().length){1==r.children().length&&(o.hide(),l.hide());var d="#{0}".format(a.attr("id"));r.children().each(function(a){var r=e("<li></li>").attr("data-target",d).attr("data-slide-to",a);0==a&&r.addClass("active"),o.append(r)}),l.find("a").attr("href",d)}};v()&&(r.empty(),o.empty(),d.hide(),f(),g())},r=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Welcome.prepareImportantAffairsCarouselsInternal"),e(".important-affairs .tabs .tab-content .tab").each(function(){var a=e(this),d=a.find(".carousel");d.length>0&&(Pd.Shared.LogToConsoleIfDebug("Pd.Welcome.prepareImportantAffairsCarouselsInternal :: located target, wiring up"),d.attr("id",a.attr("id")+"-carousel"),Pd.Welcome.PrepareCarousel(d)),e(".dotted",a).removeClass("dotted")})};return{LiveStreamArea:a,PrepareCarousel:d,PrepareImportantAffairsCarousels:r}}(PdCustomJs),function(e){e(document).ready(function(){try{Pd.Shared.TryCatch(Pd.Welcome.LiveStreamArea)}catch(e){Pd.Shared.LogErrorToStatusDialog("Pd.Welcome :: Unhandled exception on initialisation :: "+e)}})}(PdCustomJs);
Pd.Detail=function(e){"use strict";var o="div#debate-person-list-content ul.speakers-list",t="div#debate-person-list-content .speakers-list-wrapper",a=0,i=!1,n=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.activeAccordionButtonInternal"),e("#pdc").on("click",".btn-pd.all",function(o){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.activeAccordionButtonInternal :: .btn-pd.all click",!0),0==e(this).parents(".ms-rtestate-write").length&&(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.activeAccordionButtonInternal :: .btn-pd.all click",!0),o.preventDefault(),e(this).toggleClass("active"),e(this).hasClass("active")||(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.activeAccordionButtonInternal :: .btn-pd.all click :: not active",!0),e(this).removeClass("active"),e(this).closest(".accordion-group").closest(".pd-accordion-group").find(".accordion-body.collapse").collapse("hide"),e(this).closest(".accordion-group").closest(".pd-accordion-group").find(".accordion-body.collapse:not(.in)").removeClass("collapsing"),e(this).closest(".accordion-group").closest(".pd-accordion-group").find(".accordion-body.collapse,.accordion-group div .btn-pd").attr("aria-expanded","false"),e(this).closest(".accordion-group").closest(".pd-accordion-group").find(".accordion-group div .btn-pd").removeClass("active"),e(this).closest(".accordion-group").closest(".pd-accordion-group").find(".accordion-group div .btn-pd").attr("aria-pressed","false"),e(this).not(".vote").text(Res.brandingDetailPageAccordionExpandAll)),e(this).hasClass("active")&&(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.activeAccordionButtonInternal :: .btn-pd.all click :: active",!0),e(this).addClass("active"),e(this).closest(".accordion-group").closest(".pd-accordion-group").find(".accordion-body.collapse").collapse("show"),e(this).closest(".accordion-group").closest(".pd-accordion-group").find(".accordion-body.collapse:not(.in)").addClass("collapsing"),e(this).closest(".accordion-group").closest(".pd-accordion-group").find(".accordion-body.collapse,.accordion-group div .btn-pd").attr("aria-expanded","true"),e(this).closest(".accordion-group").closest(".pd-accordion-group").find(".accordion-group div .btn-pd").addClass("active"),e(this).closest(".accordion-group").closest(".pd-accordion-group").find(".accordion-group div .btn-pd").attr("aria-pressed","true"),e(this).not(".vote").text(Res.brandingDetailPageAccordionCollapseAll)))}),e("#pdc").on("click",".accordion-button .btn-pd:not(.all), .accordion-group .btn-pd:not(.all)",function(o){if(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.activeAccordionButtonInternal :: .btn-pd(!all) click",!0),0==e(this).parents(".ms-rtestate-write").length&&(!e(this).hasClass("custom")||Pd.Shared.CurrentlyInMobileView())){o.preventDefault();var t=e(this).attr("data-target");e(this).hasClass("active")?(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.activeAccordionButtonInternal :: .btn-pd(!all) click :: active",!0),e(this).removeClass("active"),e(this).attr("aria-expanded","false"),e(this).attr("aria-pressed","false"),e(this).closest(".pd-accordion-group .single").find(".accordion-body.collapse").collapse("hide"),e(this).closest(".pd-accordion-group .single").find(".accordion-body.collapse:not(.in)").removeClass("collapsing"),e(this).closest(".pd-accordion-group .single").find(".accordion-body.collapse,.accordion-group .btn-pd").attr("aria-expanded","false"),void 0!=t&&e(t).collapse("hide")):(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.activeAccordionButtonInternal :: .btn-pd(!all) click :: not active",!0),e(this).addClass("active"),e(this).attr("aria-expanded","true"),e(this).attr("aria-pressed","true"),e(this).closest(".pd-accordion-group .single").find(".accordion-body.collapse").collapse("show"),e(this).closest(".pd-accordion-group .single").find(".accordion-body.collapse:not(.in)").addClass("collapsing"),e(this).closest(".pd-accordion-group .single").find(".accordion-body.collapse,.accordion-group .btn-pd").attr("aria-expanded","true"),void 0!=t&&e(t).collapse("show")),e(this).closest(".pd-accordion-group").children(".single").on("shown.bs.collapse",function(){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.activeAccordionButtonInternal :: .btn-pd(!all) click :: .pd-accordion-group .single shown.bs.collapse",!0),e(this).parents(".pd-accordion-group").children(".single").find(".accordion-body.collapse").length==e(this).parents(".pd-accordion-group").children(".single").find(".accordion-body.collapse.in").length&&(e(this).parents(".pd-accordion-group").children(".all").find(".btn-pd.all").not(".vote").text(Res.brandingDetailPageAccordionCollapseAll),e(this).parents(".pd-accordion-group").children(".all").find(".btn-pd.all").addClass("active"),e(this).parents(".pd-accordion-group").children(".all").find(".btn-pd.all").attr("aria-expanded","true"),e(this).parents(".pd-accordion-group").children(".all").find(".btn-pd.all").attr("aria-pressed","true"))}),e(this).closest(".pd-accordion-group").children(".single").on("hidden.bs.collapse",function(){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.activeAccordionButtonInternal :: .btn-pd(!all) click :: .pd-accordion-group .single hidden.bs.collapse",!0),e(this).parents(".pd-accordion-group").children(".single").find(".accordion-body.collapse").length==e(this).parents(".pd-accordion-group").children(".single").find(".accordion-body.collapse:not(.in)").length&&(e(this).parents(".pd-accordion-group").children(".all").find(".btn-pd.all").not(".vote").text(Res.brandingDetailPageAccordionExpandAll),e(this).parents(".pd-accordion-group").children(".all").find(".btn-pd.all").removeClass("active"),e(this).parents(".pd-accordion-group").children(".all").find(".btn-pd.all").attr("aria-expanded","false"),e(this).parents(".pd-accordion-group").children(".all").find(".btn-pd.all").attr("aria-pressed","false"))})}}),e("#pdc div.search-content div.refinements .pd-search-button").on("click",function(o){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.activeAccordionButtonInternal :: div.refinements .pd-search-button :: click",!0),o.preventDefault(),e(this).closest(".pd-accordion-group .single").find(".btn-pd.custom").removeClass("active"),e(this).closest(".pd-accordion-group .single").find(".btn-pd.custom").attr("aria-expanded","false"),e(this).closest(".pd-accordion-group .single").find(".btn-pd.custom").attr("aria-pressed","false"),e(this).closest(".pd-accordion-group .single").find(".accordion-body.collapse").collapse("hide"),e(this).closest(".pd-accordion-group .single").find(".accordion-body.collapse:not(.in)").removeClass("collapsing"),e(this).closest(".pd-accordion-group .single").find(".accordion-body.collapse,.accordion-group .btn-pd").attr("aria-expanded","false"),e(this).closest(".pd-accordion-group .single").find(".accordion-body.collapse,.accordion-group .btn-pd").attr("aria-pressed","false")}),Pd.Shared.OnHashChange();var o=e(".pd-reusable-content-all-button");o.length&&(e(this).hasClass("active")?e(o).text(Res.brandingDetailPageAccordionCollapseAll):e(o).text(Res.brandingDetailPageAccordionExpandAll))},r=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.setUpAccessibleAccordionsInternal");var o=1;e(".pd-accordion-group:not(.wired), .accordion-group:not(.wired)").each(function(){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.setUpAccessibleAccordionsInternal :: processing pd-accordion-group",!0);var t=e(this),a=!1,i=[];if(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.setUpAccessibleAccordionsInternal : removing existing accessibility attributes"),e(t).find(".accordion-group .btn-pd").removeAttr("role").removeAttr("aria-pressed").removeAttr("aria-expanded"),e(t).find(".accordion-group .accordion-group div").removeAttr("role"),t.find(".accordion-group.single .btn-pd").each(function(){var t=e(this);t.hasClass("custom")&&(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.setUpAccessibleAccordionsInternal :: processing pd-accordion-group => accordion-group.single custom",!0),t.attr("tabindex","-1")),Pd.Shared.LogToConsoleIfDebug("Pd.Detail.setUpAccessibleAccordionsInternal :: processing pd-accordion-group => accordion-group.single",!0);var n="tab-panel-acc-{0}".format(o),r=t.parents(".accordion-group").find(".accordion-body");1==r.length?(a=!0,void 0!=r.attr("id")?n=r.attr("id"):r.attr("id",n),r.attr("role","tabpanel"),r.attr("aria-expanded",r.hasClass("in"))):Pd.Shared.LogToConsoleIfDebug("Pd.Detail.setUpAccessibleAccordionsInternal :: processing pd-accordion-group => accordion-group.single :: did not find accordion body",!0),a&&(t.attr("role","tab"),t.attr("aria-controls",n),t.attr("href","#"+n),t.attr("aria-expanded",t.hasClass("active")),t.attr("aria-pressed",t.hasClass("active")),i.push(n)),o++}),a){t.attr("role","tablist");var n=t.find(".accordion-group.all .btn-pd");1==n.length&&(n.attr("role","tab"),n.attr("aria-controls",i.join(" ")),n.attr("href","#all"),n.attr("aria-expanded",n.hasClass("active")),n.attr("aria-pressed",n.hasClass("active")))}t.addClass("wired")})}},s=function(){if(!Pd.Shared.PageIsInEditMode()&&(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.wireUpCustomAccordionsOnABDetailPageInternal"),e("body.detail .pd-ab-transcript")[0])){var o=e(".pd-ab-transcript").parents(".container-fluid:not(.processed)");o.addClass("pd-accordion-group processed");var t=e(".pd-ab-transcript").parents(".container-fluid");e(document).on("click",".pd-expand-collapse-button a",function(){e(this).hasClass("processed")||(e(this).addClass("processed"),t.find(".pd-accordion-group").removeClass("pd-accordion-group"))})}},d=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.personsListSmartphonePresidentInternal"),e("#pdc .persons-list-panel .president-box").hasClass("col-xs-6")&&(e("#pdc .persons-list-panel .president-box").removeClass("col-xs-6"),e("#pdc .persons-list-panel .president-box").addClass("col-xs-12")))},l=function(){if(0!=e(o).length&&!Pd.Shared.CurrentlyInMobileView()){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.scrollToContentInternal");var a=null,i=null,n=null,r=function(){if(null==n)n=(new Date).getTime();else{var e=(new Date).getTime()-n;e>300&&s(!1)}clearTimeout(a),a=setTimeout(function(){s(!0)},300)},s=function(e){n=null,clearTimeout(i),i=setTimeout(c,300)},d=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.scrollToContentInternal.setupScrollbar",!0),e(t).css("overflow","auto"),Pd.Detail.SetSpeakerListHeight(),setTimeout(function(){Pd.Detail.SetSpeakerListHeight()},3e3),e(t).mCustomScrollbar({theme:"minimal-pd",autoDraggerLength:!1,scrollbarPosition:"outside",mouseWheel:{scrollAmount:200,preventDefault:!0}})},l=function(){return 0==e(o+" li:visible").length?void setTimeout(function(){l()},3e3):(d(),void e(window).scroll(r))};l()}},c=function(a){var i=0,n=!1,r=150;(void 0==a||0==a)&&Pd.Detail.SetSpeakerListHeight();var s=function(a){var r=a.replace("votum","");if(isNaN(parseInt(r)))return void Pd.Shared.LogToConsoleIfDebug("Pd.Detail.scrollToContentHightlightAsideLinks.scrollContentAsideLinks :: seqential number not numerical",!0);if(r=parseInt(r),r!=i)if(i=r,r>=5){var s=r-3,d=e(o+" li a[href=#votum"+s+"]").parents("li"),l=e(o),c=Math.round(d.offset().top-l.offset().top+l.scrollTop());Pd.Shared.LogToConsoleIfDebug("Pd.Detail.scrollToContentHightlightAsideLinks.scrollContentAsideLinks :: scrollFigure ==> ("+d.offset().top+" - "+l.offset().top+" + "+l.scrollTop()+")",!0);var p=e(t+" .mCSB_container").height()-e(t+" .mCustomScrollBox").height(),h=Math.abs(parseInt(e(t+" .mCSB_container").css("top"),10));if(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.scrollToContentHightlightAsideLinks.scrollContentAsideLinks :: scrollFigure '"+c+"', maxScroll '"+p+"', currentScroll '"+h+"', ",!0),p>=c||h!=p){var g;g=c>p?p:c,e(t+" .mCSB_container").animate({top:"-"+g+"px"},0),Pd.Shared.LogToConsoleIfDebug("Pd.Detail.scrollToContentHightlightAsideLinks.scrollContentAsideLinks :: scrolling side bar to '-"+g+"px' (normal)",!0),PdCustomJs(t).mCustomScrollbar("update")}else Pd.Shared.LogToConsoleIfDebug("Pd.Detail.scrollToContentHightlightAsideLinks.scrollContentAsideLinks :: not scrolling as already at max ("+p+") vs "+c,!0);n=!0}else n&&(e(t+" .mCSB_container").animate({top:"0px"},0),Pd.Shared.LogToConsoleIfDebug("Pd.Detail.scrollToContentHightlightAsideLinks.scrollContentAsideLinks :: scrolling side bar to '0px' (top)",!0),PdCustomJs(t).mCustomScrollbar("update"),n=!1)},d=9999,l="";if(e(".pd-verbalix .pd-person-description").each(function(){var o=e(this).offset().top;if(o-=r,e(window).scrollTop()>=o){var t=e(window).scrollTop()-o;d>t&&(d=t,l=e(this).attr("id"))}}),9999>d){var c=l;e(o+" li").removeClass("pd-active"),e(o+" li a[href=#"+c+"]").parents("li").addClass("pd-active"),s(c),d=9999,l=""}e(o+" li.pd-active").length>0&&e(window).scrollTop()<e(".pd-verbalix .pd-person-description:first").offset().top-r&&(e(o+" li").removeClass("pd-active"),e(t+" .mCSB_container").animate({top:"0px"},0),Pd.Shared.LogToConsoleIfDebug("Pd.Detail.scrollToContentHightlightAsideLinks.scrollContentAsideLinks :: scrolling side bar to '0px' (reset)",!0),PdCustomJs(t).mCustomScrollbar("update"),n=!1)},p=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.setSpeakerListHeightInternal",!0);var o=!1,i=Math.round(e(".speakers-list-wrapper").offset().top-e(window).scrollTop())+5,n=0;Pd.Shared.ElementIsVisibleInViewport("div.back-to-top.floating")?n+=e("div.back-to-top.floating").height():Pd.Shared.ElementIsVisibleInViewport(".pd-static")&&(n+=Pd.Shared.HowMuchOfElementIsVisibleInViewport(".pd-static"),o=!0),Pd.Shared.ElementIsVisibleInViewport("#pdc > footer")&&(n+=Pd.Shared.HowMuchOfElementIsVisibleInViewport("#pdc > footer"),o=!0),o&&(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.setSpeakerListHeightInternal :: footer area visible and scrollbar resized so re-scrolling speaker list (scrollToContent)",!0),setTimeout(function(){c(!0)},500));var r=e(window).height()-i-n;a!=r&&(e(t).css("max-height",r+"px"),PdCustomJs(t).mCustomScrollbar("update")),a=r},h=function(){if(!Pd.Shared.PageIsInEditMode()){if(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.scrollToTopFixedHeaderInternal"),Pd.Shared.CurrentSiteActualViewportWidth()<768)return void Pd.Shared.LogToConsoleIfDebug("Pd.Detail.scrollToTopFixedHeaderInternal :: in mobile view, doing nothing",!0);location.hash.length>0&&(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.scrollToTopFixedHeaderInternal :: page hit with hash item already",!0),i=!0);var o,t,a=function(){var o=e(".pd-affair-detail-nav-panel:not(.noSticky)").parents(".container-fluid");o.each(function(){var o=e(this);e(window).scrollTop()>100&&!t?o.addClass("container-sticky"):o.removeClass("container-sticky"),e(window).scrollTop()>100?e("#pdc").addClass("sticky-nav"):e("#pdc").removeClass("sticky-nav")})};e.fn.scrollBottomDebate=function(){return e(document).height()-(e(".list-area.debate").offset().top+e(".list-area.debate").height())};var n,r=function(){var o,a=315,n=230,r=100,s=e(window).scrollTop(),d=Pd.Shared.CurrentSiteActualViewportWidth(),l=e("#pdc .right .pd-accordion-group .list-area.debate");if(0!=l.length){if(t?l.addClass("no-top-sticky"):l.removeClass("no-top-sticky"),o=d>=769&&1278>=d?a:768==d?n:r,Pd.Shared.LogToConsoleIfDebug("Pd.Detail.scrollToTopFixedHeaderInternal.fixedNavigation :: currentWindowScroll :: "+s+", pixelScrollToShow :: "+o,!0),s>o){if(l.hasClass("aside-sticky"))return;if(l.addClass("aside-sticky"),i){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.scrollToTopFixedHeaderInternal.fixedNavigation :: first scroll, re-navigation to hash on body load",!0);var c=location.hash;location.hash="",location.hash=c}}else{if(!l.hasClass("aside-sticky"))return;l.removeClass("aside-sticky")}if(e(window).scrollBottomDebate()<800){if(!l.hasClass("aside-sticky"))return;l.removeClass("aside-sticky")}i=!1}},s=function(){o=e(document).height()-e(window).scrollTop()-e("footer").height(),t=e(".pd-affair-detail-nav-panel:not(.noSticky)").parents(".container-fluid").hasClass("container-sticky")?300>o:400>o,a(),r()};e(window).scroll(function(){clearTimeout(n),n=setTimeout(s,150)})}},g=function(){if(!Pd.Shared.PageIsInEditMode()){e("div.ms-rtestate-field table th.td-style").removeClass("td-style"),e("div.ms-rtestate-field table.vertical-header-added").removeClass("vertical-header-added");try{Pd.Shared.LogToConsoleIfDebug("Pd.Detail.formatTablesForAccessibilityInternal"),e("div.ms-rtestate-field table:not(.no-vertical-header):not(.vertical-header-added)").each(function(){var o=e(this);return Pd.Shared.LogToConsoleIfDebug("Pd.Detail.formatTablesForAccessibilityInternal: processing table: "+Pd.Shared.GetElementAsText(o),!0),o.find("tr").not(":first").find("th").length>0?void Pd.Shared.LogToConsoleIfDebug("Pd.Detail.formatTablesForAccessibilityInternal: table has rows with th, exiting",!0):(o.find("tr").not(":first").find("td:first").each(function(){var o=e(this);o.replaceWith(e("<th/>").addClass("td-style").html(o.html()))}),void o.addClass("vertical-header-added"))})}catch(o){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.formatTablesForAccessibilityInternal :: unhandled exception :: "+o)}}},u=function(o){if(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.personListFocusOnLetterInternal"),0==o.length)return void Pd.Shared.LogToConsoleIfDebug("Pd.Detail.personListFocusOnLetterInternal: supplied $selectedAnchor not existing, exiting");var t=o.parents(".persons-list-panel").find(".letter-bar[data-letter='"+o.text()+"']");return 0==t.length?void Pd.Shared.LogToConsoleIfDebug("Pd.Detail.personListFocusOnLetterInternal: could not locate $letterbar, exiting"):void e("html,body").animate({scrollTop:t.offset().top},"slow")},f=function(o){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.autoResizeTeaserRowsInternal");var t=e(".teaser-group-auto-set-height");if(0!==t.length){if(void 0==o&&(o=!1),o){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.autoResizeTeaserRowsInternal: binding window resize timer");var a;return e(window).resize(function(){clearTimeout(a),a=setTimeout(function(){Pd.Detail.AutoResizeTeaserRows(!1)},250)}),!1}e(".teaser-group-auto-set-height .rte-row .rte-cell .teaser-auto-set-height .content.height-auto-set").removeClass("height-auto-set").removeAttr("style");var i=Pd.Shared.CurrentSiteActualViewportWidth(),n="";if(i>=1200)n="lg";else if(i>=992)n="md";else{if(!(i>=768))return void Pd.Shared.LogToConsoleIfDebug("Pd.Detail.autoResizeTeaserRowsInternal: mobile viewport, stopping");n="sm"}t.find(".rte-row").each(function(){var o=e(this),t=[],a=0;if(o.find(".rte-cell").each(function(){var o=e(this),i=!1,r=o.find(".teaser-auto-set-height .content");if(1!==r.length)return Pd.Shared.LogToConsoleIfDebug("Pd.Detail.autoResizeTeaserRowsInternal: boostrap column had no teaser to check, skipping"),!0;for(var s=o.attr("class").split(" "),d=0;d<s.length;d++){var l=s[d],c="col-{0}-".format(n);if(l.startsWith(c)){var p=l.replace(c,"");if(p=parseInt(p),!isNaN(p)){if(a+p>12){Pd.Shared.LogToConsoleIfDebug("Pd.Detail.autoResizeTeaserRowsInternal: row ==> cell ==> class: "+l+" ==> examining width ==> row too large, stopping",!0);break}a+=p,i=!0;break}Pd.Shared.LogToConsoleIfDebug("Pd.Detail.autoResizeTeaserRowsInternal: row ==> cell ==> class: "+l+" ==> examining width ==> '"+p+"' not a number?")}}i&&t.push(r)}),0===t.length)return void Pd.Shared.LogToConsoleIfDebug("Pd.Detail.autoResizeTeaserRowsInternal: have no teaser content items");var i=0;return t.forEach(function(e){e.outerHeight()>i&&(i=e.outerHeight())}),0===i?void Pd.Shared.LogToConsoleIfDebug("Pd.Detail.autoResizeTeaserRowsInternal: determined new height is zero; exiting"):(Pd.Shared.LogToConsoleIfDebug("Pd.Detail.autoResizeTeaserRowsInternal: determined new height for row to be: "+i,!0),void t.forEach(function(e){e.addClass("height-auto-set").css("min-height",i)}))})}}};return{ActiveAccordionButton:n,SetUpAccessibleAccordions:r,PersonsListSmartphonePresident:d,ScrollToContent:l,ScrollToTopFixedHeader:h,SetSpeakerListHeight:p,WireUpCustomAccordionsOnABDetailPage:s,FormatTablesForAccessibility:g,PersonListFocusOnLetter:u,AutoResizeTeaserRows:f}}(PdCustomJs),function(e){e(document).ready(function(){try{Pd.Shared.TryCatch(Pd.Detail.ActiveAccordionButton),Pd.Shared.TryCatch(Pd.Detail.SetUpAccessibleAccordions),Pd.Shared.TryCatch(Pd.Detail.PersonsListSmartphonePresident),Pd.Shared.TryCatch(Pd.Detail.ScrollToContent),Pd.Shared.TryCatch(Pd.Detail.ScrollToTopFixedHeader),Pd.Shared.TryCatch(Pd.Detail.WireUpCustomAccordionsOnABDetailPage),Pd.Shared.TryCatch(Pd.Detail.FormatTablesForAccessibility),Pd.Shared.TryCatch(function(){Pd.Detail.AutoResizeTeaserRows(!0)},Pd.Detail.AutoResizeTeaserRows)}catch(e){Pd.Shared.LogErrorToStatusDialog("Pd.Detail :: Unhandled exception on initialisation :: "+e)}})}(PdCustomJs);
Pd.Search=function($){"use strict";var intSortDropDownSearchCounter=0,intSortDropDownMaxSearchCount=20,intSortDropDownWaitTime=1e3,objSortDropDownTimer,strSharePointDropdownId="SortbySel",strSharePointDropdownTarget="#"+strSharePointDropdownId,taxonomy,currentSearchScope=null,searchScopes=[];searchScopes.push({Index:1,Name:"All",URL:"/{0}/suche"}),searchScopes.push({Index:2,Name:"Items of business",URL:"/{0}/ratsbetrieb/suche-curia-vista"}),searchScopes.push({Index:3,Name:"Official Bulletin",URL:"/{0}/ratsbetrieb/suche-Amtliches-bulletin"}),searchScopes.push({Index:4,Name:"Council members",URL:"/{0}/ratsmitglieder"});var brandingDropdownTarget="dl.pd-dropdown.dd-search-sort",brandingDropdownTargetSmartphone="dl.pd-dropdown.dd-search-sort-smartphone",searchFiltersCheckboxInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.searchFiltersCheckboxInternal"),$(".refinements .ms-displayBlock").each(function(){$(this).attr("onclick",null),$(this).on("click",function(e){e.preventDefault(),$(this).toggleClass("active")})}),$(".pa-icon.reset").on("click",function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Search.searchFiltersCheckboxInternal :: .pa-icon.reset click",!0),e.preventDefault(),$(".refinements .ms-displayBlock").removeClass("active")})},attachSearchBoxInFiltersAreaInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.attachSearchBoxInFiltersAreaInternal");var e;$(window).resize(function(){clearTimeout(e),e=setTimeout(r,150)});var r=function(){0==$("body.search .refinements .pd-live-search").length?$(window).width()<=PdTabletScreenSize&&$("body.search .pd-live-search").prependTo("body.search .refinements .pd-accordion-group .accordion-body div:first"):$(window).width()>PdTabletScreenSize&&$("body.search .refinements .pd-live-search").detach().prependTo("body.search .live-search .row")}},wireUpSortingDropdownInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireUpSortingDropdownInternal");var e=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireUpSortingDropdownInternal.copyDropdownContents");var e="",r=null;$(strSharePointDropdownTarget+" option").each(function(){e+='<li><a href="#"><span class="value">'+$(this).attr("value")+"</span></a></li>",null==r&&(r=$(this).attr("value")),void 0!=$(this).attr("selected")&&(r=$(this).attr("value"))}),$(brandingDropdownTarget+" dd ul").html(e),$(brandingDropdownTargetSmartphone+" dd ul").html(e),$(brandingDropdownTarget+" dt a span").text(r),$(brandingDropdownTargetSmartphone+" dt a span").text(r)},r=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireUpSortingDropdownInternal.prepareDropdown"),$(brandingDropdownTarget).removeClass("wired"),$(brandingDropdownTarget).find("dt a").unbind("click"),$(brandingDropdownTargetSmartphone).removeClass("wired"),$(brandingDropdownTargetSmartphone).find("dt a").unbind("click"),Pd.Utility.IsSmallAppleDevice()&&(navigator.platform&&"iPhone"==navigator.platform||!$("#ResultHeader").hasClass("hide-header"))&&(Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireUpSortingDropdownInternal.prepareDropdown :: preparing dropdown for native style"),$(brandingDropdownTargetSmartphone).addClass("native-link").addClass("wired"),$(brandingDropdownTargetSmartphone).attr("data-related-native-dd",strSharePointDropdownId),$("#search-results-area").on("change",strSharePointDropdownTarget,function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireUpSortingDropdownInternal.prepareDropdown :: native dropdown changed etc "),Pd.Search.UpdateSortDropdownFromNative(this)})),Pd.Shared.Dropdown.WireUpDropdownMenus()};return 1!=$(brandingDropdownTarget).length?void Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireUpSortingDropdownInternal :: no branding dropdown, exiting"):1!=$(brandingDropdownTargetSmartphone).length?void Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireUpSortingDropdownInternal :: no branding dropdown, exiting"):1!=$(strSharePointDropdownTarget).length?(Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireUpSortingDropdownInternal :: no sharepoint dropdown yet, will re-check"),void(intSortDropDownMaxSearchCount>intSortDropDownSearchCounter?(objSortDropDownTimer=setTimeout(wireUpSortingDropdownInternal,intSortDropDownWaitTime),intSortDropDownSearchCounter++):Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireUpSortingDropdownInternal :: no sharepoint dropdown found after re-checking, exiting"))):(e(),void r())},updateSortDropdownFromNativeInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Search.updateSortDropdownFromNativeInternal");var r=$(e).find("option:selected");$(brandingDropdownTargetSmartphone).find("dt a span").text(r.text())},dropdownItemChangedInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Search.dropdownItemChangedInternal"),$(strSharePointDropdownTarget).val(e).trigger("change")},getTaxonomyPromiseInternal=function(){var e=$.Deferred();if(lscache){var r="pd_taxonomy_"+Pd.Language.GetCurrentLanguage(),n=lscache.get(r);if(n)return e.resolve(n),e.promise()}var a=_spPageContextInfo.webAbsoluteUrl.replace(_spPageContextInfo.siteAbsoluteUrl,"")+"/_layouts/15/itsystems.pd.internet/taxonomy/gettaxonomy.aspx";return OData.read({requestUri:a,headers:{accept:"application/json;odata=verbose"}},function(r){for(var n={},a=0;a<r.results.termSets.length;a++){n[r.results.termSets[a].termSetName]={};for(var t=0;t<r.results.termSets[a].terms.length;t++)n[r.results.termSets[a].termSetName][r.results.termSets[a].terms[t].id]=r.results.termSets[a].terms[t].name}if(lscache){var o="pd_taxonomy_"+Pd.Language.GetCurrentLanguage();lscache.set(o,n,1440)}e.resolve(n)},function(r){e.reject(new Error("API request failed: "+r.message))}),e.promise()},loadTaxonomyInternal=function(){var e=Pd.Search.GetTaxonomyPromise();return e.done(function(e){taxonomy=e,Pd.Search.ClearTaxonomyCacheWhenInvalidData()}).fail(function(e){Pd.Shared.LogToConsoleIfDebug("loading taxonomy failed: "+e)}),e},getTaxonomy=function(){if(taxonomy)return taxonomy;if(Pd.Search.ClearTaxonomyCacheWhenInvalidData(),lscache){var e="pd_taxonomy_"+Pd.Language.GetCurrentLanguage(),r=lscache.get(e);r&&(taxonomy=r)}return taxonomy},clearTaxonomyCacheWhenInvalidDataInternal=function(){if(Pd.Shared.LogToConsoleIfDebug("Pd.Search.clearTaxonomyCacheWhenInvalidDataInternal"),lscache){var e="pd_taxonomy_"+Pd.Language.GetCurrentLanguage(),r=lscache.get(e);if(!r)return void Pd.Shared.LogToConsoleIfDebug("Pd.Search.clearTaxonomyCacheWhenInvalidDataInternal: no data in cache to validate");try{var n=r["News Type"]["de143c94-9e4e-4318-beb4-43048cc8bd93"];if(Pd.Shared.LogToConsoleIfDebug("Pd.Search.clearTaxonomyCacheWhenInvalidDataInternal: Checking '"+Pd.Language.GetCurrentLanguage()+"' for '"+n+"' "),void 0==n)return Pd.Shared.LogToConsoleIfDebug("Pd.Search.clearTaxonomyCacheWhenInvalidDataInternal: newsType undefined"),void lscache.remove(e);var a={};a.DE="SDA-Meldung",a.FR="DÃ©pÃªche ATS",a.IT="Messaggio ATS",a.RM="Communicaziun ATS",a.EN="SDA Message";var t=a[Pd.Language.GetCurrentLanguage()];if(n!=t)return lscache.remove(e),void Pd.Shared.LogToConsoleIfDebug("Pd.Search.clearTaxonomyCacheWhenInvalidDataInternal: bad taxonomy; '"+n+"' != '"+t+"'")}catch(o){return Pd.Shared.LogToConsoleIfDebug("Pd.Search.clearTaxonomyCacheWhenInvalidDataInternal: unexpected error: '"+o.message+"'"),void lscache.remove(e)}}},lookupRefinerCategoriesInternal=function(listData){Pd.Shared.LogToConsoleIfDebug("Pd.Search.lookupRefinerCategoriesInternal");for(var i=0;i<listData.length;i++){var resourceKey="Res.searchRefinement"+listData[i].RefinementName,resourceValue=eval(resourceKey);void 0!=resourceValue?listData[i].RefinementName=resourceValue:Pd.Shared.LogToConsoleIfDebug("Pd.Search.lookupRefinerCategoriesInternal: no resource entry found for '"+resourceKey+"'")}return listData},lookupFileTypeMappingInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Search.lookupFileTypeMappingInternal");var r={Html:"pd-checkbox-html refine-hidden",File:"pd-checkbox-file refine-hidden",Video:"pd-checkbox-video refine-hidden",Photo:"pd-checkbox-photo refine-hidden"},n=[];n.push({DisplayText:Srch.U.loadResource("rf_ResultTypeRefinerValue_AdobePDF"),Extensions:["pdf"],CssClass:r.File}),n.push({DisplayText:Srch.U.loadResource("rf_ResultTypeRefinerValue_MSExcel"),Extensions:["odc","ods","xls","xlsb","xlsm","xlsx","xltm","xltx","xlam"],CssClass:r.File}),n.push({DisplayText:Srch.U.loadResource("rf_ResultTypeRefinerValue_Image"),Extensions:["bmp","jpeg","png","tiff","gif","rle","wmf","dib","ico","wpd","odg"],CssClass:r.Photo}),n.push({DisplayText:Srch.U.loadResource("rf_ResultTypeRefinerValue_MSPowerPoint"),Extensions:["odp","ppt","pptm","pptx","potm","potx","ppam","ppsm","ppsx"],CssClass:r.File}),n.push({DisplayText:Srch.U.loadResource("rf_ResultTypeRefinerValue_MSWord"),Extensions:["docx","doc","docm","dot","nws","dotx"],CssClass:r.File}),n.push({DisplayText:Srch.U.loadResource("rf_ResultTypeRefinerValue_Webpage"),Extensions:["HTML","MHTML"],CssClass:r.Html}),n.push({DisplayText:Srch.U.loadResource("rf_ResultTypeRefinerValue_Archive"),Extensions:["zip"],CssClass:r.File});for(var a=[],t=0;t<e.length;t++){Pd.Shared.LogToConsoleIfDebug("Pd.Search.lookupFileTypeMappingInternal: 1: looking for : '"+e[t].RefinementName+"'");for(var o=0;o<n.length;o++)null!=Pd.Utility.FirstOrDefault(n[o].Extensions,function(r){return r.toLowerCase()==e[t].RefinementName.toLowerCase()})&&(null==Pd.Utility.FirstOrDefault(a,function(e){return e.RefinementName==n[o].DisplayText})?(e[t].RefinementName=n[o].DisplayText,a.push(e[t])):Pd.Shared.LogToConsoleIfDebug("Pd.Search.lookupFileTypeMappingInternal: 4: previously found extension match, skipping: '"+n[o].DisplayText+"'"))}return a},setDateTimeRefinerRangeTextsInternal=function(e){return void 0!=Res.searchRefinementDateRangeOlder&&(e[0].RefinementName=Res.searchRefinementDateRangeOlder),void 0!=Res.searchRefinementDateRange3Years&&(e[1].RefinementName=Res.searchRefinementDateRange3Years),void 0!=Res.searchRefinementDateRangeYear&&(e[2].RefinementName=Res.searchRefinementDateRangeYear),void 0!=Res.searchRefinementDateRangeMonth&&(e[3].RefinementName=Res.searchRefinementDateRangeMonth),void 0!=Res.searchRefinementDateRangeWeek&&(e[4].RefinementName=Res.searchRefinementDateRangeWeek),e=[],e.reverse()},setRefinerMonthTextsInternal=function(e){var r=Pd.Language.GetCurrentLanguage();"RM"==r&&(r="DE"),e.reverse();for(var n=0;n<e.length;n++){var a=new Date("2015-"+e[n].RefinementName),t=a.localeFormat("MMMM");"Invalid Date"!=t&&(e[n].RefinementName=t)}return e},setRefinerValuesFromTermstoreInternal=function(e,r){Pd.Shared.LogToConsoleIfDebug("Pd.Search.setRefinerValuesFromTermstoreInternal");for(var n=0;n<e.length;n++){var a=e[n].RefinementEntityId.replace("#0","");try{var t=Pd.Search.GetTaxonomy()[r][a]}catch(o){"Pd.Search.setRefinerValuesFromTermstoreInternal: readout of termstore '"+r+"\\"+a+"' failed with the following error: "+o.message;Pd.Shared.LogToConsoleIfDebug("Pd.Search.setRefinerValuesFromTermstoreInternal: readout of termstore '"+r+"\\"+a+"' failed with the following error: "+o.message)}void 0!=t&&""!=t&&(e[n].RefinementName=t)}return e},updatePdSortDropdownInternal=function(){var e=$(strSharePointDropdownTarget+" :selected").val();$(".dd-search-sort dt span").html(e)},setCouncillorActiveFlagTextsInternal=function(listData){Pd.Shared.LogToConsoleIfDebug("Pd.Search.setCouncillorActiveFlagTextsInternal");for(var i=0;i<listData.length;i++){var resourceKey="Res.searchRefinementCouncillorActive"+listData[i].RefinementName,resourceValue;try{resourceValue=eval(resourceKey)}catch(err){Pd.Shared.LogToConsoleIfDebug("Pd.Search.setCouncillorActiveFlagTextsInternal: resource error for '"+resourceKey+"', '"+err.message+"'"),resourceValue=null}null!=resourceValue?listData[i].RefinementName=resourceValue:Pd.Shared.LogToConsoleIfDebug("Pd.Search.setCouncillorActiveFlagTextsInternal: no resource entry found for '"+resourceKey+"'")}return listData},setBusinessStateFlagTextsInternal=function(listData){Pd.Shared.LogToConsoleIfDebug("Pd.Search.setBusinessStateFlagInternal");for(var i=0;i<listData.length;i++){var resourceKey="Res.searchRefinementBusinessState"+listData[i].RefinementName,resourceValue=eval(resourceKey);void 0!=resourceValue?listData[i].RefinementName=resourceValue:Pd.Shared.LogToConsoleIfDebug("Pd.Search.setBusinessStateFlagInternal: no resource entry found for '"+resourceKey+"'")}return listData},updatePdResultCountSpanInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Search.updatePdResultCountSpanInternal");var r=e;try{}catch(n){Pd.Shared.LogToConsoleIfDebug("Pd.Search.updatePdResultCountSpanInternal: formating of the result count failed with the following error: "+n.message)}0==e?$(".result-count").text(""):$(".result-count").text("("+r+")").attr("data-row-count",e)},addRowOnSearchPageContainersInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.addRowOnSearchPageContainersInternal");var e=$("body.search").find(".search-item-imageAlbum");$(e).parent().addClass("row")},linkAdvancedSearchInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.linkAdvancedSearchInternal");var e=$(".advanced-search");if(e.length>0){var r=window.location.pathname,n=Res.advancedSearchSourcePages.split("|"),a=Res.advancedSearchTargetPageUrl.split("|");if(n.length!=a.length)Pd.Shared.LogToConsoleIfDebug("Pd.Search.linkAdvancedSearchInternal: the page count and the url count do not match!");else for(var t=0;t<n.length;t++)if(r.toLowerCase().indexOf(n[t].toLowerCase())>=0){e.attr("href",a[t]),e.removeClass("hidden");break}}},getSearchBoxPlaceholderInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.getSearchBoxPlaceholderInternal");var e=window.location.pathname;return e.toLowerCase().indexOf("/suche-curia-vista")>=0?Res.brandingSearchLiveBoxScope1:e.toLowerCase().indexOf("/suche-amtliches-bulletin")>=0?Res.brandingSearchLiveBoxScope2:e.toLowerCase().indexOf("/suche")>=0?Res.brandingSearchLiveBoxScope0:e.toLowerCase().indexOf("/ratsmitglieder")>=0?Res.brandingSearchLiveBoxScope3:""},convertSearchPageRefinementUrlToKqlFormatInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.convertSearchPageRefinementUrlToKqlFormat");var e="";try{var r=location.hash;if(r.length>0){if(r=r.substr(1),r.indexOf("Default=")>-1){var n={},a=decodeURIComponent(r.substr(8)),t=JSON.parse(a);if(t.k.length>0&&(e=t.k+" "+e),void 0==t.r)return e;PdCustomJs.each(t.r,function(e,r){if(void 0!==r.n&&void 0!==r.t){var a=r.n,t=r.t+"";t.indexOf("ÇÇ")>=0&&(t=t.substr(1,t.length-2),t=t.substr(2),t=Pd.Utility.Hex2A(t)),t.indexOf("string(")>=0&&(t=t.substr(9,t.length-11)),n[a]=decodeURIComponent(escape(t))}});for(var o in n)e+=o+':"'+n[o]+'" ';return e}if(r.indexOf("k=")>-1)return e=decodeURIComponent(r.substr(2))}}catch(i){Pd.Shared.LogToConsoleIfDebug("Unhandled error in Pd.Search.convertSearchPageRefinementUrlToKqlFormat: "+i.message)}return e},prepareSessionNamesInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Search.prepareSessionNamesInternal");for(var r=0;r<e.length;r++){var n=e[r].RefinementName.indexOf(":");n>=0&&(e[r].RefinementName=e[r].RefinementName.substring(n+1))}return e},hideSearchBarOnEParlSearchPageInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.hideSearchBarOnEParlSearchPageInternal");var e=window.location.pathname;if(e.toLowerCase().indexOf(Res.urlEParlSearchBoxHideUrl)>=0){var r=$(".container-fluid.live-search.noindex");r.addClass("hidden")}},customHitHilightingInternal=function(e,r){Pd.Shared.LogToConsoleIfDebug("Pd.Search.customHitHilightingInternal");try{e=jQuery("<div>").html(e).text(),e=e.replace(/"/g,'"|');for(var n=e.split("|"),a=r.length,t=0;2>t;t++){1==t&&(r=extractCustomHitHighlighting(r,a));for(var o=0;o<n.length;o++)if(n[o].length>0)if(n[o].indexOf('"')>0){var i=n[o].replace(/"/g,"").trim(),l=new RegExp("(\\b"+i+")","gi"),s='<strong class="ms-srch-item-highlightedText">$1</strong>',d=r.search(l);0==t&&d>-1&&(a=Math.min(a,d)),1==t&&(r=r.replace(l,s))}else if('"'!=n[o]){var c=["OR","AND"],h=n[o].split(" ");h=h.filter(function(e){return c.indexOf(e)<0});for(var u=0;u<h.length;u++){var i=h[u].trim();if(i.length>0&&"*"!=i){i=i.indexOf("*")>-1?i.replace("*",".*?"):i.replace("*","");var l=new RegExp("(\\b"+i+"\\b)","gi"),s='<strong class="ms-srch-item-highlightedText">$1</strong>',d=r.search(l);0==t&&d>-1&&(a=Math.min(a,d)),1==t&&(r=r.replace(l,s))}}}}}catch(g){Pd.Shared.LogToConsoleIfDebug("Unhandled error in Pd.Search.customHitHilightingInternal: "+g.message)}return r},extractCustomHitHighlighting=function(e,r){r==e.length&&(r=0);var n=500,a=0;return r>150?(a=r-50+n>e.length?r-150:r-50,e=e.substring(a,a+n)):e=e.substring(0,n),e},applyMiscSearchPageChangesInternal=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.Search.applyMiscSearchPageChangesInternal"),$(".dd-search-filters").closest(".ms-ref-refiner").find(".ms-ref-refinername:not(.pd-no-border)").each(function(){$(this).addClass("pd-no-border")}),$(".ms-ref-refiner #Container label a").attr("tabindex","-1"),$(strSharePointDropdownTarget).attr("tabindex","-1"))},parseManagedPropertyValueInternal=function(e){if(Pd.Shared.LogToConsoleIfDebug("Pd.Search.parseManagedPropertyValueInternal"),"string"!=typeof e)return Pd.Shared.LogToConsoleIfDebug("ERROR: unsupported type!"),e;var r=[];try{for(var n=e.split(";"),a=0;a<n.length;a++){for(var t=n[a].split("|"),o={},i=0;i<t.length;i++)o["O"+i]=t[i];r.push(o)}}catch(l){Pd.Shared.LogToConsoleIfDebug(l.stack)}return r},wireupSearchOnSmartphoneDevicesInternal=function(){if($("body").hasClass("search")){Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireupSearchOnSmartphoneDevicesInternal");var e=function(e){try{Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireupSearchOnSmartphoneDevicesInternal.mobileSearchBoxKeystrokeHandlerInternal",!0);var r=e.keyCode||e.which;13==r&&(Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireupSearchOnSmartphoneDevicesInternal.mobileSearchBoxKeystrokeHandlerInternal :: enter pressed"),e.preventDefault(),n.trigger("click"),n.focus())}catch(a){Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireupSearchOnSmartphoneDevicesInternal.mobileSearchBoxKeystrokeHandlerInternal :: unhandled exception :: "+a.message)}},r=$(".smartphone-live-search-input"),n=$(".smartphone-live-search-button"),a=$(".live-search .pd-live-search #SearchBox input"),t=$(".live-search .pd-live-search #SearchBox a");n.on("click",function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireupSearchOnSmartphoneDevicesInternal :: mobileSearchButton click",!0),Pd.Search.TriggerScrollAnimation(),e.preventDefault();var n=r.val();a.val(n),t.click()}),r.focus(function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireupSearchOnSmartphoneDevicesInternal :: mobileSearchInput focus",!0),$(this).parent().addClass("active"),$(document).bind("keypress",e)}).blur(function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.wireupSearchOnSmartphoneDevicesInternal :: mobileSearchInput blur",!0),$(this).parent().removeClass("active"),$(document).unbind("keypress",e)}),r.attr("placeholder",a.attr("title")),a.val()!=r.attr("placeholder")&&r.val(a.val())}},triggerScrollAnimationInternal=function(e,r){if(Pd.Shared.LogToConsoleIfDebug("Pd.Search.triggerScrollAnimationInternal"),0!=$("body.search").length){var n=function(){var e=$("#search-results-area");$("html,body").animate({scrollTop:e.position().top},"slow")},a=Pd.Shared.CurrentSiteActualViewportWidth();if(992>=a){if(void 0==e&&(e=0),void 0==r&&(r=0),10>r){var t=$(document).height();e!=t&&n(),setTimeout(function(){Pd.Search.TriggerScrollAnimation(t,r+1)},100)}}else n()}},generateRefinerIdInternal=function(refinerName,currentFilter){Pd.Shared.LogToConsoleIfDebug("Pd.Search.generateRefinerIdInternal",!0);try{var refinerCollection=eval("currentFilter.Refiners."+refinerName);if(void 0!=refinerCollection){var id=refinerCollection[0];return id=id.replace(/"/g,""),id=id.substring(2),id=refinerName+"_"+id}return refinerName+"_ALL"}catch(err){Pd.Shared.LogToConsoleIfDebug("Pd.Search.generateRefinerIdInternal : unhandled exception generating ID : "+err)}return""},showMoreRefinersInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Search.showMoreRefinersInternal");var r=$(e).parents("#Container").find(".pd-dropdown ul li.refine-hidden:hidden"),n=r.first().find("input");return 0==r.length||0==n.length?void Pd.Shared.LogToConsoleIfDebug("Pd.Search.showMoreRefinersInternal :: no hidden refiners"):(r.show(),$.fn.focusbox&&$.fn.focusbox.FocusBoxIsVisible()&&(Pd.Shared.LogToConsoleIfDebug("Pd.Search.showMoreRefinersInternal: re-focussing on first hidden refiner"),$.fn.focusbox.FocusOnElement(n[0])),void $(e).hide())},prepareSearchScopeNavItemsInternal=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.prepareSearchScopeNavItemsInternal");var e="ul.ms-srchnav-list li a",r=window.location.pathname;$(e).each(function(){var e=$(this),n=e.attr("onclick");if(void 0!=n){var a=n.replace(/^.*?\\(.*?)".*$/m,"\\$1").trim().replace(/\\u002f/g,"/");e.attr("targetURL",a),e.attr("onclick",""),r.toLowerCase().indexOf(a.toLowerCase())>=0&&(e.addClass("active"),Pd.Search.SetCurrentSearchScope(a.toLowerCase()),e.parent().prepend('<span class="invisible-all">{0}</span>'.format(Res.brandingNavigationCurrentOption)))}var t=e.parents("h2");t.replaceWith($("<h3/>").html(t.html()))}),$(e).on("click",function(){var e="",r=$("#SearchBox input").attr("title"),n=$("#SearchBox input").val();r!==n&&(e="#k="+encodeURIComponent(n)),window.location.href=$(this).attr("targetURL")+e})},getSearchFilterDataDropdownInternal=function(e){var r=["PdMemberCouncilLastNameStart"],n=[Pd.Utility.ManagedProperties.PdCategory,Pd.Utility.ManagedProperties.PdDoctypeDe,Pd.Utility.ManagedProperties.PdDoctypeFr,Pd.Utility.ManagedProperties.PdDoctypeIt,Pd.Utility.ManagedProperties.PdDoctypeRm,Pd.Utility.ManagedProperties.PdDoctypeEn,Pd.Utility.ManagedProperties.FileType,Pd.Utility.ManagedProperties.PdAffairTypeName,Pd.Utility.ManagedProperties.PdBusinessCouncilorFullName,Pd.Utility.ManagedProperties.PdBusinessDepositYear,Pd.Utility.ManagedProperties.PdBusinessStateDone,Pd.Utility.ManagedProperties.PdBusinessTagNames,Pd.Utility.ManagedProperties.PdBusinessResponsibleDepartmentShortNames,Pd.Utility.ManagedProperties.PdSubjectSessionYear,Pd.Utility.ManagedProperties.PdSubjectSessionName,Pd.Utility.ManagedProperties.PdSubjectCouncilName,Pd.Utility.ManagedProperties.PdSubjectMeetingName,Pd.Utility.ManagedProperties.PdSubjectSpeakerFullNames,Pd.Utility.ManagedProperties.PdAffairTypeName,Pd.Utility.ManagedProperties.PdMemberCouncilLastNameStart,Pd.Utility.ManagedProperties.PdMemberCouncilActive,Pd.Utility.ManagedProperties.PdMemberCouncilCouncilName,Pd.Utility.ManagedProperties.PdMemberCouncilCurrentParlGroupName,Pd.Utility.ManagedProperties.PdMemberCouncilHistoricParlGroupName,Pd.Utility.ManagedProperties.PdMemberCouncilCantonName,Pd.Utility.ManagedProperties.PdMemberCouncilCommitteeAbbreviation],a=function(e,r){return isNaN(e.RefinementName)||isNaN(r.RefinementName)?e.RefinementName.localeCompare(r.RefinementName):+e.RefinementName-+r.RefinementName},t=function(e,r,n,a,t){var o={RefinementName:e,RefinementCount:r,Refiners:n,Method:a,Selected:t};T.push(o)},o=e.ListData,i=e.RefinementControl.propertyName,l=e.ClientControl.getCurrentRefinementCategory(i),s=!Srch.U.n(l)&&l.get_tokenCount()>0;if($isNull(e.RefinementControl)||$isNull(e.ClientControl))return null;var d=null!=Pd.Utility.FirstOrDefault(r,function(e){return e==i});if(d&&!Pd.Shared.CurrentlyInMobileView())return Pd.Shared.LogToConsoleIfDebug("Pd.Search.getSearchFilterDataDropdownInternal :: skipping refiner '"+i+"' as should only be shown on mobile",!0),null;if(o=Pd.Search.ManipulateSearchFilterData(o,i),$isNull(o)||$isEmptyArray(o))return null;var c=["PdBusinessCouncilorFullName","PdSubjectSpeakerFullNames","PdMemberCouncilHistoricParlGroupName","PdMemberCouncilCantonName","PdCommission","PdMMAuthor","FileType"];null!=Pd.Utility.FirstOrDefault(c,function(e){return i.indexOf(e)>-1})&&(o=o.sort(a));for(var h=Srch.Refinement.getExpanded(i),u="true"==h?"ms-ref-uparrow":"ms-ref-downarrow",g=Srch.Refinement.getRefinementTitle(e.RefinementControl),p=void 0,f=!1,m="",S="Pd.Search.TriggerScrollAnimation();",P="",C="",I="",v=new Object,D=new Array,R=new Array,T=new Array,b=0;b<o.length;b++){var y=o[b];$isNull(y)||(y.RefinementTokens=[o[b].RefinementToken],y.RefinementTokenWrappedValues=[Srch.RefinementUtil.stringValueToEqualsToken(o[b].RefinementValue)],e.ClientControl.hasAllRefinementFilters(y.RefinerName,y.RefinementTokens)||e.ClientControl.hasAllRefinementFilters(y.RefinerName,y.RefinementTokenWrappedValues)?R.push(y):D.push(y))}if(v[i]=null,t(Res.searchRefinmentAll,null,v,"updateRefinersJSON",!1),R.length>0||s)for(var b=0;b<R.length;b++){var y=R[b];if(!$isNull(y)){var w=new Object;w[y.RefinerName]=y.RefinementTokens,t(y.RefinementName,y.RefinementCount,w,"removeRefinementFiltersJSON",!0)}}if(D.length>0)for(var b=0;b<D.length;b++){var y=D[b];if(!$isNull(y)){var w=new Object;w[y.RefinerName]=y.RefinementTokens,t(y.RefinementName,y.RefinementCount,w,"updateRefinersJSON",!1)}}for(var b=0;b<T.length;b++)1==T[b].Selected&&(p=T[b]);if(2==T.length&&void 0==p)return null;void 0==p&&(T[0].Selected=!0,p=T[0]);try{Pd.Utility.IsSmallAppleDevice()&&(Pd.Shared.LogToConsoleIfDebug("Pd.Search.getSearchFilterDataDropdownInternal :: '"+i+"' set as having special iPhone dropdown"),f=null!=Pd.Utility.FirstOrDefault(n,function(e){return e==i}))}catch(x){Pd.Shared.LogToConsoleIfDebug("Pd.Search.getSearchFilterDataDropdownInternal :: exception checking for mobile apple device, skipping refiner '"+i+"': "+x)}if(f&&(m=" wired native-link"),f&&(P=i+"_native"),C=Pd.Search.GenerateRefinerId(i,p),f&&(I="refiner-native",navigator.platform&&"iPhone"!=navigator.platform&&(I+=" emulator",Pd.Shared.IsDebugMode()&&(I+=" debug"))),$isNull(T)||$isEmptyArray(T))return null;var N={};return N.refinerCatTitle=g,N.iconClass=u,N.dropdownClass=m,N.dataRelatedNativeDd=P,N.selectedId=C,N.selectedFilter=p,N.allFilters=T,N.scrollToTop=S,N.specialDropdownRequired=f,N.nativeDropdownClass=I,N.managedProperty=i,N.clientControlId=e.ClientControl.get_id(),N.refinementControlContainerId=e.RefinementControl.containerId,N},getSearchFilterDataGeneralInternal=function(e){var r=function(e,r){return isNaN(e.RefinementName)||isNaN(r.RefinementName)?e.RefinementName.localeCompare(r.RefinementName):+e.RefinementName-+r.RefinementName},n=function(e,r,n,a,t){var o={RefinementName:e,RefinementCount:r,Refiners:n,Method:a,Checked:t};u.push(o)},a=e.ListData,t=e.RefinementControl.propertyName,o=10,i="Pd.Search.TriggerScrollAnimation();",l=e.ClientControl.getCurrentRefinementCategory(t),s=!Srch.U.n(l)&&l.get_tokenCount()>0,d=(Srch.Refinement.getExpanded(t),Srch.Refinement.getRefinementTitle(e.RefinementControl)),c=new Array,h=new Array,u=new Array,g=new Object;if($isNull(e.RefinementControl)||$isNull(e.ClientControl))return null;if(a=Pd.Search.ManipulateSearchFilterData(a,t),$isNull(a)||$isEmptyArray(a))return null;"PdAffairTypeName"==t&&(o=20);for(var p=0;p<a.length;p++){var f=a[p];$isNull(f)||(f.RefinementTokens=[a[p].RefinementToken],f.RefinementTokenWrappedValues=[Srch.RefinementUtil.stringValueToEqualsToken(a[p].RefinementValue)],e.ClientControl.hasAllRefinementFilters(f.RefinerName,f.RefinementTokens)||e.ClientControl.hasAllRefinementFilters(f.RefinerName,f.RefinementTokenWrappedValues)?h.push(f):c.push(f))}if(g[t]=null,h.length>0||s)for(var p=0;p<h.length;p++){var f=h[p];if(!$isNull(f)){var m=new Object;m[f.RefinerName]=f.RefinementTokens,n(f.RefinementName,f.RefinementCount,m,"removeRefinementFiltersJSON",!0)}}if(c.length>0)for(var p=0;p<c.length;p++){var f=c[p];if(!$isNull(f)){var m=new Object;m[f.RefinerName]=f.RefinementTokens,n(f.RefinementName,f.RefinementCount,m,"updateRefinersJSON",!1)}}if("PdCategory"!=t&&"LastModifiedTime"!=t&&"PdSortDateTime"!=t&&"PdAffairTypeName"!=t&&-1==t.indexOf("PdDoctype")&&(u=u.sort(r)),$isNull(u)||$isEmptyArray(u))return null;o=Pd.Shared.CurrentlyInMobileView()?100:o;var S={};return S.refinerCatTitle=d,S.allFilters=u,S.scrollToTop=i,S.managedProperty=t,S.noOfVisibleRefinements=o,S.clientControlId=e.ClientControl.get_id(),S.refinementControlContainerId=e.RefinementControl.containerId,S},manipulateSearchFilterDataInternal=function(e,r){if(Pd.Utility.StringIsNullOrEmpty(r))return e;if(!Array.isArray(e)||0===e.length)return e;switch(r){case"PdCategory":e=Pd.Search.LookupRefinerCategories(e);break;case"LastModifiedTime":case"PdSortDateTime":e=Pd.Search.SetDateTimeRefinerRangeTexts(e);break;case"PdMemberCouncilActive":e=Pd.Search.SetCouncillorActiveFlagTexts(e);break;case"PdBusinessStateDone":e=Pd.Search.SetBusinessStateFlagTexts(e);break;case"owstaxIdMediaCategory":e=Pd.Search.SetRefinerValuesFromTermstore(e,Res.taxonomyNameAlbumCategory);break;case"owstaxIdSubCategory":e=Pd.Search.SetRefinerValuesFromTermstore(e,Res.taxonomyNameMediaSubCategory);break;case"owstaxIdAgendaCategory":e=Pd.Search.SetRefinerValuesFromTermstore(e,Res.taxonomyNameAgendaCategory);break;case"owstaxIdNewsType":e=Pd.Search.SetRefinerValuesFromTermstore(e,Res.taxonomyNameNewsType);break;case"PdMonth":e=Pd.Search.SetRefinerMonthTexts(e);break;case"PdSubjectSessionName":case"PdBusinessDepositSessionName":e=Pd.Search.PrepareSessionNames(e);break;case"FileType":e=Pd.Search.LookupFileTypeMapping(e)}return e},extractPublishingImageSrcInternal=function(e){var r="";if(!Pd.Utility.StringIsNullOrEmpty(e,!0)){var n=/<img.*?src=['"](.*?)['"]/,a=n.exec(e);2==a.length&&(r=a[1])}return r},setCurrentSearchScopeInternal=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Search.setCurrentSearchScopeInternal: '"+e+"'"),currentSearchScope=Pd.Utility.FirstOrDefault(searchScopes,function(r){return r.URL.format(Pd.Language.GetCurrentLanguage()).toLowerCase()==e}),null==currentSearchScope&&Pd.Shared.LogToConsoleIfDebug("Pd.Search.setCurrentSearchScopeInternal: error, no matching scope found for '"+e+"'")},getCurrentSearchScopeInternal=function(){return currentSearchScope};return{SearchFiltersCheckbox:searchFiltersCheckboxInternal,AttachSearchBoxInFiltersArea:attachSearchBoxInFiltersAreaInternal,WireUpSortingDropdown:wireUpSortingDropdownInternal,DropdownItemChanged:dropdownItemChangedInternal,GetTaxonomyPromise:getTaxonomyPromiseInternal,LoadTaxonomy:loadTaxonomyInternal,GetTaxonomy:getTaxonomy,ClearTaxonomyCacheWhenInvalidData:clearTaxonomyCacheWhenInvalidDataInternal,LookupRefinerCategories:lookupRefinerCategoriesInternal,LookupFileTypeMapping:lookupFileTypeMappingInternal,SetDateTimeRefinerRangeTexts:setDateTimeRefinerRangeTextsInternal,SetRefinerMonthTexts:setRefinerMonthTextsInternal,SetRefinerValuesFromTermstore:setRefinerValuesFromTermstoreInternal,UpdatePdSortDropdown:updatePdSortDropdownInternal,SetCouncillorActiveFlagTexts:setCouncillorActiveFlagTextsInternal,SetBusinessStateFlagTexts:setBusinessStateFlagTextsInternal,UpdatePdResultCountSpan:updatePdResultCountSpanInternal,AddRowOnSearchPageContainers:addRowOnSearchPageContainersInternal,LinkAdvancedSearch:linkAdvancedSearchInternal,GetSearchBoxPlaceholder:getSearchBoxPlaceholderInternal,ConvertSearchPageRefinementUrlToKqlFormat:convertSearchPageRefinementUrlToKqlFormatInternal,PrepareSessionNames:prepareSessionNamesInternal,HideSearchBarOnEParlSearchPage:hideSearchBarOnEParlSearchPageInternal,CustomHitHilighting:customHitHilightingInternal,ApplyMiscSearchPageChanges:applyMiscSearchPageChangesInternal,ParseManagedPropertyValue:parseManagedPropertyValueInternal,WireupSearchOnSmartphoneDevices:wireupSearchOnSmartphoneDevicesInternal,TriggerScrollAnimation:triggerScrollAnimationInternal,GenerateRefinerId:generateRefinerIdInternal,ShowMoreRefiners:showMoreRefinersInternal,PrepareSearchScopeNavItems:prepareSearchScopeNavItemsInternal,GetSearchFilterDataDropdown:getSearchFilterDataDropdownInternal,GetSearchFilterDataGeneral:getSearchFilterDataGeneralInternal,ManipulateSearchFilterData:manipulateSearchFilterDataInternal,ExtractPublishingImageSrc:extractPublishingImageSrcInternal,SetCurrentSearchScope:setCurrentSearchScopeInternal,GetCurrentSearchScope:getCurrentSearchScopeInternal,UpdateSortDropdownFromNative:updateSortDropdownFromNativeInternal
}}(PdCustomJs),function(e){e(document).ready(function(){try{Pd.Search.SearchFiltersCheckbox(),Pd.Search.AttachSearchBoxInFiltersArea(),Pd.Search.WireUpSortingDropdown(),Pd.Search.PrepareSearchScopeNavItems(),Pd.Search.AddRowOnSearchPageContainers(),Pd.Search.LinkAdvancedSearch(),Pd.Search.HideSearchBarOnEParlSearchPage(),Pd.Search.ApplyMiscSearchPageChanges(),Pd.Search.WireupSearchOnSmartphoneDevices()}catch(e){Pd.Shared.LogErrorToStatusDialog("Pd.Search :: Unhandled exception on initialisation :: "+e)}})}(PdCustomJs);
Pd.Search.SearchSuggestions=function(e){"use strict";var t=!1,n=!0,r=200,a=3,s="/SearchSuggestions/?q={0}&s={1}&l={2}",o="SS_{0}",i=60,c='<li><a href="#!">{0}</a></li>',l='<li><a href="#!" data-total-occurrences="{0}" data-entity-source="{1}" data-text-source="{2}" data-entity-id="{3}" data-entity-sub-id="{4}">{5}</a></li>',S=null,d=null,h=[],u=null,g=null,P=null,f=!1,I=!0,v=0,C=0,m=[];m.push({ParentSelector:"#pdc div.live-search .pd-live-search",ChildSelector:"div.ms-floatLeft div.ms-srch-sbLarge > input"}),m.push({ParentSelector:"#pdc div.search-content div.refinements .smartphone-live-search",ChildSelector:".smartphone-live-search-input"}),m.push({ParentSelector:"#pdc div.splash .live-search-splash",ChildSelector:"input"});var p={ESC:27,DOWN:40,LEFT:37,RIGHT:39,UP:38,ENTER:13,END:35,HOME:36,TAB:9},L=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.initialiseInternal",!1);try{t=Pd.Config.SearchSuggestions.SystemEnabled===!0?!0:!1,n=Pd.Config.SearchSuggestions.BackgroundProcessing===!0?!0:!1}catch(r){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.initialiseInternal: error accessing config: "+r)}return t?(d=Pd.Language.GetCurrentLanguage(),e.each(m,function(t,n){var r=e(n.ParentSelector).find(n.ChildSelector);1===r.length&&r.on("keydown",Pd.Search.SearchSuggestions.SearchInputKeyStrokeHandler);var a=e(n.ParentSelector).find("button.search-box-input-reset");a.on("click",function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.initialiseInternal: reset button clicked",!0),Pd.Search.SearchSuggestions.HideResultList()})}),e(".search-suggestions-list").on("click","li a",Pd.Search.SearchSuggestions.HandleItemClick),f="1"===Pd.Utility.GetUrlParameter("dbgits")?!0:!1,void(I="0"===Pd.Utility.GetUrlParameter("cache")?!1:!0)):void Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.initialiseInternal: system not enabled",!1)},b=function(e){try{Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.searchInputKeyStrokeHandlerInternal",!0);var t=e.keyCode||e.which;if(t>=112&&123>=t||e.ctrlKey||e.altKey||e.shiftKey)return void Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.searchInputKeyStrokeHandlerInternal :: key is F1-F12 or ctrl/alt/shift, returning",!0);switch(t){case p.LEFT:case p.RIGHT:case p.END:case p.HOME:return}switch(t){case p.ESC:case p.DOWN:case p.UP:case p.ENTER:case p.TAB:return u=e.target,void Pd.Search.SearchSuggestions.HandleSpecialKeyStroke(t,e)}clearTimeout(S),S=setTimeout(function(){u=e.target,Pd.Search.SearchSuggestions.HandleStandardKeyStroke()},r)}catch(n){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.searchInputKeyStrokeHandlerInternal :: unhandled exception :: "+n.message)}},T=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.handleStandardKeyStrokeInternal",!0);var t=e(u),n=t.val(),r=Pd.Search.GetCurrentSearchScope();Pd.Search.SearchSuggestions.SearchParametersAreValid(n,r)&&Pd.Search.SearchSuggestions.CreateXhrRequest(n,r.Index)},D=function(e,t){return e.length<a?(Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.handleStandardKeyStrokeInternal: search text too short",!0),Pd.Search.SearchSuggestions.HideResultList(),!1):null===t?(Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.handleStandardKeyStrokeInternal: error! search scope null",!1),Pd.Search.SearchSuggestions.HideResultList(),!1):3===t.Index?(Pd.Search.SearchSuggestions.HideResultList(),!1):e.length<=7&&!isNaN(e)&&(Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.handleStandardKeyStrokeInternal: !isNaN, processing further",!0),/^[0-9]{2}\.[0-9]{0,4}/.test(e))?(Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.handleStandardKeyStrokeInternal: searchText looks like a business short number, skipping: '"+e+"'",!1),!1):!0},y=function(t,r){var a=s.format(encodeURIComponent(t),r,d);f&&(a+="&dbgits=1",I||(a+="&cache=0")),I||(a+="&toplevelcache=0");var c=Pd.Utility.lscacheGet(o.format(a));if(null!==c&&!n)return Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.createXhrRequestInternal :: result already in cache",!1),Pd.Search.SearchSuggestions.OnXhrRequestDone(c),void Pd.Search.SearchSuggestions.OnXhrRequestAlways();var l=e.ajax(a).done(function(e,t,r){var s=!0;void 0!==r&&null!==r&&(r.xhrRequestNumber>C?C=r.xhrRequestNumber:s=!1),s&&(n||Pd.Search.SearchSuggestions.OnXhrRequestDone(e)),e.results.length>0&&Pd.Utility.lscacheSet(o.format(a),e,i)}).fail(function(e){void 0!==e.StatusText&&"abort"!==e.StatusText&&Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.createXhrRequestInternal :: failure with XHR request :: '"+e+"'")}).always(function(){Pd.Search.SearchSuggestions.OnXhrRequestAlways()});l.requestUrl=a,v++,l.xhrRequestNumber=v,n||(h.length>1||1==h.length&&1!=h[0].readyState)&&(e.each(h,function(e,t){t.abort()}),h=[]),h.push(l)},R=function(t){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.onXhrRequestDoneInternal",!0);var n=Pd.Search.SearchSuggestions.GetResultListElement();n.children().remove(),e.each(t.results,function(t,r){f?n.append(e(l.format(r.TotalOccurrences,r.SourceInformation.EntitySource,r.SourceInformation.TextSource,r.SourceInformation.EntityIdentifier,r.SourceInformation.EntitySubIdentifier,r.r))):n.append(e(c.format(r.r)))}),Pd.Search.SearchSuggestions.ShowResultList()},k=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.onXhrRequestAlwaysInternal",!0)},E=function(){if(Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.getInputBoxEventInitiatorParentInternal",!0),null!==g)return g;var t=e(u),n=null;return e.each(m,function(e,r){1===t.parents(r.ParentSelector).length&&(n=t.parents(r.ParentSelector))}),g=n,null===g&&Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.getInputBoxEventInitiatorParentInternal: exception, could not find parent"),g},H=function(){if(Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.getResultListElementInternal",!0),null!==P)return P;var e=Pd.Search.SearchSuggestions.GetInputBoxEventInitiatorParent();if(null!==e){var t=e.find(".search-suggestions-list");null!==t?P=t:Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.getResultListElementInternal: exception, could not find search suggestions list")}return P},x=function(e,t){switch(Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.handleSpecialKeyStrokeInternal",!1),e){case p.ESC:t.preventDefault(),Pd.Search.SearchSuggestions.HideResultList();break;case p.DOWN:t.preventDefault(),Pd.Search.SearchSuggestions.ScrollDownResultList();break;case p.UP:t.preventDefault(),Pd.Search.SearchSuggestions.ScrollUpResultList();break;case p.ENTER:Pd.Search.SearchSuggestions.HandleEnterKeyPress(t);break;case p.TAB:Pd.Search.SearchSuggestions.HandleTabKeyPress(t)}},K=function(){var t=Pd.Search.SearchSuggestions.GetInputBoxEventInitiatorParent();return null===t?void Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.hideResultListInternal:: error - no parent",!1):(Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.hideResultListInternal: unbinding documentClickHandlerInternal",!0),void(t.hasClass("ss-open")&&(e(document).unbind("click",Pd.Search.SearchSuggestions.DocumentClickHandler),t.removeClass("ss-open"))))},G=function(){var t=Pd.Search.SearchSuggestions.GetInputBoxEventInitiatorParent();return null===t?void Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.showResultListInternal:: error - no parent",!1):(Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.showResultListInternal: binding documentClickHandlerInternal",!0),void(t.hasClass("ss-open")||(e(document).unbind("click",Pd.Search.SearchSuggestions.DocumentClickHandler),e(document).bind("click",Pd.Search.SearchSuggestions.DocumentClickHandler),t.addClass("ss-open"))))},O=function(t){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.documentClickHandlerInternal",!1);var n=Pd.Search.SearchSuggestions.GetResultListElement();return null===n?void Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.documentClickHandlerInternal:: error - result list",!1):void(e.contains(n[0],t.target)||(null===u||u!==t.target)&&(Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.documentClickHandlerInternal: target? "+Pd.Shared.GetElementAsText(PdCustomJs(t.target)),!0),Pd.Search.SearchSuggestions.HideResultList()))},q=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.scrollDownResultListInternal",!0);var e=Pd.Search.SearchSuggestions.GetResultListElement(),t=e.find("li.active"),n=e.find("li a:hover");1===t.length?1===t.next().length&&(t.removeClass("active"),t.next().addClass("active")):1===n.length?1===n.parent("li").next().length&&(t.removeClass("active"),n.parent("li").next().addClass("active")):e.find("li:first").addClass("active")},w=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.scrollUpResultListInternal",!0);var e=Pd.Search.SearchSuggestions.GetResultListElement(),t=e.find("li.active"),n=e.find("li a:hover");1===t.length?1===t.prev().length&&(t.removeClass("active"),t.prev().addClass("active")):1===n.length&&1===n.parent("li").prev().length&&(t.removeClass("active"),n.parent("li").prev().addClass("active"))},B=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.handleEnterKeyPressInternal",!1);var t=Pd.Search.SearchSuggestions.GetResultListElement(),n=t.find("li.active a");1===n.length&&Pd.Search.SearchSuggestions.PerformSearchOnSelectedItem(n,e)},N=function(t){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.handleTabKeyPressInternal",!1);var n=Pd.Search.SearchSuggestions.GetResultListElement(),r=n.find("li.active a");if(1===r.length){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.handleTabKeyPressInternal: have active element",!0);var a=r.text();void 0!==a&&(t.preventDefault(),e(u).focus(),e(u).val(a+" "),Pd.Search.SearchSuggestions.HandleStandardKeyStroke())}},U=function(t){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.handleItemClickInternal",!1),t.preventDefault();var n=e(this);Pd.Search.SearchSuggestions.PerformSearchOnSelectedItem(n,t)},X=function(t,n){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.performSearchOnSelectedItemInternal",!1),n.preventDefault();var r=t.text();if(void 0!==r){e(u).focus(),e(u).val(r);var a;if(a=Pd.Search.SearchSuggestions.GetInputBoxEventInitiatorParent().find(".ms-srch-sb-searchLink"),1===a.length){try{Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.handleItemClickInternal: trying to execute OOTB search button code",!0),$getClientControl(a[0]).search(r)}catch(s){Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.handleItemClickInternal: exception executing OOTB search button code: "+s,!1)}return void Pd.Search.SearchSuggestions.HideResultList()}if(a=Pd.Search.SearchSuggestions.GetInputBoxEventInitiatorParent().find(".smartphone-live-search-button"),1===a.length)return a.trigger("click"),void Pd.Search.SearchSuggestions.HideResultList();if(a=Pd.Search.SearchSuggestions.GetInputBoxEventInitiatorParent().find("#CustomSearchButton"),1===a.length)return a.trigger("click"),void Pd.Search.SearchSuggestions.HideResultList();Pd.Shared.LogToConsoleIfDebug("Pd.Search.SearchSuggestions.handleItemClickInternal: error: couldn't find search button to submit",!1)}};return{Initialise:L,SearchInputKeyStrokeHandler:b,HandleStandardKeyStroke:T,SearchParametersAreValid:D,CreateXhrRequest:y,OnXhrRequestDone:R,OnXhrRequestAlways:k,GetInputBoxEventInitiatorParent:E,GetResultListElement:H,HandleSpecialKeyStroke:x,HideResultList:K,ShowResultList:G,DocumentClickHandler:O,ScrollDownResultList:q,ScrollUpResultList:w,HandleEnterKeyPress:B,HandleTabKeyPress:N,HandleItemClick:U,PerformSearchOnSelectedItem:X}}(PdCustomJs),function(e){e(document).ready(function(){try{Pd.Search.SearchSuggestions.Initialise()}catch(e){Pd.Shared.LogErrorToStatusDialog("Pd.Search.SearchSuggestions :: Unhandled exception on initialisation :: "+e)}})}(PdCustomJs);
Pd.Utility=function(e){"use strict";function t(e){return t="function"==typeof Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t=-1,r=-1;for(t=0;t<this.length;t++)if(this[t]===e){r=t;break}return r},t.call(this,e)}var r=null,a={Search:{Default:Res.urlSearchAll},AmtlichesBulletin:{Vote:Res.urlAmtlichesBulletinTranscriptVote,Video:Res.urlAmtlichesBulletinTranscriptVideo,Detail:Res.urlAmtlichesBulletinDetail,Search:{Default:Res.urlABSearch,ByMemberCouncilId:Res.urlABSearchByMemberCouncilId,ByBusinessId:Res.urlABSearchByBusinessId},Overview:Res.urlAmtlichesBulletinOverview,Transcript:Res.urlAmtlichesBulletinTranscript},Affair:{Detail:Res.urlAffairDetail,Search:{Default:Res.urlAffairSearch,ByMemberCouncilId:Res.urlAffairSearchByMemberCouncilId,CustomQuery:Res.urlAffairAdvancedSearchCustomQuery},Summary:{Detail:Res.urlAffairSummaryDetail},Flag:Res.urlAffairFlag},Agenda:{Search:{ByPressReleasesCategory:Res.urlAgendaPressReleasesSearch}},News:{ByPressRelease:Res.newsSearchUrlByPressRelease},Album:{DetailByAlbumId:Res.urlImageAlbumDetail},Councilor:{Detail:Res.urlCouncilorDetail,DetailRewritten:Res.urlCouncilorDetailRewritten,Export:"/_layouts/15/itsystems.pd.internet/documents/CouncilMembersExcelExportHandler.ashx?language={0}&filename=Ratsmitglieder_1848_{0}.xlsx",Search:{Default:Res.urlCouncilorSearch,ByMemberCouncilId:Res.urlCouncilorSearchByMemberCouncilId,CustomQuery:Res.urlCouncilorAdvancedSearchCustomQuery}},DetailLanguageSpecific:{AffairDe:Res.urlAffairDetailDe,AffairFr:Res.urlAffairDetailFr,AffairIt:Res.urlAffairDetailIt},EParl:{Search:{Default:Res.urlEParlSearch}},FederalGazzette:{Pdf:Res.urlFederalGazzettePdf,Folder:Res.urlFederalGazzetteFolder},OfficialCompilation:{Pdf:Res.urlOfficialCompilationPdf,Folder:Res.urlOfficialCompilationFolder},Votes:{Search:{Default:Res.urlVotesSearch,ByMemberCouncilId:Res.urlVotesSearchByMemberCouncilId,ByBusinessId:Res.urlVotesSearchByBusinessId}},Votings:{Search:{Default:Res.urlVotingsSearch}},Swissbase:{Detail:Res.urlSwissbaseDetail},Lexicon:{Detail:Res.urlLexiconWordId},ParliamentHistory:{Detail:Res.urlParliamentHistoryDetail}},n={All:{All:Res.resultSourceAllAllShowAll,Localized:Res.resultSourceAllLocalizedShowAll},Affairs:{All:Res.resultSourceAffairsAllShowAll,Localized:Res.resultSourceAffairsLocalizedShowAll},Agenda:{All:Res.resultSourceAgendaAllShowAll,Localized:Res.resultSourceAgendaShowAll},Councillors:{All:Res.resultSourceCouncillorsAllShowAll,Localized:Res.resultSourceCouncillorsShowAll},EParlCuriaDoc:{All:Res.resultSourceEParlCuriaDocAllShowAll,Localized:Res.resultSourceEParlCuriaDocShowAll},EParlDocuments:{All:Res.resultSourceEParlDocumentsAllShowAll,Localized:Res.resultSourceEParlDocumentsShowAll},EParlKBDoc:{All:Res.resultSourceEParlKBDocAllShowAll,Localized:Res.resultSourceEParlKBDocShowAll},EParlSessionDoc:{All:Res.resultSourceEParlSessionDocAllShowAll,Localized:Res.resultSourceEParlSessionDocShowAll},News:{All:Res.resultSourceNewsAllShowAll,Localized:Res.resultSourceNewsShowAll},OfficialBulletin:{All:Res.resultSourceOfficialBulletinAllShowAll,Localized:Res.resultSourceOfficialBulletinShowAll},Others:{All:Res.resultSourceOthersAllShowAll,Localized:Res.resultSourceOthersShowAll},PdDocuments:{All:Res.resultSourcePdDocumentsAllShowAll,Localized:Res.resultSourcePdDocumentsShowAll},PhotoGallery:{All:Res.resultSourcePhotoGalleryAllShowAll,Localized:Res.resultSourcePhotoGalleryShowAll},Speech:{All:Res.resultSourceSpeechAllShowAll,Localized:Res.resultSourceSpeechShowAll}},o={PdAffairCouncilName:"PdAffairCouncilName",PdAffairId:"PdAffairId",PdAffairIdFormatted:"PdAffairIdFormatted",PdAffairStateId:"PdAffairStateId",PdAffairTypeName:"PdAffairTypeName",PdBusinessCouncilorFullName:"PdBusinessCouncilorFullName",PdBusinessCouncilorPersonNumber:"PdBusinessCouncilorPersonNumber",PdBusinessDepositYear:"PdBusinessDepositYear",PdBusinessResponsibleDepartmentShortNames:"PdBusinessResponsibleDepartmentShortNames",PdBusinessSpeaker:"PdBusinessSpeaker",PdBusinessSpeakerId:"PdBusinessSpeakerId",PdBusinessStateDone:"PdBusinessStateDone",PdBusinessTagNames:"PdBusinessTagNames",PdCategory:"PdCategory",PdCommission:Res.managedPropertyPdCommission,PdCouncilN:"PdCouncilN",PdCouncilS:"PdCouncilS",PdDoctype:Res.managedPropertyPdDoctype,PdDoctypeDe:"PdDoctypeDe",PdDoctypeEn:"PdDoctypeEn",PdDoctypeFr:"PdDoctypeFr",PdDoctypeIt:"PdDoctypeIt",PdDoctypeRm:"PdDoctypeRm",PdDocumentDate:"PdDocumentDate",PdDraft:"PdDraft",PdEParlCouncilN:"PdCouncilN",PdEParlCouncilS:"PdCouncilS",PdEParlDoctype:Res.managedPropertyPdEParlDoctype,PdEParlDraft:"PdDraft",PdEParlLanguage:Res.managedPropertyPdEParlLanguage,PdEParlSession:"PdSession",PdEParlSessionTitle:Res.managedPropertyPdEParlSessionTitle,PdLanguage:"PdLanguage",PdLanguageLocalized:Res.managedPropertyPdLanguage,PdMemberCouncilActive:"PdMemberCouncilActive",PdMemberCouncilCantonName:"PdMemberCouncilCantonName",PdMemberCouncilCommitteeAbbreviation:"PdMemberCouncilCommitteeAbbreviation",PdMemberCouncilCouncilName:"PdMemberCouncilCouncilName",PdMemberCouncilCurrentParlGroup:"PdMemberCouncilCurrentParlGroup",PdMemberCouncilCurrentParlGroupName:"PdMemberCouncilCurrentParlGroupName",PdMemberCouncilHistoricParlGroup:"PdMemberCouncilHistoricParlGroup",PdMemberCouncilHistoricParlGroupName:"PdMemberCouncilHistoricParlGroupName",PdMemberCouncilId:"PdMemberCouncilId",PdMemberCouncilLastNameStart:"PdMemberCouncilLastNameStart",PdReportDate:"PdReportDate",PdSession:"PdSession",PdSessionTitle:Res.managedPropertyPdSessionTitle,PdSortDateTime:"PdSortDateTime",PdSubjectBusinessInfos:"PdSubjectBusinessInfos",PdSubjectCouncil:"PdSubjectCouncil",PdSubjectCouncilName:"PdSubjectCouncilName",PdSubjectDate:"PdSubjectDate",PdSubjectId:"PdSubjectId",PdSubjectIdMeeting:"PdSubjectIdMeeting",PdSubjectMeetingDate:"PdSubjectMeetingDate",PdSubjectMeetingName:"PdSubjectMeetingName",PdSubjectMeetingTime:"PdSubjectMeetingTime",PdSubjectSession:"PdSubjectSession",PdSubjectSessionName:"PdSubjectSessionName",PdSubjectSessionYear:"PdSubjectSessionYear",PdSubjectSortOrder:"PdSubjectSortOrder",PdSubjectSpeakerFullNames:"PdSubjectSpeakerFullNames",PdSubjectSpeakerPersonNumbers:"PdSubjectSpeakerPersonNumbers",PdTitle:Res.managedPropertyPdTitle,FileType:"FileType",PdBlogCategory:Res.managedPropertyPdBlogCategory,PdEventDate:"PdEventDate",PdLead:"PdLead",PdBlogDisplayTeaser:"PdBlogDisplayTeaser",PdBlogDisplayOrder:"PdBlogDisplayOrder",PublishingRollupImage:"PublishingImage",PdHeaderImage:"PdHeaderImage"},l=function(){var e=window.location.search,t={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,r,a,n){t[r]=n}),t},i=function(e){var t=Pd.Utility.GetUrlParameters(),r=t[e];return void 0==r?null:r},s=function(e){var t=null;switch(e){case"CouncillorId":var r=window.location.pathname.match(/^\/([^\/]{2})\/biografie\/([^\/]+)\/([0-9]+)\/?(\?.*)?$/);null==r||5!=r.length||isNaN(r[3])||(t=r[3])}return t},u=function(){var e=arguments[0];if("undefined"==typeof e)return"";for(var t=1;t<arguments.length;t++){var r="{{0}}".format(t-1);e=e.split(r).join(arguments[t])}return e},d=function(e,r){return t.call(e,r)>-1};Number.prototype.between||(Number.prototype.between=function(e,t,r){2===arguments.length&&(r=!0);var a=Math.min.apply(Math,[e,t]),n=Math.max.apply(Math,[e,t]);return r?this>=a&&n>=this:this>a&&n>this}),Number.prototype.modulus||(Number.prototype.modulus=function(e){return this%e}),String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,r){return"undefined"!=typeof e[r]?e[r]:t})});var c=function(e,t,r){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.globallyReplaceStringInternal");try{var a=function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")};return e.replace(new RegExp(a(t),"g"),r)}catch(n){return Pd.Shared.LogToConsoleIfDebug("Error performing string global replace: "+n.message),e}},P=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.convertAffairShortNumberToIdInternal",!0);var t=null;if(void 0!=e){var r=e.split(".");if(2!=r.length)Pd.Shared.LogToConsoleIfDebug("Pd.Utility.convertAffairShortNumberToIdInternal :: supplied AffairShortNumber is not in correct format ("+e+")");else{3==r[1].length&&(r[1]="0"+r[1]);var a=parseInt(r[0]);NaN==a?Pd.Shared.LogToConsoleIfDebug("Pd.Utility.convertAffairShortNumberToIdInternal :: supplied AffairShortNumber is not in correct format ("+e+")"):(a>50?r[0]="19"+r[0]:r[0]="20"+r[0],t=r[0]+r[1])}}else Pd.Shared.LogToConsoleIfDebug("Pd.Utility.convertAffairShortNumberToIdInternal :: supplied AffairShortNumber is null or empty");return null==t?e:t},g=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.getFormatedTimeInternal");var t="";if(null!=e&&""!=e){var r=e.getHours(),a=e.getMinutes();t=("0"+r).slice(-2)+":"+("0"+a).slice(-2),"00:00"==t&&(t="")}return t},m=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.printPageInternal"),window.print()},f=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.getFileIconClassnameInternal");var t="";switch(e){case"html":case"htm":case"aspx":t="html-item";break;case"doc":case"docx":t="news-item doc";break;case"xls":case"xlsx":t="news-item xls";break;case"ppt":case"pptx":t="news-item ppt";break;case"pdf":t="news-item pdf";break;case"avi":case"mkv":case"mov":t="video-item";break;case"tiff":case"tif":case"jpg":case"jpeg":case"bmp":case"gif":case"png":t="picture-item"}return t},S=function(e){for(var t=e.toString(),r="",a=0;a<t.length;a+=2)r+=String.fromCharCode(parseInt(t.substr(a,2),16));return r},p=function(e){for(var t=[],r=String(e),a=0,n=r.length;n>a;a++){var o=Number(r.charCodeAt(a)).toString(16);t.push(o)}return t.join("")},h=function(e){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.getExtractedTaxonomyIdInternal");var t=e;if(Pd.Utility.StringIsNullOrEmpty(t))t="";else{var r=/L0\|\#0(.*?)($|\n|\|)/,a=r.exec(t);null!=a&&a.length>=2&&(t=a[1])}return t},y=function(e,t){Pd.EntityMappings.GetEntityRecordMapping("Councilor","SmallPicture","0").then(function(r){var a=Pd.Utility.GetCouncilorImageUrlPromiseResult(r);t(e,a)},function(r){Pd.Shared.LogToConsoleIfDebug(r),t(e,Pd.Utility.GetPersonImagePlaceholder())})},D=function(){return"/_layouts/15/itsystems.Pd.Internet/Branding/images/broken-images/person-100.png"},m=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.printPageInternal"),window.print()},I=function(e){return foldToAscii(e)},b=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.generateUUIDInternal");var e=(new Date).getTime();window.performance&&"function"==typeof window.performance.now&&(e+=performance.now());var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)});return t},C=function(e){for(var t="",r=0;r<e[0].length;r++)if(e[0][r].language==Pd.Language.GetCurrentLanguage().toLowerCase()){t=e[0][r].url;break}return t||Pd.Utility.GetPersonImagePlaceholder()},A=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.generatePageTitleFromArgsInternal");var e=Pd.Utility.ConcatenateArguments.apply(this,arguments);return e.length>0&&(e+=" | "),e+=Res.brandingSiteHeaderTitlePart2},R=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.generateH1FromArgsInternal");var e=Pd.Utility.ConcatenateArguments.apply(this,arguments);return e},v=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.concatenateArgumentsInternal");for(var e="",t=1;t<arguments.length;t++)Pd.Utility.StringIsNullOrEmpty(arguments[t])||(e.length>0&&(e+=arguments[0]),e+=arguments[t]);return e},U=function(e){return Pd.Shared.LogToConsoleIfDebug("Pd.Utility.setPageTitleInternal"),Pd.Utility.StringIsNullOrEmpty(e)?(Pd.Shared.LogToConsoleIfDebug("Pd.Utility.setPageTitleInternal : supplied text invalid, not setting"),!1):(document.title=e,!0)},T=function(t,r){if(Pd.Shared.LogToConsoleIfDebug("Pd.Utility.setPageH1TextInternal"),Pd.Utility.StringIsNullOrEmpty(t)){if(void 0==r)return void Pd.Shared.LogToConsoleIfDebug("Pd.Utility.setPageH1TextInternal : supplied text invalid, not setting");t=""}e("h1.heading-content").text(t)},L=function(t){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.setMetaDescInternal");var r=e("meta[name=description]");return 0==r.length&&(Pd.Shared.LogToConsoleIfDebug("Pd.Utility.setMetaDescInternal : no tag found, creating"),e("head").append('<meta name="description" content="" />'),r=e("meta[name=description]")),Pd.Utility.StringIsNullOrEmpty(t)?void Pd.Shared.LogToConsoleIfDebug("Pd.Utility.setMetaDescInternal : supplied text is empty, exiting"):(r.attr("content",t),Pd.Shared.LogToConsoleIfDebug("Pd.Utility.setMetaDescInternal :: meta description set to '"+t+"'"),void e("html").addClass("set-meta-desc"))},x=function(t,r){void 0==r&&(r=!1);try{if(void 0==t)return!0;if(t=String(t),""==t)return!0;if(0==t.length)return!0;if(0==t.trim().length)return!0;if(!r&&0==e("<div/>").html(t).text().trim().length)return!0}catch(a){return Pd.Shared.LogToConsoleIfDebug("Pd.Utility.stringIsNullOrEmptyInternal unhandled exception: "+a),!0}return!1},O=function(e){if(Pd.Shared.LogToConsoleIfDebug("Pd.Utility.handleImageErrorEventInternal"),void 0!=e.attributes["data-placeholder-size"]){var t=parseInt(e.attributes["data-placeholder-size"].value),r="";r=50>=t?"50.png":100>=t?"100.png":200>=t?"200.png":212>=t?"212.png":260>=t?"260.png":"300.png";var a="default";void 0!=e.attributes["data-placeholder-type"]&&(a=e.attributes["data-placeholder-type"].value.toLowerCase()),r=a+"-"+r,e.src="/_layouts/15/itsystems.Pd.Internet/Branding/images/broken-images/"+r}else Pd.Shared.LogToConsoleIfDebug("Pd.Utility.handleImageErrorEventInternal :: image error detected but no attributes found to select new image.\nSrc:"+e.src)},N=function(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")},w=function(e,t,r){var a=e.indexOf("#"),n=-1===a?"":e.substr(a);e=-1===a?e:e.substr(0,a);var o=new RegExp("([?&])"+t+"=.*?(&|$)","i"),l=-1!==e.indexOf("?")?"&":"?";return r?e=e.match(o)?e.replace(o,"$1"+t+"="+r+"$2"):e+l+t+"="+r:(e=e.replace(new RegExp("([?&]?)"+t+"=[^&]*","i"),""),"?"===e.slice(-1)&&(e=e.slice(0,-1)),-1===e.indexOf("?")&&(e=e.replace(/&/,"?"))),e+n},E=function(e){return"[object Date]"===Object.prototype.toString.call(e)?isNaN(e)?!1:!0:!1},B=function(e,t){for(var r,a=0,n=e.length;n>a;++a)if(r=e[a],t(r))return r;return null},M=function(e,t){for(var r=0;r<e.length;r++){var a=e[r];t(a)}return e},F=function(e,t,r,a){if(void 0==e||void 0==t||void 0==r||void 0==a)return"";if(Pd.Utility.StringIsNullOrEmpty(e))return"";var n=e;return r&&(n=n.replace(/<(?:.|\n)*?>/gm," "),n=n.replace(/\r?\n|\r/g," "),n=n.replace(/  /gm," "),n=n.trim()),n.length<=t?n:(n=n.substring(0,t),n=n.substring(0,n.lastIndexOf(" ")).trim(),a&&(n+="..."),n)},j=function(e,t){try{if(null===e)return"";if(Pd.Utility.StringIsNullOrEmpty(t))return e;var r=new Date(e),a=moment(r);if(!a.isValid())return e;var n=Pd.Language.GetCurrentLanguage().toLowerCase(),o="pd-{0}".format(n);return a.locale(o).format(t)}catch(l){return Pd.Shared.LogToConsoleIfDebug("Pd.Utility.formatDateInternal: unexpected exception: "+l.message),e}},k=function(e,t){return Pd.Utility.FormatDate(e,t)},G=function(e,t,r){if(Pd.Shared.LogToConsoleIfDebug("Pd.Utility.lscacheSetInternal("+e+",data,"+r+")",!0),!lscache)return!1;try{return lscache.set(e,t,r),!0}catch(a){return Pd.Shared.LogToConsoleIfDebug("Pd.Utility.lscacheSetInternal: unexpected error setting cache (key: '{0}'), error: {1}".format(e,a.message)),!1}},q=function(e){if(Pd.Shared.LogToConsoleIfDebug("Pd.Utility.lscacheGetInternal("+e+")",!0),!lscache)return null;if("0"==Pd.Utility.GetUrlParameter("cache"))return null;try{return lscache.get(e)}catch(t){return Pd.Shared.LogToConsoleIfDebug("Pd.Utility.lscacheGetInternal: unexpected error getting cache item (key: '{0}'), error: {1}".format(e,t.message)),null}},z=function(){if(Pd.Shared.LogToConsoleIfDebug("Pd.Utility.isSmallIOSDeviceInternal",!0),null!=r)return Pd.Shared.LogToConsoleIfDebug("Pd.Utility.isSmallIOSDeviceInternal: already have answer: '{0}'".format(r)),r;if(Pd.Shared.CurrentSiteActualViewportWidth()>500)return r=!1;var e=navigator.userAgent||navigator.vendor||window.opera;return r=/iPad|iPhone|iPod/.test(e)&&!window.MSStream?!0:!1},V=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},H=function(t,r){void 0===r&&(r=!1),Pd.ODataRequests=null===Pd.ODataRequests?[]:Pd.ODataRequests,clearTimeout(Pd.ODataRequestTimer),"pending"!==e("body").attr("data-page-status")&&(e("body").attr("data-page-status","pending"),Pd.Shared.LogToConsoleIfDebug("Pd.Utility.saveODataRequestInternal: page status not pending so setting",!0)),Pd.ODataRequests.push(t),Pd.Shared.LogToConsoleIfDebug("Pd.Utility.saveODataRequestInternal: list count '"+Pd.ODataRequests.length+"' after adding item '"+t+"' (cached: "+r+")",!0)},J=function(e,t){if(void 0===t&&(t=!1),Pd.ODataRequests=null===Pd.ODataRequests?[]:Pd.ODataRequests,0===Pd.ODataRequests.length)return void Pd.Shared.LogToConsoleIfDebug("Pd.Utility.removeODataRequestInternal: wanting to remove item but none in array; item '"+e+"'",!1);for(var r=!1,a=0;a<Pd.ODataRequests.length;a++)if(Pd.ODataRequests[a]===e){Pd.ODataRequests.splice(a,1),r=!0;break}r||Pd.Shared.LogToConsoleIfDebug("Pd.Utility.removeODataRequestInternal: request item was not found in list: '"+e+"'",!1),0===Pd.ODataRequests.length&&(Pd.ODataRequestTimer=setTimeout(Pd.Utility.CheckODataRequestsStatus,1e3)),Pd.Shared.LogToConsoleIfDebug("Pd.Utility.removeODataRequestInternal: list count '"+Pd.ODataRequests.length+"' after removing item '"+e+"' (cached: "+t+")",!0)},$=function(){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.checkODataRequestsStatusInternal",!0),"ready"===e("body").attr("data-page-status")&&Pd.Shared.LogToConsoleIfDebug("Pd.Utility.checkODataRequestsStatusInternal: page already ready, exiting",!0),clearTimeout(Pd.ODataRequestTimer);var t=!1;null===Pd.ODataRequests&&(Pd.Shared.LogToConsoleIfDebug("Pd.Utility.checkODataRequestsStatusInternal: zero OData requests have occurred after delay, page is ready!",!0),t=!0),null!==Pd.ODataRequests&&0===Pd.ODataRequests.length&&(Pd.Shared.LogToConsoleIfDebug("Pd.Utility.checkODataRequestsStatusInternal: zero items remaining, page is ready!",!0),t=!0),t===!0?setTimeout(function(){e("body").attr("data-page-status","ready")},500):Pd.Shared.LogToConsoleIfDebug("Pd.Utility.checkODataRequestsStatusInternal: OData requests remaining, page not ready.",!0)},W=function(t,r,a,n,o){void 0===r&&(r=1),void 0===a&&(a=20),void 0===n&&(n=1e3),void 0===o&&(o=1e3);var l="Pd.Utility.executeWhenPageReady :: execution count: "+r;"ready"===e("body").attr("data-page-status")?(l+=" :: page ready, executing supplied func",setTimeout(function(){t()},o)):a>r?(l+=" :: not yet ready, setting timer",setTimeout(function(){Pd.Utility.ExecuteWhenPageReady(t,r+1)},n)):l+=" :: not yet ready, too many attempts, stopping",Pd.Shared.LogToConsoleIfDebug(l,!0)},Q=function(e){if(Pd.Utility.StringIsNullOrEmpty(e))return"";var t=e;for(t=t.toLowerCase(),t=t.replace(/[^a-z0-9'\(\)\-\.ÃÃ Ã¡Ã¢Ã£Ã¤Ã¥Ã¦Ã§Ã¨Ã©ÃªÃ«Ã¬Ã­Ã®Ã¯Ã°Ã±Ã²Ã³Ã´ÃµÃ¶Ã¸Ã¹ÃºÃ»Ã¼Ã½Ã¾Ã¿]+/gi,"-");-1!==t.indexOf("--");)t=t.replace("--","-");return t.startsWith("-")&&(t=t.substr(1)),t.endsWith("-")&&(t=t.slice(0,-1)),t},_=function(e,t,r){if(Pd.Utility.StringIsNullOrEmpty(e)||Pd.Utility.StringIsNullOrEmpty(t)||Pd.Utility.StringIsNullOrEmpty(r))return"#err";if(Pd.Config.Seo.CouncillorRewriteEnabled===!0){var a="{0} {1}".format(e,t);a=Pd.Utility.CreateUrlFriendlyText(a),a=encodeURIComponent(a);var n=Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.Councilor.DetailRewritten,a,r);return n}return Pd.Utility.GetPageUrlFormat(Pd.Utility.PageUrlFormats.Councilor.Detail,r)},Y=function(){var e=function(e){return Pd.Shared.LogToConsoleIfDebug("Pd.Utility.JsonLinkedData.createJsonObjectInternal",!0),{"@context":"http://schema.org/","@type":e}},t=function(e,t,r,a,n){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.JsonLinkedData.setPropertyIfValueExistsInternal",!0),void 0===a&&(a=!1),Pd.Utility.StringIsNullOrEmpty(r)||(a&&(Pd.Utility.StringIsNullOrEmpty(e[t])?a=!1:void 0!==n&&(e[t]+=n)),a?e[t]+=r:e[t]=r)},r=function(e,t,r,a,n,o,l,i,s){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.JsonLinkedData.filterSortConcatInternal",!0);var u=r;u=Pd.Angular.Filter(a,"filter",u,n,o),u=Pd.Angular.Filter(a,"orderBy",u,l,i),u=u.map(function(e){return e[s]}),Pd.Utility.StringIsNullOrEmpty(u)||(e[t]=u)},a=function(e,t,r){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.JsonLinkedData.pushPropertyInternal",!0),void 0==e[t]&&(e[t]=[]),e[t].push(r)},n=function(e,t,r,a,n){if(Pd.Shared.LogToConsoleIfDebug("Pd.Utility.JsonLinkedData.pushMemberOfPropertyInternal",!0),!Pd.Utility.StringIsNullOrEmpty(a)){var o={"@type":r,name:a};Pd.Utility.StringIsNullOrEmpty(n)||(o.name+=" ("+n+")"),Pd.Utility.JsonLinkedData.PushProperty(e,t,o)}},o=function(e,t,r){if(Pd.Shared.LogToConsoleIfDebug("Pd.Utility.JsonLinkedData.addPersonAddressInternal",!0),0!==r.length){var a=r[0],n={"@type":"PostalAddress",streetAddress:""};Pd.Utility.JsonLinkedData.SetPropertyIfValueExists(n,"streetAddress",a.AddressLine3,!0),Pd.Utility.JsonLinkedData.SetPropertyIfValueExists(n,"streetAddress",a.AddressLine1,!0,", "),Pd.Utility.JsonLinkedData.SetPropertyIfValueExists(n,"streetAddress",a.AddressLine2,!0,", "),Pd.Utility.JsonLinkedData.SetPropertyIfValueExists(n,"postalCode",a.Postcode),Pd.Utility.JsonLinkedData.SetPropertyIfValueExists(n,"addressLocality",a.City),e[t]={"@type":"Place"},e[t].address=n}},l=function(e){if(Pd.Shared.LogToConsoleIfDebug("Pd.Utility.JsonLinkedData.addScriptToPageInternal"),void 0!==e&&!Pd.Utility.StringIsNullOrEmpty(e)){var t=document.createElement("script");t.type="application/ld+json",t.text=JSON.stringify(e);var r=document.getElementsByTagName("head")[0];r.appendChild(t)}};return{CreateJsonObject:e,SetPropertyIfValueExists:t,FilterSortConcat:r,PushProperty:a,PushMemberOfProperty:n,AddPersonAddress:o,AddScriptToPage:l}}(),K=function(e,t){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t)return r;return null},X=function(e,t){try{if(void 0===e||null===e)return null;var r=t.split(".");if(r.length<=1)return e;for(var a=e,n=r[0],o=new RegExp("^([^\\s]+)\\[([0-9]+)\\]$","gm"),l=1;l<r.length;l++){var i=r[l];try{if("()"===i.substring(i.length-2))i=i.substring(0,i.length-2),a=a[i]();else{var s=o.exec(i);null!=s&&3===s.length?(a=a[s[1]],a=a[s[2]]):a=a[i]}}catch(u){return Pd.Shared.LogToConsoleIfDebug("Pd.Utility.ObjectSafeNavigation: unable to get part; got so far: '{0}' (=>'{1}'). Returning null.".format(n,i)),null}n="{0}.{1}".format(n,i)}return a}catch(u){Pd.Shared.LogToConsoleIfDebug("Pd.Utility.ObjectSafeNavigation"+u.message)}},Z=function(e){var t=document.createElement("a");return t.href=e,{href:t.href,host:t.host,hostname:t.hostname,port:t.port,pathname:t.pathname,protocol:t.protocol,hash:t.hash,search:t.search}};return{PageUrlFormats:a,GetUrlParameters:l,GetUrlParameter:i,GetRewrittenUrlParameter:s,GetPageUrlFormat:u,GetCouncilorImageUrlFormat:y,GetPersonImagePlaceholder:D,GloballyReplaceString:c,ConvertAffairShortNumberToId:P,ResultSources:n,ManagedProperties:o,GetFormatedTime:g,Hex2A:S,A2Hex:p,GetExtractedTaxonomyId:h,ArrayContains:d,GetFileIconClassname:f,NormalizeString:I,PrintPage:m,GenerateUUID:b,GeneratePageTitleFromArgs:A,GenerateH1FromArgs:R,ConcatenateArguments:v,SetPageTitle:U,SetMetaDesc:L,SetPageH1Text:T,StringIsNullOrEmpty:x,HandleImageErrorEvent:O,EncodeUriQuery:N,UpdateUrlParameter:w,GetCouncilorImageUrlPromiseResult:C,IsValidDateObject:E,FirstOrDefault:B,ProcessArrayItems:M,ShortenText:F,FormatDate:j,FormatDateTimeToLocal:k,lscacheSet:G,lscacheGet:q,IsSmallAppleDevice:z,IsNumeric:V,SaveODataRequest:H,RemoveODataRequest:J,CheckODataRequestsStatus:$,ExecuteWhenPageReady:W,CreateUrlFriendlyText:Q,GetCouncillorFriendlyUrl:_,JsonLinkedData:Y,GetObjectPropertyByValue:K,ObjectSafeNavigation:X,GetUrlParts:Z}}(PdCustomJs);try{Pd.ODataRequestTimer=setTimeout(Pd.Utility.CheckODataRequestsStatus,3e3),Pd.Shared.TryCatch(Pd.Language.SetCurrentCultureInfo),Pd.Shared.TryCatch(Pd.Search.LoadTaxonomy)}catch(err){Pd.Shared.LogErrorToStatusDialog("Pd.Utility :: Unhandled exception on immediate load :: "+err)}
Pd.Export=Pd.Export||{},Pd.Export.CouncilorsToExcel=function(t){"use strict";var o=function(){Pd.Shared.LogToConsoleIfDebug("Pd.ExportToExcel.setExportButtonInternal");var o=Pd.Utility.PageUrlFormats.Councilor.Export.format(Pd.Language.GetCurrentLanguage());t("a",".export.pd-save.hidden-xs").attr("href",o),t(".export.pd-save.hidden-xs").show()};return{SetExportButton:o}}(PdCustomJs);
Pd.Export=Pd.Export||{},Pd.Export.ToCSV=function(o){"use strict";var r=function(r,t,n,e,a){Pd.Shared.LogToConsoleIfDebug("Pd.Export.ToCSV.exportInternal");try{var c=[];c.push(r),o.each(t,function(r,t){o.each(t,function(o,r){"string"==typeof r&&(t[o]=r.replace(/(\r\n|\n|\r)/gm," "))}),c.push(t)});var d=new CsvGenerator(c,n,",",!0,e,a);d.download(!0)}catch(s){Pd.Shared.LogToConsoleIfDebug(s.stack)}};return{Export:r}}(PdCustomJs);
Pd.Print=function(e){"use strict";var n=[],t=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Print.mediaTypePrintChangesInternal");var n="header .header-info .logo-text";e("<div class='pd-media-print'></div>").appendTo(n);var t=moment().format("DD.MM.YYYY");e(":not(.pd-current-date)"+n).append("<div class='pd-current-date'>"+t+"</div>")}},o=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.Print.generateQrCodeInternal");var n="header .header-info .logo-text .pd-media-print";e(n).qrcode({render:"image",size:84,color:"#3a3",text:window.location.href}).delay(250)}},r=function(e,t){Pd.Shared.LogToConsoleIfDebug("Pd.Print.GetPrintingConfiguration",!0),0===n.length&&(n=Pd.Config.Printing.Entities);var o={};o.SectionName=t,o.Url="#";try{n.forEach(function(n){n.EntityName===e&&n.Sections.forEach(function(e){e.SectionName===t&&(o=e)})})}catch(r){Pd.Shared.LogToConsoleIfDebug(r)}return o};return{MediaTypePrintChanges:t,GenerateQrCode:o,GetPrintingConfiguration:r}}(PdCustomJs),function(e){e(document).ready(function(){try{setTimeout(function(){Pd.Shared.TryCatch(Pd.Print.MediaTypePrintChanges)},500),setTimeout(function(){Pd.Shared.TryCatch(Pd.Print.GenerateQrCode)},1e3)}catch(e){Pd.Shared.LogErrorToStatusDialog("Pd.Print :: Unhandled exception on initialisation :: "+e)}})}(PdCustomJs);
app.directive("cleditor",function(){return{require:"?ngModel",link:function(e,n,t,i){i&&(i.$render=function(){n.val(i.$viewValue).blur()},setTimeout(function(){n.cleditor({controls:"bold italic underline | bullets numbering | outdent indent | undo redo | link unlink | cut copy paste pastetext | source ",bodyStyle:""}).change(function(){var t=n.val();e.$$phase||e.$apply(function(){i.$setViewValue(t)})})},300))}}});
app.filter("PushERMColumn",["$q",function(t){function r(t,r){var e=n[r];return null!==e&&e.length>0?e:t}var n={},e=[];return function(u,a,i,o,f,l){if("undefined"==typeof u||0===u.length)return u;var c=l;if("undefined"==typeof n[c]||null===n[c]){if("undefined"==typeof e[c]||!e[c]){e[c]=!0;var p=[];angular.forEach(u,function(t){p.push(Pd.EntityMappings.GetEntityRecordMapping(a,i,t[o]))}),t.all(p).then(function(t){var r=Pd.Language.GetCurrentLanguage();n[c]=[],angular.forEach(t,function(t,n){for(var e="",a=0;a<t[0].length;a++)if(t[0][a].language===r.toLowerCase()){e=t[0][a].url;break}var i=u[n];i[f]=e,this.push(i)},n[c])})}return"-"}return r(u,c)}}]),app.filter("linkify",function(){var t=/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/gi;return function(r,n){return r.replace(t,'<a target="'+n+'" href="$&">$&</a>')}}),app.filter("unique",function(){return function(t,r){if(r===!1)return t;if((r||angular.isUndefined(r))&&angular.isArray(t)){var n=[],e=function(t){return angular.isObject(t)&&angular.isString(r)?t[r]:t};angular.forEach(t,function(t){for(var r=!1,u=0;u<n.length;u++)if(angular.equals(e(n[u]),e(t))){r=!0;break}r||n.push(t)}),t=n}return t}}),app.filter("orderByLocale",["$parse",function(t){function r(r,n){return n=n?-1:1,r.map(function(r){var e,u=1;if(angular.isFunction(r))e=r;else if(angular.isString(r)&&(("+"==r.charAt(0)||"-"==r.charAt(0))&&(u="-"==r.charAt(0)?-1:1,r=r.substring(1)),""!==r&&(e=t(r),e.constant))){var a=e();e=function(t){return t[a]}}return{get:e,descending:u*n}})}function n(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function e(t,r){return"function"==typeof t.valueOf&&(t=t.valueOf(),n(t))?t:i(t)&&(t=t.toString(),n(t))?t:r}function u(t,r){var n=typeof t;return null===t?(n="string",t="null"):"string"===n?t=t.toLowerCase():"object"===n&&(t=e(t,r)),{value:t,type:n}}function a(t,r){var n=0;return t.type===r.type?t.value!==r.value&&(n=t.value.localeCompare(r.value)):n=t.type<r.type?-1:1,n}function i(t){return angular.isFunction(t.toString)&&t.toString!==toString}return function(t,n,e){function i(t,r){return{value:t,predicateValues:f.map(function(n){return u(n.get(t),r)})}}function o(t,r){for(var n=0,e=0,u=f.length;u>e&&!(n=a(t.predicateValues[e],r.predicateValues[e])*f[e].descending);++e);return n}try{if(null==t)return t;angular.isArray(n)||(n=[n]),0===n.length&&(n=["+"]);var f=r(n,e);f.push({get:function(){return{}},descending:e?-1:1});var l=Array.prototype.map.call(t,i);l.sort(o),t=l.map(function(t){return t.value})}catch(c){}return t}}]),app.filter("pdDate",function(){return function(t,r){return Pd.Utility.FormatDate(t,r)}}),app.filter("twitterDate",function(){return function(t){return t.replace(/( \+)[0-9]+/,"")}}),app.filter("orFilter",function(){return function(t,r,n){var e=[];return angular.forEach(t,function(t){Pd.Utility.ArrayContains(n,t[r])&&this.push(t)},e),e}}),app.filter("MainCommittee",function(){var t=[1,2,3,4,5,6,7,8,9,10,11,12,14,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,76,333,536,582,707,709,710,711,712,788,789,790,793,794,822,823,824,825,826,828,829,832,833,845,846,847,940,941,942,943,944,975,1064,1065];return function(r){var n=[];return angular.forEach(r,function(r){Pd.Utility.ArrayContains(t,r.CommitteeNumber)&&this.push(r)},n),n}}),app.filter("trustAsHtml",["$sce",function(t){return function(r){return t.trustAsHtml(r)}}]),app.filter("ifNullOrEmpty",[function(){return function(t,r){return Pd.Utility.StringIsNullOrEmpty(t)?r:t}}]),app.filter("parseDocIdUrl",["$location",function(t){return function(r){if(Pd.Utility.StringIsNullOrEmpty(r)||r.indexOf(",")<0)return r;var n=r.split(",")[0],e="{0}://{1}".format(t.protocol(),t.host()),u=Pd.Config.Urls.WwwUrl.toLowerCase()===e.toLowerCase();if(u&&n.toLowerCase().startsWith(Pd.Config.Urls.EditUrl.toLowerCase())){var a=new RegExp(Pd.Config.Urls.EditUrl,"ig");n=n.replace(a,Pd.Config.Urls.WwwUrl)}return n}}]);
app.directive("img",function(){return{restrict:"E",link:function(i,n,r){n.on("error",function(){Pd.Utility.HandleImageErrorEvent(this)})}}});
app.directive("authorDetails",[function(){var directive={};return directive.restrict="A",directive.compile=function(element,attributes){var authorItemLookupField=angular.element("div[id*='authorValue']");authorItemLookupField.css("display","none");var displayTemplate=angular.element("<div data-ng-include src=\"'/Smart%20Data%20Library/Templates/MMAuthorDisplay.html'\" />");displayTemplate.insertAfter(element);var linkFunction=function(scope,element,attributes,controller){function queryFailed(e){Pd.Shared.LogToConsoleIfDebug("query failed with following error: "+e.message)}function loadAuthor(e){try{author={title_en:getValueFromMetadata(e[0].data,"Title_en"),address_en:getValueFromMetadata(e[0].data,"Address_en"),title_de:getValueFromMetadata(e[0].data,"Title_de"),address_de:getValueFromMetadata(e[0].data,"Address_de"),title_fr:getValueFromMetadata(e[0].data,"Title_fr"),address_fr:getValueFromMetadata(e[0].data,"Address_fr"),title_it:getValueFromMetadata(e[0].data,"Title_it"),address_it:getValueFromMetadata(e[0].data,"Address_it"),title_rm:getValueFromMetadata(e[0].data,"Title_rm"),address_rm:getValueFromMetadata(e[0].data,"Address_rm")}}catch(t){Pd.Shared.LogToConsoleIfDebug("error in loadAuthor function"),Pd.Shared.LogToConsoleIfDebug(t)}}function getValueFromMetadata(e,t){try{if(null!=e){var a="";return angular.forEach(e,function(e,r){e.columnName==t&&(a=e.value)}),a}}catch(r){Pd.Shared.LogToConsoleIfDebug("error in getValueFromMetadata"),Pd.Shared.LogToConsoleIfDebug(r)}return null}function resolveLoadedEntity(id){try{var query=breeze.EntityQuery.from(authorsLibraryType.defaultResourceName).where("ID","eq",id).using(spManagerLookup),autocompleteOptions=[],displayColumn="value."+attributes.displayColumn,idColumn="value."+attributes.idColumn,dataCols=attributes.metaDataColumns,dataColumns=null;return null!=dataCols&&""!=dataCols&&(dataColumns=dataCols.split(",")),query.execute().then(function(data){return angular.forEach(data.results,function(value,key){var subEntities=[],entity={label:eval(displayColumn),value:eval(idColumn)+";#"+eval(displayColumn),data:subEntities};null!=dataColumns&&""!=dataColumns&&angular.forEach(dataColumns,function(column,i){var subColName="value."+column,subEntity={columnName:column,value:eval(subColName)};subEntities.push(subEntity)},subEntities),autocompleteOptions.push(entity)}),autocompleteOptions}).fail(queryFailed)}catch(err){Pd.Shared.LogToConsoleIfDebug("error in resolveLoadedEntity function"),Pd.Shared.LogToConsoleIfDebug(err)}return null}var authorItemLookupText=authorItemLookupField.text().trim();if(!Pd.Utility.StringIsNullOrEmpty(authorItemLookupText)){var authorId=null;if(Pd.Utility.IsNumeric(authorItemLookupText))authorId=parseInt(authorItemLookupText);else{var authorLookupArray=authorItemLookupText.split(";#");2==authorLookupArray.length&&Pd.Utility.IsNumeric(authorLookupArray[0])&&(authorId=parseInt(authorLookupArray[0]))}if(null!=authorId){var author,selectedLanguage="";if(null!=attributes.selectedLanguage&&""!=attributes.selectedLanguage)try{selectedLanguage=eval(attributes.selectedLanguage).toLowerCase(),scope.localizationLanguage=selectedLanguage}catch(err){Pd.Shared.LogToConsoleIfDebug(err)}var spServiceLookup=new breeze.DataService({serviceName:"/"+attributes.web+"/_api/web/lists/",adapterName:"SharePointOData",hasServerMetadata:!1}),spManagerLookup=new breeze.EntityManager({dataService:spServiceLookup,metadataStore:metadataStore});scope.spServiceLookup=spServiceLookup,scope.spManagerLookup=spManagerLookup,scope.authorsLibraryType=authorsLibraryType,scope.typeAuthors=typeAuthors;try{var promise=resolveLoadedEntity(authorId);promise.then(function(e){loadAuthor(e),null!=author?(scope.author=author,scope.languageChange(selectedLanguage),scope.$apply()):Pd.Shared.LogToConsoleIfDebug("author is null")},function(e){Pd.Shared.LogToConsoleIfDebug(e)})}catch(err){Pd.Shared.LogToConsoleIfDebug(err)}}}};return linkFunction},directive}]),app.directive("informationDetails",[function(){var e={};return e.restrict="A",e.templateUrl="/Smart%20Data%20Library/Templates/MMInformationDisplay.html",e.compile=function(e,t){var a=angular.element("div[id*='informationValue']");a.css("display","none");var r=function(e,t,r,o){var u=a.children("div[id*='ControlWrapper_RichHtmlField']").html();angular.isDefined(u)&&setTimeout(function(){e.$apply(function(){e.informationHtml=u})},50)};return r},e}]),app.directive("pdTaxonomy",[function(){var e={};return e.restrict="EA",e.compile=function(e,t){if(e.length>0){var a=e[0].innerHTML.trim();if(!Pd.Utility.StringIsNullOrEmpty(a)&&a.indexOf("|")>-1){var r=a.split("|")[1],o=Pd.Search.GetTaxonomy();if("undefined"!=typeof o){var u=Pd.Search.GetTaxonomy()[t.pdTaxonomy][r];e.replaceWith(u)}}}},e}]);
app.directive("bindHtmlFiltered",["$q","$compile",function(e,r){return function(t,n,a){function c(e){var r=e;try{r=r.replace(/\[NB\]/g,"&nbsp;")}catch(t){P(t)}return r}function s(e){var r=e;try{var t,n,c,s='<span class="page-break">AB {0} {1} {3} / BO {0} {2} {3}</span>',i=Pd.Utility.StringIsNullOrEmpty(a.year)?"":a.year,u=Pd.Utility.StringIsNullOrEmpty(a.council)?"":a.council,o=/\[(PAGE.*?]?)\]/g;switch(u.toString().toUpperCase()){case"N":n="N",c="N";break;case"S":n="S",c="E";break;default:n=u.toString().toUpperCase(),c=u.toString().toUpperCase()}for(;t=o.exec(r);){var l=t.index,p=l+r.substring(l).indexOf("]"),g=r.substring(l+6,p);r=r.replace(r.substring(l,p+1),s.format(i,n,c,g))}}catch(b){P(b)}return r}function i(e){var r=e;try{r=r.replace(/<p>\[VS\]<\/p>+/g,"<br/>")}catch(t){P(t)}return r}function u(e){var r=e;try{r=r.replace(/\[VS\]/g,"<br/>")}catch(t){P(t)}return r}function o(e){var r=e;try{r=r.replace(/<p>/g,""),r=r.replace(/<\/p>/g,"<br/>")}catch(t){P(t)}return r}function l(e){var r=e;try{r=r.replace(/<br>/g,"<br/>"),r=r.replace(/<br \/>/g,"<br/>"),r=r.replace(/<br\/>\s*<br\/>/g,"#br1##br2#"),r=r.replace(/#br2#\s*<br\/>/g,"#br2##br2#"),r=r.replace(/#br2#\s*<br\/>/g,"#br2##br2#"),r=r.replace(/#br2#\s*<br\/>/g,"#br2##br2#"),r=r.replace(/#br1#/g,"<br/>"),r=r.replace(/#br2#/g,'<span class="br"><br/></span>')}catch(t){P(t)}return r}function p(e){var r=e;try{r=r.replace(/<b>/g,"<strong>"),r=r.replace(/<\/b>/g,"</strong>")}catch(t){P(t)}return r}function g(e){var r=e;try{r=r.replace(/<i>/g,"<em>"),r=r.replace(/<\/i>/g,"</em>")}catch(t){P(t)}return r}function b(e){var r=e;try{r=r.replace(/<pd_text>/g,""),r=r.replace(/<\/pd_text>/g,"")}catch(t){P(t)}return r}function f(e){var r=e;try{r=r.replace(/<text>/g,""),r=r.replace(/<\/text>/g,"")}catch(t){P(t)}return r}function d(e,r){var t="Schriftliche Antwort (Beilage) - RÃ©ponse Ã©crite (annexe)",n=Pd.Utility.PageUrlFormats.Affair.Detail.format(r),a="<a href={0} target='_self'>{1}</a>".format(n,t),c=e;try{c=c.replace(t,a)}catch(s){P(s)}return c}function m(e){var r=e;try{r=r.replace(/ \[GZ\]/g,""),r=r.replace(/\[GZ\] /g,""),r=r.replace(/\[GZ\]/g,"")}catch(t){P(t)}return r}function y(e){return"<p>"+e+"</p>"}function h(e){if(!(Pd.Utility.StringIsNullOrEmpty(a.sessionid)||Pd.Utility.StringIsNullOrEmpty(a.voteid)||Pd.Utility.StringIsNullOrEmpty(a.council)||Pd.Utility.StringIsNullOrEmpty(a.businessshortnumber))){var r=function(e){var r=parseInt(e);return!isNaN(r)},n=a.sessionid,c=a.voteid,s=c,i=a.council.toString().toUpperCase(),u=a.businessshortnumber,o=e,l="[NAM]";try{switch(r(c)||(s=c.split("-").pop()),i.toString().toUpperCase()){case"N":l=t.Res.brandingPolyVoteNrPdfLinkFormat.format(n.substr(0,2),c,u,s);break;case"S":l=t.Res.brandingPolyVoteSrPdfLinkFormat.format(n.substr(0,2),c,u,s);break;default:"[pd.abtextfilter.directive.updateNamToken] unsupported value for council: '{0}'".format(i)}o=e.replace(/\[NAM\]/g,l)}catch(p){P(p)}return o}return e}function S(e){var r,t=Pd.Utility.GetUrlParameter("SubjectId"),n=Pd.Utility.GetUrlParameter("TranscriptId"),a=Q.defer();return null!=t?(r=v(t),r.then(function(r){e=d(e,r.BusinessNumber),a.resolve(e)})):null!=n&&(r=N(n),r.then(function(r){e=d(e,r.BusinessNumber),a.resolve(e)})),a.promise}function v(r){var t=e.defer(),n=breeze.EntityQuery.from("Subject").where("ID","==",r).where("Language","==",Pd.Language.GetCurrentLanguage()).expand("SubjectsBusiness").select("SubjectsBusiness.BusinessNumber").top(1).using(manager);return n.execute().then(function(e){t.resolve(e.results[0].SubjectsBusiness[0])}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),t.reject()}),t.promise}function N(r){var t=e.defer(),n=breeze.EntityQuery.from("Transcript").where("ID","==",r).where("Language","==",Pd.Language.GetCurrentLanguage()).expand("Subjects.SubjectsBusiness").select("Subjects.SubjectsBusiness.BusinessNumber").top(1).using(manager);return n.execute().then(function(e){t.resolve(e.results[0].Subjects.SubjectsBusiness[0])}).fail(function(e){Pd.Shared.LogToConsoleIfDebug(e),t.reject()}),t.promise}function P(e){var r="";e.message&&(r+=e.message),e.stack&&(r+=" | stack: "+e.stack)}var U=function(e){e=m(e),e=c(e),e=i(e),e=u(e),e=o(e),e=l(e),e=p(e),e=g(e),e=b(e),e=f(e),e=y(e),e=s(e),e=h(e),n.html(r(e)(t)),setTimeout(function(){S(e).then(function(e){n.html(r(e)(t))})},100)},B=a.bindHtmlFiltered;t.$watch(B,function(e,r){e&&U(e)})}}]);
app.directive("bindBusinessHtmlFiltered",["$compile",function(t){return function(e,r,o){function s(t){Pd.Shared.LogToConsoleIfDebug("pd.businesstext.directive.removeTextToken",!0);var e=t;try{e=e.replace(/<text>/g,""),e=e.replace(/<\/text>/g,"")}catch(r){i(r)}return e}function n(t){Pd.Shared.LogToConsoleIfDebug("pd.businesstext.directive.stripTableFormatting",!0);var e=t;try{var r=PdCustomJs("<div>"+e+"</div>");PdCustomJs("table",r).removeAttr("border").removeAttr("width"),PdCustomJs("table td",r).removeAttr("colspan").removeAttr("rowspan").removeAttr("valign").removeAttr("width"),e=PdCustomJs(r).html()}catch(o){i(o)}return e}function i(t){var e="";t.message&&(e+=t.message),t.stack&&(e+=" | stack: "+t.stack),Pd.Shared.LogToConsoleIfDebug(e)}var a=function(o){o=s(o),o=n(o),r.html(t(o)(e))},d=o.bindBusinessHtmlFiltered;e.$watch(d,function(t,e){t&&a(t)})}}]);
app.directive("ngTouchClick",[function(){return function(n,o,c){o.bind("touchstart click",function(o){var i=c.ngTouchClick;n.$apply(function(){return n[i]?"function"!=typeof n[i]?void Pd.Shared.LogToConsoleIfDebug("ngTouchClick directive: Property "+i+" is not a function on the scope",!1):void n[i].call(null,o):void 0})})}}]);
app.directive("ngTouch",[function(){return function(n,t,o){t.bind("touchstart",function(t){t.preventDefault(),t.stopPropagation(),n.$apply(o.ngTouch)})}}]);
Pd.LiveSearch=function(e){"use strict";var a="#liveSearchInputBox",r=function(){if(!Pd.Shared.PageIsInEditMode()){if(Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.wireUpLiveSearchTextBoxInternal"),e("body").hasClass("search"))return void Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.wireUpLiveSearchTextBoxInternal :: on search page, exiting");Pd.LiveSearch.SetupSearchScopes(),e(a).parent().on("click","#CustomSearchButton",s),e(a).trigger("click"),e(":not(.processed)"+a).on("focus",function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.wireUpLiveSearchTextBoxInternal :: input box focused",!0),Pd.LiveSearch.ActivateLiveSearchBox(),e(a).attr("placeholder","")}),e(":not(.processed)"+a).bind("focus",h),e("div.splash .back").on("click",function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.wireUpLiveSearchTextBoxInternal :: back button clicked",!0),e(this).parents(".live-search-popup").length>1&&0==e(this).parents(".show-search").length||(Pd.LiveSearch.DeactivateLiveSearchBox(),e(a).attr("placeholder",Res.brandingSearchLiveBoxDefault),e(a).removeClass("is-filled"),e(a).parent().find(".search-box-input-reset").removeClass("is-open"),Pd.LiveSearch.RefreshSearchBoxEllipsis())}),e("div.splash .search-box-input-reset").on("click",function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.wireUpLiveSearchTextBoxInternal :: reset button clicked",!0),e(a).attr("placeholder",Res.brandingSearchLiveBoxDefault)}),e(".live-search-splash > a.back").unbind("click",h),e(a).attr("placeholder",Res.brandingSearchLiveBoxDefault),Pd.LiveSearch.HandleSearchPlaceholderText()}},o=function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.refreshSearchBoxEllipsisInternal",!0),e(a).css("overflow","visible"),setTimeout(function(){e(a).css("overflow","hidden")},150)},n=function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.wireUpLiveSearchTextBoxInternal :: activateLiveSearchBoxInternal",!0);var r=function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.wireUpLiveSearchTextBoxInternal :: showBoxNavigationLinks",!0),e("#sBoxNavLinks").addClass("show")};e(a).addClass("processed"),e(a).parent().addClass("opened"),Pd.LiveSearch.CreateSearchUnderlay(),r()},i=function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.wireUpLiveSearchTextBoxInternal :: deactivateLiveSearchBoxInternal",!0);var r=function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.wireUpLiveSearchTextBoxInternal :: hideBoxNavigationLinks",!0),e("#sBoxNavLinks").removeClass("show")};e(a).removeClass("processed"),e(a).parent().removeClass("opened"),Pd.LiveSearch.RemoveSearchUnderlay(),r()},d=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.setupSearchScopesInternal",!0);for(var r=function(e){switch(e){case 0:return"All";case 1:return"Affairs";case 2:return"OB";case 3:return"Councilors"}},o=e("#sBoxNavLinks > ul"),n=0;4>n;n++){var i=e("<li></li>");i.attr("id","Scope"+n),i.attr("data-url",Res["searchNavItem_"+r(n)+"_Url"]),0==n&&(i.addClass("checked"),Pd.Search.SetCurrentSearchScope(Res["searchNavItem_"+r(n)+"_Url"]));var d=e("<a></a>");d.addClass("ms-srchnav-link"),d.attr("href","javascript:{}");var t=e("<span></span>");t.text(Res["searchNavItem_"+r(n)+"_Title"]),d.append(t),i.append(d),o.append(i)}e("#sBoxNavLinks").on("click","li",function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.setupSearchScopesInternal :: item click",!0),e("#sBoxNavLinks").find("li").removeClass("checked"),e(this).addClass("checked");var r=e(this).attr("data-url");Pd.Utility.StringIsNullOrEmpty(r)?Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.setupSearchScopesInternal :: exception; unable to get current scope"):Pd.Search.SetCurrentSearchScope(r),e(a).attr("placeholder",Res["brandingSearchLiveBox"+e(this).attr("id")]),Pd.LiveSearch.RefreshSearchBoxEllipsis()})}},t=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.emptyLiveSearchPlaceholderInternal"),e(a).attr("placeholder",Res.brandingSearchLiveBoxDefault),e(a).val(""),Pd.LiveSearch.HandleSearchPlaceholderText())},c=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.triggerLiveSearchByKeyPressInternal"),e(a).keypress(function(e){13==e.which&&(Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.triggerLiveSearchByKeyPressInternal :: enter pressed",!0),Pd.LiveSearch.PerformSearch(),e.preventDefault())}))},h=function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.syncLivesearchWidthInternal",!0);var a,r=e("#pdc ul.ui-autocomplete"),o=function(){var a=e("#pdc div.splash .live-search-splash").width();r.css("max-width",a+"px")},n=function(){r.hide()};return e(window).resize(function(){clearTimeout(a),"block"==r.css("display")&&(a=setTimeout(n,150))}),o()},s=function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.performSearchInternal",!0);var r=function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.getCheckedScope",!0);var a=e("#sBoxNavLinks .checked");return a=0===a.length?{title:"default",url:window.location.pathname.substring(0,3)+"/suche"}:{title:"",url:a.attr("data-url")}},o=e(a).val(),n=r(),i=n.url;""!=o&&(i+="#k="+encodeURIComponent(o)),window.location.href=i},l=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.handleSearchPlaceholderTextInternal"),1!=e(a+".pl-nofix").length&&(1==e(a+":not(.pl-fixed)").length?void 0==e(a)[0].placeholder?(e(a).focus(function(){e(this).val()==e(this).attr("placeholder")&&e(this).val("")}),e(a).blur(function(){""==e(this).val()&&e(this).val(e(this).attr("placeholder"))}),e(a).blur(),e(a).addClass("pl-fixed")):e(a).addClass("pl-nofix"):e(a).blur()))},S=function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.resetLiveSearchInternal");var a=e("#pdc .container-fluid.live-search-popup");"block"==a.css("display")&&Pd.Shared.CloseLiveSearchPopup()},v=function(){Pd.Shared.PageIsInEditMode()||(Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.monitorScreenOrientationChangeInternal"),e(window).on("orientationchange",function(){Pd.LiveSearch.ResetLiveSearch()}))},u=function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.createSearchUnderlayInternal"),e(a).parent().parent().addClass("half-underlay"),e(document).bind("keydown",p)},L=function(){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.removeSearchUnderlayInternal"),e(a).parent().parent().removeClass("half-underlay"),e(document).unbind("keydown",p)},p=function(r){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.closeLiveSearchByKeypressHandlerInternal",!0);var o=function(){Pd.LiveSearch.DeactivateLiveSearchBox(),Pd.LiveSearch.EmptyLiveSearchPlaceholder(),e(a).removeClass("is-filled"),e(a).blur(),e(a).parent().find(".search-box-input-reset").removeClass("is-open")},n=r.keyCode||r.which;27==n&&(Pd.Shared.LogToConsoleIfDebug("closeLiveSearchByKeypressHandlerInternal"),o())},P=function(){if(!Pd.Shared.PageIsInEditMode()){Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.showLiveSearchOnBodyLoadInternal");try{if(!e("body").hasClass("welcome"))return void e(".live-search-splash.hidden").removeClass("hidden");if("True"==e("#isSessionMode").val()){var a=e("#liveStreamingController");1==a.length&&(a.is(":visible")?e(".live-search-splash.hidden").removeClass("hidden"):setTimeout(P,500))}else{var r=e("div.full-width-panel.splash img");if(1!=r.length)return;r[0].complete?e(".live-search-splash.hidden").removeClass("hidden"):setTimeout(P,500)}}catch(o){e(".live-search-splash.hidden").removeClass("hidden"),Pd.Shared.LogToConsoleIfDebug("Pd.LiveSearch.showLiveSearchOnBodyLoadInternal :: unhandled exception :: "+o.msg)}}};return{WireUpLiveSearchTextBox:r,EmptyLiveSearchPlaceholder:t,SyncLivesearchWidth:h,ResetLiveSearch:S,MonitorScreenOrientationChange:v,CreateSearchUnderlay:u,RemoveSearchUnderlay:L,ShowLiveSearchOnBodyLoad:P,ActivateLiveSearchBox:n,DeactivateLiveSearchBox:i,TriggerLiveSearchByKeyPress:c,PerformSearch:s,RefreshSearchBoxEllipsis:o,SetupSearchScopes:d,HandleSearchPlaceholderText:l}}(PdCustomJs),function(e){e(document).ready(function(){try{Pd.Shared.TryCatch(Pd.LiveSearch.WireUpLiveSearchTextBox),Pd.Shared.TryCatch(Pd.LiveSearch.EmptyLiveSearchPlaceholder),Pd.Shared.TryCatch(Pd.LiveSearch.MonitorScreenOrientationChange),Pd.Shared.TryCatch(Pd.LiveSearch.ShowLiveSearchOnBodyLoad),Pd.Shared.TryCatch(Pd.LiveSearch.TriggerLiveSearchByKeyPress)}catch(e){Pd.Shared.LogErrorToStatusDialog("Pd.LiveSearch :: Unhandled exception on initialisation :: "+e)}})}(PdCustomJs);
function CsvGenerator(t,e,r,n,a,o){this.dataArray=t,this.fileName=e,this.separator=r||";",this.addQuotes=!!n,this.outputAsXml=a||!1,this.objToIgnore=o||[],this.addQuotes&&(this.separator='"'+this.separator+'"'),this.getDownloadLink=function(){var t=this.separator,e=this.addQuotes,r=this.dataArray.map(function(r){var n=r.join(t);return n.length&&e?'"'+n+'"':n}),n="";if(this.outputAsXml){var a="text/xml;charset=utf-8;",o=[],i={root:[]},s=0;angular.forEach(this.dataArray,function(t,e){if(0==e)for(var r=0;r<t.length;r++)o.push(t[r].toString());else{for(var n={element:{}},a=0;a<t.length;a++){var l="@"+o[a],h=t[a]||"";n.element[l]=h}i.root[s]={element:n.element},s++}});var l=json2xml(i.root,"",this.objToIgnore);"Microsoft Internet Explorer"==navigator.appName&&(a="text/xml;charset=utf-8;",f=new Blob([l],{type:a}),navigator.msSaveBlob&&navigator.msSaveBlob(f,this.fileName)),f=new Blob([l],{type:a}),n=URL.createObjectURL(f)}else{var h="\ufeff",a="text/csv;charset=utf-8;",l=r.join("\n");l=h+l;var f=null;"Microsoft Internet Explorer"==navigator.appName&&(a="text/csv;charset=utf-8;",f=new Blob([l],{type:a}),navigator.msSaveBlob&&navigator.msSaveBlob(f,this.fileName)),f=new Blob([l],{type:a}),n=URL.createObjectURL(f)}return this.downloadLink=n},this.getLinkElement=function(t){var e=this.getDownloadLink();return this.linkElement=this.linkElement||angular.element("<a>"+(t||"")+"</a>",{href:e,download:this.fileName})},this.download=function(t){this.getLinkElement().css("display","none").appendTo("body"),this.getLinkElement()[0].click(),t&&this.getLinkElement().remove()}}function getInternetExplorerVersion(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,r=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=r.exec(e)&&(t=parseFloat(RegExp.$1))}return t}function checkVersion(){var t="You're not using Internet Explorer.",e=getInternetExplorerVersion();e>-1&&(t=e>=8?"You're using a recent copy of Internet Explorer.":"You should upgrade your copy of Internet Explorer."),alert(t)}function json2xml(t,e,r){var n=function(t,e,a){for(var o="",i=0;i<r.length;i++)if(e==r[i])return o;if(t instanceof Array)for(var s=0,i=t.length;i>s;s++)o+=a+n(t[s],e,a+"	")+"\n";else if("object"==typeof t){var l=!1;isNaN(e)&&(o+=a+"<"+e);for(var h in t)"@"==h.charAt(0)?o+=" "+h.substr(1)+'="'+t[h].toString()+'"':l=!0;if(isNaN(e)&&(o+=l?">":"/>"),l){for(var h in t)"#text"==h?o+=t[h]:"#cdata"==h?o+="<![CDATA["+t[h]+"]]>":"@"!=h.charAt(0)&&(o+=n(t[h],h,a+"	"));isNaN(e)&&(o+=("\n"==o.charAt(o.length-1)?a:"")+"</"+e+">")}}else isNaN(e)&&(o+=a+"<"+e+">"+t.toString()+"</"+e+">");return o},a="";for(var o in t)a+=n(t[o],o,"");return e?a.replace(/\t/g,e):a.replace(/\t|\n/g,"")}
